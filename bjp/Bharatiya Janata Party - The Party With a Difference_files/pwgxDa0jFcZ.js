if (self.CavalryLogger) { CavalryLogger.start_js(["wlsM8"]); }

__d("MessengerPlatformInterfaceType",[],(function a(b,c,d,e,f,g){f.exports={UNKNOWN_INTERFACE:0,MESSENGER_INTERFACE:1,FB_INTERFACE:2,FB_POST_INTERFACE:3}}),null);
__d("PagesPrivateReplyConstants",[],(function a(b,c,d,e,f,g){f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message",MESSAGING_DISABLED:"messaging_disabled"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}}}),null);
__d("BusinessActorUtils.brands",["UnicodeCJK"],(function a(b,c,d,e,f,g){"use strict";var h={getInitials:function i(j,k){var l=j.trim().charAt(0),m=k.trim().charAt(0),n=l+m;return!c("UnicodeCJK").hasIdeograph(n)?n.toUpperCase():m}};f.exports=h}),null);
__d("LiveVideoThreadedCommentsUtils",["gkx","ifRequired"],(function a(b,c,d,e,f,g){"use strict";var h={isEnabled:function i(){var j=c("ifRequired")("UFIThreadedFacecastCommentsContainer.react",function(j){return j});if(j==null)return false;return c("gkx")("AT4TKZAPOYq89q108eyw88BhDxW-pWx1OBYZ_mKVbqqKFOqK3idbgLsfxbpEi-MrxV6NBapEYtyanmeQ--y9ba-WPLOP-uARRnP24PS4867h7A")}};f.exports=h}),null);
__d("UFIAsyncWrapper",["React","UFIConfig"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=void 0;if(c("UFIConfig").reactFiberAsyncUFI)h=c("React").unstable_AsyncMode;else h=function(){__p&&__p();var i,j;i=babelHelpers.inherits(h,c("React").Component);j=i&&i.prototype;h.prototype.render=function(){"use strict";return this.props.children};function h(){"use strict";i.apply(this,arguments)}return h}();f.exports=h}),null);
__d("UFICommentVPVs",["MarauderLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();function i(l,m){c("MarauderLogger").log("comment_vpv",undefined,null,"comment",m);if(!h.has(l))h.set(l,new Set());h.get(l).add(m)}function j(l,m){if(h.has(l))return h.get(l).has(m);return false}var k={logVPV:i,hasLoggedVPV:j};f.exports=k}),null);
__d("UFIDispatcher",["ReactDispatcher_DEPRECATED","UFISharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ReactDispatcher_DEPRECATED"));i=h&&h.prototype;j.prototype.dispatch=function(k){i.dispatch.call(this,k);c("UFISharedDispatcher").dispatch(k)};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("UFIStopWatch",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="COUNTING",i="PAUSED";function j(){this.$UFIStopWatch1=i;this.$UFIStopWatch2=0;this.$UFIStopWatch3=0}j.prototype.start=function(){if(this.$UFIStopWatch1===h)return this;this.$UFIStopWatch1=h;this.$UFIStopWatch3=Date.now();return this};j.prototype.pause=function(){if(this.$UFIStopWatch1===i)return this;this.$UFIStopWatch1=i;this.$UFIStopWatch2+=Date.now()-this.$UFIStopWatch3;return this};j.prototype.reset=function(){this.$UFIStopWatch2=0;this.$UFIStopWatch3=0;if(this.$UFIStopWatch1==h)this.$UFIStopWatch3=Date.now();return this};j.prototype.state=function(){return this.$UFIStopWatch1};j.prototype.milliseconds=function(){var k=0;if(this.$UFIStopWatch1===h)k=Date.now()-this.$UFIStopWatch3;return this.$UFIStopWatch2+k};j.COUNTING=h;j.PAUSED=i;f.exports=j}),null);
__d("UFIAddCommentAction",["CommentPrivacyValue","UFIAddCommentActionType","requireWeak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={logPost:function j(k,l){return undefined}};c("requireWeak")("PrivateCommentsLogger",function(j){h=j});var i={cancel:function j(k){return{type:c("UFIAddCommentActionType").CANCEL,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier}},changeContent:function j(k,l,m){return{type:c("UFIAddCommentActionType").CHANGE_CONTENT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,text:l,replyFBID:m}},retrySubmit:function j(k,l){return{type:c("UFIAddCommentActionType").RETRY_SUBMIT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l}},submitEdit:function j(k,l,m,n){return{type:c("UFIAddCommentActionType").SUBMIT_EDIT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l,commentData:m,target:n}},submitNew:function j(k,l,m,n){h.logPost(l.privacy_value===c("CommentPrivacyValue").OWNER_OR_COMMENTER,k.ftentidentifier);return{type:c("UFIAddCommentActionType").SUBMIT_NEW,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l,target:m,replyCommentID:n,timestamp:Date.now()}},submitCommentPivot:function j(k,l,m,n){return{type:c("UFIAddCommentActionType").PIVOT_SEND_MESSAGE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,recipientID:n,comment:l,target:m,timestamp:Date.now()}}};f.exports=i}),null);
__d("UFINewCommentNotifier",["Arbiter","UFIFeedbackTargets","UFIUIEvents","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={onNewComment:function i(j,k,l,m,n,o){c("UFIUserActions").addComment(k.ftentidentifier,l.visibleValue,l.encodedValue,{source:k.source,ufiinstanceid:k.instanceid,target:m,replyid:n,rootid:k.rootid,attachedphoto:l.attachedPhoto,attachedvideo:l.attachedVideo,attachedfile:l.attachedFile,attachedsticker:l.attachedSticker,feedcontext:k.feedcontext,timestamp:o,feedbackReferrer:k.feedbackReferrer,isMarkdown:l.isMarkdown,fluentContentToken:k.fluentContentToken,isLiveVOD:k.isLiveVOD,islivestreaming:k.islivestreaming,photoTextTagID:k.photoTextTagID,isPhotoTag:k.isPhotoTag,photoFBID:k.photoFBID,photoTagX:k.photoTagX,photoTagY:k.photoTagY,privacyValue:l.privacy_value,section:l.section,attachedshareurl:l.attachedShareURL,isBroadcasterUFI:k.isBroadcasterUFI,enableVODCommentTimestamps:k.enableVODCommentTimestamps,trackingID:l.trackingID,delightRanges:l.delightRanges});c("UFIFeedbackTargets").getFeedbackTarget(k.ftentidentifier,function(p){if(j)c("Arbiter").inform(c("UFIUIEvents").Comment,{ft_id:p.entidentifier,target:m,form:j,isinverted:p.isranked||k.islivestreaming||k.isLivingRoom,isPhotoTag:k.isPhotoTag,photoTextTagID:k.photoTextTagID,photoTagX:k.photoTagX,photoTagY:k.photoTagY,commentString:l.visibleValue})})},onNewCommentPivot:function i(j,k,l,m,n,o){c("UFIUserActions").addMessage(k.ftentidentifier,l.visibleValue,l.encodedValue,{source:k.source,ufiinstanceid:k.instanceid,target:m,attachedphoto:l.attachedPhoto,attachedvideo:l.attachedVideo,attachedfile:l.attachedFile,attachedsticker:l.attachedSticker,timestamp:o,attachedshareurl:l.attachedShareURL},n);c("UFIFeedbackTargets").getFeedbackTarget(k.ftentidentifier,function(p){if(j)c("Arbiter").inform(c("UFIUIEvents").CommentPivot,{ft_id:p.entidentifier,target:m,form:j})})}};f.exports=h}),null);
__d("UFICommercialBreakAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){var l=k.getOption("VideoWithCommercialBreak","controller"),m=new(c("SubscriptionsHandler"))();if(c("gkx")("AT40M32z8lGGJCQ8BdpTKBKW7c04XyOQ5frn2-EF3H5yLFnMqCUjJXNKrWFmzea4OX3v4yubJZaoRWQAybsxXQJO"))return m;if(l&&l.getIsCommercialBreakOngoing())c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").toggleCommercialBreak(j,true));m.addSubscriptions(k.addListener("commercialBreak/hideUFI",function(){return c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").toggleCommercialBreak(j,true))}),k.addListener("commercialBreak/showUFI",function(){return c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").toggleCommercialBreak(j,false))}));return m}var i=new Map();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l))},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i["delete"](k)}}}),null);
__d("UFIDomRootAdapter",["csx","DOMQuery","FeedbackSourceType","Parent","UFIRootRegistry"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j,k){"use strict";this.$UFIDomRootAdapter2=null;this.$UFIDomRootAdapter3=null;this.$UFIDomRootAdapter5=null;this.$UFIDomRootAdapter4=j;this.$UFIDomRootAdapter1=k}i.prototype.getParentForm=function(){"use strict";if(!this.$UFIDomRootAdapter2){var j=c("Parent").byTag(this.$UFIDomRootAdapter4,"form");this.$UFIDomRootAdapter2=j instanceof HTMLElement?j:null}return this.$UFIDomRootAdapter2};i.prototype.getHeadRoot=function(){"use strict";if(!this.$UFIDomRootAdapter3){var j=c("UFIRootRegistry").isSnowliftNode(this.$UFIDomRootAdapter1.rootid),k=j&&this.$UFIDomRootAdapter1.source!==c("FeedbackSourceType").LIVE_VIDEO_STORIES?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",l=c("DOMQuery").scry(this.$UFIDomRootAdapter4,k);this.$UFIDomRootAdapter3=l&&l[0]||null}return this.$UFIDomRootAdapter3};i.prototype.getSnowliftActionRoot=function(){"use strict";if(!this.$UFIDomRootAdapter5){var j=c("DOMQuery").scry(this.$UFIDomRootAdapter4,"^.snowliftPayloadRoot ._29qf ._37uu");this.$UFIDomRootAdapter5=j&&j[0]||null}return this.$UFIDomRootAdapter5};f.exports=i}),null);
__d("UFIPlayLiveVODHighlightsAdapter",["SubscriptionsHandler","UFIInstanceAction","UFISharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j,k){if(k&&k.isPlayingVODHighlights())c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").playLiveVODHighlights(j,true));var l=new(c("SubscriptionsHandler"))();l.addSubscriptions(k.addListener("playLiveVODHighlights/hideUFI",function(){return c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").playLiveVODHighlights(j,true))}),k.addListener("playLiveVODHighlights/showUFI",function(){return c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").playLiveVODHighlights(j,false))}));return l}var i=new Map();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l))},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i["delete"](k)}}}),null);
__d("PrivateConversationsTreatment",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"none",FRIEND_CONVERSATIONS:"friend_conversations",SIDE_CONVERSATIONS:"side_conversations"})}),null);
__d("CommentPrivacyUtils",["PrivateConversationsTreatment"],(function a(b,c,d,e,f,g){"use strict";function h(j,k){return j.friendConversationsParams&&j.friendConversationsParams.viewerID===k?c("PrivateConversationsTreatment").FRIEND_CONVERSATIONS:c("PrivateConversationsTreatment").NONE}function i(j,k){return h(j,k)!==c("PrivateConversationsTreatment").NONE}f.exports={getTreatment:h,hasPrivateConversationsTreatment:i}}),null);
__d("onCommentIsVisible",["onViewportChanged"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=void 0;function l(n){return i(n)}function m(n){if(k!==n){k=n;j(n)}}return c("onViewportChanged")(m,l)}f.exports=h}),null);
__d("CommentPrelude",["BanzaiODS","CSS","ErrorUtils","Parent","clickRefAction","ex","ifRequired"],(function a(b,c,d,e,f,g){__p&&__p();function h(n,o){if(n==="ufi.react"||n==="ufi_mentions_input.react"||n==="ufi_controller"||n==="action_link_bling"||n==="action_link_timeline_bling")return;var p=new Error(c("ex")("Deprecated CommentPrelude action %s called from ref %s",o||"unknown",n||"unknown"));p.type="warn";c("ErrorUtils").reportError(p);c("BanzaiODS").bumpEntityKey("comment_prelude",n)}function i(n,o,p){h(p,"click");var q=c("Parent").byTag(n,"form");if(!q||!c("CSS").hasClass(q,"collapsible_comments"))return;c("clickRefAction")("ufi",n,null,"FORCE");return j(n,o,p)}function j(n,o,p){__p&&__p();h(p,"expand");var q=c("Parent").byTag(n,"form");if(!q||!c("CSS").hasClass(q,"collapsible_comments"))return;k(q,p);if(o!==false){var r=q.add_comment_text_text||q.add_comment_text,s=r.length;if(s)if(!c("Parent").byClass(r[s-1],"UFIReplyList"))r=r[s-1];else if(!c("Parent").byClass(r[0],"UFIReplyList"))r=r[0];else r=null;if(r){r.focus();c("ifRequired")("FbFeedCommentUFIScroller",function(t){return t.reveal(r)})}}return false}function k(n,o){h(o,"uncollapse");if(!n||!c("CSS").hasClass(n,"collapsible_comments"))return;var p=c("CSS").removeClass.bind(null,n,"collapsed_comments");c("ifRequired")("ScrollAwareDOM",function(q){return q.monitor(n,p)},function(){return p()})}function l(n){var o=n.getAttribute("data-comment-prelude-ref");h(o,"blingbox");var p=c("Parent").byTag(n,"form");if(!p||!c("CSS").hasClass(p,"collapsible_comments"))return;c("CSS").toggleClass(p,"collapsed_comments")}var m={click:i,expand:j,uncollapse:k,onBlingboxClick:l,logRef:h};f.exports=m}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1642166452539441",queryID:"2091702184396724"})}),null);
__d("LivePinnedCommentEventCreateSubscription",["BaseGraphQLSubscription","PinnedCommentEventCreateSubscriptionWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/pinned_comment_event_create_subscribe/video_id_"+j},_getQueryID:function i(){return c("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),video_id:j})}},_getSubscriptionCallName:function i(){return"pinned_comment_event_create_subscribe"}});f.exports=h}),null);
__d("FbFeedCommentUFIScroller",["DOMScroll","containsNode","ge","ifRequired"],(function a(b,c,d,e,f,g){__p&&__p();var h={reveal:function i(j){if(j){var k=c("ge")("content");if(k&&c("containsNode")(k,j))c("DOMScroll").ensureVisible(j,null,60,250);else c("ifRequired")("ScrollableArea",function(l){var m=l.getInstance(j);if(m)m.scrollIntoView(j)})}}};f.exports=h}),null);
__d("UFI2TypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:UFI2LoggerConfig",this.$UFI2TypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:UFI2LoggerConfig",this.$UFI2TypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:UFI2LoggerConfig",this.$UFI2TypedLogger1,{signal:true})};h.prototype.clear=function(){this.$UFI2TypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$UFI2TypedLogger1)};h.prototype.updateData=function(j){this.$UFI2TypedLogger1=babelHelpers["extends"]({},this.$UFI2TypedLogger1,j);return this};h.prototype.setClientSessionID=function(j){this.$UFI2TypedLogger1.client_session_id=j;return this};h.prototype.setClientTimestamp=function(j){this.$UFI2TypedLogger1.client_timestamp=j;return this};h.prototype.setEventName=function(j){this.$UFI2TypedLogger1.event_name=j;return this};h.prototype.setFeedbackTargetID=function(j){this.$UFI2TypedLogger1.feedback_target_id=j;return this};h.prototype.setQueryVariables=function(j){this.$UFI2TypedLogger1.query_variables=j;return this};h.prototype.setVC=function(j){this.$UFI2TypedLogger1.vc=j;return this};h.prototype.setVersion=function(j){this.$UFI2TypedLogger1.version=j;return this};var i={client_session_id:true,client_timestamp:true,event_name:true,feedback_target_id:true,query_variables:true,vc:true,version:true};f.exports=h}),null);
__d("UFI2Logger",["UFI2TypedLogger","performanceNowNoFallback","uuid"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("uuid")();h=babelHelpers.inherits(k,c("UFI2TypedLogger"));i=h&&h.prototype;function k(){i.constructor.call(this)}k.prototype.log=function(){this.setClientSessionID(j);i.log.call(this)};function l(n){var o=new k().setEventName(n.eventName).setVersion(n.version);if(c("performanceNowNoFallback"))o.setClientTimestamp(c("performanceNowNoFallback")());var p=n.feedbackTargetID,q=n.queryVariables;p&&o.setFeedbackTargetID(p);q&&o.setQueryVariables(q);o.log()}var m={log:l};f.exports=m}),null);
__d("ClipboardPhotoUploader",["ArbiterMixin","AsyncRequest","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this);this.uploadURIString=k;this.data=l}j.prototype.handlePaste=function(event){"use strict";__p&&__p();var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append("pasted_file",k[l]);var n=new(c("AsyncRequest"))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform("upload_success",o)}.bind(this)).setErrorHandler(function(o){this.inform("upload_error",o)}.bind(this)).setAbortHandler(function(o){this.inform("upload_error",o)}.bind(this));this.inform("upload_start");n.send();break}};j.getImages=function(event){"use strict";__p&&__p();if(!event.clipboardData)return[];var k=event.clipboardData.items;if(!k)return[];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==="string")return[];if(l.kind==="file"&&l.type.indexOf("image/")!==-1)m.push(l.getAsFile());if(l.kind==="blob")m.push(l.blob)}return m};f.exports=j}),null);
__d("CommunityConversationsUfiTreatment",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MENTION_BELOW_STORY:1,SEND_MESSAGE_DYNAMIC_UFI:2,SEND_MESSAGE_DYNAMIC_UFI_IMMEDIATE:3,WRITE_POST_DYNAMIC_UFI:4,WRITE_POST_DYNAMIC_UFI_IMMEDIATE:5,SEND_MESSAGE_BLING_BAR:6,SEND_MESSAGE_BLING_BAR_IMMEDIATE:7,WRITE_POST_BLING_BAR:8,WRITE_POST_BLING_BAR_IMMEDIATE:9,MENTION_IN_COMPOSER:10,MENTION_INLINE_WITH_COMPOSER:11,MENTION_ABOVE_COMPOSER:12,MENTION_BELOW_COMPOSER:13,MENTION_ABOVE_OR_BELOW_COMPOSER:14})}),null);
__d("EmojiInputButton.react",["fbt","Bootloader","FocusRelocator.react","Link.react","React","createCancelableFunction","gkx","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=null;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){__p&&__p();j.constructor.call(this,m);this.$EmojiInputButton4=function(event){event.preventDefault();event.stopPropagation();this.props.onClick&&this.props.onClick();this.setState({locked:false,visible:!this.state.locked?!this.state.visible:false})}.bind(this);this.$EmojiInputButton5=function(event){this.setState({locked:this.state.visible})}.bind(this);this.$EmojiInputButton7=function(n){if(!n)this.setState({visible:false,isVariationsShown:false})}.bind(this);this.$EmojiInputButton8=function(n){this.setState({isVariationsShown:n})}.bind(this);this.state={locked:false,visible:false,isVariationsShown:false}}l.prototype.componentWillUnmount=function(){this.$EmojiInputButton1&&this.$EmojiInputButton1.cancel();this.$EmojiInputButton1=null};l.prototype.render=function(){var m=h._("Insert an emoji"),n=this.state.visible?c("joinClasses")(this.props.iconActiveClassName,this.props.iconClassName):this.props.iconClassName;return c("React").createElement(c("FocusRelocator.react"),{from:this.$EmojiInputButton3,to:this.$EmojiInputButton2},c("React").createElement(c("Link.react"),{"aria-label":m,className:this.props.buttonClassName,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":!this.state.visible?m:null,onClick:this.$EmojiInputButton4,onDragStart:function o(p){return p.preventDefault()},onMouseDown:this.$EmojiInputButton5,linkRef:function(o){return this.$EmojiInputButton3=o}.bind(this),role:"button"},c("React").createElement("div",{className:n,ref:function(o){return this.$EmojiInputButton2=o}.bind(this)}),this.$EmojiInputButton6()))};l.prototype.$EmojiInputButton6=function(){__p&&__p();if(!k){if(this.state.visible){this.$EmojiInputButton1=c("createCancelableFunction")(function(){this.forceUpdate()}.bind(this));c("Bootloader").loadModules(["EmojiPicker.react"],function(m){k=m;if(this.$EmojiInputButton1){this.$EmojiInputButton1();this.$EmojiInputButton1=null}}.bind(this),"EmojiInputButton.react")}return null}if(!this.state.visible&&c("gkx")("AT7n1ujydgGH8J6XieDiEjwY86qVgQlnVP1yFGSfMdsbKT0cD0t9wchXmeDD5MEpBTjzDzH38PYUflrU2jl7QmvA"))return null;return c("React").createElement(k,{context:this.$EmojiInputButton3,isVariationsShown:this.state.isVariationsShown,onToggle:this.$EmojiInputButton7,onSelect:this.props.onSelect,onVariationsShown:this.$EmojiInputButton8,shown:this.state.visible})};f.exports=l}),null);
__d("MentionsInputUtils",[],(function a(b,c,d,e,f,g){var h={generateDataFromTextWithEntities:function i(j){var k=j.text,l=[];(j.ranges||[]).forEach(function(n){var o=n.entity;if(!o.external&&!n.videoTimestamp&&!n.sphericalViewport&&!/\D/.test(o.id))l.push({uid:o.id,text:k.substr(n.offset,n.length),offset:n.offset,length:n.length,weakreference:!!o.weakreference})});var m={value:k,mentions:l};return m}};f.exports=h}),null);
__d("SnowflakePermalinkUtils",["URI"],(function a(b,c,d,e,f,g){var h=/\/[^/]+\/(albums\/([^/]+)|posts\/([a-zA-Z]+[^/]+))\/([^/]+\/)?/,i=/\/[^/]+\/(albums|posts)\/([^/]+)\/([^/]+\/)?/,j={isPermalinkURI:function k(l){l=new(c("URI"))(l);return h.test(l.getPath())}};f.exports=j}),null);
__d("TextDelightEvents",["Arbiter","Bootloader","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={bootloadTextDelightsController:function i(j){var k=null;if(j==="post")k=c("gkx")("AT6P5i3zUrKqg58rovTtm_ocPv0pq7dyOQ_oBP2gA4WMXkd5UxvB9yIu8qI67dfmQa9vUtTSMYv5vQ8z9JzR5Bm6KpivaWQWbP4hbTcn7ewdhkJ9TJdJJMhLNyvXCiNM4fo");else if(j==="comment")k=c("gkx")("AT5qPkaW2GFYLeHaHR_Nhvz5rDijAkpt-L89pCEurn0rBRUB5bA2As6RxEsFyszkGC6Uo9lauozU_geV4jfdm6LXPZLSJ2lOrj1IrkKFe3NCjiuujJpkoc5W64VI7LBBPVQ");else return;if(k&&c("gkx")("AT5t3chjLhD4Yly_RknHqQrDX9qeShNVOdWYBVMYu8f7XWaucM9BFvPWvIobfxsLzwE2no59zU-ocPU59c6ull2HneSjKdKzBGKBTiCN6XJ3kg"))c("Bootloader").loadModules(["TextDelightController"],function(l){return l.init()},"TextDelightEvents")},emitScrapablePost:function i(j){c("Arbiter").inform("potential_delight_in_post",{text:j})},emitScrapableComment:function i(j){c("Arbiter").inform("potential_delight_in_comment",{text:j})}};f.exports=h}),null);
__d("UFIBusinessActorIcon.react",["cx","AppUserRoleConstants.brands","BusinessActorUtils.brands","React","getObjectValues","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=c("BusinessActorUtils.brands").getInitials(this.props.firstName,this.props.lastName),n=this.props.businessRole===c("AppUserRoleConstants.brands").ADMIN;return c("React").createElement("div",{className:c("joinClasses")(this.props.classNames,"_1rpl")},c("React").createElement("div",{className:c("joinClasses")(this.props.textClassNames,n?"_1rpm":null)},m))};function l(){i.apply(this,arguments)}l.propTypes={firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string,businessRole:k.oneOf(c("getObjectValues")(c("AppUserRoleConstants.brands")))};f.exports=l}),null);
__d("UFIActorIconContainer.react",["cx","Image.react","React","ShortProfiles","UFIBusinessActorIcon.react","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").createElement(c("XUISpinner.react"),{size:"large"});i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={actor:null},n}l.prototype.componentDidMount=function(){this.$UFIActorIconContainer1()};l.prototype.componentDidUpdate=function(m){if(this.props.actorID!==m.actorID)this.$UFIActorIconContainer1()};l.prototype.$UFIActorIconContainer1=function(){c("ShortProfiles").get(this.props.actorID,function(m){return this.setState({actor:m})}.bind(this))};l.prototype.render=function(){__p&&__p();var m=this.state.actor;if(!m)return this.props.tinyIcon?c("React").createElement(c("XUISpinner.react"),{size:"small"}):k;var n=void 0;if(this.props.tinyIcon)n=c("joinClasses")("img UFIActorImage _3tm9",this.props.className);else if(this.props.smallIcon)n=c("joinClasses")("img UFIActorImage _3qxe",this.props.className);else n=c("joinClasses")("img UFIActorImage _54ru",this.props.className);return m.isBusinessPersona?c("React").createElement(c("UFIBusinessActorIcon.react"),{classNames:n,firstName:m.firstName,lastName:m.lastName,textClassNames:"UFIBusinessActorIconText"}):c("React").createElement(c("Image.react"),{alt:m.name,className:n,src:m.thumbSrc})};f.exports=l}),null);
__d("AbstractCommentLiveTypingController",["destroyOnUnload","ex"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={START:"start",STOP:"stop"},i=10*1e3;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c("destroyOnUnload")(this.destroy.bind(this))}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null};j.prototype.bootloadPublisherModule=function(k){throw new Error(c("ex")("bootloadPublisherModule not implemented, should be overridden by subclass"))};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START)l.handleStartEvent();else if(o===h.STOP)l.handleStopEvent()}this.$AbstractCommentLiveTypingController1=l};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this))};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1)this.$AbstractCommentLiveTypingController1.handleStartEvent();else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9()};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1)this.$AbstractCommentLiveTypingController1.handleStopEvent();else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9()};f.exports=j}),null);
__d("UFIAddCommentLiveTypingController",["AbstractCommentLiveTypingController","Bootloader"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractCommentLiveTypingController"));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m)}j.prototype.bootloadPublisherModule=function(k){c("Bootloader").loadModules(["UFIAddCommentLiveTypingPublisher"],k,"UFIAddCommentLiveTypingController")};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this)};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this)};f.exports=j}),null);
__d("UFIAttachMediaSection.react",["cx","fbt","Bootloader","Focus","React","UFICommentFileInputAcceptValues","XUIError.react","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={bootloaded:false,hasUploadFailure:false},this.$UFIAttachMediaSection1=null,this.$UFIAttachMediaSection2=null,this.$UFIAttachMediaSection3=function(){this.setState({hasUploadFailure:false})}.bind(this),this.$UFIAttachMediaSection4=function(){this.setState({hasUploadFailure:false})}.bind(this),this.$UFIAttachMediaSection5=function(){this.setState({hasUploadFailure:true})}.bind(this),this.$UFIAttachMediaSection6=function(event){this.props.onClick&&this.props.onClick();if(this.state.bootloaded)return;c("Bootloader").loadModules(["UFIUploader"],function(s){this.$UFIAttachMediaSection1=new s(this.refs.inputContainer,this.refs.inputControl,this.refs.input,this.props.getPhotoUploadData,this.props.getFileUploadData,this.props.prepareForAttachedPhotoPreview,this.props.prepareForAttachedVideoPreview,this.props.prepareForAttachedFilePreview,this.props.onPhotoUploadComplete,this.props.onVideoEncodeUpdate,this.props.onVideoUploadUpdate,this.props.onVideoUploadComplete,this.props.onFileUploadComplete,this.props.setFileInput,this.props.viewerActorID,this.$UFIAttachMediaSection3,this.$UFIAttachMediaSection4,this.$UFIAttachMediaSection5)}.bind(this),"UFIAttachMediaSection.react");this.setState({bootloaded:true})}.bind(this),o}m.prototype.componentDidMount=function(){var n=this.refs,o=n.input,p=n.inputControl;if(o&&p)this.$UFIAttachMediaSection2=c("Focus").relocate(o,p)};m.prototype.componentWillUnmount=function(){this.$UFIAttachMediaSection1&&this.$UFIAttachMediaSection1.destroy();if(this.$UFIAttachMediaSection2){this.$UFIAttachMediaSection2.remove();this.$UFIAttachMediaSection2=null}};m.prototype.render=function(){var n=c("gkx")("AT7t_EqG8ZLxpo8JnmIsX9tz87lbcgP_f3ZGsMEN1fYhO-5QeMxvdM9TZ9dQThWIcZOOGIdb7m-FtmQxL2OcvA8h")&&this.props.allowFileAttachments,o=n?i._("Attach a File"):this.props.allowVideoAttachments?i._("Attach a Photo or Video"):i._("Attach a Photo"),p=n?i._("There was a problem attaching the file, please try again"):i._("There was a problem attaching the file, please try again"),q=this.state.hasUploadFailure,r=c("React").createElement("div",{className:"_r1a UFIPhotoAttachLinkWrapper _m"+(!!this.props.attachment?" _5t1p":""),"data-hover":q?null:"tooltip","data-tooltip-alignh":q?null:"center","data-tooltip-content":q?null:o,onClick:this.$UFIAttachMediaSection6,ref:"inputContainer",role:"presentation"},c("React").createElement("span",{className:n?"UFICommentFileIcon":"UFICommentPhotoIcon",ref:"inputControl"},c("React").createElement("input",{accept:n?c("UFICommentFileInputAcceptValues").files:this.props.allowVideoAttachments?c("UFICommentFileInputAcceptValues").both:c("UFICommentFileInputAcceptValues").photos,"aria-label":o,className:"_n",name:"file",ref:"input",title:o,type:"file",key:"0"})));return c("React").createElement(c("XUIError.react"),{xuiError:q?p:null,xuiErrorPosition:"above",xuiErrorAlignh:"center"},r)};m.propTypes={getPhotoUploadData:l.func.isRequired,getFileUploadData:l.func,prepareForAttachedPhotoPreview:l.func.isRequired,prepareForAttachedVideoPreview:l.func,prepareForAttachedFilePreview:l.func,onPhotoUploadComplete:l.func.isRequired,onVideoUploadComplete:l.func,onVideoUploadUpdate:l.func,onVideoEncodeUpdate:l.func,onFileUploadComplete:l.func,onClick:l.func,setFileInput:l.func.isRequired,targetId:l.string,allowVideoAttachments:l.bool,allowFileAttachments:l.bool,attachment:l.object,viewerActorID:l.string.isRequired};f.exports=m}),null);
__d("UFICommonInteractionEvents",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({UFI_OPTIMISTIC_COMMENT:"UFIOptimisticComment",UFI_PERSISTED_COMMENT:"UFIPersistedComment",UFI2_OPTIMISTIC_COMMENT:"UFI2OptimisticComment",UFI2_PERSISTED_COMMENT:"UFI2PersistedComment",UFI_TOP_LEVEL_COMMENTS_PAGINATION:"UFITopLevelCommentsPagination",UFI2_TOP_LEVEL_COMMENTS_PAGINATION:"UFI2TopLevelCommentsPagination",UFI2_REPLY_COMMENTS_PAGINATION:"UFI2ReplyCommentsPagination",UFI_SHARE_DIALOG_OPENS:"UFIShareDialogOpens",UFI2_SHARE_DIALOG_OPENS:"UFI2ShareDialogOpens",UFI_COMPOSER_INPUT_FOCUS:"UFIComposerInputFocus",UFI_STORY_REACTION:"UFIStoryReaction",UFI_COMMENT_REACTION:"UFICommentReaction",UFI2_STORY_REACTION:"UFI2StoryReaction",UFI2_COMMENT_REACTION:"UFI2CommentReaction"});f.exports=h}),null);
__d("UFICommonInteractionLogger",["EventProfiler","performanceAbsoluteNow","uuid"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(m){return"click"}var i=new Map();function j(){return c("uuid")()}function k(m,n){var o=c("performanceAbsoluteNow")(),p=n||j(),q=c("EventProfiler").markManualStart([m],h(m),o);i.set(p,{manualInstrumentation:q,startTimestamp:o});return p}function l(m){var n=i.get(m);if(n){var o=n.manualInstrumentation;i["delete"](m);o.markManualEnd()}}f.exports={startInteraction:k,endInteraction:l,makeTrackingID:j}}),null);
__d("UFIFixSuggestionsButton.react",["cx","fbt","Link.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Check for typos"),n=null;if(this.props.badged&&!this.props.active)n=c("React").createElement("div",{className:"_2mdh"});return c("React").createElement(c("Link.react"),{className:"_r1a","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":m,"aria-label":m,onClick:this.props.onClick,role:"button"},c("React").createElement("div",{className:"_2mdg"+(this.props.active?" _45-o":"")}),n)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("UFIGifButton.react",["cx","fbt","Arbiter","Bootloader","FocusRelocator.react","LayerTabIsolation","Link.react","MessengerPlatformInterfaceType","React","ReactLayeredComponentMixin_DEPRECATED","classWithMixins","mixin"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=278;j=babelHelpers.inherits(m,c("classWithMixins")(c("React").Component,c("mixin")(c("ReactLayeredComponentMixin_DEPRECATED"))));k=j&&j.prototype;function m(){__p&&__p();k.constructor.call(this);this.$UFIGifButton4=function(){this.setState({flyoutShown:false,query:""})}.bind(this);this.$UFIGifButton7=function(){this.$UFIGifButton3=this.state.flyoutShown}.bind(this);this.$UFIGifButton6=function(){__p&&__p();if(this.state.renderFlyout!==null){if(!this.$UFIGifButton3){this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow();this.setState({flyoutShown:true})}return}c("Bootloader").loadModules(["XUIContextualDialog.react","ChatContentSearchFlyout.react","ContextualLayerAutoFlip"],function(n,o,p){this.setState({flyoutShown:true,renderFlyout:function(){return{contextualDialog:c("React").createElement(n,{alignment:"right",behaviors:{flip:p,LayerTabIsolation:c("LayerTabIsolation")},className:"_5trk",contextRef:function(){return this.$UFIGifButton1}.bind(this),onBlur:this.$UFIGifButton4,onToggle:function(q){if(!q&&this.state.flyoutShown)this.$UFIGifButton4()}.bind(this),position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:l},c("React").createElement("div",null,c("React").createElement(o,{onEscKeyDown:this.$UFIGifButton4,onSelect:this.$UFIGifButton8,query:this.state.query,shown:this.state.flyoutShown,searchInterface:c("MessengerPlatformInterfaceType").FB_INTERFACE,queryDefault:this.props.defaultGifSelection})))}}.bind(this)});this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow()}.bind(this),"UFIGifButton.react")}.bind(this);this.$UFIGifButton8=function(n){this.props.onGifSelected(n);this.$UFIGifButton4()}.bind(this);this.$UFIGifButton5=function(n){this.$UFIGifButton1=n}.bind(this);this.state={renderFlyout:null,flyoutShown:false,query:""}}m.prototype.componentDidMount=function(){this.$UFIGifButton2=c("Arbiter").subscribe("page_transition",function(){return this.$UFIGifButton4()}.bind(this))};m.prototype.componentWillUnmount=function(){this.$UFIGifButton2&&this.$UFIGifButton2.unsubscribe()};m.prototype.render=function(){var n=i._("Post a GIF");return c("React").createElement(c("FocusRelocator.react"),{from:this.$UFIGifButton1,to:this.refs.icon},c("React").createElement(c("Link.react"),{"aria-label":n,className:"_r1a UFICommentGifButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":this.props.showTooltip?n:null,linkRef:this.$UFIGifButton5,onClick:this.$UFIGifButton6,onMouseDown:this.$UFIGifButton7,role:"button"},c("React").createElement("div",{ref:"icon",className:"UFICommentGifIcon"+(this.state.flyoutShown?" UFICommentGifIconActive":"")}),this.props.children))};m.prototype.renderLayers=function(){return!this.state.renderFlyout||!this.state.flyoutShown?{}:this.state.renderFlyout()};m.defaultProps={showTooltip:true};f.exports=m}),null);
__d("UFIMarkdownButton.react",["cx","fbt","Link.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=i._("Format text with Markdown");return c("React").createElement(c("Link.react"),{className:"_r1a _45-m","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":m,"aria-label":m,onClick:this.props.onClick},c("React").createElement("div",{tabIndex:0,className:"_45-n"+(this.props.active?" _45-o":"")}))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("UFIStickerButton.react",["cx","fbt","Arbiter","Bootloader","FocusRelocator.react","Link.react","React","StickerInterfaces","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"UFIStickerButton",_clickGuard:false,_updateListener:null,_linkRef:null,propTypes:{allowCustomStickers:j.bool,customStickerOwnerID:j.string,onStickerFlyoutShow:j.func,onStickerSelected:j.func.isRequired,onEmoticonSelected:j.func,showTooltip:j.bool,stickerInterface:j.oneOf(c("getObjectValues")(c("StickerInterfaces"))),tabIndex:j.number},getDefaultProps:function l(){return{allowCustomStickers:false,customStickerOwnerID:"",showTooltip:true,stickerInterface:c("StickerInterfaces").COMMENTS}},getInitialState:function l(){return{renderFlyout:null,flyoutShown:false}},componentDidMount:function l(){this._updateListener=c("Arbiter").subscribe("page_transition",function(){return this._hideFlyout()}.bind(this))},componentWillUnmount:function l(){this._updateListener&&this._updateListener.unsubscribe()},render:function l(){var m=i._("Post a sticker");return c("React").createElement(c("FocusRelocator.react"),{from:this._linkRef,to:this.refs.icon},c("React").createElement(c("Link.react"),{"aria-label":m,className:"_r1a UFICommentStickerButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":this.props.showTooltip?m:null,linkRef:this._setRef,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,role:"button",tabIndex:this.props.tabIndex},c("React").createElement("div",{ref:"icon",className:"UFICommentStickerIcon"+(this.state.flyoutShown?" UFICommentStickerIconActive":"")}),this.props.children,this.state.renderFlyout?this.state.renderFlyout():null))},_hideFlyout:function l(){this.setState({flyoutShown:false})},_prepareForClick:function l(){this._clickGuard=this.state.flyoutShown},_onLinkClicked:function l(m){__p&&__p();m.preventDefault();if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true})}return}c("Bootloader").loadModules(["ContextualLayerAutoFlip","LayerTabIsolation","StickersFlyout.react","XUIContextualDialog.react"],function(n,o,p,q){this.setState({flyoutShown:true,renderFlyout:function(){return c("React").createElement(q,{alignment:"right",behaviors:{ContextualLayerAutoFlip:n,LayerTabIsolation:o},className:"_5e-r",contextRef:function(){return this._linkRef}.bind(this),onBlur:this._hideFlyout,onToggle:function(r){if(!r&&this.state.flyoutShown)this._hideFlyout()}.bind(this),position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:this.props.allowCustomStickers?213:278},c("React").createElement("div",null,c("React").createElement(p,{allowCustomStickers:this.props.allowCustomStickers,customStickerOwnerID:this.props.customStickerOwnerID,onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow()}.bind(this),"UFIStickerButton.react")},_onStickerSelected:function l(m,event,n){this.props.onStickerSelected(m,event,n);this._hideFlyout()},_onEmoticonSelected:function l(m){this.props.onEmoticonSelected&&this.props.onEmoticonSelected(m);this._hideFlyout()},_setRef:function l(m){this._linkRef=m}});f.exports=k}),null);
__d("UFISupportButton.react",["cx","fbt","BootloadedComponent.react","Bootloader","JSResource","Link.react","React","Tahoe","VideoTipJarTypedLogger","gkx","ifRequired"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={showNux:false},this.$UFISupportButton4=function(){__p&&__p();if(this.state.showNux)this.$UFISupportButton3();var r=c("Tahoe").get();if(r==null)return;var s=r.getView();c("ifRequired")("TahoeVideoView",function(t){if(!(s instanceof t))return;s.toggleSupportOverlay();new(c("VideoTipJarTypedLogger"))().setEvent("support_glyph_clicked").setVideoID(r.getMediaController().getMediaID()).log()})}.bind(this),this.$UFISupportButton3=function(){c("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(r,s){r.markMessageSeenByUser(s.TIPJAR_SUPPORT_BUTTON_NUX)},"UFISupportButton.react");this.setState({showNux:false})}.bind(this),n}l.prototype.UNSAFE_componentWillMount=function(){if(c("gkx")("AT5SyDZ0MBHg7eLv1yfhtkyatZlUwQvVGOAaZsmb6Q5-RiBj1H44N8RAUbBbZ0RnFQMowjY6bUfCkSMB7xhNfkTrx3W4H82FEB0jZJ27tvxWag"))c("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(m,n){var o=m.hasUserSeenMessage(n.TIPJAR_SUPPORT_BUTTON_NUX);this.setState({showNux:!o})}.bind(this),"UFISupportButton.react")};l.prototype.$UFISupportButton2=function(){if(!this.state.showNux||!c("gkx")("AT5SyDZ0MBHg7eLv1yfhtkyatZlUwQvVGOAaZsmb6Q5-RiBj1H44N8RAUbBbZ0RnFQMowjY6bUfCkSMB7xhNfkTrx3W4H82FEB0jZJ27tvxWag"))return null;return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("XUIAmbientNUX.react").__setRef("UFISupportButton.react"),bootloadPlaceholder:c("React").createElement("div",null),contextRef:function(){return this.$UFISupportButton1}.bind(this),shown:this.state.showNux,position:"above",alignment:"right",onCloseButtonClick:this.$UFISupportButton3},i._("New! Support your favorite streamers"))};l.prototype.render=function(){var m=i._("Support {target_name}",[i._param("target_name",this.props.targetName)]);return c("React").createElement(c("Link.react"),{className:"_r1a _1sj_","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":m,"aria-label":m,onClick:this.$UFISupportButton4},c("React").createElement("div",{className:"_1l4x",ref:function(n){return this.$UFISupportButton1=n}.bind(this)}),this.$UFISupportButton2())};f.exports=l}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/nux/seen/save/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}})}),null);
__d("XUFICommentGIFPreprocessController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("XUFICommentMarkdownPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/markdown_preview/",{comment_body:{type:"String"}})}),null);
__d("textProbablyWritingMarkdown",["CurrentUser"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1e3;function i(j){__p&&__p();if(j.length>h)j=j.slice(0,h);var k=j.match(/^[*+-] /gm);if(k&&k.length>1)return true;var l=j.match(/`/);if(l)return true;var m=j.match(/\$([^ \t\n\$]([^\$]*[^ \t\n\$])?)\$/);if(m)return true;var n=j.match(/__([\s\S]+?)__(?!_)|\*\*([\s\S]+?)\*\*(?!\*)/);if(n)return true;var o=j.match(/(^\s{0,3}#{2,6}[^#])|(^\s*[-=]{5,}\s*$)/m);if(o)return true;var p=j.match(/\]\(|\]\[/);if(p)return true;if(!c("CurrentUser").isEmployee())return false;var q=j.match(/\b[sS]\d{5,6}\b/);if(q)return true;var r=j.match(/\b[tT]\d{7,8}\b/);if(r)return true;var s=j.match(/\b[dD]\d{6,8}\b/);if(s)return true;var t=j.match(/\b[pP]\d{7,9}\b/);if(t)return true;return false}f.exports=i}),null);
__d("UFIAddComment.react",["cx","fbt","invariant","AccessibilityConfig","ActorURI","Arbiter","AsyncRequest","Badge.react","BootloadedComponent.react","Bootloader","ClipboardPhotoUploader","CommentPrivacyUtils","CommentPrivacyValue","CommunityConversationsUfiTreatment","EmojiInputButton.react","Event","GroupedInputButton","JSResource","Keys","Link.react","LitestandStoryInsertionStatus","MentionsInputUtils","MercuryIDs","PrivateCommentsConfig","PrivateConversationsTreatment","QE2Logger","React","ReactDOM","Run","SearchableEntry","ShortProfiles","SnowflakePermalinkUtils","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","TextDelightEvents","TextWithEntities.react","TrackingNodes","UFIActorIconContainer.react","UFIAddCommentAction","UFIAddCommentLiveTypingController","UFIAttachMediaSection.react","UFIBotsButton","UFICommentMessengerPromptConfig","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComposerIsTypingStore","UFIConfig","UFIFixSuggestionsButton.react","UFIGifButton.react","UFIGroupedInputTabs","UFIImageBlock.react","UFIMarkdownButton.react","UFINativeSupportButtonGated","UFIPlayLiveVODHighlightsStore","UFISharedDispatcher","UFIStickerButton.react","UFISupportButton.react","URI","VideoPermalinkURI","XBasicFBNuxDismissController","XBasicFBNuxGenShouldShowController","XBasicFBNuxViewController","XFeedNUXSaveSeenStateController","XUFICommentGIFPreprocessController","XUFICommentMarkdownPreviewController","XUIText.react","getActiveElement","joinClasses","requireWeak","textProbablyWritingMarkdown","throttle"],(function aa(a,b,ba,ca,da,ea,fa,c,d){"use strict";__p&&__p();var e,f,g=b("GroupedInputButton").module,h=b("UFIBotsButton").module,i=b("UFIGroupedInputTabs").InputTitleEnum,j=b("UFIGroupedInputTabs").setLastUsedTab,k=b("UFINativeSupportButtonGated").module,l={startFunnel:function v(w){return undefined},logViewerInteracted:function v(w){return undefined},logToggle:function v(w,x){return undefined}};b("requireWeak")("PrivateCommentsLogger",function(v){l=v});var m=null,n=a.URL||a.webkitURL||{},ga=b("React").PropTypes,ha=c._("Write a comment..."),ia=c._("Write a reply..."),ja=c._("Write an answer..."),o="fcg fss UFICommentTip",ka=19,la="/ajax/ufi/upload/",ma="/ajax/ufi/sticker_preview/",na=1e3,oa="comment_content_change",pa="www_messenger_comment_pivot_universe",p=Object.freeze({UPLOAD:"uploading",ENCODE:"encoding"}),q=5572,r=false,s=false,t=false;e=babelHelpers.inherits(u,b("React").Component);f=e&&e.prototype;function u(v){__p&&__p();f.constructor.call(this,v);this.$UFIAddComment14=function(event){if(this.props.isEditing&&b("Event").getKeyCode(event.nativeEvent)===b("Keys").ESC)this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs));if(this.$UFIAddComment1&&!this.$UFIAddComment2){b("Run").onBeforeUnload(this.$UFIAddComment15);this.$UFIAddComment2=true}var A=b("getActiveElement")();if(b("Event").getKeyCode(event.nativeEvent)===b("Keys").ESC)A.blur()}.bind(this);this.$UFIAddComment16=function(A){__p&&__p();var B,C=this;b("UFISharedDispatcher").dispatch(b("UFIAddCommentAction").changeContent(this.props.contextArgs,A,this.props.replyCommentID));b("Arbiter").inform(oa,{fbid:this.props.replyCommentID,text:A,instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier});b("TextDelightEvents").emitScrapableComment(A);if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)this.$UFIAddComment17(A);if(this.props.allowCommentFixSuggestions)this.$UFIAddComment18(A);if(this.props.isTargetPage)(function(){var E=C.parseTextForMentions(A);if(E&&E.length==1)b("ShortProfiles").get(E[0].uid,function(F){if(F.type=="friend"){b("QE2Logger").logExposureForUser(pa);if(b("UFICommentMessengerPromptConfig").show_messenger_prompt)this.$UFIAddComment19(E[0])}}.bind(C));else C.$UFIAddComment20()})();else if(this.props.contextArgs.showGroupChatPivot&&b("UFICommentMessengerPromptConfig").show_groups_prompt){var D=this.parseTextForMentions(A);if(D&&D.length>=1)this.$UFIAddComment21(D.map(function(E){return E.uid}));else this.$UFIAddComment22()}if(this.state.groupedInputNUXShown)this.$UFIAddComment23()}.bind(this);this.$UFIAddComment17=function(A){var B=b("XUFICommentMarkdownPreviewController").getURIBuilder().setString("comment_body",A).getURI();new(b("AsyncRequest"))(B).setHandler(this.$UFIAddComment24).send()}.bind(this);this.$UFIAddComment24=function(A){if(!A)return;this.setState({commentMarkdownPreviewContent:A.payload?A.payload.markup:null})}.bind(this);this.$UFIAddComment15=function(){__p&&__p();var A=a.PageTransitions;if(A){var B=b("URI").getNextURI(),C=A.getMostRecentURI();if(Object.prototype.hasOwnProperty.call(B.getQueryData(),"theater")||Object.prototype.hasOwnProperty.call(C.getQueryData(),"theater")||Object.prototype.hasOwnProperty.call(B.getQueryData(),"sdialog")||b("SnowflakePermalinkUtils").isPermalinkURI(B)||b("SnowflakePermalinkUtils").isPermalinkURI(C)||b("VideoPermalinkURI").isValid(B)&&B.getQueryData().ref==="channel"||b("VideoPermalinkURI").isValid(C)&&C.getQueryData().ref==="channel")return;var D=a.DialogNavigationStack;if(D&&D.isActiveURI(B))return}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return c._("You haven't finished your comment yet. Do you want to leave without finishing?")}.bind(this);this.$UFIAddComment26=function(){this.setState({markdownNUXVisible:false,gifsInCommentsNUXVisible:false,groupedInputNUXShown:false,privateCommentNUXVisible:false});setTimeout(function(){if(this.$UFIAddComment1)this.setState({isFocused:false})}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false})}.bind(this);this.$UFIAddComment27=function(event){var A=new(b("ClipboardPhotoUploader"))(la,this.$UFIAddComment28());this.$UFIAddComment29();this.$UFIAddComment3=[A.subscribe("upload_start",this.$UFIAddComment30),A.subscribe("upload_error",this.$UFIAddComment31),A.subscribe("upload_success",function(B,C){this.$UFIAddComment32(C)}.bind(this))];A.handlePaste(event)}.bind(this);this.$UFIAddComment33=function(A,event){__p&&__p();var B,C=this,D;this.setState({hasSubmitted:true});var E=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedFile||this.state.attachedSticker||this.state.attachedGIF,F=this.props.isEditing||E;if(this.state.messengerTarget&&this.state.messengerTarget.uid){var B=function(){var H=C.state.messengerTarget.uid;C.context.dispatch(b("UFIAddCommentAction").submitCommentPivot(C.props.contextArgs,A,event.target,H));b("Bootloader").loadModules(["FantaTabActions"],function(I){I.openTab(b("MercuryIDs").getThreadIDFromUserID(H))},"UFIAddComment.react");C.setState({messengerTarget:null});return{v:true}}();if(typeof B==="object")return B.v}if(this.props.contextArgs.showGroupChatPivot){if(this.state.sendAsChat){var D=function(){__p&&__p();var H=C.state.chatPivotTargets,I=C.props,J=I.contextArgs,K=I.groupID,L=I.viewerActorID;b("Bootloader").loadModules(["FantaTabActions","MercurySourceType","XMessengerAssociatedObjectGroupCreateController"],function(M,N,O){__p&&__p();if(!K||!H)return;var P=H.indexOf(L)===-1?[L].concat(H):H;if(!A.encodedValue)return;var Q=O.getURIBuilder().setString("entry_point","fbgroup_comment_pivot").setString("source",N.WEB).setString("body",A.encodedValue).setFBID("group_post_id",J.ftentidentifier).setFBID("attachment_id",J.ftentidentifier).setFBID("associated_object_id",K).setFBIDSet("participant_fbids",P).getURI();new(b("AsyncRequest"))(Q).setHandler(function(R){var S=R.payload;if(S)M.openTab(b("MercuryIDs").getThreadIDFromThreadFBID(S))}).send()},"UFIAddComment.react");C.context.dispatch(b("UFIAddCommentAction").cancel(C.props.contextArgs));C.setState({sendAsChat:false,chatPivotTargets:null});return{v:true}}();if(typeof D==="object")return D.v}this.setState({sendAsChat:false,chatPivotTargets:null})}if(this.state.isLoadingPhoto||this.$UFIAddComment34()||this.state.isLoadingFile)return false;else if((!A.encodedValue||!A.encodedValue.trim())&&!F)return false;A.encodedValue=A.encodedValue?A.encodedValue.trim():"";if(this.state.commentMarkdownEnabled){A.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null})}else if(this.props.allowCommentMarkdown&&!A.isMarkdown)A.isMarkdown=b("textProbablyWritingMarkdown")(A.encodedValue);if(this.state.commentPrivacy)A.privacy_value=this.state.commentPrivacy;if(E){A.attachedPhoto=this.state.attachedPhoto;A.attachedVideo=this.state.attachedVideo;A.attachedFile=this.state.attachedFile;A.attachedSticker=this.state.attachedSticker;if(this.state.attachedGIF)if(this.state.attachedGIF.source)A.attachedShareURL=this.state.attachedGIF.source.url;else if(this.state.attachedGIF.originalImageUrl)A.attachedShareURL=this.state.attachedGIF.originalImageUrl;this.setState({isLoadingPhoto:false,isLoadingFile:false,attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedSticker:null,attachedGIF:null})}else{A.attachedPhoto=null;A.attachedVideo=null;A.attachedFile=null;A.attachedSticker=null;A.attachedGIF=null;A.attachedShareURL=null}if(this.props.isEditing)this.context.dispatch(b("UFIAddCommentAction").submitEdit(this.props.contextArgs,this.props.editingComment,A,event.target));else{var G=b("UFICommonInteractionLogger").makeTrackingID();b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT,G+b("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT);b("UFICommonInteractionLogger").startInteraction(b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT,G+b("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT);A.trackingID=G;this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,A,event.target,this.props.replyCommentID))}return true}.bind(this);this.focus=function(){__p&&__p();var A={isCommenting:true,isFocused:true,hasSubmitted:false},B=this.props.contextArgs.loggedOutLinkConfig;if(B&&B.showAddComment)b("Bootloader").loadModules(["AsyncDialog"],function(F){F.bootstrap(B.addCommentAjaxifyURI,null,"dialog")},"UFIAddComment.react");if(this.refs.groupedInputButton)b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(F,G){if(!F.hasUserSeenMessage(G.MERGE_INPUT_COMPOSER_NUX)){this.setState({groupedInputNUXShown:true});F.markMessageSeenByUser(G.MERGE_INPUT_COMPOSER_NUX)}}.bind(this),"UFIAddComment.react");if(this.props.allowGifAttachments&&b("UFIConfig").shouldShowGIFsInCommentsNux)if(!r){r=true;var C=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","gif_comments").setBool("seen",true).getURI();new(b("AsyncRequest"))(C).send();A.gifsInCommentsNUXVisible=true}if(this.props.allowCommentMarkdown&&b("UFIConfig").shouldShowMarkdownCommentNUX&&!b("UFIConfig").shouldShowGIFsInCommentsNux)if(!s){s=true;var D=b("XFeedNUXSaveSeenStateController").getURIBuilder().setString("key","markdown_comments").setBool("seen",true).getURI();new(b("AsyncRequest"))(D).send();A.markdownNUXVisible=true}if(this.props.allowTogglePrivateComments&&!(this.state.gifsInCommentsNUXVisible||A.gifsInCommentsNUXVisible)&&!(this.state.markdownNUXVisible||A.markdownNUXVisible))if(!t){t=true;var E=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",q).getURI();new(b("AsyncRequest"))().setURI(E).setMethod("GET").setReadOnly(true).setHandler(function(F){var G=F.getPayload();if(G&&G.should_show_nux){var H=b("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",q).getURI();new(b("AsyncRequest"))().setURI(H).send();this.setState({privateCommentNUXVisible:true})}}.bind(this)).send()}this.setState(A);this.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();b("Arbiter").inform("UFIAddComment/focus",{instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier,isTopLevelComposer:this.props.isTopLevelComposer})}.bind(this);this.$UFIAddComment44=function(A,B){this.setState({fileInput:A,fileUploader:B})}.bind(this);this.$UFIAddComment45=function(){this.setState({messengerTarget:null})}.bind(this);this.$UFIAddComment46=function(A){m=A;this.setState({commentPrivacy:A})}.bind(this);this.$UFIAddComment47=function(A){return this.setState({sendAsChat:A})}.bind(this);this.$UFIAddComment48=function(A){j(i.EMOJI);this.refs.mentionsinput.insertEmoji(A)}.bind(this);this.$UFIAddComment49=function(A){j(i.STICKER);this.$UFIAddComment54(A);this.$UFIAddComment53(false)}.bind(this);this.$UFIAddComment52=function(A,event){j(i.STICKER);this.onStickerSelected(A,event);this.$UFIAddComment53(false)}.bind(this);this.$UFIAddComment50=function(A){j(i.GIF);this.onGifSelected(A);this.$UFIAddComment53(false)}.bind(this);this.$UFIAddComment53=function(A){if(A!==this.state.flyoutShown)this.setState({flyoutShown:A})}.bind(this);this.$UFIAddComment55=function(){if(this.state.customStickerNUXShown)this.$UFIAddComment37()}.bind(this);this.$UFIAddComment51=function(){if(!this.state.flyoutShown)this.markViewerHasInteracted();if(this.state.groupedInputNUXShown)this.$UFIAddComment23();if(this.state.customStickerNUXShown)this.$UFIAddComment37()}.bind(this);this.$UFIAddComment28=function(){var A=this.props.viewerActorID,B={profile_id:A,target_id:this.props.targetID,source:ka};B[b("ActorURI").PARAMETER_ACTOR]=A;return B}.bind(this);this.$UFIAddComment32=function(A){if(!this.state.isLoadingPhoto)return;var B=A.getPayload();if(B&&B.fbid)this.setState({attachedPhoto:B,isLoadingPhoto:false});else this.$UFIAddComment31(null)}.bind(this);this.$UFIAddComment56=function(){var A=this.props.viewerActorID,B={profile_id:A,target_id:this.props.targetID};B[b("ActorURI").PARAMETER_ACTOR]=A;return B}.bind(this);this.$UFIAddComment59=function(A){if(!this.state.isLoadingFile)return;var B=A.getPayload();if(B&&B.fbid)this.setState({attachedFile:B,isLoadingFile:false});else this.$UFIAddComment31(null)}.bind(this);this.$UFIAddComment61=function(A,B){if(!this.state.attachedVideo||this.state.videoStatus!==p.ENCODE)return;if(B.obj.progress<this.state.videoProgress)return;B.obj.fbid=B.obj.videoID;this.setState({attachedVideo:B.obj,videoProgress:B.obj.progress,videoStatus:p.ENCODE});if(this.$UFIAddComment70(B.obj.stage))this.$UFIAddComment71()}.bind(this);this.$UFIAddComment62=function(A){this.setState({videoProgress:A})}.bind(this);this.$UFIAddComment60=function(A){if(this.state.videoStatus!==p.UPLOAD)return;if(A&&A.video_id)this.setState({videoProgress:0,attachedVideo:A,videoStatus:p.ENCODE})}.bind(this);this.$UFIAddComment31=function(event){b("Arbiter").inform("video_upload_cancel",{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,attachedFile:null,attachedGIF:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0,isVideoFileTranscodedGIF:false})}.bind(this);this.$UFIAddComment30=function(){this.setState({attachedPhoto:null,isLoadingPhoto:true})}.bind(this);this.$UFIAddComment58=function(){this.setState({attachedFile:null,isLoadingFile:true})}.bind(this);this.$UFIAddComment57=function(){var A=void 0,B=this.state.fileInput?this.state.fileInput.input:null,C=B?B.files[0]:null;if(C&&n.createObjectURL)A=n.createObjectURL(C);this.setState({attachedVideo:null,videoStatus:p.UPLOAD,videoFileURL:A,videoProgress:0,isVideoFileTranscodedGIF:Boolean(C&&C.type==="image/gif")})}.bind(this);this.$UFIAddComment72=function(A){__p&&__p();if(!this.state.isLoadingPhoto)return;var B=A.getPayload();if(B&&B.fbid)this.setState({attachedSticker:B,isLoadingPhoto:false});else{b("Bootloader").loadModules(["Dialog"],function(C){var D=c._("Sticker Failed"),E=c._("There was a problem attaching the sticker.");new C().setTitle(D).setBody(E).setButtons(C.OK).show()},"UFIAddComment.react");this.$UFIAddComment63(null)}}.bind(this);this.$UFIAddComment63=function(event){this.setState({attachedSticker:null,isLoadingPhoto:false})}.bind(this);this.onStickerSelected=function(A,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.$UFIAddComment73(A);return}this.sendSticker(A,event)}.bind(this);this.$UFIAddComment54=function(A){__p&&__p();b("Bootloader").loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(B,C,D,E){__p&&__p();var F=B.symbols[A];if(!F)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(F);return}if(!this.$UFIAddComment10)this.$UFIAddComment10=new E(b("ReactDOM").findDOMNode(this.refs.mentionsinput.refs.textarea));var G=this.refs.mentionsinput.refs.getTextFieldDOM(),H=D.getInstance(G),I=H.getValue();this.$UFIAddComment10||d(0);var J=C.insertEmoticon(F,I,this.$UFIAddComment10.getPos());H.setValue(J.result);this.$UFIAddComment10||d(0);this.$UFIAddComment10.setPos(J.start,J.end)}.bind(this),"UFIAddComment.react")}.bind(this);this.$UFIAddComment37=function(){this.setState({customStickerNUXShown:false})}.bind(this);this.$UFIAddComment40=function(){this.setState({markdownNUXVisible:false})}.bind(this);this.$UFIAddComment23=function(){this.setState({groupedInputNUXShown:false})}.bind(this);this.$UFIAddComment43=function(){var A=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",q).getURI();new(b("AsyncRequest"))().setURI(A).send();this.setState({privateCommentNUXVisible:false})}.bind(this);this.onGifSelected=function(A){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this.setState({attachedGIF:A});this.preprocessGIF(A);return}this.sendGIF(A)}.bind(this);this.$UFIAddComment1=false;var w=this.props.editingComment,x=w.attachment,y=x?x.type:null,z=y==="photo"?x:null;this.state={attachedPhoto:w.photo_comment||z,attachedVideo:w.video_comment||null,attachedFile:w.file_comment||null,attachedSticker:y=="sticker"?x:null,attachedGIF:y=="gif"?x:null,commentMarkdownPreviewContent:w.body?w.body.markup||null:null,commentMarkdownEnabled:w.body?w.body.markdown_enabled||false:false,commentPrivacy:w.privacy_value||this.props.replyCommentPrivacy||b("CommentPrivacyValue").DEFAULT_PRIVACY,customStickerNUXShown:false,commentSuggestionsShowing:false,videoStatus:null,videoFileURL:null,videoProgress:0,isVideoFileTranscodedGIF:false,fileInput:null,fileUploader:null,flyoutShown:false,isCommenting:false,isLoadingPhoto:false,isLoadingFile:false,isFocused:Boolean(this.props.isEditing),gifsInCommentsNUXVisible:false,groupedInputNUXShown:false,markdownNUXVisible:false,privateCommentNUXVisible:false,hasSubmitted:false,hasPotentialSuggestions:false,inCommercialBreak:false,messengerTarget:null,isPlayingLiveVODHighlights:false,chatPivotTargets:null,sendAsChat:false};if(this.$UFIAddComment12()){m=m===null?this.$UFIAddComment13():m;this.state.commentPrivacy=m}}u.prototype.$UFIAddComment25=function(v){__p&&__p();if(!this.$UFIAddComment11||this.$UFIAddComment11.length===v.length)return false;var w=void 0,x=void 0;if(this.$UFIAddComment11.length>v.length){w=this.$UFIAddComment11;x=v}else{w=v;x=this.$UFIAddComment11}var y=null,z=0;while(y===null&&z<x.length){if(x[z]!==w[z])y=w[z];z++}if(y===null)y=w[w.length-1];else{var A=w[z];if(!/[a-zA-Z\-\']/.test(A))return false}return!/[a-zA-Z\-\']/.test(y)};u.prototype.$UFIAddComment18=function(v){__p&&__p();if(!this.$UFIAddComment25(v)){this.$UFIAddComment11=v;return}this.$UFIAddComment11=v;var w=v.match(/[a-zA-z\-\']+/g);if(!w)return;var x=b("AccessibilityConfig").svTypicalDyslexiaMisspellings,y=false,z=v.toUpperCase()===v;for(var A=w,B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D;if(z||E.toUpperCase()!==E){var F=E.toLowerCase();if(x.includes(F))y=true}}if(this.state.hasPotentialSuggestions===y)return;this.setState({hasPotentialSuggestions:y})};u.prototype.$UFIAddComment19=function(v){this.setState({messengerTarget:v})};u.prototype.$UFIAddComment20=function(){this.setState({messengerTarget:null})};u.prototype.$UFIAddComment21=function(v){this.setState({chatPivotTargets:v})};u.prototype.$UFIAddComment22=function(){this.setState({chatPivotTargets:null})};u.prototype.$UFIAddComment34=function(){return this.state.videoStatus===p.UPLOAD||this.state.videoStatus===p.ENCODE&&this.state.videoProgress!==100};u.prototype.$UFIAddComment29=function(){if(this.$UFIAddComment3)this.$UFIAddComment3.forEach(function(v){v.unsubscribe()})};u.prototype.UNSAFE_componentWillMount=function(){__p&&__p();this.$UFIAddComment2=false;this.$UFIAddComment6=b("LitestandStoryInsertionStatus").registerBlocker(function(){return this.state.isCommenting}.bind(this));this.$UFIAddComment4&&this.$UFIAddComment4.release();this.$UFIAddComment4=new(b("SubscriptionsHandler"))();this.$UFIAddComment4.addSubscriptions(b("UFICommercialBreakStore").addListener(function(){this.setState({inCommercialBreak:b("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),b("UFIPlayLiveVODHighlightsStore").addListener(function(){this.setState({isPlayingLiveVODHighlights:b("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)));this.$UFIAddComment5=null;if(b("UFIConfig").canPublishLive)this.$UFIAddComment4.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var v=b("UFIComposerIsTypingStore").getValueFor(this.props.contextArgs.ftentidentifier);if(v===null)return;if(!this.$UFIAddComment5)this.$UFIAddComment5=new(b("UFIAddCommentLiveTypingController"))(this.props.contextArgs.ftentidentifier,this.props.replyCommentID,this.props.viewerActorID);if(v)this.$UFIAddComment5.attemptPublishStartEvent();else this.$UFIAddComment5.attemptPublishStopEvent()}.bind(this)));if(this.props.allowTogglePrivateComments&&(b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled))this.$UFIAddComment4.addSubscriptions(b("UFIComposerIsTypingStore").addListener(function(){var v=this.props.contextArgs.ftentidentifier;if(b("UFIComposerIsTypingStore").getValueFor(v))l.logViewerInteracted(v)}.bind(this)))};u.prototype.$UFIAddComment35=function(){this.$UFIAddComment5&&this.$UFIAddComment5.destroy();this.$UFIAddComment5=null};u.prototype.UNSAFE_componentWillReceiveProps=function(v){var w=this.props.contextArgs.ftentidentifier,x=v.contextArgs.ftentidentifier;if(x!==w||this.props.replyCommentID!==v.replyCommentID||this.props.viewerActorID!==v.viewerActorID)this.$UFIAddComment35()};u.prototype.componentWillUnmount=function(){__p&&__p();this.$UFIAddComment1=false;this.$UFIAddComment29();if(this.$UFIAddComment8)b("Arbiter").unsubscribe(this.$UFIAddComment8);if(this.$UFIAddComment7)b("Arbiter").unsubscribe(this.$UFIAddComment7);if(this.$UFIAddComment9)b("Arbiter").unsubscribe(this.$UFIAddComment9);this.$UFIAddComment6&&this.$UFIAddComment6.unsubscribe();this.$UFIAddComment6=null;this.$UFIAddComment4&&this.$UFIAddComment4.release();this.$UFIAddComment35()};u.prototype.$UFIAddComment36=function(){__p&&__p();var v,w=this;if(!this.state.customStickerNUXShown){if(this.props.allowCustomStickerAttachments&&(this.refs.groupedInputButton||this.refs.sticker_button))b("Bootloader").loadModules(["SimpleNUXMessage","SimpleNUXMessageTypes"],function(x,y){if(!x.hasUserSeenMessage(y.GAMES_STREAM_CUSTOM_STICKER)){this.setState({customStickerNUXShown:true});x.markMessageSeenByUser(y.GAMES_STREAM_CUSTOM_STICKER)}}.bind(this),"UFIAddComment.react")}else{var v=function(){var x=w.refs.sticker_button?w.refs.sticker_button:w.refs.groupedInputButton;return{v:b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function y(){return x},shown:w.state.customStickerNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:w.$UFIAddComment37},c._("New! Send a custom sticker"))}}();if(typeof v==="object")return v.v}return null};u.prototype.$UFIAddComment38=function(){if(this.state.gifsInCommentsNUXVisible&&this.refs.gif_button)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.gif_button}.bind(this),shown:this.state.gifsInCommentsNUXVisible,position:"above",width:"auto",alignment:"right"},c._("You can now add GIFs to comments"));return null};u.prototype.$UFIAddComment39=function(){if(this.state.markdownNUXVisible)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.markdownButton}.bind(this),shown:this.state.markdownNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$UFIAddComment40},c._("[FB-Only] Markdown in Comments! Click to enable."));return null};u.prototype.$UFIAddComment41=function(){if(this.state.groupedInputNUXShown)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.groupedInputButton}.bind(this),shown:this.state.groupedInputNUXShown,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this.$UFIAddComment23},c._("Post stickers, emojis and GIFs"));return null};u.prototype.$UFIAddComment42=function(){if(this.state.privateCommentNUXVisible)return b("React").createElement(b("BootloadedComponent.react"),{alignment:"right",bootloadLoader:b("JSResource")("XUIAmbientNUX.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextRef:function(){return this.refs.privacy_icon}.bind(this),onCloseButtonClick:this.$UFIAddComment43,position:"above",shown:this.state.privateCommentNUXVisible,width:"auto"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold"},c._("Comment Privately")),b("React").createElement(b("XUIText.react"),{display:"block"},c._("Add a comment that only {user} will see",[c._param("user",this.props.privateCommentTarget)])));return null};u.prototype.render=function(){__p&&__p();var v=this.props.contextArgs.loggedOutLinkConfig,w=true;if(v&&v.showAddComment)w=false;var x=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&w&&!this.props.contextArgs.hideActorPhoto,y=null;if(this.props.subtitle)y=b("React").createElement("span",{className:o},this.props.subtitle);else if(!this.state.isFocused&&this.props.isEditing)y=b("React").createElement("span",{className:o},c._("{cancel}",[c._param("cancel",b("React").createElement(b("Link.react"),{onClick:function(){return this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs))}.bind(this)},c._("Cancel")))]));else if(this.props.isEditing)y=b("React").createElement("span",{className:o},c._("Press Esc to {cancel}.",[c._param("cancel",b("React").createElement(b("Link.react"),{onMouseDown:function(){return this.context.dispatch(b("UFIAddCommentAction").cancel(this.props.contextArgs))}.bind(this)},c._("cancel")))]));else if(this.props.peopleOutsideCommunityInCommentNotice&&this.state.isFocused)y=b("React").createElement("div",{className:"fcg fsm _2pid"},b("React").createElement(b("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}),b("React").createElement("span",{className:"_2pir _4zk5"},b("React").createElement(b("TextWithEntities.react"),{ranges:this.props.peopleOutsideCommunityInCommentNotice.ranges,text:this.props.peopleOutsideCommunityInCommentNotice.text})));else if(this.props.showSendOnEnterTip&&!this.props.contextArgs.isTahoeUFI)y=b("React").createElement("span",{className:o},c._("Press Enter to post."));var z=null,A=null,B=null,C=null,D=null,E=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo||this.state.attachedFile||this.state.attachedGIF,F=null,G=null,H=null,I=null,J=g?b("React").createElement(g,{ref:"groupedInputButton",allowCustomStickers:!!this.props.allowCustomStickerAttachments,allowGifAttachments:!!this.props.allowGifAttachments,customStickerOwnerID:this.props.targetID,flyoutShown:this.state.flyoutShown,onEmojiSelect:this.$UFIAddComment48,onEmoticonSelect:this.$UFIAddComment49,onGifSelect:this.$UFIAddComment50,onLinkClick:this.$UFIAddComment51,onStickerSelect:this.$UFIAddComment52,toggleFlyout:this.$UFIAddComment53}):null,K=!g?b("React").createElement(b("EmojiInputButton.react"),{buttonClassName:"_r1a UFICommentEmojiButton",iconActiveClassName:"UFICommentEmojiIconActive",iconClassName:"UFICommentEmojiIcon",onClick:function(){return this.markViewerHasInteracted()}.bind(this),onSelect:function($){this.refs.mentionsinput.insertEmoji($)}.bind(this)}):null;if(this.props.allowCommentMarkdown)C=b("React").createElement(b("UFIMarkdownButton.react"),{active:this.state.commentMarkdownEnabled,ref:"markdownButton",onClick:function(){var $=!this.state.commentMarkdownEnabled;this.setState({commentMarkdownEnabled:$});if(this.refs.mentionsinput&&$)this.$UFIAddComment17(this.refs.mentionsinput.getText())}.bind(this)});if(!g&&this.props.allowStickerAttachments&&!E)A=b("React").createElement(b("UFIStickerButton.react"),{ref:"sticker_button",allowCustomStickers:this.props.allowCustomStickerAttachments,customStickerOwnerID:this.props.targetID,onStickerSelected:this.onStickerSelected,onEmoticonSelected:this.$UFIAddComment54,onLinkClick:this.$UFIAddComment55,onStickerFlyoutShow:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:true});this.markViewerHasInteracted()}.bind(this)});if(!g&&this.props.allowGifAttachments&&!E)B=b("React").createElement(b("UFIGifButton.react"),{ref:"gif_button",onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){return this.markViewerHasInteracted()}.bind(this),defaultGifSelection:this.props.contextArgs.defaultGifQuery});if(this.props.contextArgs&&this.props.contextArgs.communityConversationsParams&&this.props.contextArgs.communityConversationsParams.treatment===b("CommunityConversationsUfiTreatment").MENTION_IN_COMPOSER)D=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAddMentionsButton.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),ftentidentifier:this.props.contextArgs.ftentidentifier,onMentionClicked:function($){return this.insertMention($)}.bind(this),onMentionFlyoutShow:function(){return this.markViewerHasInteracted()}.bind(this),callerID:"community_conversations"});if(this.props.allowTipJar)G=b("React").createElement(b("UFISupportButton.react"),{targetName:this.props.targetName});if(this.props.allowNativeTipJar)H=k?b("React").createElement(k,{targetID:this.props.targetID,targetName:this.props.targetName,videoID:this.props.commentsTargetID}):null;if(this.props.allowCommentFixSuggestions)I=b("React").createElement(b("UFIFixSuggestionsButton.react"),{active:this.state.commentSuggestionsShowing,badged:this.state.hasPotentialSuggestions,ref:"fixSuggestionsButton",onClick:function(){var $=!this.state.commentSuggestionsShowing;this.setState({commentSuggestionsShowing:$});if($)this.setState({hasPotentialSuggestions:false})}.bind(this)});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments||this.props.allowFileAttachments){F=this.$UFIAddComment27;z=b("React").createElement(b("UFIAttachMediaSection.react"),{ref:"media_section",getPhotoUploadData:this.$UFIAddComment28,getFileUploadData:this.$UFIAddComment56,prepareForAttachedPhotoPreview:this.$UFIAddComment30,prepareForAttachedVideoPreview:this.$UFIAddComment57,prepareForAttachedFilePreview:this.$UFIAddComment58,allowVideoAttachments:this.props.allowVideoAttachments,allowFileAttachments:this.props.allowFileAttachments,onPhotoUploadComplete:this.$UFIAddComment32,onFileUploadComplete:this.$UFIAddComment59,onVideoUploadComplete:this.$UFIAddComment60,onVideoEncodeUpdate:this.$UFIAddComment61,onVideoUploadUpdate:this.$UFIAddComment62,setFileInput:this.$UFIAddComment44,targetId:this.props.targetID,onClick:function(){b("Arbiter").inform("comment_content_change",{addingAttachment:true});this.markViewerHasInteracted()}.bind(this),attachment:E,viewerActorID:this.props.viewerActorID})}var L=b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.ADD_COMMENT_BOX),M="addComment_"+this.props.contextArgs.ftentidentifier,N=void 0;if(this.props.contextArgs.liveVideoCommentPlaceholder&&!this.props.replyCommentID)N=this.props.contextArgs.liveVideoCommentPlaceholder;else if(this.props.replyCommentID)N=this.props.contextArgs.replyPlaceholderText||ia;else if(this.props.isQAndA)N=c._("Ask a question...");else if(this.props.contextArgs.isaskquestion)N=ja;else if(this.props.contextArgs.placeholderText)N=this.props.contextArgs.placeholderText;else N=ha;var O=this.props.contextArgs.viewoptionstypeobjects,P=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)y=null;var Q=void 0;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===p.UPLOAD||this.state.attachedFile||this.state.isLoadingFile||this.state.attachedSticker||this.state.attachedGIF)Q=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAttachedMediaPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedFile:this.state.attachedFile,attachedSticker:this.state.attachedSticker,attachedGIF:this.state.attachedGIF,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this.$UFIAddComment31,onRemoveAttachedStickerPreview:this.$UFIAddComment63,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,isLoadingFile:this.state.isLoadingFile,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress,isVideoFileTranscodedGIF:this.state.isVideoFileTranscodedGIF});var R=this.props.contextArgs.mentionsinput,S=null,T=null,U=null;if(R){S=R.inputComponent;T=R.viewComponent;U=R.viewProps}var V=this.props.editingComment.body,qa=V?b("MentionsInputUtils").generateDataFromTextWithEntities(V):null,W=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)W=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMarkdownPreview.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),markup:this.state.commentMarkdownPreviewContent});var ra=null;if(this.props.allowCommentFixSuggestions&&this.state.commentSuggestionsShowing)ra="Comment suggestions here";var X=null;if(this.state.messengerTarget)X=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMessengerPrompt.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),target:this.state.messengerTarget,removeMessengerPrompt:this.$UFIAddComment45});if(this.state.chatPivotTargets)X=b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentMessengerGroupsPrompt.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("span",null),toggleSendingAsChat:this.$UFIAddComment47});var sa=S?b("React").createElement(S,{disableInitTextarea:!w,replyCommentID:this.props.replyCommentID,initialData:qa,placeholder:N,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:T,viewProps:U,viewOptionsTypeObjects:O,viewOptionsTypeObjectsOrder:P,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this.$UFIAddComment33,onFocus:this.focus,onBlur:this.$UFIAddComment26,onContentChange:this.$UFIAddComment16,onPaste:F,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid,isBroadcasterUFI:this.props.contextArgs.isBroadcasterUFI,isTahoeUFI:this.props.contextArgs.isTahoeUFI,isLivingRoom:this.props.contextArgs.isLivingRoom}):null,ta=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_composer_rounded_borders,Y=b("SutroStoryHeaderUFIGatingConfig").enabled_for_comment_glyphs,ua=h&&this.props.groupID?b("React").createElement(h,{groupID:this.props.groupID,onSelect:function($){return this.insertMention($)}.bind(this)}):null,Z=b("React").createElement("div",{className:"UFICommentContainer"},b("React").createElement("div",{className:"_fmi"+(ta?" _613v":"")+" UFIInputContainer"+(b("PrivateCommentsConfig").dark_composer_theme_enabled&&this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFIPrivateCommentDarkTheme":"")},sa,b("React").createElement("div",{className:"_fmk UFICommentAttachmentButtons _5op2"+(Y?" _15i7":"")+(Y?" _2kwm":"")},Y?this.$UFIAddComment64():null,I,ua,D,K,C,z,B,A,J,G,H)),X,W,ra,Q,y);if(x)Z=b("React").createElement(b("UFIImageBlock.react"),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?" UFIStickersEnabledInput":"")+(this.props.allowCommentMarkdown?" UFIMarkdownEnabledInput":"")+(this.props.allowGifAttachments?" UFIGifEnabledInput":"")+(this.props.allowTipJar||this.props.allowNativeTipJar?" UFITipJarEnabledInput":"")},b("React").createElement("div",{className:"UFIReplyActorPhotoWrapper",onClick:this.focus,role:"presentation"},b("React").createElement(b("UFIActorIconContainer.react"),{actorID:this.props.viewerActorID})),Z);return b("React").createElement("div",{ref:function($){return this.rootNode=$}.bind(this),id:M,className:b("joinClasses")("UFIRow _4oep UFIAddComment"+(this.props.allowPhotoAttachments?" UFIAddCommentWithPhotoAttacher":"")+(this.props.withoutSeparator?" UFIAddCommentWithoutSeparator":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.$UFIAddComment12()?" UFIAddCommentWithAudienceSelector":"")+(this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights?" hidden_elem":""),this.props.className),onKeyDown:this.$UFIAddComment14,"data-ft":L},this.$UFIAddComment65(),this.$UFIAddComment66(),this.$UFIAddComment67(),this.$UFIAddComment68(),Z,this.$UFIAddComment69(),this.$UFIAddComment38(),this.$UFIAddComment39(),this.$UFIAddComment41(),this.$UFIAddComment36())};u.prototype.componentDidUpdate=function(v,w){__p&&__p();if(!w.attachedPhoto&&this.state.attachedPhoto||!w.attachedSticker&&this.state.attachedSticker||!w.attachedVideo&&this.state.attachedVideo||!w.attachedFile&&this.state.attachedFile||!w.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();else if(this.props.keepFocus&&this.state.hasSubmitted)this.refs.mentionsinput.focus();if(v.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this.$UFIAddComment28());this.$UFIAddComment31()}};u.prototype.componentDidMount=function(){__p&&__p();this.$UFIAddComment1=true;this.$UFIAddComment17=b("throttle")(this.$UFIAddComment17,na,this);this.$UFIAddComment9=b("Arbiter").subscribe("UFIComment/"+this.props.contextArgs.ftentidentifier+"/addMention",function(v,w){if(!w||!this.props.isTopLevelComposer)return;this.focus();this.refs.mentionsinput.insertMention(new(b("SearchableEntry"))({uniqueID:w.profile.fbid,title:w.profile.fullName,subtitle:w.profile.fullName,photo:w.profile.imageUrls[0],type:"user"}))}.bind(this));if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments&&!this.props.allowFileAttachments)return;if(this.props.replyCommentID===null){this.$UFIAddComment7=b("Arbiter").subscribe("focusCommentField"+this.props.contextArgs.ftentidentifier,function(v){this.refs.mentionsinput.focus()}.bind(this));if(this.props.contextArgs.issnowlift)this.$UFIAddComment8=b("Arbiter").subscribe("newRemixedImage"+this.props.contextArgs.ftentidentifier,function(v,w){var event={clipboardData:{items:[w]}};this.$UFIAddComment27(event)}.bind(this))}b("TextDelightEvents").bootloadTextDelightsController("comment")};u.prototype.$UFIAddComment12=function(){return!!this.props.allowAudienceSelector&&b("CommentPrivacyUtils").getTreatment(this.props.contextArgs,this.props.viewerActorID)===b("PrivateConversationsTreatment").FRIEND_CONVERSATIONS};u.prototype.$UFIAddComment13=function(){var v=this.props.contextArgs.friendConversationsParams||{},w=v.friendsOnlyPrivacyEnabled,x=v.friendsAndPagePrivacyEnabled;if(w)return b("CommentPrivacyValue").FRIENDS_ONLY;if(x)return b("CommentPrivacyValue").FRIENDS_AND_POST_OWNER;return b("CommentPrivacyValue").DEFAULT_PRIVACY};u.prototype.$UFIAddComment67=function(){if(this.props.constituentBanner&&!this.props.replyCommentID)return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentingAsConstituentHeader.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),uri:this.props.constituentBanner});return null};u.prototype.$UFIAddComment66=function(){if(this.$UFIAddComment12())return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFICommentAudienceSelector.react").__setRef("UFIAddComment.react"),bootloadPlaceholder:b("React").createElement("div",null),contextArgs:this.props.contextArgs,onSelectionChanged:this.$UFIAddComment46,selectedPrivacyValue:this.state.commentPrivacy});return null};u.prototype.$UFIAddComment65=function(){var v=this.props,w=v.contextArgs,x=v.isTopLevelComposer,y=v.isLastComponent,z=w&&w.communityConversationsParams&&w.communityConversationsParams.treatment;if(x&&(!y&&z===b("CommunityConversationsUfiTreatment").MENTION_ABOVE_OR_BELOW_COMPOSER||z===b("CommunityConversationsUfiTreatment").MENTION_ABOVE_COMPOSER))return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAddMentionsCap.react").__setRef("UFIAddComment.react"),position:"above",bootloadPlaceholder:b("React").createElement("span",null),contextArgs:w,isComposerFocused:this.state.isFocused,onAddMention:this.insertMention.bind(this),callerID:"community_conversations"});return null};u.prototype.$UFIAddComment69=function(){var v=this.props,w=v.contextArgs,x=v.isTopLevelComposer,y=v.isLastComponent,z=w&&w.communityConversationsParams&&w.communityConversationsParams.treatment;if(x&&(y&&z===b("CommunityConversationsUfiTreatment").MENTION_ABOVE_OR_BELOW_COMPOSER||z===b("CommunityConversationsUfiTreatment").MENTION_BELOW_COMPOSER))return b("React").createElement(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("UFIAddMentionsCap.react").__setRef("UFIAddComment.react"),position:"below",bootloadPlaceholder:b("React").createElement("span",null),contextArgs:w,isComposerFocused:this.state.isFocused,onAddMention:this.insertMention.bind(this),callerID:"community_conversations"});return null};u.prototype.$UFIAddComment64=function(){__p&&__p();var v=this.props.isEditing&&this.props.editingComment.privacy_value===b("CommentPrivacyValue").OWNER_OR_COMMENTER,w=this.props.replyCommentID&&this.props.replyCommentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER,x=!v&&!w&&this.props.allowTogglePrivateComments;if(!v&&!w&&!this.props.allowTogglePrivateComments||!(x?b("PrivateCommentsConfig").composer_lock_enabled||b("PrivateCommentsConfig").composer_unlocked_lock_enabled:b("PrivateCommentsConfig").reply_composer_lock_enabled))return null;var y=void 0;if(x){b("Bootloader").loadModules(["PrivateCommentsLogger"],function(l){return l.startFunnel(this.props.contextArgs.ftentidentifier)}.bind(this),"UFIAddComment.react");y=c._("Toggle Privacy")}else if(w)y=c._("Only you and {user} will be able to see your reply",[c._param("user",this.props.privateCommentTarget)]);else y=c._("Only you and {user} can see this",[c._param("user",this.props.privateCommentTarget)]);return b("React").createElement(b("Link.react"),{"aria-label":y,className:"_r1a UFICommentPrivacyButton","data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":y,onClick:function(){this.markViewerHasInteracted();if(x){l.logToggle(this.state.commentPrivacy===b("CommentPrivacyValue").DEFAULT_PRIVACY,this.props.contextArgs.ftentidentifier);this.setState(function(z){return{commentPrivacy:z.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?b("CommentPrivacyValue").DEFAULT_PRIVACY:b("CommentPrivacyValue").OWNER_OR_COMMENTER}})}}.bind(this),role:"button"},b("React").createElement("div",{ref:"privacy_icon",className:"UFICommentPrivacyIcon"+(b("PrivateCommentsConfig").composer_unlocked_lock_enabled?" UFICommentPrivacyIconVariant":"")+(!x||this.state.commentPrivacy===b("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFICommentPrivacyIconActive":"")}),x?this.$UFIAddComment42():null)};u.prototype.$UFIAddComment68=function(){if(this.props.isEditing||this.state.commentPrivacy!==b("CommentPrivacyValue").OWNER_OR_COMMENTER||!b("PrivateCommentsConfig").privacy_text_above_composer_enabled)return null;return this.props.replyCommentID?b("React").createElement("div",{className:"_2tpi"},c._("Replying privately to {=[user]}",[c._param("=[user]",b("React").createElement("strong",null,c._("{user}",[c._param("user",this.props.privateCommentTarget)])))])):b("React").createElement("div",{className:"_2tpi"},c._("Only you and {=[user]} can see this",[c._param("=[user]",b("React").createElement("strong",null,c._("{user}",[c._param("user",this.props.privateCommentTarget)])))]))};u.prototype.insertMention=function(v){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention){this.refs.mentionsinput.insertMention(v);setTimeout(function(){return this.refs.mentionsinput.focus()}.bind(this))}};u.prototype.$UFIAddComment70=function(v){return v==="finish"};u.prototype.$UFIAddComment71=function(){this.state.fileInput&&this.state.fileInput.clear()};u.prototype.$UFIAddComment73=function(v){this.setState({attachedSticker:null,isLoadingPhoto:true});new(b("AsyncRequest"))(ma).setData({sticker_id:v}).setErrorHandler(this.$UFIAddComment63).setHandler(this.$UFIAddComment72).send()};u.prototype.sendSticker=function(v,event){var w={encodedValue:"",visibleValue:"",attachedPhoto:null,attachedSticker:{fbid:v},privacy_value:this.state.commentPrivacy};this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,w,event.target,this.props.replyCommentID))};u.prototype.$UFIAddComment74=function(){this.setState({gifsInCommentsNUXVisible:false})};u.prototype.preprocessGIF=function(v){var w=b("XUFICommentGIFPreprocessController").getURIBuilder().getURI();new(b("AsyncRequest"))(w).setData({gif_url:v.source.url}).send()};u.prototype.sendGIF=function(v){var w={encodedValue:"",visibleValue:"",attachedShareURL:v.source.url,privacy_value:this.state.commentPrivacy};if(this.rootNode)this.context.dispatch(b("UFIAddCommentAction").submitNew(this.props.contextArgs,w,this.rootNode,this.props.replyCommentID))};u.prototype.parseTextForMentions=function(v){var w=/@\[([0-9;]+):((?:[^\\\]]|\\.)*)\]/g,x=[],y=void 0;while(y=w.exec(v)){var z={uid:y[1],text:y[2],offset:y.index,length:y[2].length,weakreference:false,entity:{uid:y[1],weakreference:false}};x.push(z);w.lastIndex=z.offset+z.length}return x};u.prototype.markViewerHasInteracted=function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted()};u.contextTypes={dispatch:ga.func};da.exports=u}),null);
__d("UFIAddCommentLink.react",["cx","fbt","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){var m=c("joinClasses")("UFIRow UFIAddCommentLink"+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),n=void 0;if(this.props.isQAndA)n=i._("Ask a question...");else if(this.props.isGroupQA)n=i._("Write an answer...");else n=i._("Write a comment...");return c("React").createElement("div",{className:m,"data-ft":this.props["data-ft"]},c("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},n))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("ClickableArea.react",["Focus","React","ReactDOM"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.componentDidMount=function(){"use strict";if(this.props.buttonRef){var k=this.props.buttonRef();c("Focus").relocate(c("ReactDOM").findDOMNode(k),c("ReactDOM").findDOMNode(this))}};j.prototype.render=function(){"use strict";var k=this.props,l=k.children,m=k.onClick,n=babelHelpers.objectWithoutProperties(k,["children","onClick"]);return c("React").cloneElement(c("React").Children.only(l),babelHelpers["extends"]({},n,{onClick:m}))};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("IdentityBadgeType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FAN_FUNDING_SUPPORTER:"fan_funding_supporter",TOP_FAN:"top_fan",WOODHENGE:"woodhenge"})}),null);
__d("XIdentityBadgesInfomationDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/identity_badge/information_dialog/init/",{badges:{type:"String"}})}),null);
__d("IdentityBadges.react",["cx","AsyncRequest","ClickableArea.react","IdentityBadgeType","Image.react","React","XIdentityBadgesInfomationDialogController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this,l);this.$IdentityBadges1=function(){var m=c("XIdentityBadgesInfomationDialogController").getURIBuilder().setString("badges",JSON.stringify(this.props.badges)).getURI(),n=new(c("AsyncRequest"))().setURI(m).setMethod("POST").setReadOnly(true);n.send()}.bind(this)}k.prototype.render=function(){"use strict";var l=this.props.badges,m=l.find(function(n){return n.type===c("IdentityBadgeType").TOP_FAN}),n=m||l[0],o=l.length===1?null:" +"+(l.length-1);return c("React").createElement(c("ClickableArea.react"),{onClick:this.$IdentityBadges1},c("React").createElement("div",null,c("React").createElement(c("Image.react"),{className:"_3-8_",height:12,src:n.badge_asset}),n.text,o))};f.exports=k}),null);
__d("LiveVideoAnnouncementCTAType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"none",LIVE_SUBSCRIBE:"live_subscribe",FOLLOW:"follow",PAGE_LIKE:"page_like",INVITE_GUEST:"invite_guest",LINK:"link"})}),null);
__d("ShareNowConstants",["fbt"],(function a(b,c,d,e,f,g,h){f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")}}),null);
__d("TextDelightNuxID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({POST_OPT_OUT_NUX:5477,COMMENT_OPT_OUT_NUX:5551})}),null);
__d("PublicConversationsUnicornTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$PublicConversationsUnicornTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$PublicConversationsUnicornTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:PublicConversationsUnicornLoggerConfig",this.$PublicConversationsUnicornTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$PublicConversationsUnicornTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$PublicConversationsUnicornTypedLogger1)};h.prototype.updateData=function(j){this.$PublicConversationsUnicornTypedLogger1=babelHelpers["extends"]({},this.$PublicConversationsUnicornTypedLogger1,j);return this};h.prototype.setCommentFbid=function(j){this.$PublicConversationsUnicornTypedLogger1.comment_fbid=j;return this};h.prototype.setVC=function(j){this.$PublicConversationsUnicornTypedLogger1.vc=j;return this};var i={comment_fbid:true,vc:true};f.exports=h}),null);
__d("ProfileBrowserTypes",[],(function a(b,c,d,e,f,g){var h=Object.freeze({LIKES:"likes",FRIEND_CHECKINS:"friendcheckins",FRIENDED_FANS_OF:"friended_fans_of",GROUP_ADMINS:"group_admins",GROUP_MEMBERS:"group_members",GROUP_FRIEND_MEMBERS:"group_friend_members",GROUP_MESSAGE_VIEWERS:"group_message_viewers",LIVE_VIDEO_VIEWERS:"live_video_viewers",MUTUAL_FRIENDS:"mutual_friends",TODO_LIST_ASSIGNEES:"todo_list_assignees",GROUP_JOIN_REQUESTERS_FRIENDS_IN_GROUP:"group_join_requesters_friends_in_group",PAGE_FEATURED_ADMINS:"featured_admins",EXTERNALTASK_SUBSCRIBERS:"task_subscribers"});f.exports=h}),null);
__d("UFICommentLikeCount.react",["cx","fbt","ActorURI","NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=function m(o,p,q){var r=new(c("URI"))("/ajax/like/tooltip.php").setQueryData({comment_fbid:o.fbid,comment_from:o.author,comment_likecount:o.likecount||0,comment_id:o.id,cache_buster:o.likeconfirmhash||0});if(p)r.addQueryData({viewas:p});return c("ActorURI").create(r,q)};j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.comment,p=o.likecount||0,q=c("NumberFormat").formatInteger(p),r=i._({"*":"{number} Likes","_1":"1 Like"},[i._plural(p,"number")]),s=c("ProfileBrowserTypes").LIKES,t={id:o.fbid},u=m(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),v=c("React").createElement("span",{className:"UFICommentReactionIconContainer"},c("React").createElement("i",{className:"_3j7l _2p78 _9--"})),w=c("React").createElement("span",null,q),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?" UFICommentLikedButton":"")+" UFISutroLikeCount",y=c("ProfileBrowserLink").constructDialogURI(s,t).toString(),z=c("ProfileBrowserLink").constructPageURI(s,t).toString(),A="dialog",B=this.props.contextArgs.loggedOutLinkConfig;if(B&&B.showLikeLink){y=B.likeAjaxifyURI;z="#"}return c("React").createElement("a",{ajaxify:y,"aria-label":r,className:x,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":u.toString(),href:z,rel:A,role:"button"},v,w)};function n(){j.apply(this,arguments)}n.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n}),null);
__d("ReactionNuxTypeEnum",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",SPATIAL_REACTIONS_NUX:"spatial_reactions_nux"})}),null);
__d("UFILikeWebDriverIDs",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE_LINK:"fb-ufi-likelink",UNLIKE_LINK:"fb-ufi-unlikelink",LIKE_LINK_COMMENT:"ufi_comment_like_link",LIKE_LINK_REPLY:"ufi_reply_like_link"})}),null);
__d("addFocusEvents",["Deferred","Event","React","SubscriptionList"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").Component,i=void 0,j=function(k){__p&&__p();return function(){__p&&__p();var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){"use strict";__p&&__p();if(!i){var o,p;i=new(c("SubscriptionList"))(function(){o=c("Event").listen(window,"blur",function(){i&&i.fireCallbacks(true);p&&p.remove();p=c("Event").listen(document.documentElement,"focusin",function(){i&&i.fireCallbacks(false);p&&p.remove();p=null})})},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null})}this.subscription=i.add(function(q){this.locked=q}.bind(this))};n.prototype.componentWillUnmount=function(){"use strict";this.subscription&&this.subscription.remove()};n.prototype.onClick=function(event){"use strict";this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus)};n.prototype.onFocus=function(event){"use strict";__p&&__p();if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new(c("Deferred"))();this.deferred.done(function(o){o&&o(event);this.deferred=null}.bind(this),function(){this.deferred=null}.bind(this))};n.prototype.onKeyUp=function(event){"use strict";this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus)};n.prototype.render=function(){"use strict";var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,["onKeyboardFocus","onMouseFocus"]);return c("React").createElement(k,babelHelpers["extends"]({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)}))};function n(){"use strict";l.apply(this,arguments)}return n}()}.bind(this);f.exports=j}),null);
__d("UFIReactionsLinkImpl.react",["csx","cx","fbt","Promise","BanzaiLogger","BootloadedComponent.react","Bootloader","Event","JSResource","Parent","React","ReactDOM","ReactionNuxTypeEnum","Run","ShimButton.react","SubscriptionsHandler","SutroStoryHeaderUFIGatingConfig","UFICommentAction","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIConfig","UFILikeWebDriverIDs","UFIReactionIconImpl.react","UFIReactionTypes","UFIStoryAction","addFocusEvents","shallowCompare","curry"],(function a(b,c,aa,ba,d,ca,da,ea,e){__p&&__p();var f,g,h=c("React").Component,i=c("React").PropTypes,j=c("UFIConfig").reactionsFunnelLogger,k=c("UFIConfig").reactionsHasCommentFunnelLogger,l=c("UFIConfig").reactionsHasFunnelLogger,m=false,n=false,o=false,p=null,q=null,r=null,s=void 0,t=c("React").createElement("div",null),u=150,v=c("UFIReactionTypes").reactions,w=Object.keys(v),x=c("UFIConfig").reactionsAnimatedIconsPreloadTechnique||"on_hover",y=20,z=525,A=750,B=700,C=850,D=500,E="ontouchstart"in window,F=e._("Show more reactions"),G=e._("New! React to what's happening in different parts of the video"),H=[],I=function I(O){__p&&__p();if(!p){var P=function P(Q){p=Q;if(H){H.forEach(function(P){return P()});H=null}};if(c("UFIConfig").reactionsHasAnimatedIcons)c("Bootloader").loadModules(["UFIReactionsMenuWithAnimatedIcons.react"],P,"UFIReactionsLinkImpl.react");else c("Bootloader").loadModules(["UFIReactionsMenuImpl.react"],P,"UFIReactionsLinkImpl.react")}},J=function J(O){if(!q||!r||!s){var P=function P(Q,R,S){q=Q;r=R;s=S;O()};c("Bootloader").loadModules(["SpatialReactionsProductionStore","SphericalVideoComponentActions","SpatialReactionClickAnimation","SpatialReactionFunnelLoggingStore"],P,"UFIReactionsLinkImpl.react")}else O()},K=null;function L(){__p&&__p();var O;if(!K)(function(){__p&&__p();var P=null;K=new(c("Promise"))(function(R){P=c("Run").onAfterLoad(function(){c("Bootloader").loadModules(["UFIReactionsAnimationPreloader"],function(S){var T=new S().usePackage(c("UFIConfig").reactionsAnimatedIconsUsePackage||false);R(T)},"UFIReactionsLinkImpl.react")})});K.done(function(){P&&P.remove()});var Q=c("Run").onLeave(function(){K=null;Q&&Q.remove()})})();return K}var M=c("addFocusEvents")("a");f=babelHelpers.inherits(N,h);g=f&&f.prototype;function N(O,P){"use strict";__p&&__p();g.constructor.call(this,O,P);this.$UFIReactionsLink3=function(){if(this.state.dialogShown)this.forceUpdate()}.bind(this);this.hideDialog=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.showDialog=function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown)this.state.logToFunnel&&j.menuShow(this.state.logAsComment);n=true;this.setState({dialogShown:true,NUXShown:false})}.bind(this);this.onClick=function(event){__p&&__p();var R,S=this,T=void 0;if(!this.$UFIReactionsLink7())T=c("UFICommonInteractionLogger").startInteraction(this.props.comment?c("UFICommonInteractionEvents").UFI_COMMENT_REACTION:c("UFICommonInteractionEvents").UFI_STORY_REACTION);event.preventDefault();var U=this.props,V=U.reaction,W=U.suggestedReaction;if(!V||V===c("UFIReactionTypes").LIKE||!v[V])(function(){__p&&__p();if(!V&&S.props.nuxConfig){var X=S.props.nuxConfig.nuxType;if(X===c("ReactionNuxTypeEnum").LIKE_CLICK||X===c("ReactionNuxTypeEnum").LIKE_CLICK_RENUX)S.maybeShowNUX()}var Y=W&&S.hasSuggestedReaction?W:c("UFIReactionTypes").LIKE;V=V?c("UFIReactionTypes").NONE:Y;var Z=c("curry")(S.onReactionChange,V);S.$UFIReactionsLink4(V,true);if(S.$UFIReactionsLink7())J(function(){__p&&__p();if(q&&r){var $=q.getVideoPlayerController(this.props.contextArgs.instanceid);if($&&V===c("UFIReactionTypes").LIKE){r.clickLikeButton($.getVideoPlayerID());event.persist();if(!this.$UFIReactionsLink1)this.$UFIReactionsLink1=new s($,c("UFIReactionTypes").LIKE,Z);this.$UFIReactionsLink1.click(event)}else Z(event)}}.bind(S));else{if(T)S.$UFIReactionsLink2={trackingID:T,reaction:V};Z(event)}})();else{if(T)this.$UFIReactionsLink2={trackingID:T,reaction:0};this.onReactionChange(0,event)}this.setState({dialogShown:false,isScrubbing:false})}.bind(this);this.onClickCapture=function(event){event.stopPropagation();this.setState({isLongPressing:false})}.bind(this);this.onContextMenu=function(event){if(this.state.isTouchDown)event.preventDefault()}.bind(this);this.onMouseDown=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onMouseEnter=function(event){__p&&__p();clearTimeout(this.hoverTimeout);var R=this.props.comment?B:z;if(!this.state.dialogShown)this.hoverTimeout=setTimeout(function(){this.showDialog();if(this.$UFIReactionsLink7())J(function(){if(q&&r){var S=q.getVideoPlayerController(this.props.contextArgs.instanceid);if(S)r.openReactionMenu(S.getVideoPlayerID())}}.bind(this))}.bind(this),R);I(this.props.supportedReactions);if(!this.state.dialogShown&&this.state.logToFunnel)this.logFunnelTimeout=setTimeout(function(){return j.likeButtonEnter(this.props.reaction,this.state.logAsComment)}.bind(this),u)}.bind(this);this.onMouseLeave=function(event){__p&&__p();clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);var R=this.props.comment?C:A;if(this.state.dialogShown)if(this.$UFIReactionsLink7())J(function(){if(q&&q.shouldLeaveReactionMenuOpen())this.$UFIReactionsLink8(this.hideDialog);else this.hoverTimeout=setTimeout(function(){this.hideDialog();if(q&&r){var S=q.getVideoPlayerController(this.props.contextArgs.instanceid);if(S)r.closeReactionMenu(S.getVideoPlayerID())}}.bind(this),R)}.bind(this));else this.hoverTimeout=setTimeout(this.hideDialog,R)}.bind(this);this.onReactionMenuMouseEnter=function(event){clearTimeout(this.hoverTimeout)}.bind(this);this.onTouchStart=function(event){__p&&__p();if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true})}.bind(this),D);I(this.props.supportedReactions)}this.setState({isTouchDown:true,isLongPressing:false})}.bind(this);this.onTouchEnd=function(event){if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false})}.bind(this);this.onTouchMove=function(event){__p&&__p();if(this.state.isScrubbing)return;var R=event.touches[0],S=R.clientX,T=R.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=S;this.dragStartY=T;return}if(typeof this.dragStartX==="number"&&typeof this.dragStartY==="number"&&(this.dragStartX>S+y||this.dragStartX<S-y||this.dragStartY>T+y||this.dragStartY<T-y))this.setState({isScrubbing:true})}.bind(this);this.onReactionChange=function(R,event){__p&&__p();var S=arguments.length<=2||arguments[2]===undefined?null:arguments[2],T=arguments.length<=3||arguments[3]===undefined?null:arguments[3];this.$UFIReactionsLink4(R);var U=c("ReactDOM").findDOMNode(this.refs.trigger);if(this.state.logToFunnel)event.target===U?j.likeButtonClick(R,this.state.logAsComment):j.reactionSelection(R,this.state.logAsComment);var V=void 0;if(this.props.comment)V=c("UFICommentAction").changeReaction(this.props.contextArgs,this.props.comment,R,U);else V=c("UFIStoryAction").changeReaction(this.props.contextArgs,R,U,S,T);this.context.dispatch(V);var W=function(){this.setState({dialogShown:false,isScrubbing:false})}.bind(this);if(this.$UFIReactionsLink7())J(function(){if(q)if(q.shouldLeaveReactionMenuOpen())this.$UFIReactionsLink8(function(){W()});else W()}.bind(this));else W()}.bind(this);this.onReactionMouseEnter=function(R,event){if(this.reactionsHoverStartTimeMap[R]===0)this.reactionsHoverStartTimeMap[R]=Date.now()}.bind(this);this.onReactionMouseLeave=function(R,event){if(this.reactionsHoverStartTimeMap[R]){this.reactionsHoverTotalTimeMap[R]+=Date.now()-this.reactionsHoverStartTimeMap[R];this.reactionsHoverStartTimeMap[R]=0}}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.onScreenReaderTrigger=function(){o=true;this.allowKeyboardFocus=true;this.showDialog()}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c("UFIConfig").reactionsHasSuggestedReaction;this.subscriptionsHandler=new(c("SubscriptionsHandler"))();if(H)H.push(this.$UFIReactionsLink3);var Q=false;if(j&&(l&&this.props.comment===undefined||k&&this.props.comment!==undefined))Q=true;this.state={dialogShown:false,isLongPressing:false,isScrubbing:false,isTouchDown:false,logToFunnel:Q,logAsComment:!!O.comment&&k,NUXShown:false,prevReaction:O.reaction,shouldBounce:false}}N.prototype.shouldComponentUpdate=function(O,P){"use strict";return c("shallowCompare")(this,O,P)};N.getDerivedStateFromProps=function(O,P){"use strict";return{prevReaction:O.reaction,shouldBounce:!!O.reaction&&O.reaction!==P.prevReaction}};N.prototype.componentDidUpdate=function(O,P){__p&&__p();var Q,R=this;"use strict";if(this.$UFIReactionsLink2&&this.$UFIReactionsLink2.reaction===this.props.reaction){c("UFICommonInteractionLogger").endInteraction(this.$UFIReactionsLink2.trackingID);this.$UFIReactionsLink2=null}if(!P.dialogShown&&this.state.dialogShown){if(E)(function(){var S=void 0;R.subscriptionsHandler.addSubscriptions(c("Event").listen(document.documentElement,"touchstart",function(event){S=event.touches[0]}),c("Event").listen(document.documentElement,"touchmove",function(event){S=event.touches[0]}),c("Event").listen(document.documentElement,"touchend",function(event){if(S&&!this.refs.root.contains(document.elementFromPoint(S.clientX,S.clientY)))this.setState({dialogShown:false,isScrubbing:false})}.bind(R)))})()}else if(P.dialogShown&&!this.state.dialogShown){this.$UFIReactionsLink4(O.reaction);this.subscriptionsHandler.release();this.subscriptionsHandler=new(c("SubscriptionsHandler"))()}};N.prototype.componentDidMount=function(){__p&&__p();var O,P=this;"use strict";this.$UFIReactionsLink5();if(this.props.nuxConfig){var Q=this.props.nuxConfig.nuxType;if(Q===c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX)this.maybeShowNUX()}if(c("UFIConfig").reactionsHasAnimatedIcons&&!m)switch(x){case"on_mount":this.$UFIReactionsLink6();break;case"on_hover":var R=c("Parent").bySelector(this.refs.root,"._zw3");if(R)(function(){var event=c("Event").listen(R,"mousemove",function(){this.$UFIReactionsLink6();event&&event.remove()}.bind(P))})();break}};N.prototype.componentWillUnmount=function(){"use strict";this.subscriptionsHandler.release();if(H){var O=H.indexOf(this.$UFIReactionsLink3);if(O!==-1)H.splice(O,1)}};N.prototype.maybeShowNUX=function(){"use strict";__p&&__p();var O=null;if(this.props.nuxConfig)O=this.props.nuxConfig.nuxType;if(!n){n=true;this.setState({NUXShown:true,dialogShown:false});if(O!==c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX)c("BanzaiLogger").log("WebReactionsNuxLoggerConfig",{feedback_id:this.props.contextArgs.ftentidentifier,"interface":"www"})}};N.prototype.onDragStart=function(event){"use strict";event.preventDefault()};N.prototype.renderMenu=function(){"use strict";if(this.state.dialogShown)I(this.props.supportedReactions);if(!p)return null;var O=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return c("React").createElement(p,{allowKeyboardFocus:O,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:o,instanceId:this.props.contextArgs.instanceid,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions,showSpatialReactions:this.$UFIReactionsLink7()})};N.prototype.renderTrigger=function(){"use strict";__p&&__p();var O=this.props,P=O.reaction,Q=O.suggestedReaction;if(P&&!v[P])P=null;var R=P?c("UFILikeWebDriverIDs").UNLIKE_LINK:c("UFILikeWebDriverIDs").LIKE_LINK,S=void 0,T=void 0,U=void 0,V=void 0;if(this.props.comment){R=this.props.comment.parentcommentid?c("UFILikeWebDriverIDs").LIKE_LINK_REPLY:c("UFILikeWebDriverIDs").LIKE_LINK_COMMENT;var W=false;if(!P)S=v[c("UFIReactionTypes").LIKE].display_name;else{S=v[P].display_name;V=v[P].color;W=true}U="UFILikeLink UFIReactionLink"+(W?" UFILinkBright":"")}else{if(!P)S=Q&&this.hasSuggestedReaction?v[Q].display_name:v[c("UFIReactionTypes").LIKE].display_name;else S=v[P].display_name;if(P&&P!=c("UFIReactionTypes").LIKE||!P&&Q&&this.hasSuggestedReaction&&Q!=c("UFIReactionTypes").LIKE){var X=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,Y=X?"18":this.props.reactionSize||"13";T=c("React").createElement(c("UFIReactionIconImpl.react"),{className:"_1ktw"+(X?" _2hoq":""),grayscale:!P&&!!Q,reaction:P||Q,size:Y})}var Z=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation;U="UFILikeLink _4x9- _4x9_"+(!T?" _48-k":"")+(P?" UFILinkBright":"")+(this.state.shouldBounce&&!Z?" _3_mo":"")+(this.state.shouldBounce&&Z?" _614v":"");V=P?v[P].color:null}return c("React").createElement(M,{"aria-pressed":!!P,className:U,"data-testid":R,href:"#",onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:p?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:E?this.onTouchEnd:null,onTouchMove:E?this.onTouchMove:null,onTouchStart:E?this.onTouchStart:null,ref:"trigger",role:"button",style:{color:V},tabIndex:0},T,S)};N.prototype.renderNUX=function(){"use strict";var O=this.refs.root,P=this.props.comment!==undefined,Q=this.props.nuxConfig&&this.props.nuxConfig.nuxType===c("ReactionNuxTypeEnum").SPATIAL_REACTIONS_NUX,R=this.props.nuxConfig&&this.props.nuxConfig.titleOverride,S=this.props.nuxConfig&&this.props.nuxConfig.textOverride;if(!this.state.NUXShown||!O)return null;if(Q){R=G;S=null}return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:t,bootloadLoader:c("JSResource")("UFIReactionsNUX.react").__setRef("UFIReactionsLinkImpl.react"),context:O,titleOverride:R,textOverride:S,isCommentReactionNux:P,isSpatialReactionNux:Q,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey})};N.prototype.renderScreenReaderTrigger=function(){"use strict";if(p)return null;return c("React").createElement(c("ShimButton.react"),{className:"accessible_elem","data-accessibilityid":"virtual_cursor_trigger",inline:true,tabIndex:-1,onClick:this.onScreenReaderTrigger},F)};N.prototype.render=function(){"use strict";var O=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi;return c("React").createElement("div",{className:"_khz"+(O?" _4sz1":"")+" _4rw5"+(this.state.isScrubbing?" _4bdq":"")+" _3wv2",ref:"root"},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX())};N.prototype.$UFIReactionsLink5=function(){"use strict";this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};w.forEach(function(O){this.reactionsHoverStartTimeMap[O]=0;this.reactionsHoverTotalTimeMap[O]=0}.bind(this))};N.prototype.$UFIReactionsLink6=function(){"use strict";if(!m){L().done(function(O){O.load(this.props.supportedReactions)}.bind(this));m=true}};N.prototype.$UFIReactionsLink7=function(){"use strict";return!!this.props.contextArgs.showSpatialReactions&&!this.props.comment};N.prototype.$UFIReactionsLink8=function(O){var P;"use strict";if(q)(function(){var Q=q.addListener(function(){if(q&&!q.shouldLeaveReactionMenuOpen()){Q.remove();O()}})})()};N.prototype.$UFIReactionsLink4=function(O,P){"use strict";__p&&__p();if(this.dialogShownTime!==0){var Q={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:O,initial_reaction:this.props.reaction,"interface":"www",long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:P,time_spent:Date.now()-this.dialogShownTime};for(var R in this.reactionsHoverTotalTimeMap){var S="time_spent_"+v[R].name.toLowerCase();Q[S]=this.reactionsHoverTotalTimeMap[R]}c("BanzaiLogger").log("UserReactionsLoggerConfig",Q);this.$UFIReactionsLink5()}};N.contextTypes={dispatch:i.func};d.exports=N}),null);
__d("UFICommentLikeLink.react",["cx","fbt","React","ReactionNuxTypeEnum","TrackingNodes","UFICommentAction","UFIConfig","UFIReactionsLinkImpl.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="ufi_comment_like_link",n="ufi_reply_like_link";j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;o.getCanRender=function(p){return!!(p&&(p.canviewerreact||p.viewercanlike||p.hasviewerliked))};o.prototype.render=function(){var p=this.props.comment,q=this.props.feedback,r=this.props.contextArgs;if(!this.constructor.getCanRender(p))return null;if(p.canviewerreact&&!r.isaskquestion)return c("React").createElement("span",{className:"_6a _3-me"},this.$UFICommentLikeLink1(p,q,r));else if(p.viewercanlike||p.hasviewerliked)return this.$UFICommentLikeLink2(p,q,r);return null};o.prototype.$UFICommentLikeLink1=function(p,q,r){var s=null;if(c("UFIConfig").reactionsHasCommentsNux)s={nuxKey:"reactions_comments",titleOverride:i._("New! React to a Comment"),textOverride:i._("Hover over the Like link to see all reactions."),nuxType:c("ReactionNuxTypeEnum").LIKE_CLICK};return c("React").createElement(c("UFIReactionsLinkImpl.react"),{contextArgs:babelHelpers["extends"]({},r,{ftentidentifier:p.id}),comment:p,nuxConfig:s,reaction:p.viewerreaction,supportedReactions:q.supportedreactions,ftIdentifier:r.ftentidentifier})};o.prototype.$UFICommentLikeLink2=function(p,q,r){__p&&__p();var s=r.loggedOutLinkConfig,t=c("TrackingNodes").getTrackingInfo(p.hasviewerliked?c("TrackingNodes").types.UNLIKE_LINK:c("TrackingNodes").types.LIKE_LINK),u=p.hasviewerliked?i._("Unlike this comment"):i._("Like this comment"),v=p.parentcommentid?n:m,w=!p.hasviewerliked||s?i._("Like"):i._("Unlike");if(r.isaskquestion&&!p.parentcommentid){u=p.hasviewerliked?i._("Unvote for this answer"):i._("Vote for this answer");w=!p.hasviewerliked||s?i._("Upvote"):i._("Upvoted")}var x=null,y=null;if(s&&s.showLikeLink){x="dialog";y=s.likeAjaxifyURI}return c("React").createElement("a",{className:"UFILikeLink","data-ft":t,"data-testid":v,href:"#",rel:x,ajaxify:y,onClick:function(event){return this.context.dispatch(c("UFICommentAction").toggleLike(r,p,event.target))}.bind(this),role:"button",title:u},w)};function o(){j.apply(this,arguments)}o.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired,feedback:l.object.isRequired};o.contextTypes={dispatch:l.func};f.exports=o}),null);
__d("UFICommentMetadata.react",["cx","fbt","BootloadedComponent.react","Bootloader","JSResource","Middot.react","React","ReactDOM","Timestamp.react","TrackingNodes","UFIConstants","URI","XUISpinner.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("UFIConstants").UFIStatus,m="ufi_comment_timestamp",n="UFIFailureMessageIcon",o="UFIFailureMessage",p="uiLinkSubtle",q=function q(s){var t=s.status;return t===l.FAILED_ADD||t===l.FAILED_EDIT};j=babelHelpers.inherits(r,c("React").Component);k=j&&j.prototype;function r(){var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=k.constructor).call.apply(s,[this].concat(v)),this.editLinkRef=null,t}r.prototype.render=function(){__p&&__p();var s=this.props,t=s.comment,u=s.onRetrySubmit,v=void 0,w=void 0,x=t.timestamp;if(q(t))v=[c("React").createElement("span",{key:"failure",className:o},c("React").createElement("i",{className:n}),i._("Unable to post comment.")),t.allowRetry&&u?[" ",c("React").createElement("a",{key:"rety-submit",onClick:u,href:"#",role:"button"},i._("Try Again"))]:null];else if(x){var y=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.SOURCE);w=c("React").createElement(c("Timestamp.react"),{className:"UFISutroCommentTimestamp",minimize:true,shorten:this.props.shortenTimestamp,time:x.time,text:x.text,useLargerTimeUnits:true,verbose:x.verbose});if(this.props.showPermalink)w=c("React").createElement("a",{key:"timestamp-message",className:p,href:this.props.permalink,"data-ft":y,"data-testid":m,target:this.props.permalinkTarget},w)}var z=null;if(t.originalTimestamp){var A=new(c("URI"))("/ajax/edits/browser/comment").addQueryData({comment_token:t.id}).toString();z=[c("React").createElement(c("Middot.react"),{key:"middot-editNote"}),c("React").createElement("a",{ajaxify:A,className:"uiLinkSubtle","data-hover":"tooltip","data-tooltip-content":i._("Show edit history"),href:"#",key:"edit-link",ref:function(E){return this.editLinkRef=E}.bind(this),rel:"dialog",role:"button",title:i._("Show edit history")},i._("Edited"))]}var B=null,C=t.creator_data;if(C)B=[c("React").createElement(c("BootloadedComponent.react"),{key:"creator",bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),{size:"small"}),bootloadLoader:c("JSResource")("UFICreatorInfo.react").__setRef("UFICommentMetadata.react"),creatorID:C.creatorID,creatorType:C.creatorType,creatorName:C.creatorName,labelType:C.labelType,pageID:C.pageID,profileURI:C.profileURI}),c("React").createElement(c("Middot.react"),{key:"middot-creator"})];var D=null;if(t.body&&t.body.markdown_enabled&&t.body.markup)D=[c("React").createElement(c("Middot.react"),{key:"middot-markdownNote"}),c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("a",{className:"uiLinkSubtle"},i._("Formatted")),bootloadLoader:c("JSResource")("UFICommentMarkdownFormattedLink.react").__setRef("UFICommentMetadata.react"),comment:t,key:"markdown-link"})];return c("React").createElement("span",null,B,w,v,z,D)};r.prototype.componentDidUpdate=function(s){var t=s.comment,u=this.props.comment;if(!t.editnux&&!!u.editnux)c("Bootloader").loadModules(["LegacyContextualDialog"],function(v){if(!this.editLinkRef)return;var w=new v();w.init(u.editnux).setContext(c("ReactDOM").findDOMNode(this.editLinkRef)).setWidth(300).setPosition("below").show()}.bind(this),"UFICommentMetadata.react")};f.exports=r}),null);
__d("UFICommentShareLink.react",["cx","fbt","BootloadedComponent.react","Event","JSResource","React","ReactDOM","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=false;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.getCanRender=function(o){return!!(o&&o.canshare&&o.commentshareuri)};function n(o,p){k.constructor.call(this,o,p);this.$UFICommentShareLink1=new(c("SubscriptionsHandler"))();this.state={nuxShown:false}}n.prototype.componentDidMount=function(){var o=c("ReactDOM").findDOMNode(this.refs.root);if(o&&this.$UFICommentShareLink2())this.$UFICommentShareLink1.addSubscriptions(c("Event").listen(o,"click",this.$UFICommentShareLink3.bind(this)))};n.prototype.componentWillUnmount=function(){this.$UFICommentShareLink1.release()};n.prototype.UNSAFE_componentWillReceiveProps=function(o){if(this.props.comment&&!this.props.comment.hasviewerliked&&o.comment&&o.comment.hasviewerliked)this.$UFICommentShareLink4()};n.prototype.$UFICommentShareLink3=function(){this.setState({nuxShown:false})};n.prototype.$UFICommentShareLink2=function(){return this.props.contextArgs&&this.props.contextArgs.commentShareNuxConfig&&this.props.contextArgs.commentShareNuxConfig.nuxKey||null};n.prototype.$UFICommentShareLink4=function(){if(m||!this.$UFICommentShareLink2())return;m=true;this.setState({nuxShown:true})};n.prototype.$UFICommentShareLink5=function(){if(!this.state.nuxShown)return null;var o=this.$UFICommentShareLink2();if(!o)return null;return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",{className:"hidden_elem"}),bootloadLoader:c("JSResource")("UFICommentShareNUX.react").__setRef("UFICommentShareLink.react"),nuxContext:this.refs.root,nuxKey:o})};n.prototype.render=function(){var o=this.props.comment;if(!this.constructor.getCanRender(o))return null;var p=i._("Share this comment"),q=i._("Share");return c("React").createElement("a",{className:"share_action_link",href:o.commentshareuri,role:"button",ref:"root",rel:"dialog",title:p},q,this.$UFICommentShareLink5())};n.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n}),null);
__d("XUFISubscribeCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/subscribe/",{})}),null);
__d("UFICommentSubscribeLink.react",["fbt","AsyncRequest","React","XUFISubscribeCommentController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l,m){j.constructor.call(this,l,m);var n=l.comment.issubscribed;this.state={isSubscribed:n?n:false}}k.prototype.render=function(){var l=h._("Subscribe to this comment"),m=h._("Subscribe"),n=h._("Unsubscribe to this comment"),o=h._("Unsubscribe");return c("React").createElement("a",{href:"#",role:"button",title:this.state.isSubscribed?n:l,onClick:function(){return this.onLinkClick()}.bind(this)},this.state.isSubscribed?o:m)};k.prototype.onLinkClick=function(){var l=this.props.comment,m=c("XUFISubscribeCommentController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(m).setData({comment_id:l.fbid,ft_ent_identifier:l.ftentidentifier,is_subscribe:!this.state.isSubscribed}).setMethod("POST").setHandler(function(n){this.setState({isSubscribed:!this.state.isSubscribed})}.bind(this)).setErrorHandler(function(n){}).send()};f.exports=k}),null);
__d("XVideoBroadcastPinnedCommentsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/pinnedcomments/",{})}),null);
__d("UFILivePinnedCommentLink.react",["cx","fbt","AsyncRequest","BanzaiODS","React","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","UFIVideoPlayerRegistry","XVideoBroadcastPinnedCommentsController","ifRequired"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onLinkClick=function(){__p&&__p();var r=c("UFILivePinnedCommentStore").getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(this.props.isPinned)c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(this.props.contextArgs));else c("UFISharedDispatcher").dispatch(c("UFIStoryAction").pinComment(this.props.contextArgs,this.props.commentID));var s=this.props.contextArgs.isBroadcasterUFI?this.getCurrentBroadcastTime():c("UFIVideoPlayerRegistry").getAvailableVideoPlayerControllerTime(this.props.contextArgs.instanceid);if(s===null){c("BanzaiODS").bumpEntityKey("streaming_comments","pin_with_no_timestamp");return}var t=c("XVideoBroadcastPinnedCommentsController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(t).setData({video_id:this.props.contextArgs.fluentContentToken,video_time_offset:s,comment_fbid:this.props.isPinned?null:this.props.commentFBID}).setMethod("POST").setErrorHandler(function(u){if(r)c("UFISharedDispatcher").dispatch(c("UFIStoryAction").pinComment(this.props.contextArgs,r));else c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(this.props.contextArgs))}.bind(this)).send()}.bind(this),n}l.prototype.getCurrentBroadcastTime=function(){return c("ifRequired")("LiveVideoBroadcastBroadcastStore",function(m){return m.getCurrentBroadcastTime()})};l.prototype.render=function(){var m=i._("Unpin Comment"),n=i._("Pin Comment");return c("React").createElement("a",{className:"uiLink",href:"#",onClick:this.onLinkClick},this.props.isPinned?m:n)};f.exports=l}),null);
__d("XVideoBroadcastClearPinCommentEventAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/pinnedcomments/clear/",{})}),null);
__d("UFILiveVODUnpinCommentLink.react",["cx","fbt","AsyncRequest","Bootloader","React","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","XVideoBroadcastClearPinCommentEventAsyncController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFILiveVODUnpinCommentLink1=function(){c("Bootloader").loadModules(["SimpleXUIDialog"],function(r){r.showConfirm(i._("If you unpin this comment, you won't be able to pin it again."),i._("Unpin Comment"),function(s){if(!s)return;new(c("AsyncRequest"))().setURI(c("XVideoBroadcastClearPinCommentEventAsyncController").getURIBuilder().getURI()).setData({pin_event_id:this.props.pinEventID}).setMethod("POST").setHandler(function(t){if(this.props.commentID===c("UFILivePinnedCommentStore").getPinnedCommentID(this.props.contextArgs.ftentidentifier))c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(this.props.contextArgs))}.bind(this)).send()}.bind(this))}.bind(this),"UFILiveVODUnpinCommentLink.react")}.bind(this),n}l.prototype.render=function(){return c("React").createElement("a",{className:"uiLink",href:"#",onClick:this.$UFILiveVODUnpinCommentLink1},i._("Unpin Comment"))};f.exports=l}),null);
__d("UFIPrivateReplyIndicator.react",["fbt","PagesPrivateReplyConstants","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("PagesPrivateReplyConstants").Status;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return c("React").createElement("span",null,h._("Page responded privately"));return null};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/messaging/private_reply/dialog/",{activity_id:{type:"String",required:true},hide_attachments:{type:"Bool",defaultValue:false}})}),null);
__d("UFIPrivateReplyLink.react",["cx","fbt","ActorURI","BootloadedComponent.react","JSResource","Link.react","PagesPrivateReplyConstants","React","XPagesMessagingPrivateReplyDialogController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("PagesPrivateReplyConstants").Status,m=c("PagesPrivateReplyConstants").Type,n=false;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;o.willRender=function(p,q){if(!p)return false;if(p.hasReplyPermission&&q===p.pageID)return true;return false};o.prototype.render=function(){var p=this.props.context;if(p.hasReplyPermission&&this.props.actorID===p.pageID){if(p.status===l.REPLYABLE)return this.$UFIPrivateReplyLink2();else if(p.status===l.ALREADY_REPLIED)return this.$UFIPrivateReplyLink3();return this.$UFIPrivateReplyLink4()}return null};o.prototype.$UFIPrivateReplyLink5=function(){if(!this.props.shouldShowNux||n)return null;n=true;return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",{className:"hidden_elem"}),bootloadLoader:c("JSResource")("UFICommentPrivateReplyNux.react").__setRef("UFIPrivateReplyLink.react"),nuxContext:function(){return this.$UFIPrivateReplyLink1}.bind(this),nuxKey:"pages_comment_pr_nux"})};o.prototype.$UFIPrivateReplyLink2=function(){var p=c("ActorURI").create(c("XPagesMessagingPrivateReplyDialogController").getURIBuilder().setString("activity_id",this.props.activityID).getURI(),this.props.context.pageID);return c("React").createElement(c("Link.react"),{className:"_50u0 _60p- _14hj",href:p,ref:function(q){this.$UFIPrivateReplyLink1=q}.bind(this),rel:"dialog"},this.$UFIPrivateReplyLink6(),this.$UFIPrivateReplyLink5())};o.prototype.$UFIPrivateReplyLink4=function(){var p=void 0;switch(this.props.context.status){case l.EXPIRED:p=i._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[i._enum(this.$UFIPrivateReplyLink7(),{comments:"comments",reviews:"reviews",posts:"posts"})]);break;case l.NOT_USER_CREATED:p=i._("Pages can't send private messages to other Pages.");break;case l.CANNOT_MESSAGE:p=i._("This person can't receive a message reply from your Page.");break}return c("React").createElement("span",{className:"_50u0 _50u4 _60p-","data-hover":p?"tooltip":null,"data-tooltip-content":p},this.$UFIPrivateReplyLink6())};o.prototype.$UFIPrivateReplyLink3=function(){return c("React").createElement(c("Link.react"),{className:"_50u0 _14hk _60p-",href:this.props.context.permalink||"#"},this.props.seeResponseLabel?i._("See Response"):this.$UFIPrivateReplyLink6())};o.prototype.$UFIPrivateReplyLink6=function(){return i._("Message")};o.prototype.$UFIPrivateReplyLink7=function(){switch(this.props.context.activityType){case m.COMMENT_PAGE_POST:case m.COMMENT_WALL_POST:case m.COMMENT_REVIEW:return"comments";case m.REVIEW:return"reviews";default:return"posts"}};function o(){j.apply(this,arguments)}f.exports=o}),null);
__d("UFICommentActions.react",["ix","cx","fbt","BootloadedComponent.react","CommentApprovalsResponsibleUserAction","FluxContainer","JSResource","LiveVideoThreadedCommentsUtils","Middot.react","PublicConversationsUnicornTypedLogger","React","ReactFragment","ShimButton.react","UFIAcceptedAnswerStore","UFIAddCommentAction","UFICentralUpdates","UFICommentAction","UFICommentLikeCount.react","UFICommentLikeLink.react","UFICommentMetadata.react","UFICommentReactionCount.react","UFICommentShareLink.react","UFICommentSubscribeLink.react","UFIConfig","UFIConstants","UFILivePinnedCommentLink.react","UFILivePinnedCommentStore","UFILiveVODUnpinCommentLink.react","UFIPrivateReplyIndicator.react","UFIPrivateReplyLink.react","UFISharedDispatcher","UFIStoryAction","WebCommentViewOption","emptyFunction","fbglyph","gkx"],(function aa(ba,a,ca,da,b,ea,c,fa,d){"use strict";__p&&__p();var e,f,g=a("React").PropTypes,h=a("UFIConstants").UFIStatus,i="fsm fwn fcg UFICommentActions",j="UFIDeletedMessageIcon",k="UFIDeletedMessage";e=babelHelpers.inherits(l,a("React").Component);f=e&&e.prototype;l.getStores=function(){return[a("UFIAcceptedAnswerStore"),a("UFILivePinnedCommentStore")]};l.calculateState=function(m,n){var o=n.comment,p=n.feedback,q=a("UFIAcceptedAnswerStore").get(o.ftentidentifier,p.acceptedanswer),r=a("UFILivePinnedCommentStore").getPinnedCommentID(o.ftentidentifier),s=this.calculatePinActionLinkState(o,r);return{acceptedAnswerState:q,pinActionLinkState:s}};l.calculatePinActionLinkState=function(m,n){if(m.__typename==="local")return"None";if(n===m.id)return"MayUnpin";return"MayPin"};function l(m){f.constructor.call(this,m);this.$UFICommentActions1=function(){this.context.dispatch(a("UFIStoryAction").changeAcceptedAnswer(this.props.contextArgs,this.props.comment,true))}.bind(this);this.$UFICommentActions2=function(){this.context.dispatch(a("UFIStoryAction").changeAcceptedAnswer(this.props.contextArgs,this.props.comment,false))}.bind(this);this.state=l.calculateState(null,m)}l.prototype.render=function(){__p&&__p();var m,n=this.props,o=n.comment,p=n.permalink,q=n.feedback,r=n.parentCanComment,s=n.markedAsSpamHere,t=o.status===h.SPAM_DISPLAY,u=n.showReplyLink,v=n.hideAsSpamForPageAdmin,w=n.translateLink,x=void 0,y=void 0,z=void 0,A=void 0,B=void 0,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0,L=void 0,M=o.__typename!=="local"&&o.status!==h.LIVE_DELETED&&!o.tipOptionIndex;if(M){if(o.needsApproval||o.canAppeal||o.canSecure||o.appealStatus!==null)I=a("React").createElement("a",{onClick:function(event){return this.context.dispatch(a("UFICommentAction").remove(n.contextArgs,n.comment,event.target,a("emptyFunction")))}.bind(this),href:"#",role:"button"},d._("Delete"));if(o.canAppeal&&o.appealStatus!==a("CommentApprovalsResponsibleUserAction").APPEALED)J=a("React").createElement("a",{onClick:function(event){return this.context.dispatch(a("UFICommentAction").appealSpam(n.contextArgs,o,event.target,n.feedback))}.bind(this),href:"#",role:"button"},d._("Not Spam"));if(o.canSecure&&o.appealStatus!==a("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT)K=a("React").createElement("a",{onClick:function(event){return this.context.dispatch(a("UFICommentAction").secureAccount(n.contextArgs,o,event.target,n.feedback))}.bind(this),href:"#",role:"button"},d._("I didn't post this"));if(o.needsApproval)H=a("React").createElement("a",{onClick:function(event){return this.context.dispatch(a("UFICommentAction").keepSpam(n.contextArgs,o,event))}.bind(this),href:"#",role:"button"},d._("Keep Comment"));if(t&&!s){if(n.viewerCanMarkNotSpam)x=a("React").createElement("a",{onClick:function(event){return this.context.dispatch(a("UFICommentAction").markAsNotSpam(n.contextArgs,o,event))}.bind(this),className:"UFICommentNotSpamLink",href:"#",role:"button"},d._("Unhide"));if(v&&q.isthreaded&&o.cancomment&&u)C=this.renderCommentReply(o)}else{y=a("UFICommentLikeLink.react").getCanRender(o)?a("React").createElement(a("UFICommentLikeLink.react"),{comment:o,contextArgs:n.contextArgs,feedback:q}):null;if(q.isthreaded&&o.cancomment&&u||!!o.parentcommentid&&q.cancomment&&r)C=this.renderCommentReply(o);if(o.canviewerreact&&!n.contextArgs.isaskquestion)A=!this.props.hideReactionCount&&o.reactioncount>0?a("React").createElement(a("UFICommentReactionCount.react"),{comment:o,actorForPost:q.actorforpost,supportedReactions:q.supportedreactions,contextArgs:n.contextArgs}):null;else A=!this.props.hideReactionCount&&o.likecount>0?a("React").createElement(a("UFICommentLikeCount.react"),{comment:o,actorForPost:q.actorforpost,contextArgs:n.contextArgs}):null;D=this.renderMessageReply(o,q)}if(o.attachment&&o.attachment.type==="share"&&!o.attachment.disableRemove&&o.canremove){var ga="_460h";E=a("React").createElement("a",{className:ga,href:"#",onClick:function(event){return this.context.dispatch(a("UFICommentAction").removePreview(n.contextArgs,o,event.target))}.bind(this),role:"button"},d._("Remove Preview"))}if(a("UFICommentShareLink.react").getCanRender(o))z=a("React").createElement(a("UFICommentShareLink.react"),{contextArgs:n.contextArgs,comment:o});if(o.cansubscribe)L=a("React").createElement(a("UFICommentSubscribeLink.react"),{contextArgs:n.contextArgs,comment:o})}if(a("UFIConfig").publicConversationsUnicornWhitelist)F=a("React").createElement("a",{className:"share_action_link",href:"#",role:"button",title:"[FB Only] Mark this comment as a great comment for futher review.",onClick:function $(event){return new(a("PublicConversationsUnicornTypedLogger"))().setCommentFbid(o.fbid).log()}},"Unicorn");var ha=n.contextArgs.islivestreaming||n.contextArgs.isLivingRoom,N=ha?null:a("React").createElement(a("UFICommentMetadata.react"),{comment:o,onRetrySubmit:function(){return this.context.dispatch(a("UFIAddCommentAction").retrySubmit(n.contextArgs,o))}.bind(this),permalink:p,shortenTimestamp:n.contextArgs.shortenTimestamp,showPermalink:n.showPermalink,contextArgs:n.contextArgs}),O=null;if(n.contextArgs.enablePinLiveComments&&!o.tipOptionIndex)if(n.contextArgs.islivestreaming&&this.state.pinActionLinkState!=="None")O=a("React").createElement(a("UFILivePinnedCommentLink.react"),{commentID:o.id,commentFBID:o.fbid,contextArgs:n.contextArgs,isPinned:this.state.pinActionLinkState==="MayUnpin"});else if(n.contextArgs.isLiveVOD&&this.state.pinActionLinkState==="MayUnpin"){var P=a("UFILivePinnedCommentStore").getPinEventID(n.contextArgs.ftentidentifier);if(P!==null)O=a("React").createElement(a("UFILiveVODUnpinCommentLink.react"),{commentID:o.id,contextArgs:n.contextArgs,pinEventID:P})}var Q={};if(q.customcommentactionlinks){var R=function R(S){var $=q.customcommentactionlinks[S];if($.showInMenu)return"continue";var Z=function Z(event){return a("UFICentralUpdates").inform($.type,{comment:o,feedback:q})};Q[$.type]=a("React").createElement("a",{href:"#",onClick:Z,role:"button"},$.title)};for(var S in q.customcommentactionlinks){var m=R(S);if(m==="continue")continue}}var T=void 0;if(o.needsApproval)T=babelHelpers["extends"]({keepToggle:H,deleteToggle:I,metadata:N},Q);else if(o.canAppeal||o.canSecure||(o.appealStatus===a("CommentApprovalsResponsibleUserAction").APPEALED||o.appealStatus===a("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT)&&!o.isApproved)T=babelHelpers["extends"]({appealToggle:J,secureToggle:K,deleteToggle:I,metadata:N},Q);else if(n.orderingMode===a("WebCommentViewOption").LIVE_STREAMING&&n.contextArgs.islivestreaming&&a("LiveVideoThreadedCommentsUtils").isEnabled())T=babelHelpers["extends"]({likeToggle:y,unicornButton:F,commentReply:C,spamToggle:x,likeCount:A,spamCount:B,livePinCommentLink:O,metadata:N},Q,{removePreview:E});else if(n.orderingMode===a("WebCommentViewOption").LIVE_STREAMING)T=babelHelpers["extends"]({likeToggle:y,unicornButton:F,spamToggle:x,likeCount:A,spamCount:B,livePinCommentLink:O,metadata:N},Q,{removePreview:E});else if(q.isqanda)T=babelHelpers["extends"]({likeCount:A,spamCount:B,likeToggle:y,unicornButton:F,commentReply:C,translateLink:w,shareComment:z,messageReply:D,spamToggle:x},Q,{livePinCommentLink:O,metadata:N,removePreview:E});else if(n.contextArgs.isaskquestion&&!o.parentcommentid){if(M)G=this.renderAcceptAnswerButton(n.contextArgs,q,o);T=babelHelpers["extends"]({likeToggle:y,unicornButton:F,commentReply:C,translateLink:w,messageReply:D,spamToggle:x,removePreview:E,shareComment:z,subscribeComment:L,likeCount:A,spamCount:B,acceptAnswerButton:G},Q,{livePinCommentLink:O,metadata:N})}else if(n.contextArgs.entstream)T=babelHelpers["extends"]({livePinCommentLink:O,metadata:N,likeToggle:y,unicornButton:F,likeCount:A,commentReply:C,translateLink:w,messageReply:D,shareComment:z,subscribeComment:L,spamCount:B,spamToggle:x,removePreview:E},Q);else if(q.isthreaded)T=babelHelpers["extends"]({likeToggle:y,unicornButton:F,commentReply:C,translateLink:w,messageReply:D,spamToggle:x,removePreview:E,shareComment:z,subscribeComment:L,likeCount:A,spamCount:B},Q,{livePinCommentLink:O,metadata:N});else T=babelHelpers["extends"]({livePinCommentLink:O,metadata:N,likeToggle:y,unicornButton:F,shareComment:z,subscribeComment:L,likeCount:A,spamCount:B,commentReply:C,translateLink:w,messageReply:D,spamToggle:x,removePreview:E},Q);if(o.status===h.LIVE_DELETED){var U=d._("Comment deleted"),ia=a("React").createElement("span",{className:k},a("React").createElement("i",{"aria-label":U,className:j,"data-hover":"tooltip","data-tooltip-content":U,role:"img"}));T.deletionWarning=ia}if(o.isApproved){var V=d._("This comment was originally marked as spam");T.isApproved=a("React").createElement(a("BootloadedComponent.react"),{bootloadLoader:a("JSResource")("Image.react").__setRef("UFICommentActions.react"),bootloadPlaceholder:a("React").createElement("span",null),"data-hover":"tooltip","data-tooltip-content":V,"aria-label":V,src:c("119369"),"data-tooltip-alignh":"left"})}var W=true,X={};for(var Y in T){var Z=T[Y];if(Z){var ja=a("React").createElement(a("Middot.react"),{key:"middot-"+Y});X[Y]=W?Z:a("ReactFragment").create({middot:ja,action:Z});W=false}}return a("React").createElement("div",{className:i},a("ReactFragment").create(X))};l.prototype.renderCommentReply=function(m){__p&&__p();var n=this.props.contextArgs.islivestreaming?function(){var o=this.props,p=o.contextArgs,q=o.feedback;if(p.islivestreaming&&q.isthreaded&&m.cancomment)this.context.dispatch(a("UFIStoryAction").showFacecastReplies(p,m.id))}.bind(this):function(){var o=this.props,p=o.contextArgs,q=o.feedback;if(q.isthreaded&&m.cancomment)this.context.dispatch(a("UFIStoryAction").showReplies(p,m.id,m));else if(m.parentcommentid)this.context.dispatch(a("UFIStoryAction").showReplies(p,m.parentcommentid,m));if(q.targetiscomment)a("UFISharedDispatcher").dispatch(a("UFIStoryAction").showComments(p))}.bind(this);return a("React").createElement("a",{className:"UFIReplyLink _460i",href:"#",onClick:n,role:"button"},d._("Reply"))};l.prototype.renderMessageReply=function(m,n){__p&&__p();if(m.messagereply){if(a("UFIPrivateReplyLink.react").willRender(m.messagereply,n.actorforpost))return a("React").createElement(a("UFIPrivateReplyLink.react"),{actorID:n.actorforpost,activityID:m.id,context:m.messagereply,seeResponseLabel:true,shouldShowNux:this.props.contextArgs.shouldShowCommentPrivateReplyNux});else if(a("UFIPrivateReplyIndicator.react").willRender(m.messagereply.status))return a("React").createElement(a("UFIPrivateReplyIndicator.react"),{replyStatus:m.messagereply.status})}else if(m.chattobuy){var o="_460j";return a("React").createElement("a",{className:o,href:m.chattobuy,role:"button",rel:"async-dialog"},d._("Message"))}return null};l.prototype.renderAcceptAnswerButton=function(m,n,o){__p&&__p();var p=n.actorid===n.actorforpost;if(this.state.acceptedAnswerState.type==="NoneAccepted"){if(!p)return null;var q="_460k";return a("React").createElement(a("ShimButton.react"),{className:q,form:"link",onClick:this.$UFICommentActions1},d._("Accept answer"))}if(this.state.acceptedAnswerState.id!==o.id)return null;var r="_460l";return p?a("React").createElement(a("ShimButton.react"),{className:r,form:"link",onClick:this.$UFICommentActions2},d._("Unaccept answer")):d._("Accepted answer")};l.contextTypes={dispatch:g.func};b.exports=a("FluxContainer").create(l,{withProps:true})}),null);
__d("GamesVideoFanSupportAttachmentHandler",["cx","ifRequired"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="tip_attachment_support_link",j={_registeredLinks:new Set(),registerFanSupportAttachment:function k(l){if(!l)return;var m=l.querySelector('[name="'+i+'"]');if(m&&!this._registeredLinks.has(m)){m.addEventListener("mouseover",this._onLinkMouseover.bind(this,m));m.addEventListener("click",this._onLinkClick.bind(this,m));this._registeredLinks.add(m)}},_onLinkMouseover:function k(l){var m="_1k48";if(this._isSupportOverlayRegistered())l.classList.remove(m);else l.classList.add(m)},_onLinkClick:function k(l,event){if(this._isSupportOverlayRegistered()){var m=this._getTahoeView();m&&m.toggleSupportOverlay();event.stopPropagation()}},_isSupportOverlayRegistered:function k(){var l=this._getTahoeView();return l&&l.isSupportOverlayRegistered()},_getTahoeView:function k(){__p&&__p();var l=undefined;c("ifRequired")("Tahoe",function(m){c("ifRequired")("TahoeVideoView",function(n){var o=m.get();if(o){var p=o.getView();if(p instanceof n)l=p}})});return l}};f.exports=j}),null);
__d("XAnimatedImageInLiveCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/gifs/in_live_comment/",{})}),null);
__d("XDonationCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fundraiser_for_story/live_comment_attachment/",{})}),null);
__d("XFileCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/files_in_comments/live_comment_attachment/",{})}),null);
__d("XTipJarCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/tip_jar/live_comment_attachment/",{})}),null);
__d("XVideoInLiveCommentPreviewController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/in_live_comment/",{})}),null);
__d("UFICommentAttachment.react",["cx","AsyncRequest","BootloadedComponent.react","CSS","DOM","DOMQuery","GamesVideoFanSupportAttachmentHandler","HTML","Image.react","JSResource","Link.react","LitestandShareAttachment","Random","React","ReactDOM","SubscriptionsHandler","UFILocallyComposedCommentStore","XAnimatedImageInLiveCommentPreviewController","XDonationCommentPreviewController","XFileCommentPreviewController","XTipJarCommentPreviewController","XUISpinner.react","XVideoInLiveCommentPreviewController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=55,l="ufi_comment_photo",m=80,n="ufi_comment_sticker";i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={localCommentIDs:c("UFILocallyComposedCommentStore").getStateForInstance(this.props.comment.ufiinstanceid),randomInstanceID:Math.floor(c("Random").random()*1e4)}}o.prototype.$UFICommentAttachment2=function(p){return p.photo_comment||p.video_comment||p.file_comment||p.attachment};o.prototype.$UFICommentAttachment3=function(p,q){__p&&__p();var r=this.props.allowCustomStickers?k:m,s=void 0,t=void 0,u=void 0;if(q>p){u=r/q;s=p*u;t=q*u}else{u=r/p;s=p*u;t=q*u}return{height:Math.round(s),width:Math.round(t)}};o.prototype.componentDidMount=function(){var p=this.$UFICommentAttachment2(this.props.comment);if(p)this.renderAttachment(p);this.$UFICommentAttachment1=new(c("SubscriptionsHandler"))();this.$UFICommentAttachment1.addSubscriptions(c("UFILocallyComposedCommentStore").addListener(function(){this.setState({localCommentIDs:c("UFILocallyComposedCommentStore").getStateForInstance(this.props.comment.ufiinstanceid)})}.bind(this)))};o.prototype.shouldComponentUpdate=function(p,q){var r=this.$UFICommentAttachment2(this.props.comment),s=this.$UFICommentAttachment2(p.comment);if(!r&&!s)return false;if(!r||!s||r.markup!=s.markup)return true;else return false};o.prototype.componentDidUpdate=function(p){var q=this.$UFICommentAttachment2(this.props.comment);if(!q)return;if(q.type!=="sticker"&&q.type!=="photo")this.renderAttachment(q)};o.prototype.componentWillUnmount=function(){if(this.refs&&this.refs.contents){var p=c("ReactDOM").findDOMNode(this.refs.contents);c("DOM").empty(p)}this.$UFICommentAttachment1&&this.$UFICommentAttachment1.release()};o.prototype.renderAttachment=function(p){__p&&__p();if(p&&this.refs&&this.refs.contents&&p.markup){var q=p.markup;if(c("HTML").isHTML(q.markup))q=c("HTML").replaceJSONWrapper(q.markup).getRootNode();var r=q.parentNode,s=c("ReactDOM").findDOMNode(this.refs.contents);if(r&&r!==s)q=q.cloneNode(true);if(this.props.disableTheater){var t=q.querySelector('a[rel="theater"]');if(t)c("DOM").setAttributes(t,{target:"_blank",rel:""})}c("DOM").setContent(s,q);if(p.type=="share"){var u="_6m2",v=s&&c("CSS").hasClass(s,u)?s:c("DOMQuery").scry(s,"."+u)[0];v=v?v:s;if(v instanceof HTMLElement)c("LitestandShareAttachment").init(v)}else if(p.type==="TIP_JAR_PAYMENT")c("GamesVideoFanSupportAttachmentHandler").registerFanSupportAttachment(q)}else if(p&&p.type=="video"&&!p.markup){var w=c("XVideoInLiveCommentPreviewController").getURIBuilder();new(c("AsyncRequest"))(w.getURI()).setMethod("POST").setData({video_id:p.target.id}).setHandler(function(x){this.renderAttachment(x.payload.video_preview.video_comment)}.bind(this)).send()}else if(p&&p.type=="gif"&&!p.markup)new(c("AsyncRequest"))(c("XAnimatedImageInLiveCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$UFICommentAttachment4(p.type)}).send();else if(p&&p.type=="file"&&!p.markup)new(c("AsyncRequest"))(c("XFileCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$UFICommentAttachment4(p.type)}).send();else if(p&&p.type=="donation"&&!p.markup)new(c("AsyncRequest"))(c("XDonationCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$UFICommentAttachment4(p.type)}).send();else if(p&&p.type=="TIP_JAR_PAYMENT"&&!p.markup)new(c("AsyncRequest"))(c("XTipJarCommentPreviewController").getURIBuilder().getURI()).setMethod("POST").setData({comment_id:this.props.comment.id,dom_selector:"div#"+this.$UFICommentAttachment4(p.type)}).send()};o.prototype.renderSticker=function(p){var q=this.$UFICommentAttachment3(Number(p.metadata.height),Number(p.metadata.width)),r=null,s=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){r=p.metadata.sprite_uri_2x;s=p.metadata.source_uri_2x}else{r=p.metadata.sprite_uri;s=p.metadata.source_uri}return c("React").createElement(c("BootloadedComponent.react"),{accessibilityLabel:p.metadata.accessibilityLabel,bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),null),bootloadLoader:c("JSResource")("Sticker.react").__setRef("UFICommentAttachment.react"),className:"UFICommentStickerAttachment",animationTrigger:"load_and_hover",frameCount:p.metadata.frameCount,frameRate:p.metadata.frameRate,framesPerCol:p.metadata.framesPerCol,framesPerRow:p.metadata.framesPerRow,spriteURI:r,sourceHeight:q.height,sourceURI:s,sourceWidth:q.width,testID:n})};o.prototype.renderPhoto=function(p){var q="_2rn3 _4-eo";return c("React").createElement("div",{className:"_4iv9"},c("React").createElement(c("Link.react"),{className:q,"data-testid":l,rel:"theater",href:p.metadata.url},c("React").createElement("div",{style:{height:p.metadata.height}},c("React").createElement(c("Image.react"),{src:p.metadata.preview_uri}))))};o.prototype.renderShare=function(p){return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("UFILiveCommentLinkPreview.react").__setRef("UFICommentAttachment.react"),attachment:p})};o.prototype.renderLivePlaceInfo=function(p){return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("PlaceListLiveCommentAttachment.react").__setRef("UFICommentAttachment.react"),commentID:this.props.comment.fbid,data:p,postID:this.props.comment.ftentidentifier})};o.prototype.renderPlaceInfo=function(p){var q=this.props.comment.__typename==="local"||this.state.localCommentIDs[this.props.comment.id];return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),null),bootloadLoader:c("JSResource")("MultiPlacePageInfoCard.react").__setRef("UFICommentAttachment.react"),isLocallyComposed:q,postID:this.props.comment.ftentidentifier},p.props))};o.prototype.renderProductInfo=function(p){if(p.props.category==="Books")return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),null),bootloadLoader:c("JSResource")("ProductBookRecommendationCard.react").__setRef("UFICommentAttachment.react")},p.props));return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),null),bootloadLoader:c("JSResource")("ProductRecommendationCard.react").__setRef("UFICommentAttachment.react")},p.props))};o.prototype.renderUpsellInfo=function(p){if(p.subtype&&p.subtype=="question_triggered_page_msg")return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:c("React").createElement(c("XUISpinner.react"),null),bootloadLoader:c("JSResource")("PageCommentQuestionMessageCard.react").__setRef("UFICommentAttachment.react")},p));return c("React").createElement("span",null)};o.prototype.$UFICommentAttachment4=function(p){return p+"_comment_attachment_"+this.props.comment.id+this.state.randomInstanceID};o.prototype.render=function(){__p&&__p();var p=this.$UFICommentAttachment2(this.props.comment);if(p)if(p.type==="sticker")return this.renderSticker(p);else if(p.type==="gif"||p.type==="donation"||p.type==="TIP_JAR_PAYMENT")return c("React").createElement("div",{ref:"contents",id:this.$UFICommentAttachment4(p.type)},c("React").createElement(c("XUISpinner.react"),null));else if(p.type==="photo")return this.renderPhoto(p);else if(p.type==="live_share")return this.renderShare(p);else if(p.type=="comment_place_info")return this.renderPlaceInfo(p);else if(p.type=="live_comment_place_info")return this.renderLivePlaceInfo(p);else if(p.type=="comment_product_info")return this.renderProductInfo(p);else if(p.type=="upsell_info")return this.renderUpsellInfo(p);else return c("React").createElement("div",{ref:"contents"});return c("React").createElement("span",null)};f.exports=o}),null);
__d("HovercardLinkInterpolator",["cx","fbt","Badge.react","CommentMentionsGatingConfig","HovercardLink","Link.react","React","UFIActorIconContainer.react","URI","isFacebookURI","isRTL"],(function a(b,c,d,e,f,g,h,i){__p&&__p();function j(k,l,m,n,o){__p&&__p();var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?"_blank":null),s,t=(!q.external?"profileLink":"")+(q.weakreference?" weakReference":""),u,v=q.hashtag?k.substring(1):k;u=c("isRTL")(v)?"rtl":"ltr";var w=new(c("URI"))(q.url);if(c("isFacebookURI")(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.statusupdate&&!q.video,z=y?{"data-hovercard":c("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(q,n,q.hovercardlocation?q.hovercardlocation:o,null,p).toString()}:{};if(q.hashtag)s=c("React").createElement("a",babelHelpers["extends"]({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c("React").createElement("span",{"aria-label":i._("hashtag"),className:"_58cl"},k.substring(0,1)),c("React").createElement("span",{className:"_58cm"},k.substring(1)));else if(q.type==="user"&&c("CommentMentionsGatingConfig").enabled_rich_comment_mentions)s=c("React").createElement("div",{className:"_35mm"},c("React").createElement(c("Link.react"),babelHelpers["extends"]({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),c("React").createElement("span",{className:"_35mo"},c("React").createElement("span",{className:"_35mp"},c("React").createElement(c("UFIActorIconContainer.react"),{actorID:q.id.toString(),tinyIcon:true})),c("React").createElement("span",{className:"_35mq"},k))));else{var A=[];if(q.weakreference)A.push(c("React").createElement("i",{key:"weakreference",className:"UFIWeakReferenceIcon"}));A.push(k);if(q.noncoworker)A.push(c("React").createElement(c("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}));if(q.dialogurl)s=c("React").createElement(c("Link.react"),babelHelpers["extends"]({},z,{className:t,dir:u,ajaxify:q.dialogurl,rel:"dialog",href:{url:w.toString(),shimhash:x},target:r}),A);else s=c("React").createElement(c("Link.react"),babelHelpers["extends"]({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),A)}return s}f.exports=j}),null);
__d("TextDelightRange.react",["cx","Bootloader","CommentPrivacyValue","PrivateCommentsConfig","React","SubscriptionsHandler","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$TextDelightRange2=false,this.$TextDelightRange3=new(c("SubscriptionsHandler"))(),m}k.prototype.componentDidMount=function(){this.$TextDelightRange2=true;if(this.props.campaignID)c("Bootloader").loadModules(["TextDelightController"],function(l){if(this.$TextDelightRange2===false)return;this.$TextDelightRange3.addSubscriptions(l.attachClickListener(this.$TextDelightRange1,this.props.campaignID,"comment"))}.bind(this),"TextDelightRange.react")};k.prototype.componentWillUnmount=function(){this.$TextDelightRange2=false;this.$TextDelightRange3.release()};k.prototype.render=function(){__p&&__p();var l=this.props.delightStyles.filter(function(m){var n=m.style;return n!=null&&!(n==="color"&&this.props.commentPrivacy===c("CommentPrivacyValue").OWNER_OR_COMMENTER&&c("PrivateCommentsConfig").dark_comment_theme_enabled)}.bind(this));return c("React").createElement("span",{className:"_ezo",style:c("createObjectFrom")(l.map(function(m){var n=m.style;return n.replace(/-([a-z])/gi,function(o,p){return p.toUpperCase()})}),l.map(function(m){var n=m.value;return n})),ref:function(m){this.$TextDelightRange1=m}.bind(this)},this.props.children)};f.exports=k}),null);
__d("URITruncator",["fbt","URI"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){__p&&__p();if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;var o=c("URI").tryParseURI(m);if(!o)return m.substring(0,n-k)+j;var p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment("");if(o.toString().length<=n-k)return o.toString()+j}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j}}}var u=o.getPath()+(q?j:""),v=u.split("/"),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var A=z.length-1,B=z.length-w-k,C=/[a-zA-Z0-9]/;w+=k;while(w>0){while(A>0&&C.test(z[A])){A--;w--}while(A>0&&!C.test(z[A])){A--;w--}}if(A===0)A=B-1;v[y]=z.substring(0,A+1)+j}else{x++;w-=z.length;if(x===1)w+=k;else w--}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j)}var D=p+v.join("/");if(D.length>n)D=D.substring(0,n-k)+j;return D}f.exports=l}),null);
__d("VideoTimestampsClicksWWWTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$VideoTimestampsClicksWWWTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$VideoTimestampsClicksWWWTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:VideoTimestampsClicksWWWLoggerConfig",this.$VideoTimestampsClicksWWWTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$VideoTimestampsClicksWWWTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$VideoTimestampsClicksWWWTypedLogger1)};h.prototype.updateData=function(j){this.$VideoTimestampsClicksWWWTypedLogger1=babelHelpers["extends"]({},this.$VideoTimestampsClicksWWWTypedLogger1,j);return this};h.prototype.setCommentID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.comment_id=j;return this};h.prototype.setIsContentTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.is_content_timestamp=j;return this};h.prototype.setLocalCommentFeedbackID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.local_comment_feedback_id=j;return this};h.prototype.setVC=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.vc=j;return this};h.prototype.setVideoTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.video_timestamp=j;return this};var i={comment_id:true,is_content_timestamp:true,local_comment_feedback_id:true,vc:true,video_timestamp:true};f.exports=h}),null);
__d("transformTextRanges",["UnicodeUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(i,j,k){__p&&__p();if(!i||!j||!k)return i;j.sort(function(r,s){return r.offset-s.offset});var l=0;for(var m=0;m<j.length;m++){j[m].offset+=l;var n=c("UnicodeUtils").substr(i,j[m].offset,j[m].length),o=c("UnicodeUtils").strlen(n),p=k(n,j[m]),q=c("UnicodeUtils").strlen(p);if(n!==p){i=c("UnicodeUtils").substr(i,0,j[m].offset)+p+c("UnicodeUtils").substr(i,j[m].offset+j[m].length);j[m].length=q;l+=q-o}}return i};f.exports=h}),null);
__d("UFICommentUtils",["HovercardLinkInterpolator","React","TextDelightRange.react","UFIConstants","UFIVideoPlayerRegistry","URI","URITruncator","VideoTimestampsClicksWWWTypedLogger","transformTextRanges"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getCommentTextWithTruncatedURIs:function i(j,k){if(c("UFIConstants").commentURLTruncationLength)if(j&&j.length>0)k=c("transformTextRanges")(k,j,function(l,m){var n=m.entity&&(m.entity.external||m.entity.__typename==="ExternalUrl");return n?c("URITruncator")(l,c("UFIConstants").commentURLTruncationLength):l});return k},getCommentBodyInterpolator:function i(j,k,l,m,n){__p&&__p();return function(o,p){__p&&__p();if(p.videoTimestamp){if(m)return c("React").createElement("span",null,p.entity);var q=function q(t){t.preventDefault();new(c("VideoTimestampsClicksWWWTypedLogger"))().setVideoTimestamp(p.integerTimestamp).setCommentID(l).setIsContentTimestamp(false).log();if(k){c("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(k,p.integerTimestamp);c("UFIVideoPlayerRegistry").scrollToAvailableVideo(k)}return false};return c("React").createElement("a",{className:"TimestampLink",onClick:q,href:"#"},p.entity)}else if(p.sphericalViewport){var r=function r(t){t.preventDefault();if(k)c("UFIVideoPlayerRegistry").setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:p.yaw,pitch:p.pitch});return false};return c("React").createElement("a",{onClick:r,href:"#"},p.entity)}else if(p.sphericalViewportAndTimestamp){var s=function s(t){t.preventDefault();if(k){c("UFIVideoPlayerRegistry").setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:p.yaw,pitch:p.pitch});c("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(k,p.integerTimestamp)}return false};return c("React").createElement("a",{onClick:s,href:"#"},p.entity)}else if(p.campaign)return c("React").createElement(c("TextDelightRange.react"),{campaignID:p.campaign.id,commentPrivacy:n||undefined,delightStyles:p.campaign.delight_styles},o);else return c("HovercardLinkInterpolator")(o,p,"_blank",j,"ufi")}},shallowCopyRanges:function i(j){if(!j)return j;var k=[];j.forEach(function(l){k.push(babelHelpers["extends"]({},l))});return k},annotateProfileURIIfPublic:function i(j,k){if(!j)return k;return new(c("URI"))(k).addQueryData("rc","p").toString()},shouldShowTranslateAll:function i(j,k,l,m){__p&&__p();if(!j)return false;var n=0,o=void 0,p=void 0;for(var q=0;q<j.length;q++){o=j[q];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;if(l[o.id]){p=k?k[o.id]:[];for(var r=0;r<p.length;r++){o=p[r];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true}}}return false}};f.exports=h}),null);
__d("UFIActor.react",["cx","fbt","Badge.react","Focus","HovercardLink","Image.react","Locale","React","ReactDOM","UFICommentUtils","UFIConfig","UserHovercardLocation"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.componentDidMount=function(){if(this.props.focusOnMount)c("Focus").setWithoutOutline(c("ReactDOM").findDOMNode(this.refs.authorName))};l.prototype.render=function(){__p&&__p();var m=this.props.author,n=c("Locale").isRTL()?"rtl":"ltr",o=(this.props.isAuthorWeakReference?"weakReference":"")+" UFICommentActorName",p=[];if(this.props.isAuthorWeakReference)p.push(c("React").createElement("i",{className:"UFIWeakReferenceIcon",key:"icon"}));if(this.props.author.badgeSrc&&this.props.author.badgeSrc.length>0)p.push(c("React").createElement("span",null,c("React").createElement(c("Badge.react"),{type:"subscription",size:"medium",key:"badge"})," "));if(m.persona)p.push(i._("{author} ({persona})",[i._param("author",m.firstName),i._param("persona",m.persona)]));else if(this.props.useFirstName)p.push(m.firstName);else if(this.props.author.isBusinessPersona&&this.props.author.assetRole)p.push(m.name+" "+i._("(")+this.props.author.assetRole+i._(")"));else p.push(m.name);if(this.props.isAuthorNonCoworker)p.push(c("React").createElement(c("Badge.react"),{key:"noncoworker",type:"work_non_coworker"}));else if(this.props.isAuthorBot)p.push(c("React").createElement(c("Badge.react"),{key:"bot",type:"bot"}));var q=this.props.customGlyphTag;if(q&&q.glyph)p.push(c("React").createElement(c("Image.react"),{className:q.classname,key:"customglyphtag",src:q.glyph,alt:q.description,title:q.description}));var r=this.props.isAdminViewer?c("UserHovercardLocation").UFI_ADMIN:c("UserHovercardLocation").UFI,s=Object.assign({},this.props);delete s.author;delete s.customGlyphTag;delete s.delimiter;delete s.dialogUrl;delete s.disableAuthorLink;delete s.focusOnMount;delete s.groupOrEventID;delete s.hovercardLocation;delete s.isAdminViewer;delete s.isAuthorBot;delete s.isAuthorNonCoworker;delete s.isAuthorWeakReference;delete s.isPublic;delete s.showHovercard;delete s.useFirstName;delete s.commonalityString;var t=this.props.showHovercard?c("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(m,this.props.groupOrEventID,this.props.hovercardLocation?this.props.hovercardLocation:r,this.props.isAuthorWeakReference,{is_public:this.props.isPublic}).toString():null,u=m.uri&&!this.props.disableAuthorLink,v=u?c("UFICommentUtils").annotateProfileURIIfPublic(!!this.props.isPublic,m.uri):null,w=u?c("React").createElement("a",babelHelpers["extends"]({},s,{className:o,"data-hovercard":t,"data-ft":this.props["data-ft"],dir:n,href:v,ref:"authorName"}),p):c("React").createElement("span",{className:o,dir:n,ref:"authorName"},p);if(this.props.dialogUrl)w=c("React").createElement("a",babelHelpers["extends"]({},s,{className:o,"data-hovercard":t,"data-ft":this.props["data-ft"],dir:n,ajaxify:this.props.dialogUrl,rel:"dialog",href:v,ref:"authorName"}),p);return c("React").createElement("span",{className:c("UFIConfig").showCommonalityContext&&this.props.commonalityString?"UFICommentActorNameSpan":""},w,c("React").Children.map(this.props.children,function(x){return x?[x.key==="badge"||x.key==="constituentTitle"||x.key==="commonalityContext"||x.key==="neighborBadge"||x.key==="moderatorBadge"||x.key==="friendsOnlyBadge"?"":this.props.delimiter,x]:null}.bind(this)))};function l(){j.apply(this,arguments)}l.defaultProps={delimiter:" \xb7 ",isAdminViewer:false,isPublic:false};f.exports=l}),null);
__d("UFICommonalityContext.react",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){return c("React").createElement("span",{className:"UFICommentCommonalityContext",title:this.props.commonalityString},this.props.commonalityString)};function k(){h.apply(this,arguments)}k.PropTypes={commonalityString:j.string.isRequired};f.exports=k}),null);
__d("UFISocialContext.react",["fbt","HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=27;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){__p&&__p();var m=this.props.topMutualFriend,n=this.props.otherMutualCount,o=this.props.commentAuthor,p=c("HovercardLink").constructEndpoint(m).toString(),q=c("React").createElement("a",{href:m.uri,"data-hovercard":p,key:"top"},m.name),r=o.name.length+m.name.length,s=void 0;if(n===0)s=h._("Friends with {name}",[h._param("name",q)]);else if(r<k){var t=void 0;if(n==1)t=h._("1 other");else t=h._({"*":"{count} others"},[h._param("count",n,[0])]);s=h._("Friends with {name} and {others}",[h._param("name",q),h._param("others",this.getOthersLink(t,o,m))])}else{var u=h._({"*":"{count} mutual friends"},[h._param("count",n+1,[0])]);s=this.getOthersLink(u,o)}return c("React").createElement("span",{className:"UFICommentSocialContext"},s)};l.prototype.getOthersLink=function(m,n,o){var p=c("ProfileBrowserTypes").MUTUAL_FRIENDS,q={uid:n.id},r=new(c("URI"))("/ajax/mutual_friends/tooltip.php").setQueryData({friend_id:n.id});if(o)r.addQueryData({exclude_id:o.id});var s=c("ProfileBrowserLink").constructDialogURI(p,q).toString();return c("React").createElement("a",{ajaxify:s,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":r.toString(),href:c("ProfileBrowserLink").constructPageURI(p,q).toString(),key:"others",rel:"dialog"},m)};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("UFICommentAuthorName.react",["ix","cx","Badge.react","BootloadedComponent.react","Image.react","JSResource","React","TrackingNodes","UFIActor.react","UFICommonalityContext.react","UFIConfig","UFISocialContext.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props,o=n.author,p=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.USER_NAME),q=null,r=n.isAuthorOriginalPoster&&!n.isFeatured;if(r)q=c("React").createElement("div",{className:"UFIOPIconContainer","data-tooltip-alignh":"center","data-hover":"tooltip","data-tooltip-content":"Original poster",key:"badge"},c("React").createElement("i",{className:"UFIOriginalPosterIcon"}));return c("React").createElement(c("UFIActor.react"),{author:o,"data-ft":p,commonalityString:n.commonalityString,disableAuthorLink:n.disableAuthorLink,focusOnMount:n.focusOnMount,customGlyphTag:n.customGlyphTag,groupOrEventID:n.groupOrEventID,hovercardLocation:n.hovercardLocation,isAdminViewer:n.isAdminViewer,isAuthorBot:n.isAuthorBot,isAuthorNonCoworker:n.isAuthorNonCoworker,isAuthorWeakReference:n.isAuthorWeakReference,isPublic:this.props.isPublic,key:"author",dialogUrl:n.dialogUrl,showHovercard:n.showHovercard,useFirstName:n.useFirstName},q,n.isFeatured?c("React").createElement(c("Badge.react"),{key:"badge",size:"xsmall",type:"verified"}):null,this.$UFICommentAuthorName1(),this.$UFICommentAuthorName2(o),this.$UFICommentAuthorName3(o),this.$UFICommentAuthorName4(n.neighborBadge),this.$UFICommentAuthorName5(),n.socialContext?c("React").createElement(c("UFISocialContext.react"),{topMutualFriend:n.authorProfiles[n.socialContext.topmutualid],otherMutualCount:n.socialContext.othermutualcount,commentAuthor:o}):null,c("UFIConfig").showCommonalityContext&&n.commonalityString?c("React").createElement(c("UFICommonalityContext.react"),{commonalityString:n.commonalityString,key:"commonalityContext"}):null)};m.prototype.$UFICommentAuthorName3=function(n){var o=this.props.constituentBadge;if(o&&o.officeTitle&&o.representativeName&&o.commentId)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ConstituentBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:c("React").createElement("div",null),authorFirstName:n.firstName,authorId:n.id,commentId:o.commentId,ftId:o.ftId,isOwner:o.isOwner,key:"constituentTitle",officeTitle:o.officeTitle,representativeName:o.representativeName,representativeId:o.representativeId,upsellEnabled:o.upsellEnabled});if(this.props.hasConstituentBadge)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("ConstituentBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:c("React").createElement("div",null),authorFirstName:n.firstName,authorId:n.id,commentId:this.props.commentID,key:"constituentTitle"});return null};m.prototype.$UFICommentAuthorName2=function(n){if(this.props.hasFriendsOnlyBadge)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("FriendsOnlyBadge.react").__setRef("UFICommentAuthorName.react"),bootloadPlaceholder:c("React").createElement(c("Image.react"),{key:"friendsOnlyBadge",src:h("480274"),style:{marginLeft:"3px",verticalAlign:"-1px"}}),key:"friendsOnlyBadge",viewerIsAuthor:!!this.props.viewerIsAuthor,authorFirstName:n.firstName,commentPrivacyValue:this.props.commentPrivacyValue});return null};m.prototype.$UFICommentAuthorName4=function(n){if(n&&n.component&&n.component instanceof Function){var o=n.component,p=n.props;return c("React").createElement(o,babelHelpers["extends"]({key:"neighborBadge"},p))}return null};m.prototype.$UFICommentAuthorName5=function(){if(this.props.hasModeratorBadge)return c("React").createElement(c("Image.react"),{className:"_3-99",key:"moderatorBadge",src:h("365780")});return null};m.prototype.$UFICommentAuthorName1=function(){if(this.props.hasUsernameBadge)return c("React").createElement(c("Badge.react"),{key:"badge",size:"xsmall",type:"username"});return null};function m(){j.apply(this,arguments)}m.propTypes={author:l.object.isRequired,authorProfiles:l.object.isRequired,commentID:l.string,commentPrivacyValue:l.number,commonalityString:l.string,constituentBadge:l.object,customGlyphTag:l.object,dialogUrl:l.string,disableAuthorLink:l.bool,focusOnMount:l.bool,groupOrEventID:l.string,hasConstituentBadge:l.bool,hasFriendsOnlyBadge:l.bool,hasModeratorBadge:l.bool,hasUsernameBadge:l.bool,hovercardLocation:l.string,isAdminViewer:l.bool,isAuthorBot:l.bool,isAuthorNonCoworker:l.bool,isAuthorWeakReference:l.bool,isAuthorOriginalPoster:l.bool,isFeatured:l.bool,isPublic:l.bool,neighborBadge:l.object,showHovercard:l.bool,socialContext:l.object,useFirstName:l.bool,viewerIsAuthor:l.bool};f.exports=m}),null);
__d("IntlLang",["UnicodeBidi"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={HE:"\u0590\u05be\u05c0\u05c3\u05c6\u05c8-\u05cf\u05d0-\u05ea\u05eb-\u05ef\u05f0-\u05f2\u05f3-\u05f4\u05f5-\u05ff\u07c0-\u07c9\u07ca-\u07ea\u07f4-\u07f5\u07fa\u07fb-\u07ff\u0800-\u0815\u081a\u0824\u0828\u082e-\u082f\u0830-\u083e\u083f\u0840-\u0858\u085c-\u085d\u085e\u085f-\u089f\u200f\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb37\ufb38-\ufb3c\ufb3d\ufb3e\ufb3f\ufb40-\ufb41\ufb42\ufb43-\ufb44\ufb45\ufb46-\ufb4f"},i=new RegExp("["+h.HE+"]");function j(l){var m=c("UnicodeBidi").firstStrongChar(l);if(m===null)return null;if(i.exec(m))return"he";return null}var k={getLang:j};f.exports=k}),null);
__d("SeeMore.react",["cx","fbt","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={isCollapsed:true},this.handleClick=function(r){if(this.props.clickCallback!==null)this.props.clickCallback(r);this.setState({isCollapsed:false})}.bind(this),n}l.prototype.render=function(){"use strict";__p&&__p();var m=this.state.isCollapsed,n=this.props.exposeTextInHtml,o=null;if(m){var p=null;if(this.props.allowSeeMoreLinebreak)p=c("React").createElement("span",{className:"_1ipe",role:"hidden"}," ");o=c("React").createElement("span",{className:"_5uzb"},i._("..."),p)}var q=this.props.children[0],r=null;if(m){if(n)r=c("React").createElement("span",{className:"_1x3s"},this.props.children[1])}else r=c("React").createElement("span",null,this.props.children[1]);var s=m?c("React").createElement("a",{className:"_5v47 fss",onClick:this.handleClick,href:"#",role:"button"},i._("See More")):null;return c("React").createElement("span",{className:c("joinClasses")(this.props.className,"_1n4g")},q,o,s,r)};l.defaultProps={clickCallback:null,exposeTextInHtml:false,allowSeeMoreLinebreak:false};f.exports=l}),null);
__d("findSplitPointForText",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k){__p&&__p();var l=null,m=i.split("\n");if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join("\n").length;if(l!==null)l=Math.min(n,l);else l=n}return l}f.exports=h}),null);
__d("partitionTextAndRanges",["UnicodeUtils"],(function a(b,c,d,e,f,g){__p&&__p();function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset}return l}var j=function j(k,l,m,n){__p&&__p();var o=[],p=[],q=[],r=[],s=i(l.concat(m),n);for(var t=0;t<l.length;t++){var u=l[t];if(u.offset<s)o.push(u);else p.push(babelHelpers["extends"]({},u,{offset:u.offset-s}))}for(var v=0;v<m.length;v++){var w=m[v];if(w.offset<s)q.push(w);else r.push(babelHelpers["extends"]({},w,{offset:w.offset-s}))}return{before:{ranges:o,delightRanges:q,text:c("UnicodeUtils").substr(k,0,s)},after:{ranges:p,delightRanges:r,text:c("UnicodeUtils").substr(k,s)}}};f.exports=j}),null);
__d("TruncatedTextWithEntities.react",["fbt","React","SeeMore.react","TextWithEntities.react","findSplitPointForText","partitionTextAndRanges"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=30;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$TruncatedTextWithEntities1=function(r){if(!this.props.allowSeeMoreLinebreakOnLongWords||!r)return false;if(r.length<=k)return false;var s=/(^|\s)(\S+)$/,t=s.exec(r),u=t?t[2]:null;return!!(u&&u.length>k)}.bind(this),n}l.prototype.render=function(){"use strict";__p&&__p();var m=this.props.text||"",n=this.props.ranges||[],o=this.props.textDelightRanges||[];m=m.replace(/\s*$/,"");var p=this.props.maxLines,q=this.props.maxLength;if(q&&m.length>q){var r=this.props.truncationPercent||.6;q=Math.floor(r*q)}var s=null;if(!this.props.shouldExpand)s=c("findSplitPointForText")(m,q,p);if(s!==null){while(m[s-1]==="\n")s--;var t=c("partitionTextAndRanges")(m,n,o,s),u=c("React").createElement(c("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:t.before.ranges,textDelightRanges:t.before.delightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:t.before.text});if(!this.props.showSeeMore)return c("React").createElement("span",{className:this.props.className,"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},u,c("React").createElement("span",null,h._("...")));var v=this.$TruncatedTextWithEntities1(t.before.text);return c("React").createElement("span",{"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},c("React").createElement(c("SeeMore.react"),{allowSeeMoreLinebreak:v,className:this.props.className,clickCallback:this.props.markViewerHasInteracted},u,c("React").createElement(c("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:t.after.ranges,textDelightRanges:t.after.delightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:t.after.text})))}else return c("React").createElement("span",{"data-ft":this.props["data-ft"],dir:this.props.dir,lang:this.props.lang},c("React").createElement(c("TextWithEntities.react"),{aggregatedRanges:this.props.aggregatedRanges,className:this.props.className,imageRanges:this.props.imageRanges,interpolator:this.props.interpolator,ranges:n,showEmojisStandalone:this.props.showEmojisStandalone,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:m}))};l.defaultProps={showSeeMore:true};f.exports=l}),null);
__d("UFICommentBody.react",["cx","CommentPrivacyValue","IntlLang","Locale","React","TrackingNodes","TruncatedTextWithEntities.react","UFICommentUtils","UFIConfig","UFIConstants","UnicodeBidi"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.USER_MESSAGE),p=c("UnicodeBidi").isDirectionLTR(n),q=!p,r=p&&c("Locale").isRTL()?"ltr":q&&!c("Locale").isRTL()?"rtl":null,s=c("IntlLang").getLang(n),t=c("UFICommentUtils").getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,!!m.isLiveStreaming,m.commentPrivacy),u=c("React").createElement(c("TruncatedTextWithEntities.react"),{key:"comment-body",className:"UFICommentBody"+(m.showEmojisStandalone?" _iqk":""),interpolator:t,ranges:m.commentRanges,textDelightRanges:m.textDelightRanges,text:n,truncationPercent:c("UFIConstants").commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c("UFIConfig").renderEmoticons,renderEmoji:c("UFIConfig").renderEmoji,showEmojisStandalone:m.showEmojisStandalone,"data-ft":o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:true,shouldExpand:this.props.shouldExpand});if(m.socialContext)u=c("React").createElement("div",{key:"body"},u);else{var v=(p&&c("Locale").isRTL()?"_5wjy":"")+(p&&c("Locale").isRTL()?" _5wjz":"")+(q&&!c("Locale").isRTL()?" _5wj-":"")+(q&&!c("Locale").isRTL()?" _5wj_":"");u=v?c("React").createElement("div",{key:"body",className:v},u):[" ",u]}return c("React").createElement("span",null,u)};function l(){i.apply(this,arguments)}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,commentPrivacy:k.oneOf(Object.values(c("CommentPrivacyValue"))),textDelightRanges:k.array,showEmojisStandalone:k.bool,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.oneOfType([k.string,k.number]),isLiveStreaming:k.bool,shouldExpand:k.bool};f.exports=l}),null);
__d("LiveVideoAnnouncementGlyph",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BULB:"bulb",COMMENT:"comment",EYE:"eye",LIKE:"like",LIVE_VIDEO:"live-video",FOLLOW:"follow",FOLLOWING:"following",CHECKMARK:"checkmark",AVATAR:"avatar",PLAY:"play"})}),null);
__d("UFICommentLiveVideoAnnouncementImage.react",["ix","cx","CurrentUser","Image.react","LiveVideoAnnouncementGlyph","React","fbglyph"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m=this.$UFICommentLiveVideoAnnouncementImage1();if(!m)return c("React").createElement("span",null);var n=c("CurrentUser").isWorkUser();return this.props.isJoinEvent?c("React").createElement("div",{className:"_15lj"},c("React").createElement(c("Image.react"),{className:"_24l1",src:m})):c("React").createElement("div",{className:"_15lj"+(this.props.contextArgs.isLiveVideoSutroAnnouncementEnabled&&!n?" _z79":"")+(this.props.contextArgs.isLiveVideoSutroAnnouncementEnabled&&n?" _66n8":"")},c("React").createElement(c("Image.react"),{className:"_15lk",height:20,src:m,width:20}))};l.prototype.$UFICommentLiveVideoAnnouncementImage1=function(){__p&&__p();if(this.props.contextArgs.isLiveVideoSutroAnnouncementEnabled&&!this.props.isJoinEvent)if(c("CurrentUser").isWorkUser())return h("127093");else return h("114228");if(this.props.image)return this.props.image;switch(this.props.glyphName){case c("LiveVideoAnnouncementGlyph").COMMENT:return h("114673");case c("LiveVideoAnnouncementGlyph").EYE:return h("114860");case c("LiveVideoAnnouncementGlyph").BULB:return h("114492");case c("LiveVideoAnnouncementGlyph").LIKE:return h("115160");default:return null}};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("XUIEditButton.react",["cx","fbt","XUIAbstractGlyphButton.react","React","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip)n=m;return c("React").createElement(c("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{label:m,title:n,"data-hover":this.props.tooltip&&"tooltip","data-tooltip-alignh":this.props.tooltip&&"center","data-tooltip-content":this.props.tooltip,className:c("joinClasses")(this.props.className,"_5upq _5upr")}))};function l(){"use strict";j.apply(this,arguments)}l.defaultProps={label:i._("Edit")};f.exports=l}),null);
__d("UFICommentMenu.react",["ix","cx","Bootloader","Image.react","QE2Logger","React","XUICloseButton.react","XUIDotsButton.react","XUIEditButton.react","asset","fbglyph","joinClasses","keyMirror"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l,m,n,o,p=c("React").PropTypes,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=c("keyMirror")({EDIT:true,CLOSE:true,CHEVRON:true,DOTS:true,TOOLTIP:true});j=babelHelpers.inherits(w,c("React").Component);k=j&&j.prototype;function w(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=k.constructor).call.apply(z,[this].concat(C)),this.state={bootloading:false,bootloaded:false,needsExpand:false},this.onClickGuard=function(event){__p&&__p();if(this.props.exposeToDeleteBlockQE)c("QE2Logger").logExposureForUser("comments_action_delete_and_block");if(this.state.bootloading)return;else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c("Bootloader").loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu","XUIMenuSeparator.react"],function(E,F,G,H){q=E;r=F;s=G;t=G.Item;u=H;this.setState({bootloading:false,bootloaded:true,needsExpand:true})}.bind(this),"UFICommentMenu.react")}if(this.props.onClick)this.props.onClick(event)}.bind(this),A}w.prototype.shouldComponentUpdate=function(z,A){if(this.state.needsExpand&&!A.needsExpand)return false;return true};w.prototype.render=function(){__p&&__p();var z=void 0;switch(this.props.menuType){case v.EDIT:z=c("XUIEditButton.react");break;case v.CLOSE:z=c("XUICloseButton.react");break;case v.DOTS:z=c("XUIDotsButton.react");break;case v.TOOLTIP:z=x;break;case v.CHEVRON:default:z=y;break}var A=function A(F){switch(F){case"ufi_comment_menu_delete":return c("React").createElement(c("Image.react"),{src:h("142908")});case"ufi_comment_menu_edit":return c("React").createElement(c("Image.react"),{src:h("142574")});case"ufi_comment_menu_delete_and_block":return c("React").createElement(c("Image.react"),{src:h("482899")});case"ufi_comment_menu_delete_comment_and_remove_commenter":return c("React").createElement(c("Image.react"),{src:h("141941")});case"ufi_comment_menu_mute_member":return c("React").createElement(c("Image.react"),{src:h("142840")});case"ufi_comment_hide_text_delights":return c("React").createElement(c("Image.react"),{src:h("142815")});case"ufi_comment_menu_hide":return c("React").createElement(c("Image.react"),{src:h("142331")});default:return null}};if(this.props.menuData&&this.state.bootloaded){var B=this.props.menuData.map(function(F){var G=A(F.testid);return c("React").createElement(t,{"data-testid":F.testid,key:F.value,value:F.value,icon:G},F.label)});if(this.props.menuUserSection){var C=this.props.menuUserSection.map(function(F){var G=A(F.testid);return c("React").createElement(t,{"data-testid":F.testid,key:F.value,value:F.value,icon:G},F.label)}),D=c("React").createElement(u,{key:"xui_separator"});B=B.concat(D,C)}var E=c("React").createElement(s,{onItemClick:this.props.onAction},B);return c("React").createElement(r,babelHelpers["extends"]({},this.props,{alignh:"right",layerBehaviors:[q],menu:E,ref:"menu"}),c("React").createElement(z,babelHelpers["extends"]({},this.props,{href:"#",onClick:this.onClickGuard})))}return c("React").createElement(z,babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_1-be"),href:"#",onClick:this.onClickGuard}))};w.prototype.componentDidUpdate=function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false})}};w.MenuType=v;w.propTypes={menuData:p.array,menuUserSection:p.array,menuType:p.oneOf(Object.keys(v)).isRequired,onAction:p.func,onClick:p.func};l=babelHelpers.inherits(x,c("React").Component);m=l&&l.prototype;x.prototype.render=function(){return c("React").createElement("a",this.props,c("React").createElement(c("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:h("126426"),"data-tooltip-alignh":"center"}))};function x(){l.apply(this,arguments)}n=babelHelpers.inherits(y,c("React").Component);o=n&&n.prototype;y.prototype.render=function(){return c("React").createElement("a",this.props,c("React").createElement(c("Image.react"),{"data-hover":"tooltip","data-tooltip-content":this.props.tooltip,"aria-label":this.props.tooltip,src:h("125792")}))};function y(){n.apply(this,arguments)}f.exports=w}),null);
__d("UFICommentPlayerStatsCard.react",["cx","fbt","Image.react","Link.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l="\xb7";j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(){return false};m.prototype.$UFICommentPlayerStatsCard1=function(){return c("React").createElement(c("Link.react"),{href:"#"},c("React").createElement(c("Image.react"),{className:"_3yk8"}))};m.prototype.$UFICommentPlayerStatsCard2=function(){return c("React").createElement(c("Link.react"),{href:"#"},c("React").createElement(c("XUIText.react"),{weight:"bold"},"Linkable"))};m.prototype.$UFICommentPlayerStatsCard3=function(n){return c("React").createElement("span",null,i._("{Stat Label}: {Stat Value}",[i._param("Stat Label",n.label),i._param("Stat Value",n.value)]))};m.prototype.$UFICommentPlayerStatsCard4=function(n){__p&&__p();var o=n.stats.map(this.$UFICommentPlayerStatsCard3,this),p=[];for(var q=0;q<o.length;q+=2){var r=[];r.push(c("React").createElement("span",{key:"first_stat"},o[q]));if(q+1<o.length){r.push(c("React").createElement("span",{key:"separator"},c("React").createElement(c("XUIText.react"),{size:"header3"}," ",l," ")));r.push(c("React").createElement("span",{key:"second_stat"},o[q+1]))}p.push(c("React").createElement("div",{key:"stat_row_"+q},r))}return c("React").createElement("div",{className:"_3yk9"},c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{size:"header4",weight:"bold"},n.persona)),p)};m.prototype.render=function(){var n=this.props.comment.playerStatsCardData;if(!n)return c("React").createElement("div",null);return c("React").createElement("div",{className:"_3yk7"},this.$UFICommentPlayerStatsCard4(n))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("UFICommentTranslationLink.react",["cx","ContentTranslationStrings","Link.react","React","TranslationTrigger","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){__p&&__p();if(!this.props.showTranslation)return c("React").createElement(c("Link.react"),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslationLink1()}.bind(this)},c("ContentTranslationStrings").SEE_TRANSLATION);var l=this.props.translationData;if(!l)return c("React").createElement("div",{className:"UFITranslateLink"},c("React").createElement(c("XUISpinner.react"),{background:"light",size:"small"}));var m=l.translatedText;if(!m||!m.text)return c("React").createElement("div",{className:"UFITranslationErrorText"},c("ContentTranslationStrings").NO_TRANSLATION_AVAILABLE);var n=this.props.isShowingOriginal||l.trigger===c("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION,o=n?c("React").createElement("div",{className:"UFITranslateAttribution"},c("ContentTranslationStrings").AUTOMATICALLY_TRANSLATED):c("React").createElement(c("Link.react"),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslationLink2()}.bind(this)},this.props.shownInCommentActions?c("React").createElement("div",null,c("React").createElement("span",null,c("ContentTranslationStrings").SEE_ORIGINAL_LINK),c("React").createElement("span",null," ("+l.sourceDialectName+")")):c("ContentTranslationStrings").SEE_ORIGINAL_LINK);return o};k.prototype.$UFICommentTranslationLink1=function(){this.props.onSeeTranslation&&this.props.onSeeTranslation()};k.prototype.$UFICommentTranslationLink2=function(){this.props.onSeeOriginal&&this.props.onSeeOriginal()};function k(){i.apply(this,arguments)}k.defaultProps={shownInCommentActions:false};f.exports=k}),null);
__d("UFICommentTranslationText.react",["cx","React","TranslationTrigger","TruncatedTextWithEntities.react","UFIConfig","UFIConstants"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);var m=this.props.translationData;this.state={shouldExpand:this.props.shouldExpand||!!m&&m.trigger===c("TranslationTrigger").SEE_TRANSLATION}}k.prototype.render=function(){var l=this.props.translationData;if(!l||!this.props.showTranslation)return null;var m=l.translatedText;return c("React").createElement(c("TruncatedTextWithEntities.react"),{className:"UFICommentBody",ranges:m.ranges,text:m.text,truncationPercent:c("UFIConstants").commentTruncationPercent,maxLength:c("UFIConstants").commentTruncationLength,maxLines:c("UFIConstants").commentTruncationMaxLines,renderEmoticons:c("UFIConfig").renderEmoticons,renderEmoji:c("UFIConfig").renderEmoji,dir:m.dir,shouldExpand:this.state.shouldExpand,markViewerHasInteracted:function(){return this.setState({shouldExpand:!this.state.shouldExpand})}.bind(this)})};k.defaultProps={shouldExpand:false};f.exports=k}),null);
__d("UFIStreamingCommentsMode",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:0,LIVE:1,ON_DEMAND:2,LIVE_LIVING_ROOM:3})}),null);
__d("UFICommentVPVDLogging",["csx","Banzai","Parent","UFIConfig","UFIOrderingModeStore","UFIStopWatch","UFIStreamingCommentsMode","WebCommentViewOption"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UFIConfig").commentVPVD;function j(k){__p&&__p();var l=k.renderedComment,m=l.comment,n=l.isLivePinnedComment,o=k.contextArgs,p=k.node,q=k.stopWatch;if(q.state()===c("UFIStopWatch").COUNTING)return{state:"still visible - not logged",instanceid:o.instanceid,fbid:m.fbid,duration_ms:q.milliseconds()};var r=q.milliseconds();if(r>=0&&r<i.min_duration_to_log)return{state:"small duration - not logged",instanceid:o.instanceid,fbid:m.fbid,duration_ms:r};var s=null,t=null;if(p){var u=c("Parent").byClass(p,"public/feedobject/root");if(u){var v=u.getAttribute("data-ft");if(v)s=JSON.parse(v);t=u.getAttribute("data-referrer")}}var w=c("UFIOrderingModeStore").getState().get(o.instanceid),x=c("UFIStreamingCommentsMode").NONE;if(w===c("WebCommentViewOption").LIVE_STREAMING)if(o.islivestreaming)x=c("UFIStreamingCommentsMode").LIVE;else if(o.isLiveVOD)x=c("UFIStreamingCommentsMode").ON_DEMAND;var y={comment_fbid:m.fbid,comment_id:m.id,container_module:o.location,duration_ms:r,is_live_pinned_comment:n,is_on_sponsored_story:!!o.isSponsored,is_page_comment:!!o.isPage,is_reply:!!m.parentcommentid,mf_story_key:s?s.mf_story_key:null,order_mode:w,qid:s?s.qid:null,referrer_source:t,streaming_comments_mode:x};q.reset();c("Banzai").post("comment_vpvd",y);return babelHelpers["extends"]({state:"logged",instanceid:o.instanceid,fbid:m.fbid,duration_ms:r},y)}f.exports={log:j}}),null);
__d("UFICommentVPVDState",["invariant","Arbiter","Parent","UFICommentVisibilityStore","UFICommentVPVDLogging","UFIConfig","UFIRootRegistry","UFIStopWatch","UFIVisibility","UserActivity","ViewportTrackingHelper","getActiveElement"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("UFIConfig").commentVPVD,j=Object.freeze({INFOCUS:"INFOCUS",BLURRED_NEW:"BLURRED_NEW",BLURRED_INACTIVE:"BLURRED_INACTIVE",BLURRED_SNOWLIFT_OTHER:"BLURRED_SNOWLIFT_OTHER",BLURRED_UNDER_LAYER:"BLURRED_UNDER_LAYER",BLURRED_NO_NODE:"BLURRED_NO_NODE"}),k="changed",l=new(c("Arbiter"))(),m=null,n=false,o=false,p={};function q(w){if(!i.debug_console)return;console.table&&console.table([{isFocusInLayer:n,isSnowliftOpen:o,userIsActive:c("UserActivity").isActive(i.idle_timeout)}]);console.table&&console.table(Object.keys(p).map(function(x){var y=p[x];return{instanceID:y.contextArgs.instanceid,fbid:y.renderedComment.comment.fbid,state:y.state,visibility:y.visibility,counting:y.stopWatch.state()}}))}function r(w){var x=Object.keys(w);if(!x.length)return;x.forEach(function(y){return t(w[y])});p=babelHelpers["extends"]({},p,w);l.inform(k)}function s(w,x){var y;r((y={},y[w]=x,y))}function t(w){if(w.visibility==c("UFIVisibility").VISIBLE&&w.state==j.INFOCUS)w.stopWatch.start();else w.stopWatch.pause()}function u(w){__p&&__p();if(!c("UserActivity").isActive(i.idle_timeout))return j.BLURRED_INACTIVE;if(n&&!o){if(!w.node)return j.BLURRED_NO_NODE;if(!m)return j.BLURRED_UNDER_LAYER;w.node||h(0);m||h(0);var x=c("ViewportTrackingHelper").isDescendantOf(w.node,m);return x?j.INFOCUS:j.BLURRED_UNDER_LAYER}if(o)if(c("UFIRootRegistry").isSnowliftNode(w.contextArgs.rootid))return j.INFOCUS;else return j.BLURRED_SNOWLIFT_OTHER;return j.INFOCUS}var v={subscribe:function w(x){return l.subscribe(k,x)},unsubscribe:function w(x){l.unsubscribe(x)},getState:function w(){return p},getKey:function w(x,y){var z=x.isLivePinnedComment?"/P":"";return y.instanceid+"/"+x.comment.fbid+z},initComment:function w(x,y,z){__p&&__p();var A=v.getKey(x,y),B=p[A];if(!B&&!z)return;else if(!B){var C={renderedComment:x,contextArgs:y,node:z,state:j.BLURRED_NEW,stopWatch:new(c("UFIStopWatch"))(),visibility:c("UFICommentVisibilityStore").getVisibility(c("UFICommentVisibilityStore").getState(),y,x)};C.state=u(C);s(A,C)}else if(!z){B.stopWatch.pause();s(A,babelHelpers["extends"]({},B,{state:j.BLURRED_NO_NODE}))}else s(A,babelHelpers["extends"]({},B,{node:z,state:u(B)}))},updateAllStates:function w(x){r(Object.keys(p).reduce(function(y,z){y[z]=babelHelpers["extends"]({},p[z],{state:u(p[z])});return y},{}));q(x)},cleanupUFIInstance:function w(x){__p&&__p();var y=[];Object.keys(p).filter(function(z){return p[z].contextArgs.instanceid==x}).forEach(function(z){p[z].stopWatch.pause();var A=c("UFICommentVPVDLogging").log(p[z]);if(i.debug_console)y.push(A);delete p[z]});if(i.debug_console)console.table&&console.table(y)},onCommentVisibilityChanged:function w(){var x=c("UFICommentVisibilityStore").getState();r(Object.keys(p).reduce(function(y,z){var A=p[z],B=A.renderedComment,C=A.contextArgs,D=A.visibility,E=c("UFICommentVisibilityStore").getVisibility(x,C,B),F=D!=E;if(!F)return y;y[z]=babelHelpers["extends"]({},p[z],{visibility:E});return y},{}));q("UFICommentVisibilityStore.changed")},onClickDocument:function w(){var x=c("getActiveElement")();if(!x){m=null;n=false}else{m=c("Parent").byClass(x,"uiContextualLayerParent");n=!!m}},onSnowliftOpen:function w(){o=true},onSnowliftClose:function w(){o=false},debug:function w(){q("debug")}};f.exports=v}),null);
__d("UserActivityEmitter",["invariant","EventEmitter","UserActivity","TimeSlice","clearTimeout","setTimeout"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i="change",j={};k.factory=function(l){if(!j[l])j[l]=new k(l);return j[l]};function k(l){__p&&__p();this.$UserActivityEmitter5=250;this.$UserActivityEmitter6=function(){if(this.$UserActivityEmitter4=="INACTIVE"){this.$UserActivityEmitter4="ACTIVE";this.$UserActivityEmitter2.emit(i,"ACTIVE")}if(this.$UserActivityEmitter3)c("clearTimeout")(this.$UserActivityEmitter3);this.$UserActivityEmitter3=c("setTimeout")(c("TimeSlice").guard(this.$UserActivityEmitter7,"UserActivityEmitter idleTimeout",{propagationType:c("TimeSlice").PropagationType.EXECUTION}),this.$UserActivityEmitter5)}.bind(this);this.$UserActivityEmitter7=function(){this.$UserActivityEmitter4="INACTIVE";this.$UserActivityEmitter2.emit(i,"INACTIVE");c("clearTimeout")(this.$UserActivityEmitter3);this.$UserActivityEmitter3=null}.bind(this);l>c("UserActivity").EVENT_INTERVAL_MS||h(0);this.$UserActivityEmitter5=l;this.$UserActivityEmitter2=new(c("EventEmitter"))();this.$UserActivityEmitter4=c("UserActivity").isActive(l)?"ACTIVE":"INACTIVE";this.$UserActivityEmitter1=c("UserActivity").subscribe(this.$UserActivityEmitter6);if(this.$UserActivityEmitter4=="ACTIVE")this.$UserActivityEmitter6()}k.prototype.subscribe=function(l){return this.$UserActivityEmitter2.addListener(i,l)};k.prototype.getState=function(){return this.$UserActivityEmitter4};f.exports=k}),null);
__d("UFICommentVPVD",["Arbiter","Event","SubscriptionsHandler","UFICommentVisibilityStore","UFICommentVPVDLogging","UFICommentVPVDState","UFIConfig","UFIInstanceActionType","UFISharedDispatcher","UserActivityEmitter"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UFIConfig").commentVPVD,i=false,j=null,k=new(c("SubscriptionsHandler"))(),l=null,m=null;function n(){__p&&__p();if(j)return;j=setTimeout(function(){j=null;var p=c("UFICommentVPVDState").getState(),q=[];Object.keys(p).forEach(function(r){var s=c("UFICommentVPVDLogging").log(p[r]);if(h.debug_console)q.push(s)});if(h.debug_console)console.table&&console.table(q)},10)}var o={init:function p(){__p&&__p();if(i||!c("UFICommentVPVDState"))return;i=true;m=c("UFISharedDispatcher").register(function(q){if(q.type==c("UFIInstanceActionType").REMOVE)c("UFICommentVPVDState").cleanupUFIInstance(q.instanceID)});l=c("UserActivityEmitter").factory(h.idle_timeout);k=new(c("SubscriptionsHandler"))();k.addSubscriptions(c("UFICommentVisibilityStore").addListener(function(){var q=c("UFICommentVPVDState").getState();c("UFICommentVPVDState").onCommentVisibilityChanged();if(q!==c("UFICommentVPVDState").getState())n()}),{remove:function q(){if(m){c("UFISharedDispatcher").unregister(m);m=null}}},c("Event").listen(document.documentElement,"click",function(){c("UFICommentVPVDState").onClickDocument();c("UFICommentVPVDState").updateAllStates("document onClick");n()}),l.subscribe(function(q){c("UFICommentVPVDState").updateAllStates("user-active = "+q);if(q!="ACTIVE")n()}),c("Arbiter").subscribe("reflow",function(){c("UFICommentVPVDState").updateAllStates("reflow");n()}),c("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){c("UFICommentVPVDState").onSnowliftOpen();c("UFICommentVPVDState").updateAllStates("PhotoSnowlift.OPEN");n()}),c("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){c("UFICommentVPVDState").onSnowliftClose();c("UFICommentVPVDState").updateAllStates("PhotoSnowlift.CLOSE");n()}))},enableVPVDLogging:function p(q){if(!q.location||!h.locations)return false;return h.everywhere||h.locations.includes(q.location)}};f.exports=o}),null);
__d("UFICommentVPVDTracker.react",["cx","CommentVPVGatingConfig","React","ReactDOM","SubscriptionsHandler","UFICommentAction","UFICommentVisibilityStore","UFICommentVPVD","UFICommentVPVDState","UFIConfig","UFISharedDispatcher","UFIVisibility","ViewportTrackingHelper","onCommentIsVisible"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").Children,l=c("React").PropTypes,m=c("UFIConfig").commentVPVD;function n(p){return c("UFICommentVisibilityStore").getVisibility(c("UFICommentVisibilityStore").getState(),p.contextArgs)===c("UFIVisibility").VISIBLE}i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(p){__p&&__p();j.constructor.call(this,p);this.state={isVisible:false,beforeFirstViewportChange:true};this.isCommentVisible=function(q){if(!n(this.props)&&!(this.state.beforeFirstViewportChange&&c("CommentVPVGatingConfig").fix_www_permalink_comment_vpvd))return false;var r={height:q.bottom-q.top,width:0};return c("ViewportTrackingHelper").isVisibleInDimension(r,c("ReactDOM").findDOMNode(this),m.min_visible_size)}.bind(this);this.onCommentVisibilityChanged=function(q){this.setState({isVisible:q,beforeFirstViewportChange:false});c("UFISharedDispatcher").dispatch(c("UFICommentAction").changeVisibility(this.props.contextArgs,this.props.renderedComment,q?c("UFIVisibility").VISIBLE:c("UFIVisibility").HIDDEN))}.bind(this);if(c("UFICommentVPVD").enableVPVDLogging(p.contextArgs))c("UFICommentVPVD").init();this.$UFICommentVPVDTracker1=new(c("SubscriptionsHandler"))()}o.prototype.componentDidMount=function(){if(c("UFICommentVPVD").enableVPVDLogging(this.props.contextArgs))this.$UFICommentVPVDTracker1.addSubscriptions(c("onCommentIsVisible")(this.isCommentVisible,this.onCommentVisibilityChanged))};o.prototype.componentWillUnmount=function(){this.$UFICommentVPVDTracker1.release()};o.prototype.render=function(){var p=this.props,q=this.state,r=k.only(p.children);if(!c("UFICommentVPVD").enableVPVDLogging(p.contextArgs))return r;var s=m.debug_html;return c("React").createElement("div",{"data-debugstate":s?q.isVisible?"fully visible":"not fully visible":null,className:"_3b-9"+(s?" _3b-a":"")+(s&&q.isVisible?" _3b-b":"")+(s&&!q.isVisible?" _3b-c":""),ref:function t(u){return c("UFICommentVPVDState").initComment(p.renderedComment,p.contextArgs,u)}},r)};o.propTypes={renderedComment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=o}),null);
__d("UFICommentVPVTracker.react",["OnVisible.react","React","UFICommentVPVs","UFIConfig","clearTimeout","setTimeout"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={timer:null},this.maybeScheduleVPVLogging=function(){if(this.state.timer!==null)return;var q=this.props.comment.id,r=this.props.contextArgs.instanceid;if(c("UFICommentVPVs").hasLoggedVPV(r,q))return;this.setState({timer:c("setTimeout")(function(){c("UFICommentVPVs").logVPV(r,q);this.setState({timer:null})}.bind(this),c("UFIConfig").vpvLoggingTimeout)})}.bind(this),this.cancelScheduledVPVLogging=function(){if(this.state.timer===null)return;c("clearTimeout")(this.state.timer);this.setState({timer:null})}.bind(this),m}k.prototype.render=function(){var l=this.props.comment.id,m=this.props.contextArgs.instanceid,n=this.props.children,o=c("UFICommentVPVs").hasLoggedVPV(m,l);return c("React").createElement(c("OnVisible.react"),{onVisible:o?null:this.maybeScheduleVPVLogging,onHidden:o?null:this.cancelScheduledVPVLogging},n)};k.prototype.shouldComponentUpdate=function(l,m){return m.timer===this.state.timer};k.prototype.UNSAFE_componentWillReceiveProps=function(){this.cancelScheduledVPVLogging()};k.prototype.componentWillUnmount=function(){this.cancelScheduledVPVLogging()};k.propTypes={comment:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k}),null);
__d("TimeOffset",[],(function a(b,c,d,e,f,g){"use strict";var h={timeToTimestamp:function i(j){if(j<=0)return"0:00";var k=Math.floor(j/3600),l=k?k+":":"";l+=((k?"0":"")+Math.floor(j%3600/60)).slice(-2)+":";return l+("0"+j%60).slice(-2)}};f.exports=h}),null);
__d("UFILiveCommentTimestamp.react",["cx","fbt","CommentPostedLiveState","Middot.react","React","ShimButton.react","TimeOffset","Tooltip.react","UFIVideoPlayerRegistry","VideoTimestampsClicksWWWTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n,o=this.props,p=o.comment,q=o.contextArgs,r=!p.parentcommentid,s=null;if(r)(function(){var u=typeof p.videoTimeOffset==="number"?p.videoTimeOffset:0;s=c("React").createElement(c("ShimButton.react"),{className:"_39g5",form:"link",onClick:function v(event){event.preventDefault();var w=new(c("VideoTimestampsClicksWWWTypedLogger"))().setVideoTimestamp(u).setIsContentTimestamp(true);if(p.__typename==="local")w.setLocalCommentFeedbackID(p.ftentidentifier);else w.setCommentID(p.fbid);w.log();c("UFIVideoPlayerRegistry").seekAvailableVideoPlayerController(q.instanceid,u)}},c("TimeOffset").timeToTimestamp(u))})();var t=null;if(p.postedLiveState===c("CommentPostedLiveState").LIVE)t=c("React").createElement(c("Tooltip.react"),{tooltip:i._("Comment posted while the video was live")},c("React").createElement(c("Middot.react"),{className:"_5rr7"}));else if(p.postedLiveState===c("CommentPostedLiveState").ON_DEMAND)t=c("React").createElement(c("Tooltip.react"),{tooltip:i._("Comment posted after the live video ended")},c("React").createElement(c("Middot.react"),{className:"_5rra"}));else t=c("React").createElement(c("Middot.react"),{className:"_5rra"});return c("React").createElement("span",null,t,s)};function m(){j.apply(this,arguments)}m.propTypes={comment:l.shape({fbid:l.string,__typename:l.string,postedLiveState:l.oneOf([c("CommentPostedLiveState").LIVE,c("CommentPostedLiveState").ON_DEMAND]),videoTimeOffset:l.number,parentcommentid:l.string}).isRequired,contextArgs:l.shape({instanceid:l.string.isRequired}).isRequired};f.exports=m}),null);
__d("VideoTipJarCommentBackground.react",["ix","Image.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=[h("99652"),h("99653"),h("99654")];i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=k[parseInt(this.props.tipOptionIndex,10)];return m?c("React").createElement(c("Image.react"),{src:m}):null};function l(){i.apply(this,arguments)}f.exports=l}),null);
__d("UFIComment.react",["ix","csx","cx","fbt","AsyncRequest","BootloadedComponent.react","Bootloader","CommentApprovalsResponsibleUserAction","CommentPrivacyValue","Dialog","DOM","EmojiRenderer","Event","FBFeedLocations","FluxContainer","HovercardLink","HTML","IdentityBadges.react","Image.react","InlineBlock.react","JSResource","LiveVideoAnnouncementCTAType","LiveWWWFeedbackTypedLogger","LoadingDialog.react","PrivateCommentsConfig","QE2Logger","React","ReactDOM","SelfCommentsGatingConfig","ShareNowConstants","ShimButton.react","SutroPhase2GatingConfig","Text.react","TextDelightNuxID","TrackingNodes","TranslationTrigger","UFIAcceptedAnswerStore","UFIActorIconContainer.react","UFICentralUpdates","UFICommentAction","UFICommentActions.react","UFICommentAttachment.react","UFICommentAuthorName.react","UFICommentBody.react","UFICommentLiveVideoAnnouncementImage.react","UFICommentMenu.react","UFICommentPlayerStatsCard.react","UFIComments","UFICommentTranslationLink.react","UFICommentTranslationText.react","UFICommentUtils","UFICommentVPVDTracker.react","UFICommentVPVTracker.react","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIImageBlock.react","UFILiveCommentTimestamp.react","UFIReactionBadgeDecorator.react","UFIRootRegistry","UFISharedDispatcher","UserHovercardLocation","VideoTipJarCommentBackground.react","WebCommentViewOption","XUIButton.react","asset","emptyFunction","fbglyph","gkx","joinClasses","keyMirror","uniqueID"],(function aa(ba,a,ca,da,ea,fa,b,ga,ha,c){"use strict";__p&&__p();var d,e,f=a("React").PropTypes,g=a("UFIConstants").UFIStatus,ia="share_on_comment_v1",ja=Object.freeze({NEWSSTAND:"newsstand"}),h=a("keyMirror")({edit:true,hide:true,remove:true,embed:true,manageConstituentBadge:true,delete_and_block:true,delete_comment_and_remove_commenter:true,mute_member:true,hide_text_delights:true}),ka="ufi_comment_close_button",la="ufi_highlighted_comment",i="ufi_comment_menu_delete",ma="ufi_comment_menu_edit",na="ufi_comment_menu_hide",oa="ufi_comment_menu_embed",pa="ufi_comment_menu_manage_constituent_badge",qa="ufi_comment_menu_delete_and_block",ra="ufi_comment_menu_delete_comment_and_remove_commenter",j="ufi_comment_menu_mute_member",k="ufi_comment_hide_text_delights",l={testid:i,value:h.remove,label:c._("Delete Comment...")},m={testid:na,value:h.hide,label:c._("Hide Comment")},sa={testid:oa,value:h.embed,label:c._("Embed")},ta={testid:qa,value:h.delete_and_block,label:c._("Delete Comment And Block User...")},ua={testid:ra,value:h.delete_comment_and_remove_commenter,label:c._("Delete Comment And Remove Member...")},n={testid:i,value:h.remove,label:c._("Delete...")},va={testid:pa,value:h.manageConstituentBadge,label:c._("Manage Constituent Badge")},wa={testid:j,value:h.mute_member,label:c._("Mute Member...")},xa={testid:j,value:h.mute_member,label:c._("Unmute Member")},ya={testid:k,value:h.hide_text_delights,label:c._("Remove Text Effects")},za={testid:k,value:h.hide_text_delights,label:c._("Add Text Effects")},Aa=14,Ba=3,o=null,Ca=function Ca(q){var r=q.status;return r===g.FAILED_ADD||r===g.FAILED_EDIT},Da=function Da(q,r){return!!q.tipOptionIndex&&r===ja.NEWSSTAND};function Ea(q){return q.commenterIsFOF!==undefined&&q.userIsMinor!==undefined&&q.reportLink!==undefined&&q.isBroadcast!==undefined&&q.showStreamBanControls!==undefined}d=babelHelpers.inherits(p,a("React").Component);e=d&&d.prototype;p.getStores=function(){return[a("UFIAcceptedAnswerStore")]};p.calculateState=function(q,r){var s=r.comment,t=r.feedback,u=a("UFIAcceptedAnswerStore").get(s.ftentidentifier,t.acceptedanswer),v=u.type==="Accepted"&&u.id==s.id;return babelHelpers["extends"]({},q,{isAcceptedAnswer:v})};function p(q){e.constructor.call(this,q);Fa.call(this);var r=q.comment;this.state={isHighlighting:r.highlightcomment,wasHighlighted:r.highlightcomment,markedAsSpamHere:false,isAcceptedAnswer:false,isInlinePageDeleted:false,isInlineBanned:false,isInlineStreamBanned:false,loggedLiveUpdate:false,showBody:false,hideSpamComment:this.$UFIComment2(),loadingDialogWhenSharing:false}}p.prototype.$UFIComment7=function(q){this.context.dispatch(a("UFICommentAction").removeAndBlock(this.props.contextArgs,this.props.comment,q,a("emptyFunction")))};p.prototype.$UFIComment10=function(q){this.context.dispatch({type:"bulk_review",instanceID:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier,fbid:this.props.comment.fbid,comment:this.props.comment,target:q,onConfirm:a("emptyFunction")})};p.prototype.$UFIComment11=function(event){this.context.dispatch(a("UFICommentAction").toggle_text_delights(this.props.contextArgs,this.props.comment,event.target));a("Bootloader").loadModules(["TextDelightNUXLogger"],function(q){q.menuItemClick(this.props.comment.fbid)}.bind(this),"UFIComment.react")};p.prototype.$UFIComment17=function(){return[l,m]};p.prototype.$UFIComment18=function(){return[{testid:ma,value:h.edit,label:c._("Edit...")},n]};p.prototype.$UFIComment19=function(){this.setState({showBody:!a("UFIConfig").shouldTranslationsReplaceContent});if(!this.props.comment.translationdata)this.context.dispatch(a("UFICommentAction").translate(this.props.contextArgs,this.props.comment,a("TranslationTrigger").SEE_TRANSLATION))};p.prototype.$UFIComment20=function(){__p&&__p();var q=null,r=null,s=null,t=null,u=a("UFICommentMenu.react").MenuType.CLOSE,v=this.props.comment,w=v.canEditConstituentTitle,x=v.canembed&&a("UFIConfig").showCommentEmbedOption,y=v.canremove&&v.candeleteandblockcommenter;if(this.$UFIComment2()){var z=void 0;if(v.needsApproval)z=this.props.authorProfiles[v.author].name;else z=this.props.feedback.actorname;return{closeTooltip:c._("Only you and {author_name} can see this comment",[c._param("author_name",z)]),menuType:a("UFICommentMenu.react").MenuType.TOOLTIP,onClick:q,menuData:r,menuUserSection:s}}var A=this.props.contextArgs.feedLocationType===a("FBFeedLocations").FUNDRAISER_PAGE?false:this.props.hideAsSpamForPageAdmin;if(v.canremove&&!A)if(this.props.viewerIsAuthor&&v.canedit){t=x?c._("Edit, delete or embed this"):c._("Edit or delete this");u=a("UFICommentMenu.react").MenuType.EDIT;if(w){r=[va];r=r.concat(this.$UFIComment18())}else r=this.$UFIComment18()}else if(this.props.showRemoveReportMenu){t=x?c._("Remove, report or embed this"):c._("Remove or report this");r=this.$UFIComment17()}else if(this.props.feedback.customcommentactionlinks){t=x?c._("Remove this"):c._("Remove or embed this");r=[l];u=a("UFICommentMenu.react").MenuType.EDIT}else{t=x?c._("Remove or embed this"):c._("Remove this");if(!x&&!y)q=this.$UFIComment6;else r=[n]}else if(this.props.feedback.customcommentactionlinks){t=x?c._("Hide or embed this"):c._("Hide this");r=[m];u=a("UFICommentMenu.react").MenuType.EDIT}else if(v.canreport){t=x?c._("Hide or embed this"):c._("Hide this");r=[m]}if(x){if(!r)r=[];r.push(sa);u=a("UFICommentMenu.react").MenuType.CHEVRON}if(v.canremove&&!this.props.viewerIsAuthor&&v.canviewerremovecommenter){if(!s)s=[];s.push(ua)}if(y){if(!r)r=[];r.push(ta)}if(v.canmutemembers&&!this.props.viewerIsAuthor){if(!s)s=[];if(v.ismuted)s.push(xa);else s.push(wa)}if(v.canedit&&this.props.viewerIsAuthor&&this.$UFIComment21(v)){if(!r)r=[];if(v.text_delights_are_hidden)r.push(za);else r.push(ya)}if(this.props.feedback.customcommentactionlinks)for(var B in this.props.feedback.customcommentactionlinks){var C=this.props.feedback.customcommentactionlinks[B];if(!C.showInMenu)continue;if(!r)r=[];r.push({testid:C.type,value:C.type,label:C.title})}var D=r?r.length:0,E=s?s.length:0;if(D+E>1||u===a("UFICommentMenu.react").MenuType.CLOSE)u=a("UFICommentMenu.react").MenuType.DOTS;return{closeTooltip:t,menuType:u,onClick:q,menuData:r,menuUserSection:s}};p.prototype.$UFIComment21=function(q){if(q.body&&q.body.ranges&&q.canhidetextdelights){for(var r=0;r<q.body.ranges.length;r++)if(q.body.ranges[r].campaign)return true;return q.text_delights_are_hidden}return false};p.prototype.$UFIComment22=function(){__p&&__p();if(this.props.contextArgs.feedLocationType===a("FBFeedLocations").CE_PII_STRIPPED_FEED||this.props.inReviewView)return a("React").createElement("div",null);var q=this.$UFIComment20(),r=q.onClick,s=q.menuData,t=q.menuUserSection,u=q.closeTooltip,v=q.menuType,w=null;if(this.props.comment.canedit&&this.props.viewerIsAuthor&&this.$UFIComment21(this.props.comment)){w=a("React").createElement(a("BootloadedComponent.react"),{bootloadPlaceholder:a("React").createElement("div",null),bootloadLoader:a("JSResource")("TextDelightNUX.react").__setRef("UFIComment.react"),container:this,contextRef:function(){return this.refs.comment_menu}.bind(this),nuxId:a("TextDelightNuxID").COMMENT_OPT_OUT_NUX,instance:this.props.comment.fbid},c._("You can control whether you and your friends see text color and animation on this comment."));if(r===null)r=function(){a("Bootloader").loadModules(["TextDelightNUXLogger"],function(A){A.menuClick(this.props.comment.fbid)}.bind(this),"UFIComment.react")}.bind(this)}var x=(!this.$UFIComment2()?"UFICommentCloseButton":"")+(r===null&&s===null&&!this.$UFIComment2()?" hdn":"")+(w!==null?" UFICommentCloseButtonNux":"")+(this.$UFIComment2()?" UFICommentSpamTooltip":""),y=null,z=null;if(this.props.contextArgs.viewas){y="/ajax/profile/link_disabled_in_viewas.php";z="dialog";r=null}return a("React").createElement("span",{className:"_36rj"},a("React").createElement(a("UFICommentMenu.react"),{ajaxify:y,"aria-label":u,className:x,"data-testid":ka,onClick:r,rel:z,tooltip:u,menuUserSection:t,menuData:s,menuType:v,onAction:this.$UFIComment16,exposeToDeleteBlockQE:this.props.comment.canremove&&!this.props.comment.canedit,ref:"comment_menu"}),w)};p.prototype.componentDidMount=function(){__p&&__p();var q,r=this;if(this.props.comment.trackingID&&this.props.isOptimisticallyRendered)a("UFICommonInteractionLogger").endInteraction(this.props.comment.trackingID+a("UFICommonInteractionEvents").UFI_OPTIMISTIC_COMMENT);if(this.state.isHighlighting)(function(){__p&&__p();var s=r.props.contextArgs.feedLocationType===a("FBFeedLocations").WORKPLACE_HUB_PREVIEW,t=a("ReactDOM").findDOMNode(r),u=r.props.comment.body&&r.props.comment.body.text;if(u)t=r.$UFIComment1;var v=parseInt(r.props.comment.scrolltopoffset||0,10);a("Bootloader").loadModules(["UFIScrollHighlight"],function(w){__p&&__p();setTimeout(function(){__p&&__p();if(a("UFIRootRegistry").isSnowliftNode(this.props.contextArgs.rootid)||s)if(s)w.actOnWorkplaceHubSnowliftElem(t,v);else w.actOnSnowliftElem(t,v);else if(this.props.comment.privacy_value===a("CommentPrivacyValue").OWNER_OR_COMMENTER&&a("PrivateCommentsConfig").dark_comment_theme_enabled)w.actOnPrivateComment(t,v);else if(a("SelfCommentsGatingConfig").blue_self_comments_enabled&&this.props.viewerIsAuthor){var x=a("DOM").scry(t,"^._o0o");w.actOnSelfComment(t,v,x.length>0)}else w.actOn(t,v,u)}.bind(this),0)}.bind(r),"UFIComment.react");r.setState({isHighlighting:false})})();if(this.props.comment.fbid)a("UFISharedDispatcher").dispatch(a("UFICommentAction").mounted(this.props.contextArgs,{comment:this.props.comment,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)}))};p.prototype.componentDidUpdate=function(q){if(this.props.comment.trackingID&&q.isOptimisticallyRendered&&!this.props.isOptimisticallyRendered)a("UFICommonInteractionLogger").endInteraction(this.props.comment.trackingID+a("UFICommonInteractionEvents").UFI_PERSISTED_COMMENT)};p.prototype.componentWillUnmount=function(){if(this.props.comment.fbid)a("UFISharedDispatcher").dispatch(a("UFICommentAction").unmounted(this.props.contextArgs,{comment:this.props.comment,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)}))};p.prototype.shouldComponentUpdate=function(q,r){var s=this.props,t=this.state;return q.comment!==s.comment||q.showReplyLink!==s.showReplyLink||q.isFirst!==s.isFirst||q.isLast!==s.isLast||q.isFirstCommentComponent!==s.isFirstCommentComponent||q.isLastCommentComponent!==s.isLastCommentComponent||q.isFirstComponent!==s.isFirstComponent||q.isLastComponent!==s.isLastComponent||q.isFeatured!==s.isFeatured||q.hasPartialBorder!==s.hasPartialBorder||q.showTranslation!==s.showTranslation||r.wasHighlighted!==t.wasHighlighted||r.isHighlighting!==t.isHighlighting||r.markedAsSpamHere!==t.markedAsSpamHere||r.isInlinePageDeleted!==t.isInlinePageDeleted||r.isInlineBanned!==t.isInlineBanned||r.isInlineStreamBanned!==t.isInlineStreamBanned||r.showBody!==t.showBody||r.hideSpamComment!==t.hideSpamComment||q.isLocallyComposed===true&&q.comment.id!==a("UFIComments").getCacheVariable("lastComment")||r.loadingDialogWhenSharing!==t.loadingDialogWhenSharing};p.prototype.$UFIComment2=function(){var q=this.props.comment,r=q.needsApproval,s=q.canAppeal,t=q.canSecure,u=q.appealStatus,v=q.isApproved;return r||s||t||(u===a("CommentApprovalsResponsibleUserAction").APPEALED||u===a("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT)&&!v};p.prototype.render=function(){__p&&__p();var q=this.props,r=q.contextArgs,s=q.comment,t=q.feedback,u=s.status===g.DELETED,v=s.status===g.LIVE_DELETED,w=s.status===g.SPAM_DISPLAY,x=this.state.hideSpamComment;if(u)return null;var y=this.state.markedAsSpamHere,z=this.state.isInlinePageDeleted,A=this.props.hideAsSpamForPageAdmin,B=this.state.isInlineBanned,C=this.state.isInlineStreamBanned;if(s.islive&&!this.state.loggedLiveUpdate){new(a("LiveWWWFeedbackTypedLogger"))().setEvent("update_view").setUpdateType("comment").setCommentID(s.id).log();this.setState({loggedLiveUpdate:true})}var D=Ea(s),E=!s.status&&(s.isunseen||s.__typename==="local");if(!s.status&&t.lastseentime){var F=s.originalTimestamp||s.timestamp.time;E=E||F>t.lastseentime}var G=r.markedcomments;if(G&&G[s.legacyid])E=true;if(this.props.orderingMode===a("WebCommentViewOption").LIVE_STREAMING||this.props.isLivePinnedComment)E=false;var H="UFIRow"+(this.props.inReviewView?" UFICommentInReview":"")+(this.props.isFirst?" _48ph":"")+(this.props.isLast?" UFILastComment":"")+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent||a("SutroPhase2GatingConfig").enabled_bling_above_ufi&&this.props.isFirstCommentComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.state.isAcceptedAnswer?" UFIAcceptedAnswer":"")+(this.props.isLivePinnedComment?" UFILivePinnedComment":"")+(!!this.props.comment.neighborBadge?" uiContextualLayerParent":""),I=c._("Comment"),J=c._("Comment reply"),K=s.parentcommentid?J:I;if(D)if(o){var L=null,M=null,N=null,O=null,P=null;if(A){N=B?this.$UFIComment13:this.$UFIComment12;O=C?this.$UFIComment15:this.$UFIComment14;if(z)L=c._("You've deleted this comment so no one can see it.");else if(y){L=c._("Now this is only visible to the person who wrote it and their friends.");P=this.$UFIComment5;M=this.$UFIComment4}}else if(y){L=c._("This comment has been hidden.");P=this.$UFIComment5;M=this.$UFIComment4}if(L)return a("React").createElement("div",{className:H,role:"article","aria-label":K},a("React").createElement(o,{notice:L,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:M,onBanAction:N,onStreamBanAction:O,onDeleteAction:P,isInlineBanned:B,isInlinePageDeleted:z,isInlineStreamBanned:C,hideAsSpamForPageAdmin:A,pageID:this.props.feedback.ownerid}))}else a("Bootloader").loadModules(["UFICommentRemovalControls.react"],function(U){o=U;setTimeout(function(){this.forceUpdate()}.bind(this))}.bind(this),"UFIComment.react");var Q="comment_"+a("uniqueID")(),R=a("joinClasses")(H,"UFIComment"+(Ca(s)?" UFICommentFailed":"")+(a("PrivateCommentsConfig").dark_comment_theme_enabled&&s.privacy_value===a("CommentPrivacyValue").OWNER_OR_COMMENTER?" UFIPrivateCommentDarkTheme":"")+(Da(s,r.location)?" UFITipJarComment":"")+(v||w||this.$UFIComment2()&&!x||s.parentNeedsApproval?" UFITranslucentComment":"")+(this.state.isHighlighting?" highlightComment":"")+" _4oep"+(this.props.hasPartialBorder?" UFIPartialBorder":"")+(E?" UFIUnseenItem":"")+(s.isAnnouncement?" UFICommentLiveVideoAnnouncement":"")),S=this.renderComment(),T=r.mayLogVPVs&&this.props.orderingMode===a("WebCommentViewOption").FILTERED;if(s.__typename!=="local"&&!s.isAnnouncement){if(T)S=a("React").createElement(a("UFICommentVPVTracker.react"),{comment:s,contextArgs:r},S);S=a("React").createElement(a("UFICommentVPVDTracker.react"),{renderedComment:{comment:s,isLivePinnedComment:Boolean(this.props.isLivePinnedComment)},contextArgs:this.props.contextArgs},S)}return a("React").createElement("div",{id:Q,className:R,role:"article","aria-label":K,"data-testid":this.state.wasHighlighted?la:null,"data-ft":this.props["data-ft"]},S)};p.prototype.$UFIComment23=function(q,r){__p&&__p();var s=this.props,t=s.comment,u=s.feedback,v=this.state.hideSpamComment,w=t.appealStatus,x=t.body?t.body.text:"",y=a("UFICommentUtils").shallowCopyRanges(t.body&&t.body.ranges),z=a("UFICommentUtils").shallowCopyRanges(t.body&&t.body.delight_ranges),A=a("React").createElement(a("ShimButton.react"),{className:"UFICommentShowComment",form:"link",onClick:function(){return this.setState({hideSpamComment:false})}.bind(this)},c._("Show comment"));if(v&&this.$UFIComment2()){var B=void 0;if(w===a("CommentApprovalsResponsibleUserAction").SECURED_ACCOUNT&&t.needsApproval===false){B=a("React").createElement(a("Text.react"),null,c._({"*":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in {number} days.","_1":"Thanks for securing your account. We recommend deleting this comment now. If you don't, it will be automatically deleted in 1 day."},[c._plural(t.daysToExpire,"number")]));var C=a("React").createElement(a("ShimButton.react"),{className:"UFICommentShowComment",form:"link",onClick:function(event){return this.$UFIComment6(event)}.bind(this)},c._("Delete"));return a("React").createElement("span",null,B,A,c._("or"),C)}B=t.needsApproval?a("React").createElement(a("Text.react"),null,c._("{name}'s comment was marked as spam.",[c._param("name",r)])):a("React").createElement(a("Text.react"),null,c._("Your comment was marked as spam."));return a("React").createElement("span",null,B,A)}x=a("UFICommentUtils").getCommentTextWithTruncatedURIs(y,x);var D=null,E=null;if(!s.isLocallyComposed&&!this.state.wasHighlighted){E=a("UFIConstants").commentTruncationLength;D=a("UFIConstants").commentTruncationMaxLines}if(t.body&&t.body.markdown_enabled&&t.body.markup)if(a("HTML").isHTML(t.body.markup))return a("React").createElement("span",{dangerouslySetInnerHTML:t.body.markup});if(t.isJoinEvent)return a("React").createElement(a("BootloadedComponent.react"),{bootloadLoader:a("JSResource")("UFIJoinEvent.react").__setRef("UFIComment.react"),bootloadPlaceholder:a("React").createElement("span",null),comment:t});var F=this.$UFIComment24(x);return a("React").createElement(a("UFICommentBody.react"),{socialContext:t.socialcontext,commentText:x,commentRanges:y,commentPrivacy:t.privacy_value,textDelightRanges:z,showEmojisStandalone:F,groupOrEventID:u.grouporeventid,maxLength:E,maxLines:D,markViewerHasInteracted:this.props.markViewerHasInteracted,shouldExpand:q,ufiInstanceID:this.props.contextArgs.instanceid,commentFBID:t.fbid,isLiveStreaming:s.contextArgs.islivestreaming})};p.prototype.$UFIComment24=function(q){if(!q||q.length>Aa*Ba)return false;var r=a("EmojiRenderer").parse(q);if(!r)return false;var s=0;r.forEach(function(t){s+=t.length});return q.length==s&&r.length<=Ba};p.prototype.$UFIComment25=function(q){this.setState({loadingDialogWhenSharing:true});var r=q&&q.shareOptions&&q.shareOptions.shareNowURI?q.shareOptions.shareNowURI:null;if(r)new(a("AsyncRequest"))().setURI(r).setMethod("POST").setHandler(function(s){this.setState({loadingDialogWhenSharing:false});this.$UFIComment26(s.payload.message||a("ShareNowConstants").success)}.bind(this)).setErrorHandler(function(s){this.setState({loadingDialogWhenSharing:false});this.$UFIComment26(s.payload.message||a("ShareNowConstants").error)}.bind(this)).send()};p.prototype.$UFIComment26=function(q){return new(a("Dialog"))().setBody(q).setAutohide(2500).setModal(true).show()};p.prototype.$UFIComment27=function(q){return this.$UFIComment28(q)?a("React").createElement("span",{className:"UFICommentShareOptionsItem"},a("React").createElement(a("XUIButton.react"),{image:a("React").createElement(a("Image.react"),{src:b("363444")}),label:c._("Send a Message"),href:"#",ajaxify:q&&q.shareOptions&&q.shareOptions.shareMessageURI?q.shareOptions.shareMessageURI:null,rel:"dialog",use:"default"})):null};p.prototype.$UFIComment29=function(q){return this.$UFIComment30(q)?a("React").createElement("span",{className:"UFICommentShareOptionsItem"},a("React").createElement(a("XUIButton.react"),{image:a("React").createElement(a("Image.react"),{src:b("363577")}),label:c._("Share..."),href:"#",ajaxify:q&&q.shareOptions&&q.shareOptions.sharePostURI?q.shareOptions.sharePostURI:null,rel:"dialog",use:"default"})):null};p.prototype.$UFIComment31=function(q){var r=q&&q.shareOptions&&q.shareOptions.privacyText?c._("Share Now ({privacyText})",[c._param("privacyText",q.shareOptions.privacyText)]):"";return this.$UFIComment32(q)?a("React").createElement("span",{className:"UFICommentShareOptionsItem"},a("React").createElement(a("XUIButton.react"),{image:a("React").createElement(a("Image.react"),{src:b("113894")}),label:r,href:"#",onClick:function(){return this.$UFIComment25(q)}.bind(this),use:"default"})):null};p.prototype.$UFIComment32=function(q){return q!=null&&q.shareOptions!=null&&q.shareOptions.shareNowURI!=null};p.prototype.$UFIComment28=function(q){return q!=null&&q.shareOptions!=null&&q.shareOptions.shareMessageURI!=null};p.prototype.$UFIComment30=function(q){return q!=null&&q.shareOptions!=null&&q.shareOptions.sharePostURI!=null};p.prototype.$UFIComment33=function(){return a("React").createElement("div",null,c._("Share Post:"))};p.prototype.$UFIComment34=function(q){var r=q.contextArgs.shareLinkConfig,s=this.$UFIComment31(r),t=this.$UFIComment29(r),u=this.$UFIComment27(r),v=this.$UFIComment33(),w=this.$UFIComment35(),x=s||t||u;a("QE2Logger").logExposureForUser(ia);return x?a("React").createElement("span",{className:"UFICommentShareOptionsContainer"},a("React").createElement("span",{className:"UFICommentShareOptionsDescription"},v),a("React").createElement("span",{className:"UFICommentShareOptions"},s,t,u,w)):null};p.prototype.$UFIComment35=function(){return a("React").createElement(a("LoadingDialog.react"),{shown:this.state.loadingDialogWhenSharing})};p.prototype.renderComment=function(){__p&&__p();var q=this.props,r=q.comment,s=q.permalink,t=q.feedback,u=q.authorProfiles[r.author],v=r.status===g.SPAM_DISPLAY,w=r.status===g.LIVE_DELETED,x=!(v||w||r.isAnnouncement),y=false;if(this.props.featuredCommentIDs&&this.props.featuredCommentIDs.indexOf(this.props.comment.fbid)>-1)y=true;var z=t.canremoveall||r.hiddenbyviewer,A=a("TrackingNodes").getTrackingInfo(a("TrackingNodes").types.SMALL_ACTOR_PHOTO),B=void 0;if(!q.contextArgs.viewas&&!r.isAnnouncement){if(!u)throw new Error("Got unexpected null author on comment "+JSON.stringify(r)+" with profiles "+JSON.stringify(q.authorProfiles));B=a("HovercardLink").constructEndpointWithGroupLocationAndExtraParams(u,t.grouporeventid,r.hovercardlocation?r.hovercardlocation:a("UserHovercardLocation").UFI,r.isauthorweakreference,{on_public_ufi:t.ispublic}).toString()}var C=q.contextArgs.disableCommentAuthorLink,D=!C&&q.orderingMode===a("WebCommentViewOption").LIVE_STREAMING&&a("gkx")("AT50DTpQpQvwANb6nLI-jHSiukpChvd1wLBvysNfspaXJe3sXVGoH-Q44FhkmP61przSpmqiwqaOZ11Cc4AqxJuzE73wZ53mu-Kc60ycL3xCQw"),E=r.isAnnouncement?null:a("React").createElement(a("UFICommentAuthorName.react"),{author:u,authorProfiles:q.authorProfiles,commentID:r.id?r.id.toString():null,commentPrivacyValue:r.privacy_value,commonalityString:r.commonalityString,constituentBadge:r.constituentTitle,disableAuthorLink:C||D,focusOnMount:q.focusOnMount,customGlyphTag:r.customglyphtag,groupOrEventID:t.grouporeventid,isAdminViewer:q.feedback.isadminviewer,isAuthorBot:r.isauthorbot,isAuthorNonCoworker:r.isauthornoncoworker,isAuthorWeakReference:r.isauthorweakreference,isAuthorOriginalPoster:r.isauthororiginalposter,isFeatured:q.isFeatured,isPublic:t.ispublic,dialogUrl:r.dialogurl,hasConstituentBadge:r.hasConstituentBadge,hasFriendsOnlyBadge:r.hasFriendsOnlyBadge,hasModeratorBadge:r.hasModeratorBadge,hasUsernameBadge:r.hasUsernameBadge,hovercardLocation:r.hovercardlocation,neighborBadge:r.neighborBadge,showHovercard:!!B,socialContext:r.socialcontext,viewerIsAuthor:!!q.viewerIsAuthor}),F=r.identityBadges?a("React").createElement(a("IdentityBadges.react"),{badges:r.identityBadges}):null,G=this.$UFIComment23(y,E),H=r.translationdata,I=H&&H.translatedText&&H.translatedText.text,J=!I||this.state.showBody||H.trigger===a("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION,K=this.props.showTranslation&&!H||!!H&&(!a("UFIConfig").shouldTranslationsReplaceContent||!J||!I||H.trigger===a("TranslationTrigger").LOGGED_OUT_AUTO_TRANSLATION),L=void 0;if(r.isAnnouncement)L=a("React").createElement("div",{className:"UFICommentLiveVideoAnnouncementBody"+(q.contextArgs.isLiveVideoSutroAnnouncementEnabled?" _4qkn":"")},a("React").createElement(a("InlineBlock.react"),{alignv:"middle",className:"UFICommentLiveVideoAnnouncementMessage",height:0},G),a("React").createElement(a("BootloadedComponent.react"),{bootloadLoader:a("JSResource")("UFILiveVideoAnnouncementCTAContainer.react").__setRef("UFIComment.react"),bootloadPlaceholder:a("React").createElement("span",null),comment:r,contextArgs:q.contextArgs}));else{var M=void 0;if(r.istranslatable||!!H)M=a("React").createElement("div",null,a("React").createElement(a("UFICommentTranslationText.react"),{shouldExpand:y,showTranslation:K,translationData:H}));L=a("React").createElement("span",null,J?G:null,M)}var N=null;if(q.contextArgs.isLiveVOD||!q.contextArgs.islivestreaming&&q.contextArgs.showVODCommentTimestamps&&q.comment.videoTimeOffset)N=a("React").createElement(a("UFILiveCommentTimestamp.react"),{comment:r,contextArgs:q.contextArgs});var O=void 0;if(r.attachment_status)O=a("React").createElement("div",{className:"_50f8"},r.attachment_status);var P=a("React").createElement(a("UFICommentAttachment.react"),{allowCustomStickers:t.allowgaminglivestreamcustomstickers,comment:q.comment}),Q=a("React").createElement(a("UFICommentPlayerStatsCard.react"),{comment:q.comment}),R=void 0;if(this.state.hideSpamComment)R=a("React").createElement("div",null);else if(r.isAnnouncement)R=a("React").createElement(a("UFICommentLiveVideoAnnouncementImage.react"),{accentColor:r.accentColor,contextArgs:q.contextArgs,glyphName:r.glyphName,image:r.image,isJoinEvent:r.isJoinEvent});else{var S=(u.uri||u.isBusinessPersona)&&!(q.orderingMode===a("WebCommentViewOption").LIVE_STREAMING&&a("gkx")("AT50DTpQpQvwANb6nLI-jHSiukpChvd1wLBvysNfspaXJe3sXVGoH-Q44FhkmP61przSpmqiwqaOZ11Cc4AqxJuzE73wZ53mu-Kc60ycL3xCQw")),T=S?a("UFICommentUtils").annotateProfileURIIfPublic(t.ispublic,u.uri):null,U=u.is_active;R=a("React").createElement(a("UFIActorIconContainer.react"),{actorID:r.author});if(r.dialogurl)R=a("React").createElement("a",{className:"UFICommentAuthorWithPresence","data-ft":A,"data-hovercard":B,ajaxify:r.dialogurl,rel:"dialog",href:T},R,a("React").createElement("div",{className:"UFICommentAuthorPresence"+(U?" UFICommentAuthorActive":"")}));else if(S)R=a("React").createElement("a",{className:"UFICommentAuthorWithPresence","data-ft":A,"data-hovercard":B,href:T},R,a("React").createElement("div",{className:"UFICommentAuthorPresence"+(U?" UFICommentAuthorActive":"")}))}var V=null;if(this.state.isAcceptedAnswer)V=a("React").createElement("span",{className:"UFIAcceptedAnswerLabel"},c._("Accepted Answer"));else if(this.props.isLivePinnedComment){var Ga=c._("Pinned Comment");V=a("React").createElement("span",{className:"UFILivePinnedCommentLabel"},a("React").createElement(a("Image.react"),{className:"UFILivePinnedCommentGlyph",src:b("139486")}),Ga)}var Ha=r.tipOptionIndex?a("React").createElement(a("VideoTipJarCommentBackground.react"),{tipOptionIndex:r.tipOptionIndex}):null,W=r.body&&r.body.text,Ia=false,X=false;if(W)X=this.$UFIComment24(r.body.text);var Ja=!this.state.hideSpamComment&&(r.photo_comment||r.video_comment||r.attachment);if(Ja&&X)L=a("React").createElement("div",{className:"_26f8"},L,x?this.$UFIComment22():null);var Y=null;if(!this.state.hideSpamComment&&r.privacy_value===a("CommentPrivacyValue").OWNER_OR_COMMENTER&&(a("PrivateCommentsConfig").privacy_text_above_comment_enabled||a("PrivateCommentsConfig").privacy_text_inside_comment_enabled)){var Ka=q.viewerIsAuthor?t.actorshortname||t.actorname:u.firstName||u.name;Y=a("React").createElement("div",{className:"UFIPrivateCommentLabel"+(r.parentcommentid?" UFIPrivateCommentReplyLabel":"")+(!W&&!r.isAnnouncement||X?" UFIPrivateCommentActorOnly":"")},a("React").createElement("div",{className:"UFIPrivateCommentLabelIcon"}),r.parentcommentid?null:a("React").createElement("div",{className:"UFIPrivateCommentLabelText"},c._("Only you and {user} can see this",[c._param("user",Ka)])))}var Z=a("React").createElement("span",{className:(!W&&!r.isAnnouncement?"UFICommentActorOnly":"")+(W||r.isAnnouncement?" UFICommentActorAndBody":"")+(r.isJoinEvent&&q.contextArgs.isLiveVideoSutroAnnouncementEnabled?" _4ql9":"")+(r.isAnnouncement&&r.ctaAction!==a("LiveVideoAnnouncementCTAType").NONE&&q.contextArgs.isLiveVideoSutroAnnouncementEnabled?" _4qla":"")+(X?" _3re2":""),ref:function($){this.$UFIComment1=$}.bind(this)},F,!this.state.hideSpamComment?E:null,N,E||N?" ":null,a("PrivateCommentsConfig").privacy_text_inside_comment_enabled?Y:null,L),La=a("SutroPhase2GatingConfig").enabled_narrow_bubble_attachments?r.attachment&&(r.attachment.type==="comment_place_info"||r.attachment.type==="comment_product_info"||r.attachment.type==="gif"||r.attachment.type==="TIP_JAR_PAYMENT")&&!r.photo_comment&&!r.video_comment:r.attachment&&(r.attachment.type==="share"||r.attachment.type==="comment_place_info"||r.attachment.type==="comment_product_info"||r.attachment.type==="gif"||r.attachment.type==="TIP_JAR_PAYMENT")&&!r.photo_comment&&!r.video_comment,Ma=a("SutroPhase2GatingConfig").enabled_narrow_bubble_attachments&&r.attachment&&r.attachment.type==="share";if(Ja)P=a("React").createElement(a("UFIReactionBadgeDecorator.react"),{comment:r,feedback:t,contextArgs:q.contextArgs,isFlexibleWidthAttachment:Ma,isFullWidthAttachment:La},P);else if(X)Z=a("React").createElement("span",{className:(!W&&!r.isAnnouncement?"UFICommentActorOnly":"")+(W||r.isAnnouncement?" UFICommentActorAndBody":"")+(r.isJoinEvent&&q.contextArgs.isLiveVideoSutroAnnouncementEnabled?" _4ql9":"")+(X?" _3re2":""),ref:function($){this.$UFIComment1=$}.bind(this)},F,!this.state.hideSpamComment?E:null,N,E||N?" ":null,a("PrivateCommentsConfig").privacy_text_inside_comment_enabled?Y:null,a("React").createElement("div",{className:"_26f8"},a("React").createElement(a("UFIReactionBadgeDecorator.react"),{comment:r,feedback:t,contextArgs:q.contextArgs},L),x?this.$UFIComment22():null));else Z=a("React").createElement(a("UFIReactionBadgeDecorator.react"),{comment:r,feedback:t,contextArgs:q.contextArgs},Z);Ia=true;if(!W&&P)P=a("React").createElement("div",{className:"_26f8"},P,x?this.$UFIComment22():null);else if(!X&&(W&&!P||W&&P))Z=a("React").createElement("div",{className:"_26f8"},Z,x?this.$UFIComment22():null);var Na=void 0;if(r.istranslatable||!!H)Na=a("React").createElement(a("UFICommentTranslationLink.react"),{translationData:H,showTranslation:K,isShowingOriginal:J,onSeeTranslation:function(){return this.$UFIComment19()}.bind(this),onSeeOriginal:function(){return this.setState({showBody:true})}.bind(this),shownInCommentActions:true});var Oa=r.isAnnouncement||this.state.hideSpamComment||this.props.inReviewView||this.props.contextArgs.feedLocationType===a("FBFeedLocations").CE_PII_STRIPPED_FEED?null:a("React").createElement(a("UFICommentActions.react"),{comment:r,feedback:t,hideReactionCount:Ia,parentCanComment:q.parentCanComment,permalink:s,viewerCanMarkNotSpam:Boolean(z),showPermalink:q.showPermalink,showReplyLink:q.showReplyLink,translateLink:Na,contextArgs:q.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:q.hideAsSpamForPageAdmin||this.state.hideSpamComment,hideSpamComment:this.state.hideSpamComment,orderingMode:q.orderingMode}),Pa=this.props.contextArgs.feedLocationType===a("FBFeedLocations").TAHOE&&this.props.isLocallyComposed&&a("UFIComments").getCacheVariable("lastComment")===r.id&&!r.parentcommentid?this.$UFIComment34(q):null,Qa=this.props.viewerIsAuthor&&a("SelfCommentsGatingConfig").blue_self_comments_enabled,Ra=a("React").createElement("div",null,V,a("PrivateCommentsConfig").privacy_text_above_comment_enabled&&!r.parentcommentid?Y:null,a("React").createElement(a("UFIImageBlock.react"),{spacing:"medium"},R,a("React").createElement("div",{className:"UFICommentContentBlock"},a("React").createElement("div",{className:"UFICommentContent"+(Qa?" _67sh":"")+(Qa?" _2bsy":"")+(r.surveyGalleryHighlight?" _42wr":"")},Z,!this.state.hideSpamComment?P:null,!this.state.hideSpamComment?Q:null),O,Oa,Pa),Ha));if(this.props.contextArgs.feedLocationType===a("FBFeedLocations").SURVEY_GALLERY)return a("React").createElement("div",{className:"_-ae"},a("React").createElement("div",{className:"_-ac"}),Ra);else return Ra};p.propTypes={authorProfiles:f.object.isRequired,comment:f.object.isRequired,contextArgs:f.object.isRequired,feedback:f.object.isRequired,"data-ft":f.string,featuredCommentIDs:f.array,focusOnMount:f.bool,hasPartialBorder:f.bool,hideAsSpamForPageAdmin:f.bool,isFeatured:f.bool,isFirst:f.bool,isFirstCommentComponent:f.bool,isFirstComponent:f.bool,isLast:f.bool,isLastCommentComponent:f.bool,isLastComponent:f.bool,isLivePinnedComment:f.bool,isLocallyComposed:f.bool,parentCanComment:f.bool,permalink:f.string,showPermalink:f.bool,showRemoveReportMenu:f.bool,showReplyLink:f.bool,viewerIsAuthor:f.bool,orderingMode:f.string,markViewerHasInteracted:f.func,showTranslation:f.bool};p.contextTypes={dispatch:f.func};var Fa=function Fa(){__p&&__p();this.$UFIComment1=null;this.$UFIComment3=function(event){this.context.dispatch(a("UFICommentAction").markAsSpam(this.props.contextArgs,this.props.comment,event.target));this.setState({markedAsSpamHere:true})}.bind(this);this.$UFIComment4=function(event){this.context.dispatch(a("UFICommentAction").markAsNotSpam(this.props.contextArgs,this.props.comment,event));this.setState({markedAsSpamHere:false})}.bind(this);this.$UFIComment5=function(event){this.context.dispatch(a("UFICommentAction").remove(this.props.contextArgs,this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true})}.bind(this)))}.bind(this);this.$UFIComment6=function(event){this.context.dispatch(a("UFICommentAction").remove(this.props.contextArgs,this.props.comment,event.target,a("emptyFunction")))}.bind(this);this.$UFIComment8=function(event){this.context.dispatch(a("UFICommentAction").delete_comment_and_remove_commenter(this.props.contextArgs,this.props.comment,event.target,a("emptyFunction")))}.bind(this);this.$UFIComment9=function(event){this.context.dispatch(a("UFICommentAction").mute_member(this.props.contextArgs,this.props.comment,event.target,a("emptyFunction")))}.bind(this);this.$UFIComment12=function(event){this.context.dispatch(a("UFICommentAction").inlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true})}.bind(this);this.$UFIComment13=function(event){this.context.dispatch(a("UFICommentAction").undoInlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false})}.bind(this);this.$UFIComment14=function(event){this.context.dispatch(a("UFICommentAction").inlineStreamBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineStreamBanned:true})}.bind(this);this.$UFIComment15=function(event){this.context.dispatch(a("UFICommentAction").undoInlineStreamBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineStreamBanned:false})}.bind(this);this.$UFIComment16=function(event,q){__p&&__p();var r=q.item,s=r.getValue();setTimeout(function(){__p&&__p();var t=this.props,u=t.comment,v=t.contextArgs,w=t.feedback;if(s===h.remove)this.$UFIComment6(event);else if(s===h.delete_and_block)this.$UFIComment7(r);else if(s===h.delete_comment_and_remove_commenter)this.$UFIComment8(event);else if(s===h.edit)this.context.dispatch(a("UFICommentAction").edit(v,u));else if(s===h.hide)this.$UFIComment3(event);else if(s===h.mute_member)this.$UFIComment9(event);else if(s==="bulk_review")this.$UFIComment10(event);else if(s===h.hide_text_delights)this.$UFIComment11(event);else if(s===h.embed)this.context.dispatch(a("UFICommentAction").embed(v,u));else if(s===h.manageConstituentBadge)this.context.dispatch(a("UFICommentAction").manageConstituentBadge(v,u));else a("UFICentralUpdates").inform(s,{comment:u,feedback:w})}.bind(this),0)}.bind(this)};ea.exports=a("FluxContainer").create(p,{pure:false,withProps:true})}),null);
__d("UFICommentDisabledNotice.react",["cx","React","TextWithEntities.react","linkifyEntityRange"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.feedback,n=m.commentdisablednotice;if(m.isviewermuted)n=m.mutednotice;if(m.arecommentsdisabled)n=m.commentdisablednotice;var o=c("React").createElement("div",{className:"UFINotice"},c("React").createElement(c("TextWithEntities.react"),{interpolator:c("linkifyEntityRange"),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return c("React").createElement("div",{className:"UFIRow _4204 _2o9m _4oep"},o)};function l(){i.apply(this,arguments)}l.propTypes={feedback:k.object.isRequired};f.exports=l}),null);
__d("UFICommentFilters",["UFIConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getAuthors:function i(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k},[])},isDeleted:function i(j){return j.status===c("UFIConstants").UFIStatus.DELETED},isSpam:function i(j){return j.status===c("UFIConstants").UFIStatus.SPAM},collectSpamBuckets:function i(j,k){__p&&__p();var l=j.reduce(function(l,m){__p&&__p();if(h.isSpam(m))if(l.spamBucket){l.spamBucket.spamCommentIDs.push(m.id);l.collected.push(null)}else{l.spamBucket={status:c("UFIConstants").UFIStatus.SPAM,id:m.id,spamCommentIDs:[m.id]};l.collected.push(l.spamBucket)}else if(m.isAnnouncement||k[m.author]){l.spamBucket=null;l.collected.push(m)}return l},{spamBucket:null,collected:[]});return l.collected}};f.exports=h}),null);
__d("UFICommentHeader.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("h6",babelHelpers["extends"]({},this.props,{className:"accessible_elem"}),i._("Comments"))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("UFICommentListVisibilityTracker.react",["cx","Arbiter","DOMQuery","OnVisible.react","React","ReactDOM","SubscriptionsHandler","UFICommentVPVD","UFIConfig","UFIInstanceAction","UFISharedDispatcher","UFIVisibility"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").Children,l=c("React").Component,m=c("React").PropTypes,n=c("UFIConfig").commentVPVD;i=babelHelpers.inherits(o,l);j=i&&i.prototype;function o(p){__p&&__p();j.constructor.call(this,p);this.state={isVisible:false};this.onVisible=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:true});c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").changeCommentListVisibility(this.props.contextArgs,c("UFIVisibility").VISIBLE))}.bind(this);this.onHidden=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:false});c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").changeCommentListVisibility(this.props.contextArgs,c("UFIVisibility").HIDDEN))}.bind(this);this.$UFICommentListVisibilityTracker1=new(c("SubscriptionsHandler"))()}o.prototype.componentDidMount=function(){if(this.$UFICommentListVisibilityTracker2()&&this.props.contextArgs.location==="conversation_nub")this.$UFICommentListVisibilityTracker1.addSubscriptions(c("Arbiter").subscribe("ConversationNubUtils/recheckTabVisibility",function(p,q){var r=q||{},s=r.tab,t=s&&s.getRootDOM(),u=this.refs.onVisibleRoot,v=u&&c("ReactDOM").findDOMNode(u);if(t&&u&&v&&c("DOMQuery").contains(t,v))u.check()}.bind(this)))};o.prototype.componentWillUnmount=function(){this.$UFICommentListVisibilityTracker1.release()};o.prototype.shouldComponentUpdate=function(p,q){if(!n.debug_html&&this.state.isVisible!==q.isVisible)return false;return true};o.prototype.$UFICommentListVisibilityTracker2=function(){return!!c("UFIConfig").enableCommentListVisibilityTracking||c("UFICommentVPVD").enableVPVDLogging(this.props.contextArgs)};o.prototype.render=function(){var p=k.only(this.props.children);if(!this.$UFICommentListVisibilityTracker2())return p;var q=n.debug_html;return c("React").createElement("div",{"data-debugstate":q?this.state.isVisible?"partially visible":"hidden":null,className:"_3b-9"+(q?" _3b-a":"")+(q&&this.state.isVisible?" _3b-b":"")+(q&&!this.state.isVisible?" _3b-c":"")+" _j6a"},c("React").createElement(c("OnVisible.react"),{ref:"onVisibleRoot",onVisible:this.onVisible,onHidden:this.onHidden},p))};o.propTypes={contextArgs:m.shape({instanceid:m.string.isRequired,location:m.string}).isRequired};f.exports=o}),null);
__d("UFICommentScrollableArea.react",["React","ScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").Children;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.scrollcomments,o=l.scrollwidth;if(n&&o)return c("React").createElement(c("ScrollableArea.react"),{width:o},j.only(m));return j.only(m)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("CommentsTimeSpentTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$CommentsTimeSpentTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$CommentsTimeSpentTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:CommentsTimeSpentLoggerConfig",this.$CommentsTimeSpentTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$CommentsTimeSpentTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$CommentsTimeSpentTypedLogger1)};h.prototype.updateData=function(j){this.$CommentsTimeSpentTypedLogger1=babelHelpers["extends"]({},this.$CommentsTimeSpentTypedLogger1,j);return this};h.prototype.setEndTime=function(j){this.$CommentsTimeSpentTypedLogger1.end_time=j;return this};h.prototype.setOrderingMode=function(j){this.$CommentsTimeSpentTypedLogger1.ordering_mode=j;return this};h.prototype.setPostFbid=function(j){this.$CommentsTimeSpentTypedLogger1.post_fbid=j;return this};h.prototype.setStartTime=function(j){this.$CommentsTimeSpentTypedLogger1.start_time=j;return this};h.prototype.setTimeSpentID=function(j){this.$CommentsTimeSpentTypedLogger1.time_spent_id=j;return this};h.prototype.setViewerHasInteracted=function(j){this.$CommentsTimeSpentTypedLogger1.viewer_has_interacted=j;return this};var i={end_time:true,ordering_mode:true,post_fbid:true,start_time:true,time_spent_id:true,viewer_has_interacted:true};f.exports=h}),null);
__d("CommentsTimeSpentTracker.react",["invariant","Banzai","CommentsTimeSpentTypedLogger","Event","OnVisible.react","React","SubscriptionsHandler","TimeSlice","UFIOrderingModeStore","UserActivity","pageID","setTimeout"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"CommentsTimeSpentTracker",firstVisibleTime:0,listeners:new(c("SubscriptionsHandler"))(),propTypes:{contextArgs:i.object.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function k(){return{timeToConsiderViewerInactiveMillis:3e4,pollViewerActivityIntervalMillis:1e3}},render:function k(){return c("React").createElement(c("OnVisible.react"),{ref:"onVisibleElement",onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children)},startInterval:function k(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer()}},finishInterval:function k(){var l=c("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var m=this._getTimeInSeconds();if(m>this.firstVisibleTime)new(c("CommentsTimeSpentTypedLogger"))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(l).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(m).setTimeSpentID(c("pageID")).log();this.firstVisibleTime=0}},componentDidMount:function k(){this.listeners.addSubscriptions(c("Banzai").subscribe(c("Banzai").SHUTDOWN,this.finishInterval),c("Event").listen(window,"blur",this.finishInterval),c("Event").listen(window,"focus",this._checkVisibility))},componentWillUnmount:function k(){this.finishInterval();this.listeners.release()},componentDidUpdate:function k(){this.finishInterval();this._checkVisibility()},_getTimeInSeconds:function k(){return Math.floor(Date.now()/1e3)},_checkVisibility:function k(){if(this.isMounted()){this.refs.onVisibleElement!==null||h(0);this.refs.onVisibleElement.reset()}},_checkForIdleViewer:function k(){__p&&__p();if(this.firstVisibleTime===0)return;if(c("UserActivity").isActive(this.props.timeToConsiderViewerInactiveMillis))c("setTimeout")(c("TimeSlice").guard(function(){this._checkForIdleViewer()}.bind(this),"CommentsTimeSpentTracker checkForIdleViewer",{propagationType:c("TimeSlice").PropagationType.EXECUTION}),this.props.pollViewerActivityIntervalMillis);else{this.finishInterval();c("UserActivity").subscribeOnce(function(){if(this.isMounted())this._checkVisibility()}.bind(this))}}});f.exports=j}),null);
__d("UFISeenTracker.react",["BanzaiODS","OnVisible.react","React","setTimeout"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;function j(l){var m=false;return function(){if(!m){l();m=true}}}h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this))}k.prototype.render=function(){if(this.state.seen)return this.props.children;return c("React").createElement(c("OnVisible.react"),{onVisible:this.$UFISeenTracker1},this.props.children)};k.prototype.logSeen=function(){c("setTimeout")(function(){return this.setState({seen:true})}.bind(this),100);c("BanzaiODS").bumpEntityKey("unsampled_feedback","rendered_ufi_client")};k.defaultProps={children:null};f.exports=k}),null);
__d("UFIComponentLogger.react",["CommentsTimeSpentTracker.react","React","UFIConfig","UFISeenTracker.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.render=function(){__p&&__p();var l=this.props,m=l.children,n=l.contextArgs,o=l.feedback,p=l.hasComments,q=l.isPermalink,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c("React").createElement("div",null,m);if(p&&c("UFIConfig").logCommentsTimespent){var t=r||q;s=c("React").createElement(c("CommentsTimeSpentTracker.react"),{contextArgs:n,viewerHasInteracted:t,targetFBID:o.commentstargetfbid},s)}if(c("UFIConfig").logWhetherUFISeen)s=c("React").createElement(c("UFISeenTracker.react"),null,s);return s};function k(){h.apply(this,arguments)}k.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};k.defaultProps={children:null};f.exports=k}),null);
__d("UFIComponents",["React","UFICommentFilters"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(k){if(!k)return false;if(k.props.comment&&c("UFICommentFilters").isDeleted(k.props.comment))return false;return true},i=function i(k,l,m){var n=void 0,o=m?k.length-1:0,p=m?-1:k.length,q=m?-1:1;for(n=o;n!=p;n+=q)if(h(k[n])){l(k,n);return k}return k},j={applyToUFIComponents:function k(l,m,n){l=i(l,function(o,p){if(o[p])o[p]=c("React").cloneElement(o[p],m)},false);l=i(l,function(o,p){if(o[p])o[p]=c("React").cloneElement(o[p],n)},true);return l}};f.exports=j}),null);
__d("UFIContainer.react",["cx","PrivateCommentsConfig","React"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",{className:(!this.props.isReplyList?"UFIList":"")+(this.props.isAcceptedAnswerReply?" UFIAcceptedAnswerReply":"")+(c("PrivateCommentsConfig").dark_comment_theme_enabled&&this.props.isPrivateComment?" UFIPrivateCommentDarkTheme":"")+(this.props.isReplyList?" UFIReplyList":"")+(this.props.inReviewView?" UFIWhiteReplyList":"")+(this.props.isParentLiveDeleted?" UFITranslucentReplyList":"")+(this.props.isFirstCommentComponent?" _48pi":"")+(this.props.isLastCommentComponent?" UFILastCommentComponent":"")+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.shouldHide?" hidden_elem":"")},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("UFILikeSentenceText.react",["cx","ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI","XUFIReactionProfileBrowserController","XUFIReactionProfileDialogController"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;function l(n,o,p,q){__p&&__p();if(q.count!=null){var r=c("ProfileBrowserTypes").LIKES,s={id:n.targetfbid,actorid:n.actorid},t=[],u=void 0;for(var v=0;v<o.length;v++)if(!o[v].count){u=o[v];var w=u.entity;t.push(w.id)}var x=new(c("URI"))("/ajax/like/tooltip.php").setQueryData({comment_fbid:n.targetfbid,comment_from:n.actorforpost,seen_user_fbids:t.length?t:true});x=c("ActorURI").create(x,n.actorforpost);var y=void 0,z=void 0;if(n.displayreactions){y=c("XUFIReactionProfileDialogController").getURIBuilder().setString("ft_ent_identifier",n.entidentifier).getURI();y=c("ActorURI").create(y,n.actorforpost);z=c("XUFIReactionProfileBrowserController").getURIBuilder().setString("ft_ent_identifier",n.entidentifier).getURI();z=c("ActorURI").create(z,n.actorforpost)}else{y=c("ProfileBrowserLink").constructDialogURI(r,s).toString();z=c("ProfileBrowserLink").constructPageURI(r,s).toString()}return c("React").createElement("a",{"data-testid":"n_other_people_link",className:"_375l",rel:"dialog",ajaxify:y,href:z,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":x.toString(),role:"button"},p)}else{var A={source_feedback_owner_id:n.ownerid,source_feedback_identifier:n.entidentifier};return c("HovercardLinkInterpolator")(p,q,null,null,"ufi",A)}}i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.feedback,o=this.props.likeSentenceData,p=void 0,q=o.aggregatedranges||o.aggregated_ranges;p=l;p=p.bind(null,n,o.ranges);return c("React").createElement(c("TextWithEntities.react"),{interpolator:p,ranges:Object.values(o.ranges),aggregatedRanges:q,text:o.text})};function m(){i.apply(this,arguments)}m.propTypes={contextArgs:k.object.isRequired,feedback:k.object.isRequired,likeSentenceData:k.object.isRequired};f.exports=m}),null);
__d("XUFIReactionTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/reaction/tooltip/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}})}),null);
__d("UFIReactionsSocialSentence.react",["cx","ActorURI","BanzaiLogger","Bootloader","FeedbackSourceType","HideFeedbackCounts","React","UFIConfig","UFIReactionsBlingTokens.react","UFIReactionsProfileBrowserUtils","XUFIReactionsSocialSentenceTooltipController","XUFIReactionTooltipController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.onSentenceClick=function(event){if(this.props.reactionsLink)return;var q=this.props.feedback,r=c("UFIReactionsProfileBrowserUtils").getDialogURI({actorID:q.actorforpost,feedbackTargetID:q.entidentifier}).toString();c("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:q.entidentifier,"interface":"www",action:"click",target_type:"social_sentence"});c("Bootloader").loadModules(["AsyncDialog"],function(s){s.bootstrap(r,event.currentTarget,"dialog")},"UFIReactionsSocialSentence.react");event.preventDefault()}.bind(this),m}k.prototype.$UFIReactionsSocialSentence1=function(l){"use strict";var m=l.actorforpost,n=l.entidentifier,o=c("UFIConfig").reactionsHasTooltipBreakdown?c("XUFIReactionsSocialSentenceTooltipController"):c("XUFIReactionTooltipController");return{"data-hover":"tooltip","data-tooltip-uri":c("ActorURI").create(o.getURIBuilder().setString("ft_ent_identifier",n).getURI(),m)}};k.prototype.render=function(){"use strict";__p&&__p();var l=this.props.feedback,m=this.props.contextArgs,n=l.likesentences,o=l.reactioncountreduced,p=l.reactionsentences,q=l.viewerreaction,r=l.reactioncount||0,s=q?r>3:r>2;if(c("UFIConfig").reactionsHasTooltipBreakdown)s=r>1;var t=c("HideFeedbackCounts").hideReactionCount,u=null;if(s)u=this.$UFIReactionsSocialSentence1(l);var v=null;if(p&&p.current){v=p.current.text;if(t&&v)if(!isNaN(v.replace(/[.,\s]/g,"")))v=""}else if(n&&n.current)v=n.current.text;else v=o;var w=null;if(v)w=c("React").createElement("span",{className:"_4arz"},c("React").createElement("span",u,v));var x=null;if(r)x=c("React").createElement("span",{"aria-hidden":!!w,className:"_1g5v"},c("React").createElement("span",u,t?c("React").createElement("br",null):o));var y=c("UFIReactionsProfileBrowserUtils").getPageURI({actorID:l.actorforpost,feedbackTargetID:l.entidentifier});if(this.props.reactionsLink)y=this.props.reactionsLink;var z=c("UFIConfig").reactionsDirectReactTokensModule?c("UFIConfig").reactionsDirectReactTokensModule:c("UFIReactionsBlingTokens.react"),A=m&&m.source===c("FeedbackSourceType").TAHOE;return c("React").createElement("div",{className:"_1vaq"},c("React").createElement("div",{className:"_ipp"},c("React").createElement(z,{className:"_4ar- _ipn",contextArgs:m,showCounts:c("UFIConfig").reactionsHasDirectReactTokensCounts,feedback:l,max:3},c("React").createElement("a",{className:"_2x4v",href:y,onClick:this.onSentenceClick,rel:"ignore",role:"button"},x,!A?w:null))))};f.exports=k}),null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/group/seenby/profile/browser/",{id:{type:"Int",required:true}})}),null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/group/seenby/profile/dialog/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}})}),null);
__d("UFILikeSentence.react",["cx","fbt","invariant","ActorURI","Bootloader","FeedbackSourceType","LeftRight.react","React","SutroPhase2GatingConfig","UFILikeSentenceText.react","UFIReactionsSocialSentence.react","URI","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","intlSummarizeNumber","isEmpty","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n=null;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},q}o.rendersSocialSentence=function(p){var q=p.feedback,r=p.contextArgs,s=q.likesentences,t=q.reactionsentences;if(r.hideSocialSentence)return false;return s&&!c("isEmpty")(s.current)||t&&t.current&&t.current.text};o.prototype.componentDidMount=function(){this.$UFILikeSentence1(this.props)};o.prototype.componentDidUpdate=function(){this.$UFILikeSentence1(this.props)};o.prototype.$UFILikeSentence1=function(p){if(p.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!p.contextArgs.entstream||j(0);c("Bootloader").loadModules(["UFIOrderingModeSelectorContainer.react"],function(f){n=f;this.setState({hasSelectorModule:true})}.bind(this),"UFILikeSentence.react");this.setState({bootloadedSelectorModule:true})}};o.prototype.$UFILikeSentence2=function(){var p=this.props.feedback,q=p.likesentences,r=q||{},s=r.current;return s||{}};o.prototype.$UFILikeSentence3=function(){var p=this.props,q=p.feedback,r=p.contextArgs;if(!this.constructor.rendersSocialSentence(p))return null;if(r.hasReactions)return c("React").createElement(c("UFIReactionsSocialSentence.react"),{feedback:q,contextArgs:r});var s=this.$UFILikeSentence2();if(s&&s.text)return c("React").createElement("div",{className:"UFILikeSentenceText"},c("React").createElement(c("UFILikeSentenceText.react"),{contextArgs:r,feedback:q,likeSentenceData:s}));return null};o.prototype.$UFILikeSentence4=function(){__p&&__p();var p=this.props,q=p.contextArgs,r=p.commentCounts;if(!q.showCommentHeader)return null;var s=void 0,t=r[q.ftentidentifier];if(t){t=c("intlSummarizeNumber")(t);s=i._("Comments ({commentCount})",[i._param("commentCount",t)])}else s=i._("Comments");return c("React").createElement("div",{className:"_4bsb"},s)};o.prototype.renderOrderingModeSelector=function(){if(!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!n)return null;return c("React").createElement(n,{key:"orderingmodeselector",contextArgs:this.props.contextArgs,feedback:this.props.feedback})};o.prototype.renderSeenState=function(){__p&&__p();var p=this.props.feedback;if(!p.seencount||p.seencount===0||this.props.contextArgs.entstream)return null;var q=null;if(p.seenbyall)if(p.seencount==1)q=i._("Seen by both of you");else q=i._("Seen by everyone");else q=p.seencount==1?i._("Seen by 1"):i._("Seen by {count}",[i._param("count",p.seencount)]);var r=new(c("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:p.entidentifier}),s=c("ActorURI").create(c("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",p.entidentifier).getURI(),p.actorforpost),t=c("ActorURI").create(c("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",p.entidentifier).getURI(),p.actorforpost);return c("React").createElement("a",{key:"seenstate",rel:"dialog",ajaxify:s,href:t,"data-hovercard":r.toString(),className:"UFISeenCount UFISeenCountRight"},c("React").createElement("span",{className:"UFISeenCountIcon"}),q)};o.prototype.render=function(){__p&&__p();var p=c("SutroPhase2GatingConfig").enabled_bling_above_ufi,q=this.$UFILikeSentence3(),r=this.renderOrderingModeSelector(),s=this.renderSeenState(),t=[s,r].filter(function(y){return y!==null}),u=null;if(t.length===1)u=t[0];else if(t.length>1)u=c("React").createElement("div",{className:"_oql"},t);var v=null,w=null;if(p)v=r;else{v=q;w=u}if(!v&&!w)return null;else if(!v){v=this.$UFILikeSentence4();if(!v&&w)v=c("React").createElement("div",null)}var x=null;if(v)x=c("React").createElement(c("LeftRight.react"),{direction:c("LeftRight.react").DIRECTION.right},v,w);else x=w;return c("React").createElement("div",{className:c("joinClasses")("UFIRow"+(this.props.feedback.likesentences.isunseen?" UFIUnseenItem":"")+" UFILikeSentence"+(!p&&this.props.isFirstComponent||p&&this.props.isFirstComponent&&u!==null?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(p?" _y2x":""))},x)};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,commentCounts:m.object,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,hasCommentOrderInverted:m.bool,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o}),null);
__d("UFILiveTypingIndicatorContainer.react",["BootloadOnRender.react","FluxContainer","JSResource","LazyComponent.react","React","UFIConfig","UFILiveTypingStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false}}k.getStores=function(){return[c("UFILiveTypingStore")]};k.calculateState=function(l,m){if(!c("UFIConfig").typingIndicator.showInline)return{everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c("UFILiveTypingStore").getState()[m.feedbackTargetID];return{everHadTyping:(l||{}).everHadTyping||n,hasTyping:n,friendTyping:c("UFILiveTypingStore").isFriendTyping(m.feedbackTargetID)}};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping};k.prototype.render=function(){if(this.state.everHadTyping)return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("UFILiveTypingIndicator.react").__setRef("UFILiveTypingIndicatorContainer.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),babelHelpers["extends"]({},this.props,this.state))});return null};f.exports=c("FluxContainer").create(k,{pure:false,withProps:true})}),null);
__d("UFIReplySocialSentence.react",["cx","fbt","Badge.react","Image.react","LiveTimer","Middot.react","NumberFormat","React","Timestamp.react","UFIImageBlock.react","WebCommentViewOption","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=43200;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n=this.props.isLoading?"UFIReplySocialSentenceLoading":"",o=c("joinClasses")("UFIRow UFIReplySocialSentenceRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":"")),p=void 0,q=void 0,r=c("NumberFormat").formatInteger(this.props.replies);if(this.props.isExpanded)p=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i._param("count",r,[0,this.props.replies])]):i._("Hide 1 Reply");else{p=this.props.replies>1?i._({"*":"{count} Replies"},[i._param("count",r,[0,this.props.replies])]):i._("1 Reply");var s=this.props.timestamp;if(s){var t=c("LiveTimer").getApproximateServerTime()/1e3-s.time;if(t<l||this.props.orderingMode==c("WebCommentViewOption").RECENT_ACTIVITY)q=c("React").createElement("span",{className:"fcg"},c("React").createElement(c("Middot.react"),{key:"middot-timestamp"}),c("React").createElement(c("Timestamp.react"),{shorten:this.props.contextArgs.shortenTimestamp,time:s.time,text:s.text,verbose:s.verbose}))}}var u=this.props.author,v=null,w=void 0;if(u&&!this.props.isExpanded){v=c("React").createElement(c("Image.react"),{alt:"",src:u.thumbSrc,className:"img UFIActorImage _54ru"});var x=null;if(this.props.showVerified)x=c("React").createElement(c("Badge.react"),{size:"xsmall",type:"verified"});var y=u.persona&&u.firstName?i._("{author} ({persona})",[i._param("author",u.firstName),i._param("persona",u.persona)]):u.name;if(u.i18nGender)w=[i._({"*":"{author}{verified_badge} replied"},[i._param("author",y,[1,u.i18nGender]),i._param("verified_badge",x)])];else w=[i._("{author}{verified_badge} replied",[i._param("author",y),i._param("verified_badge",x)])];w.push(c("React").createElement(c("Middot.react"),{key:"middot-author"}),p)}else w=p;var z=u&&!this.props.isExpanded;return c("React").createElement("div",{className:o,"data-ft":this.props["data-ft"]},c("React").createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},c("React").createElement(c("UFIImageBlock.react"),null,c("React").createElement("div",{className:(z?"UFIReplyActorPhotoWrapper":"")+(z?" UFIReplyActor":"")},c("React").createElement("i",{className:(!this.props.isExpanded?"UFIPagerIcon":"")+(this.props.isExpanded?" UFICollapseIcon":"")+(z?" UFIIconWithActor":"")}),v),c("React").createElement("span",{className:n},c("React").createElement("span",{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?" UFIReplySocialSentenceVerified":"")},w),q))))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d("XUFICommentTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/comment/tooltip/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("UFICommentCount.react",["cx","fbt","ActorURI","NumberFormat","React","XUFICommentTooltipController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$UFICommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==="number")n=c("NumberFormat").formatInteger(n);return i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i._param("count",n),i._enum(o?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])};m.prototype.render=function(){var n=this.props.feedback,o=n.entidentifier,p=n.actorforpost,q=this.$UFICommentCount1(),r="fcg",s=null;if(o&&p)s=c("ActorURI").create(c("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",o).getURI(),p);if(s)return c("React").createElement("span",{"aria-live":"polite",className:r,"data-hover":"tooltip","data-tooltip-uri":s},q);else return c("React").createElement("span",{className:r},q)};function m(){j.apply(this,arguments)}m.propTypes={commentCount:l.oneOfType([l.number,l.string]).isRequired,feedback:l.object.isRequired};f.exports=m}),null);
__d("XUFIShareTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ufi/share/tooltip/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}})}),null);
__d("XUFIShareTooltipController.flow",["XUFIShareTooltipController"],(function a(b,c,d,e,f,g){f.exports=c("XUFIShareTooltipController")}),null);
__d("UFIShareRow.react",["cx","fbt","invariant","ActorURI","CurrentUser","Layout.react","NumberFormat","React","UFICommentCount.react","URI","XUFIShareTooltipController.flow","intlSummarizeNumber"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Layout.react").Column,n=c("Layout.react").FillColumn;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;o.prototype.$UFIShareRow1=function(){var p=this.props,q=p.feedback,r=p.shownCommentCount;if(r&&Number(r)!==0)return c("React").createElement(c("UFICommentCount.react"),{feedback:q,commentCount:r});return null};o.prototype.render=function(){__p&&__p();var p=this.props.feedback.sharefbid||this.props.feedback.targetfbid,q=new(c("URI"))("/ajax/shares/view").setQueryData({target_fbid:p}),r=new(c("URI"))("/shares/view").setQueryData({id:p});if(!c("CurrentUser").isWorkUser())r=r.setSubdomain("www");var s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showShareLink){q=s.shareAjaxifyURI;q||j(0)}var t=void 0;if(this.props.feedback.sharecount>1){var u=this.props.useReducedShareCount?c("intlSummarizeNumber")(this.props.feedback.sharecount):c("NumberFormat").formatInteger(this.props.feedback.sharecount);t=i._("{count} Shares",[i._param("count",u)])}else t=i._("1 Share");var v="UFIRow UFIShareRow"+(this.props.isFirstComponent?" _4204":"")+(this.props.isLastComponent?" _2o9m":""),w=c("ActorURI").create(c("XUFIShareTooltipController.flow").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),x=c("React").createElement("a",{className:"UFIShareLink",rel:"dialog","data-hover":"tooltip","data-tooltip-uri":w,ajaxify:q.toString(),href:r.toString()},t),y=this.$UFIShareRow1();if(y)x=c("React").createElement(c("Layout.react"),null,c("React").createElement(n,null,x),c("React").createElement(m,null,y));return c("React").createElement("div",{className:v},x)};function o(){k.apply(this,arguments)}f.exports=o}),null);
__d("UFISpamPlaceholder.react",["fbt","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.isLoading)return c("React").createElement("div",{className:"UFIRow"},c("React").createElement("span",{className:"UFISpamCommentWrapper"},c("React").createElement(c("XUISpinner.react"),{className:"mls",background:"light",size:"small"})));return c("React").createElement("div",{className:"UFIRow"},c("React").createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,"aria-label":h._("Show comments marked as spam")},c("React").createElement("span",{"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-content":h._("{count} hidden",[h._param("count",this.props.numHidden)]),className:"UFISpamCommentWrapper"},c("React").createElement("i",{className:"placeholderIcon"}))))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("UFISpamPlaceholderContainer.react",["FluxContainer","React","UFISharedDispatcher","UFISpamPlaceholder.react","UFISpamStore","UFIStoryAction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={isLoading:true,numHidden:0,onClick:function p(){}},l}j.getStores=function(){return[c("UFISpamStore")]};j.calculateState=function(k,l){var m=l.contextArgs,n=l.viewas,o=l.comment,p=l.parentCommentID;return{isLoading:!!c("UFISpamStore").getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function q(){return c("UFISharedDispatcher").dispatch(c("UFIStoryAction").spamFetched(m,n,o.spamCommentIDs,p))}}};j.prototype.shouldComponentUpdate=function(k,l){return k.contextArgs!=this.props.contextArgs||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden};j.prototype.render=function(){return c("React").createElement(c("UFISpamPlaceholder.react"),this.state)};f.exports=c("FluxContainer").create(j,{pure:false,withProps:true})}),null);
__d("UFITranslateAllRow.react",["cx","ContentTranslationStrings","Link.react","React","UFIInstanceAction","UFISharedDispatcher"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$UFITranslateAllRow1=function(){c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").translateAll(this.props.contextArgs))}.bind(this),m}k.prototype.render=function(){return c("React").createElement("div",{className:"UFIRow"},c("React").createElement("div",{className:"_4upo"},c("React").createElement(c("Link.react"),{onClick:this.$UFITranslateAllRow1},c("ContentTranslationStrings").TRANSLATE_ALL_TEXT)))};f.exports=k}),null);
__d("UFIVersion",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LEGACY:"legacy",RELAY:"relay"})}),null);
__d("StaticUFI.react",["csx","cx","invariant","Arbiter","BanzaiODS","BlueBar","BootloadedComponent.react","BootloadOnRender.react","CommentPrivacyUtils","CommentPrivacyValue","CommentSection","DOM","Event","FbFeedCommentUFIScroller","FBFeedLocations","FluxContainer","JSLogger","JSResource","LazyComponent.react","LiveVideoThreadedCommentsUtils","LogHistory","Parent","PrivateCommentsConfig","PrivateConversationsTreatment","React","ReactDOM","SearchableEntry","SubscriptionsHandler","SutroPhase2GatingConfig","TrackingNodes","UFI2Logger","UFIAcceptedAnswerStore","UFIAddComment.react","UFIAddCommentLink.react","UFIComment.react","UFICommentDisabledNotice.react","UFICommentEditIDStore","UFICommentFilters","UFICommentHeader.react","UFICommentListVisibilityTracker.react","UFIComments","UFICommentScrollableArea.react","UFICommercialBreakStore","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIComponentLogger.react","UFIComponents","UFIConfig","UFIConstants","UFIContainer.react","UFIInteractionStore","UFILikeSentence.react","UFILivePinnedCommentStore","UFILiveTypingIndicatorContainer.react","UFILocallyComposedCommentStore","UFIOrderingModeStore","UFIPagerGenerator","UFIPaging","UFIPlayLiveVODHighlightsStore","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholderContainer.react","UFIStoryAction","UFIThreadedFacecastCommentsStore","UFITranslateAllRow.react","UFIVersion","URI","WebCommentViewOption","XUISpinner.react","distinctArrayBy","emptyFunction","getElementPosition","getElementRect","getUnboundedScrollPosition","gkx","ifRequired","shallowEqual","throttle"],(function aa(ba,a,ca,da,ea,fa,ga,ha,b){"use strict";__p&&__p();var c,ia,d=a("UFIConfig").UFICommentFilterFallbackWarning||null,e=a("UFIConstants").UFIFeedbackSourceType,f=a("UFIConstants").UFIPayloadSourceType,ja=a("UFIConstants").UFIStatus,ka=a("React").PropTypes,la=a("JSLogger").create("StaticUFI"),g=a("React").createElement("div",{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},a("React").createElement(a("XUISpinner.react"),{size:"large"})),ma=a("React").createElement("div",{className:"_xtv _32k4"},a("React").createElement("i",null));c=babelHelpers.inherits(h,a("React").Component);ia=c&&c.prototype;function h(i){__p&&__p();ia.constructor.call(this,i);this.loadMoreComments=function(){if(this.$StaticUFI1&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var k=a("ReactDOM").findDOMNode(this.refs.topLevelBottomPager),l=a("getUnboundedScrollPosition")(window).y,m=l+(document.documentElement?document.documentElement.clientHeight:0)+a("UFIConstants").infiniteScrollRangeForQANDAPermalinks;if(k instanceof HTMLElement&&k.offsetHeight&&k.offsetTop<m)this.refs.topLevelBottomPager.props.onPagerClick()}}.bind(this);this.onComment=function(){__p&&__p();var k=a("ReactDOM").findDOMNode(this),l=null,m=null,n=null;if(k instanceof Node){l=a("Parent").byTag(k,"form");m=a("Parent").bySelector(k,"#fbPhotoSnowliftDetails");n=a("Parent").bySelector(k,"._3g6d")}var o=[function(){return this.refs.toplevelcomposer}.bind(this),function(){return this.$StaticUFI40(l)}.bind(this),function(){return this.$StaticUFI40(m)}.bind(this),function(){return this.$StaticUFI40(n)}.bind(this)],p=o.reduce(function(q,r){return q||r()},null);if(p){p.focus();a("FbFeedCommentUFIScroller").reveal(a("ReactDOM").findDOMNode(p))}}.bind(this);var j=this.props.focusReply;this.state={acceptedAnswerState:{type:"NoneAccepted"},focusReply:j,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false,editcommentid:a("UFICommentEditIDStore").getForInstance(this.props.contextArgs.instanceid),localCommentIDs:a("UFILocallyComposedCommentStore").getStateForInstance(this.props.contextArgs.instanceid),inCommercialBreak:a("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid),isPlayingLiveVODHighlights:a("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid),currentThreadedFacecastCommentID:null}}h.getStores=function(){return[a("UFIAcceptedAnswerStore"),a("UFIThreadedFacecastCommentsStore")]};h.calculateState=function(i,j){var k=j.contextArgs,l=j.feedback,m=a("UFIAcceptedAnswerStore").get(k.ftentidentifier,l.acceptedanswer),n=a("UFIThreadedFacecastCommentsStore").getCommentID(k.instanceid);return babelHelpers["extends"]({},i,{acceptedAnswerState:m,currentThreadedFacecastCommentID:n})};h.prototype.componentDidMount=function(){__p&&__p();var i=this.props.feedback;a("UFI2Logger").log({eventName:"componentDidMount",feedbackTargetID:i.targetfbid,version:a("UFIVersion").LEGACY});this.$StaticUFI1=true;a("Arbiter").inform("UFI/displayDone-"+this.props.contextArgs.instanceid);this.$StaticUFI2=new(a("SubscriptionsHandler"))();if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var j=a("throttle")(this.loadMoreComments,20);this.$StaticUFI2.addSubscriptions(a("Event").listen(window,"scroll",j),a("Event").listen(window,"resize",j))}this.$StaticUFI5();this.$StaticUFI2.addSubscriptions(a("UFICommentEditIDStore").addListener(function(){this.setState({editcommentid:a("UFICommentEditIDStore").getForInstance(this.props.contextArgs.instanceid)})}.bind(this)),a("UFILocallyComposedCommentStore").addListener(function(){this.setState({localCommentIDs:a("UFILocallyComposedCommentStore").getStateForInstance(this.props.contextArgs.instanceid)})}.bind(this)),a("UFICommercialBreakStore").addListener(function(){this.setState({inCommercialBreak:a("UFICommercialBreakStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),a("UFIPlayLiveVODHighlightsStore").addListener(function(){this.setState({isPlayingLiveVODHighlights:a("UFIPlayLiveVODHighlightsStore").getValueFor(this.props.contextArgs.instanceid)})}.bind(this)))};h.prototype.UNSAFE_componentWillReceiveProps=function(i){if(this.props.focusReply!==i.focusReply)this.setState({focusReply:i.focusReply})};h.prototype.componentWillUnmount=function(){this.$StaticUFI1=false;this.$StaticUFI2&&this.$StaticUFI2.release()};h.prototype.shouldComponentUpdate=function(i,j){var k=this.props,l=this.state;return!a("shallowEqual")(l,j)||!a("shallowEqual")(l.loadingSpamIDs,j.loadingSpamIDs)||!a("shallowEqual")(l.localCommentIDs,j.localCommentIDs)||!a("shallowEqual")(l.inCommercialBreak,j.inCommercialBreak)||!a("shallowEqual")(k,i)||!a("shallowEqual")(k.feedback,i.feedback)||!a("shallowEqual")(k.repliesMap,i.repliesMap)||!a("shallowEqual")(k.commentCounts,i.commentCounts)||!a("shallowEqual")(k.deletedCounts,i.deletedCounts)||!a("shallowEqual")(k.privateDeletedCounts,i.privateDeletedCounts)||!a("shallowEqual")(k.availableComments,i.availableComments)||!a("shallowEqual")(k.availablePrivateComments,i.availablePrivateComments)||!a("shallowEqual")(k.ranges,i.ranges)||!a("shallowEqual")(k.authorProfiles,i.authorProfiles)||!a("shallowEqual")(k.commentPermalinks,i.commentPermalinks)||!a("shallowEqual")(k.canAddCommentMap,i.canAddCommentMap)||!a("shallowEqual")(k.canReplyMap,i.canReplyMap)||!a("shallowEqual")(k.isActiveLoading,i.isActiveLoading)||!a("shallowEqual")(k.allSeenActiveLoadDirectionData,i.allSeenActiveLoadDirectionData)||!a("shallowEqual")(k.repliesExpandedMap,i.repliesExpandedMap)||!a("shallowEqual")(k.loadingTranslationsMap,i.loadingTranslationsMap)||!a("shallowEqual")(l.isPlayingLiveVODHighlights,j.isPlayingLiveVODHighlights)||!a("shallowEqual")(k.privateCommentsRange,i.privateCommentsRange)||k.privateCommentsCount!==i.privateCommentsCount||!a("shallowEqual")(k.loadingCommentsForSection,i.loadingCommentsForSection)};h.prototype.UNSAFE_componentWillUpdate=function(i,j){this.$StaticUFI3=this.$StaticUFI3||!this.$StaticUFI6(this.props.payloadSource)&&this.props.source===e.NEWS_FEED&&a("BlueBar").hasFixedBlueBar();if(this.$StaticUFI3&&!this.$StaticUFI4){var k=a("ReactDOM").findDOMNode(this);if(k instanceof Element)this.$StaticUFI4=a("getElementRect")(k)}};h.prototype.componentDidUpdate=function(i,j){this.$StaticUFI5(i);if(this.$StaticUFI3&&this.$StaticUFI4){var k=this.$StaticUFI7(this.$StaticUFI4);if(k!==null)a("Arbiter").inform("ufi/didUpdate",{offsetY:k});this.$StaticUFI3=false;this.$StaticUFI4=null}};h.prototype.$StaticUFI6=function(i){return i===f.UNKNOWN||i===f.INITIAL_SERVER||i===f.USER_ACTION||i===f.COLLAPSE_ACTION};h.prototype.$StaticUFI7=function(i){var j=a("getElementPosition")(a("BlueBar").getMaybeFixedRoot());if(i.bottom<j.height){var k=i.bottom-i.top,l=a("ReactDOM").findDOMNode(this);if(l instanceof HTMLElement)return l.offsetHeight-k}return null};h.prototype.$StaticUFI8=function(){var i=this.props,j=i.contextArgs,k=i.commentCounts,l=i.deletedCounts,m=i.feedback,n=m.commentcountreduced,o=j.ftentidentifier,p=null;if(this.$StaticUFI9())if(n&&isNaN(n))p=n;else p=k[o]-l[o];return p};h.prototype.$StaticUFI5=function(i){__p&&__p();if(this.props.loadingComments)return;if(this.props.focusTopLevelComposer)this.onComment();if(this.state.focusReply){var j=this.state.focusReply,k=j.replyID,l=j.initiatorComment;if(!(k in this.refs))return;var m=this.refs[k]&&this.refs[k].refs&&this.refs[k].refs.mentionsinput;if(!m)return;m.focus();a("FbFeedCommentUFIScroller").reveal(a("ReactDOM").findDOMNode(m));this.setState({focusReply:null});if(!l)return;var n=m.hasEnteredText(),o=l.author===this.props.feedback.actorforpost,p=!!l.parentcommentid;if(!n&&!o&&p)m.insertMention(this.$StaticUFI10(l.author))}};h.prototype.$StaticUFI10=function(i){var j=this.props.authorProfiles[i],k=j.type;return new(a("SearchableEntry"))({uniqueID:j.id,title:j.name,type:k==="friend"?"user":k})};h.prototype.$StaticUFI11=function(){return this.props.source===e.ADS};h.prototype.$StaticUFI12=function(){return this.props.source===e.LIVE_VIDEO};h.prototype.$StaticUFI13=function(){var i=this.props.contextArgs,j=i.feedcontext&&JSON.parse(i.feedcontext);return!!(j&&j.is_narrow)};h.prototype.$StaticUFI14=function(){return this.props.source===e.COMPACT_SEARCH};h.prototype.$StaticUFI15=function(){var i=this.props,j=i.hideOrderingModeSelector,k=i.feedback,l=i.commentCounts,m=i.contextArgs;return!j&&k.orderingmodes&&!this.$StaticUFI14()&&l[m.ftentidentifier]>=a("UFIConstants").minCommentsForOrderingModeSelector};h.prototype.$StaticUFI16=function(){return!!this.props.contextArgs.hasReactions&&(this.props.contextArgs.feedbackMode==="none"||this.props.contextArgs.feedbackMode==="toggle")&&this.props.feedback.displayreactions&&!this.$StaticUFI17()&&!this.$StaticUFI18()&&this.props.feedback.orderingmodes&&!this.props.hideOrderingModeSelector};h.prototype.$StaticUFI18=function(){return a("CommentPrivacyUtils").getTreatment(this.props.contextArgs,this.props.feedback.viewerid)===a("PrivateConversationsTreatment").FRIEND_CONVERSATIONS&&!!this.props.availablePrivateComments&&!!this.props.privateCommentsRange&&!!this.props.privateDeletedCounts&&!this.$StaticUFI11()&&Number.isInteger(this.props.privateCommentsCount)};h.prototype.$StaticUFI19=function(){var i=this.props,j=i.contextArgs,k=i.ranges,l=j.ftentidentifier,m=k[l].getLength();return this.$StaticUFI20(l,m)};h.prototype.$StaticUFI20=function(i,j){var k=this.props.commentCounts;return k[i]==j};h.prototype.$StaticUFI21=function(){var i=this.props,j=i.contextArgs,k=i.feedback;return k.seencount>0&&!j.entstream};h.prototype.$StaticUFI22=function(){return a("UFILikeSentence.react").rendersSocialSentence(this.props)};h.prototype.$StaticUFI23=function(){var i=this.props;return Boolean(i.contextArgs.showCommentHeader)};h.prototype.$StaticUFI24=function(){var i=this.props,j=i.contextArgs,k=i.feedback;return this.$StaticUFI11()||this.$StaticUFI12()||this.$StaticUFI18()||j.search||this.hasReactions(k,j)};h.prototype.$StaticUFI17=function(){if(this.$StaticUFI24())return false;return this.$StaticUFI22()||this.$StaticUFI21()||this.$StaticUFI15()||this.$StaticUFI23()};h.prototype.$StaticUFI25=function(){var i=this.props,j=i.contextArgs,k=i.feedback;if(this.$StaticUFI11())return false;return Boolean(j.showshares&&k.sharecount&&!this.hasReactions(k,j))};h.prototype.$StaticUFI26=function(){var i=a("SutroPhase2GatingConfig").enabled_bling_above_ufi;return this.$StaticUFI25()&&!this.$StaticUFI18()&&!this.props.contextArgs.entstream&&!i};h.prototype.$StaticUFI9=function(){if(this.$StaticUFI11()||this.$StaticUFI14())return false;if(this.props.contextArgs.shouldHideCommentsWhenCannotReply&&(this.props.feedback.arecommentsdisabled||!this.$StaticUFI27()||!this.props.feedback.cancomment))return false;var i=this.props,j=i.availableComments,k=i.availablePrivateComments;return!!(j&&j.length||k&&k.length)};h.prototype.$StaticUFI27=function(){var i=this.props,j=i.canAddCommentMap,k=i.contextArgs,l=i.feedback;return this.props.contextArgs.feedLocationType!==a("FBFeedLocations").SURVEY_GALLERY&&l.cancomment&&Boolean(k.showaddcomment)&&Boolean(k.showInlineComposer)&&Boolean(l.actorforpost)&&j[k.ftentidentifier]};h.prototype.$StaticUFI28=function(){return this.$StaticUFI27()&&this.$StaticUFI29()&&this.props.hasPagedToplevel};h.prototype.$StaticUFI30=function(){var i=this.props.feedback;return i.arecommentsdisabled===true&&i.cancomment===false};h.prototype.$StaticUFI31=function(){var i=this.props.feedback;return i.isviewermuted===true&&i.cancomment===false};h.prototype.$StaticUFI32=function(){if(!this.$StaticUFI26())return false;var i=this.props.contextArgs.isPermalink,j=i?this.$StaticUFI8():null;return Boolean(j)&&Number(j)!==0};h.prototype.$StaticUFI33=function(){if(!this.$StaticUFI26())return null;var i=this.props,j=i.contextArgs,k=i.feedback,l=this.$StaticUFI32()?this.$StaticUFI8():null;return a("React").createElement(a("UFIShareRow.react"),{contextArgs:j,feedback:k,shownCommentCount:l})};h.prototype.$StaticUFI34=function(){var i=this.props,j=i.feedback,k=i.contextArgs,l=i.commentCounts;if(this.$StaticUFI17())return a("React").createElement(a("UFILikeSentence.react"),{contextArgs:k,feedback:j,commentCounts:l,showOrderingModeSelector:this.$StaticUFI15(),hasCommentOrderInverted:this.$StaticUFI29(),key:"ufi_like_sentence"});return null};h.prototype.render=function(){__p&&__p();var i=this.props,j=i.feedback,k=i.contextArgs,l=i.source;if(k.hideComments)return null;var m=this.$StaticUFI30(),n=this.$StaticUFI31(),o=this.$StaticUFI25(),p=this.$StaticUFI34(),q=!!p,r=m||n?a("React").createElement(a("UFICommentDisabledNotice.react"),{feedback:i.feedback}):null,s=this.$StaticUFI33();if(i.loadingComments)return a("React").createElement(a("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},p,s,g);if(this.$StaticUFI18())return this.renderFriendConversationsTreatment();var t=this.$StaticUFI9(),u=i.ranges[k.ftentidentifier],v=Number(i.loggingOffset)-u.getOffset(),w=j.targetiscomment,x=null;if(t)x=this.renderCommentArray(i.availableComments,v,w,null);var y=null,z=null,A=j.cancomment,B=q||o||t||A,C=null,D=this.state.acceptedAnswerState.type==="Accepted"?this.state.acceptedAnswerState.id:null,E=a("UFILivePinnedCommentStore").getPinnedCommentID(k.ftentidentifier)||D;if(E){var F=a("UFIComments").getComment(E);if(F&&!i.authorProfiles[F.author])a("BanzaiODS").bumpEntityKey("unsampled_feedback","missing_pinned_comment_author");else if(F)if(D&&D===this.state.editcommentid&&F.__typename==="saved")C=this.renderEditCommentBox(F);else C=this.renderComment(F,0,false,false,D===E,false,true,!!this.props.loadingTranslationsMap[F.id])}var G=k.isBroadcasterUFI||l===e.LIVE_VIDEO_STORIES,H=B?a("React").createElement(a("UFICommentHeader.react"),null):null;if(this.$StaticUFI27()||k.loggedOutLinkConfig&&k.loggedOutLinkConfig.showAddComment){var I=this.$StaticUFI35();if(I){var J=a("UFIOrderingModeStore").isLiveStreaming(k.instanceid);if(!k.islivestreaming||!J)y=a("React").createElement(a("UFILiveTypingIndicatorContainer.react"),{contextArgs:k,feedbackTargetID:j.targetfbid});z=a("React").createElement(a("UFIAddComment.react"),{viewerActorID:j.actorforpost,targetID:j.ownerid,targetName:j.actorname,initialData:null,ref:"toplevelcomposer",isTopLevelComposer:true,withoutSeparator:false,editingComment:{},isEditing:false,mentionsDataSource:j.mentionsdatasource,showSendOnEnterTip:j.showsendonentertip,peopleOutsideCommunityInCommentNotice:j.peopleoutsidecommunityincommentnotice,allowVideoAttachments:j.allowvideoattachments&&!J,allowPhotoAttachments:j.allowphotoattachments&&!J,allowFileAttachments:j.allowfileattachments&&!J,allowStickerAttachments:j.allowstickerattachments&&!J,allowGifAttachments:j.allowgifattachments&&!J,allowTipJar:false,allowNativeTipJar:j.isnativetipjarenabled,allowTogglePrivateComments:(a("PrivateCommentsConfig").composer_lock_enabled||a("PrivateCommentsConfig").composer_unlocked_lock_enabled)&&j.canviewercommentinprivate,allowAudienceSelector:this.$StaticUFI18(),privateCommentTarget:j.actorname,contextArgs:k,subtitle:j.subtitle,isQAndA:j.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?a("emptyFunction"):function(){return this.setState({viewerHasClickedCommentComposer:true})}.bind(this),groupID:j.grouporeventid,allowCommentMarkdown:j.iscommentmarkdowneligible,allowCommentFixSuggestions:a("gkx")("AT77Pq_-Y29smNkAy3FN8Tt6-lfCwdbVEynIhfH7q-5dT_94m4KSSIjNDkWsf_wWai_ELqttGZX5EJn_RG6Q15X2"),keepFocus:J,constituentBanner:j.constituentbanneruri,isTargetPage:j.isownerpage,isFirstComponent:!t||a("SutroPhase2GatingConfig").enabled_bling_above_ufi&&!this.$StaticUFI17()&&this.$StaticUFI29(),commentsTargetID:j.commentstargetfbid})}}var K=k.ftentidentifier,L=this.renderPagers(K,false,i.ranges[K].getOffset(),i.ranges[K].getLength()),M=L.topPager,N=L.bottomPager,O=this.$StaticUFI29()?y:null,P=this.$StaticUFI29()?null:y,Q=this.$StaticUFI36(K,M,N),R=Q.topFilterWarning,S=Q.bottomFilterWarning,T=this.$StaticUFI16()?a("React").createElement("div",{className:"_11c1"+(!this.$StaticUFI29()?" _4204":"")+(a("SutroPhase2GatingConfig").enabled_bling_above_ufi?" _4mtp":"")},a("React").createElement(a("BootloadedComponent.react"),{alignh:"left",bootloadPlaceholder:a("React").createElement("div",null),bootloadLoader:a("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("StaticUFI.react"),contextArgs:k,feedback:j})):null,U=a("UFIComponents").applyToUFIComponents([T,O,M,R].concat(x,[S,N,P]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),V=U.slice(0,4);T=V[0];O=V[1];M=V[2];R=V[3];var W=U.slice(-3);S=W[0];N=W[1];P=W[2];x=U.slice(4,-3);var X=this.$StaticUFI29()?z:null,Y=this.$StaticUFI29()?null:z,na=this.$StaticUFI28()?a("React").createElement(a("UFIAddCommentLink.react"),{onClick:this.onComment,isQAndA:j.isqanda,isGroupQA:k.isaskquestion}):null,oa=true,pa=null;if(k.showCommentNuxForGroupMallAds)pa=a("React").createElement(a("BootloadOnRender.react"),{loader:a("JSResource")("UFICommentNuxForGroupMallAds.react").__setRef("StaticUFI.react"),placeholder:a("React").createElement("div",null),component:a("React").createElement(a("LazyComponent.react"),{commentNuxContent:k.groupMallAdsCommentNuxContent})});U=a("UFIComponents").applyToUFIComponents([p,s,X,T,M,R].concat(x,[S,N,Y,na]),{isFirstComponent:oa},{isLastComponent:true});var Z=U.slice(0,6);p=Z[0];s=Z[1];X=Z[2];T=Z[3];M=Z[4];R=Z[5];var $=U.slice(-4);S=$[0];N=$[1];Y=$[2];na=$[3];x=U.slice(6,-4);var qa=!!a("UFIInteractionStore").getValueFor(k.instanceid),ra=null;if(this.state.acceptedAnswerState.type==="Accepted"){var sa=a("UFIComments").getComment(this.state.acceptedAnswerState.id);if(sa&&sa.__typename==="saved")ra=this.renderReplyContainer(sa)}var ta=a("ifRequired")("UFIThreadedFacecastCommentsContainer.react",function(va){return va}),ua=ta!=null&&k.islivestreaming&&this.state.currentThreadedFacecastCommentID!=null&&a("LiveVideoThreadedCommentsUtils").isEnabled();return a("React").createElement(a("UFIContainer.react"),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},ua?a("React").createElement(ta,{authorProfiles:i.authorProfiles,contextArgs:k}):null,k.shownub&&B?ma:null,p,s,H,pa,X,ua?null:a("React").createElement(a("UFICommentListVisibilityTracker.react"),{contextArgs:k},a("React").createElement(a("UFICommentScrollableArea.react"),{scrollcomments:!!k.scrollcomments,scrollwidth:k.scrollwidth||0},a("React").createElement(a("UFIComponentLogger.react"),{contextArgs:k,feedback:j,hasComments:t,isPermalink:k.isPermalink,viewerHasInteractedWithComments:qa||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},T,O,M,R,G?null:C,ra,x,G?C:null,S,N,P))),Y,na,r)};h.prototype.$StaticUFI35=function(){return this.state.editcommentid===null};h.prototype.renderFriendConversationsTreatment=function(){__p&&__p();var i=this.props,j=i.availableComments,k=i.availablePrivateComments,l=i.commentCounts,m=i.contextArgs,n=i.deletedCounts,o=i.feedback,p=i.loadingCommentsForSection,q=i.loggingOffset,r=i.orderingMode,s=i.privateCommentsCount,t=i.privateCommentsRange,u=i.privateDeletedCounts,v=i.ranges,w=i.source;if(p.has(a("CommentSection").FRIENDS)&&p.has(a("CommentSection").DEFAULT))return[g];!!k||b(0);Number.isInteger(s)||b(0);!!t||b(0);!!u||b(0);var x=m.ftentidentifier,y=v[x],z=Number(q)-y.getOffset(),A=this.$StaticUFI27()?a("React").createElement(a("UFIAddComment.react"),{key:"friend_conversations_add_comment",viewerActorID:o.actorforpost,targetID:o.ownerid,targetName:o.actorname,ref:"toplevelcomposer",isTopLevelComposer:true,editingComment:{},mentionsDataSource:o.mentionsdatasource,showSendOnEnterTip:o.showsendonentertip,peopleOutsideCommunityInCommentNotice:o.peopleoutsidecommunityincommentnotice,allowAudienceSelector:true,allowVideoAttachments:o.allowvideoattachments,allowPhotoAttachments:o.allowphotoattachments,allowFileAttachments:o.allowfileattachments,allowStickerAttachments:o.allowstickerattachments,allowGifAttachments:o.allowgifattachments,allowTipJar:false,contextArgs:m,subtitle:o.subtitle,isQAndA:o.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?a("emptyFunction"):function(){return this.setState({viewerHasClickedCommentComposer:true})}.bind(this),groupID:o.grouporeventid,allowCommentMarkdown:o.iscommentmarkdowneligible,constituentBanner:o.constituentbanneruri,isTargetPage:o.isownerpage,isFirstComponent:true}):null,B=l[x]||0,C=n[x]||0,D=u[x]||0;if((s||0)<=D&&B<=C)return[A];return[A,a("React").createElement(a("BootloadedComponent.react"),{key:"friend_conversations_section_friends",bootloadPlaceholder:g,bootloadLoader:a("JSResource")("UFIFriendConversationsSection.react").__setRef("StaticUFI.react"),comments:k,commentCount:s,contextArgs:m,deletedCount:D,feedback:o,isFirstSection:true,isLoading:p.has(a("CommentSection").FRIENDS),onPagerClick:function(E,F){this.context.dispatch(a("UFIStoryAction").pageInComments(babelHelpers["extends"]({},m,{interactionRequestCorrelationID:a("UFICommonInteractionLogger").startInteraction(a("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)}),x,E,F,a("CommentSection").FRIENDS))}.bind(this),orderingMode:a("WebCommentViewOption").TOPLEVEL,range:t,section:a("CommentSection").FRIENDS,source:w},this.renderCommentArray(k,0,false,null)),a("React").createElement(a("BootloadedComponent.react"),{key:"friend_conversations_section_default",bootloadPlaceholder:a("React").createElement("div",null),bootloadLoader:a("JSResource")("UFIFriendConversationsSection.react").__setRef("StaticUFI.react"),comments:j,commentCount:B,contextArgs:m,deletedCount:C,feedback:o,isLoading:p.has(a("CommentSection").DEFAULT),onPagerClick:function(E,F){this.context.dispatch(a("UFIStoryAction").pageInComments(babelHelpers["extends"]({},m,{interactionRequestCorrelationID:a("UFICommonInteractionLogger").startInteraction(a("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)}),x,E,F,a("CommentSection").DEFAULT))}.bind(this),orderingMode:r,range:y,section:a("CommentSection").DEFAULT,source:w},this.renderCommentArray(j,z,false,null))]};h.prototype.renderCommentArray=function(i,j,k,l){__p&&__p();var m=this.props,n=m.contextArgs,o=this.props.feedback;if(!i.length)return[];i=a("distinctArrayBy")(i,function(q){return q.id});i=i.filter(function(q){return this.state.acceptedAnswerState.type==="NoneAccepted"&&q.id||this.state.acceptedAnswerState.type==="Accepted"&&q.id!==this.state.acceptedAnswerState.id}.bind(this));var p=a("UFICommentFilters").collectSpamBuckets(i,m.authorProfiles);return p.reduce(function(q,r,s){__p&&__p();if(!r)return q;if(a("UFICommentFilters").isSpam(r))q.push(a("React").createElement(a("UFISpamPlaceholderContainer.react"),{key:"spam"+r.id,contextArgs:n,viewas:n.viewas,comment:r,parentCommentID:l}));else{if(r.id==this.state.editcommentid)q.push(this.renderEditCommentBox(r));else{var t=Math.max(j-s,0),u=s===0,v=s===p.length-1,w=!k&&!o.arecommentsdisabled,x=k&&!u;q.push(this.renderComment(r,t,u,v,w,x,false,!!this.props.loadingTranslationsMap[r.id]));if(r.id==this.props.translateAllCommentID&&!a("UFIOrderingModeStore").isLiveStreaming(n.instanceid))q.push(a("React").createElement(a("UFITranslateAllRow.react"),{key:"translateAll"+r.id,contextArgs:n}))}if(!k&&!a("UFICommentFilters").isDeleted(r)&&!a("UFIOrderingModeStore").isLiveStreaming(n.instanceid)){var y=this.renderReplyContainer(r);if(y)q.push(y)}}return q}.bind(this),[])};h.prototype.renderReplyContainer=function(i){__p&&__p();var j=this.props,k=j.commentCounts[i.id],l=j.repliesExpandedMap[i.id],m=!l&&i.interestingReplyId,n=j.ranges[i.id];if(!n)la.error("renderReplyContainer range is undefined");var o=void 0,p=void 0;if(n&&(l||i.interestingReplyId)){o=j.repliesMap[i.id];p=n.getOffset();if(m){var q=o.filter(function(Q){return Q.id===i.interestingReplyId});if(q.length!==1){a("LogHistory").getInstance("ufi").error("comment "+i.id+" claims to have an interesting reply, but there is not exactly 1 comment with that id in the reply list.");o=null}else{o=q;p=i.interestingReplyOffset}}}var r=void 0,s=null,t=null,u=null,v=null;if(n&&o){var w=n.getOffset(),x=n.getLength();if(m){w=p;x=1}var y=this.renderPagers(i.id,true,Number(w),x);s=y.topPager;t=y.bottomPager;var z=Number(j.loggingOffset)-Number(p);r=this.renderCommentArray(o,z,true,i.id);var A=this.$StaticUFI37(i.id,s,t);u=A.topFilterWarning;v=A.bottomFilterWarning}var B=Math.max(k-Number(i.spamreplycount),0),C=void 0;if(n&&!a("UFIOrderingModeStore").isLiveStreaming(this.props.contextArgs.instanceid)&&B&&(l&&o&&o.length>j.replySocialSentenceMaxReplies||!l&&!o)){var D=n.isLoadingPrev()||n.isLoadingNext(),E=l&&!s&&D,F=null;if(i.replyauthors&&i.replyauthors.length)F=j.authorProfiles[i.replyauthors[0]];var G=o?o.length:0;C=a("React").createElement(a("UFIReplySocialSentence.react"),{contextArgs:j.contextArgs,author:F,replies:l?G:B,timestamp:i.recentreplytimestamp,onClick:function(){return this.context.dispatch(a("UFIStoryAction").toggleReplies(j.contextArgs,i.id))}.bind(this),isLoading:E,isExpanded:l,showVerified:j.feedback.showfeaturedreplies,orderingMode:j.orderingMode})}var H=void 0;if(l)if(i.cancomment&&j.canAddCommentMap[i.id]&&!(i.needsApproval||i.canAppeal||i.canSecure)){var I=false;if(r)for(var J=r.length-1;J>=0;J--)if(r[J]){I=r[J].props.isAuthorReply;break}H=this.renderReplyComposer(i,!I)}var K=void 0;if(C||s||u||r||v||t||H){var L=a("UFIComponents").applyToUFIComponents([C,s,u].concat(r,[v,t,H]),{isFirstComponent:true},{isLastComponent:true}),M=L.slice(0,3);C=M[0];s=M[1];u=M[2];var N=L.slice(-3);v=N[0];t=N[1];H=N[2];r=L.slice(3,-3);var O=i.status===ja.LIVE_DELETED,P=this.state.acceptedAnswerState.type==="Accepted"&&i.id===this.state.acceptedAnswerState.id;K=a("React").createElement(a("UFIContainer.react"),{key:"replies"+i.id,isParentLiveDeleted:O,isPrivateComment:i.privacy_value===a("CommentPrivacyValue").OWNER_OR_COMMENTER,isReplyList:true,isAcceptedAnswerReply:P},C,s,u,r,v,t,H)}return K};h.prototype.renderReplyComposer=function(i,j){var k=this.props,l=k.contextArgs,m=k.feedback,n=this.state.editcommentid!==null,o=n&&!i.id;if(o)return null;var p=a("UFIOrderingModeStore").isLiveStreaming(l.instanceid),q=m.actorforpost===i.author,r=k.authorProfiles[i.author],s=i.privacy_value===a("CommentPrivacyValue").OWNER_OR_COMMENTER?q?m.actorname:r.name:null;return a("React").createElement(a("UFIAddComment.react"),{viewerActorID:m.actorforpost,replyCommentID:i.id,replyCommentPrivacy:i.privacy_value,groupID:m.grouporeventid,targetID:m.ownerid,initialData:null,ref:"replycomposer-"+i.id,withoutSeparator:j,editingComment:{},isEditing:false,mentionsDataSource:m.mentionsdatasource,showSendOnEnterTip:false,peopleOutsideCommunityInCommentNotice:m.peopleoutsidecommunityincommentnotice,allowVideoAttachments:m.allowvideoattachments&&!p,allowPhotoAttachments:m.allowphotoattachments&&!p,allowFileAttachments:m.allowfileattachments&&!p,allowStickerAttachments:m.allowstickerattachments&&!p,allowGifAttachments:m.allowgifattachments&&!p,allowCommentMarkdown:m.iscommentmarkdowneligible,allowTogglePrivateComments:false,privateCommentTarget:s,contextArgs:l,subtitle:m.subtitle,isQAndA:m.isqanda,constituentBanner:m.constituentbanneruri})};h.prototype.renderEditCommentBox=function(i){__p&&__p();var j=this.props,k=j.contextArgs,l=j.feedback,m=babelHelpers["extends"]({},k);delete m.addcommentautoflip;delete m.collapseaddcomment;delete m.hideActorPhoto;delete m.issnowlift;delete m.loggedOutLinkConfig;delete m.monitorHeight;delete m.sht;delete m.viewoptionstypeobjects;delete m.viewoptionstypeobjectsorder;return a("React").createElement(a("UFIAddComment.react"),{key:"editing_comment"+i.id,viewerActorID:l.actorforpost,targetID:l.ownerid,groupID:l.grouporeventid,mentionsDataSource:l.mentionsdatasource,contextArgs:m,isEditing:true,editingComment:i,allowVideoAttachments:l.allowvideoattachments,allowPhotoAttachments:l.allowphotoattachments,allowFileAttachments:l.allowfileattachments,allowStickerAttachments:l.allowstickerattachments,allowGifAttachments:l.allowgifattachments,allowTogglePrivateComments:false,privateCommentTarget:l.actorname,isQAndA:l.isqanda,allowCommentMarkdown:l.iscommentmarkdowneligible,constituentBanner:l.constituentbanneruri})};h.prototype.renderComment=function(i,j,k,l,m,n,o,p){var q=this.props,r=q.feedback,s=r.actorforpost===i.author,t=i.__typename==="local",u=t||this.state.localCommentIDs[i.id],v=r.showremovemenu||r.viewerid===i.author,w=r.canremoveall&&r.isownerpage&&!s&&!r.grouporeventid,x=q.source!=e.INTERN,y=!!i.parentcommentid,z=i.parentcommentid,A=true;if(y&&z&&z in this.props.canReplyMap&&this.props.canReplyMap[z]!==null)A=this.props.canReplyMap[z];var B=!!i.isfeatured,C=a("TrackingNodes").getTrackingInfo(a("TrackingNodes").types.COMMENT,j),D=new(a("URI"))(q.commentPermalinks[i.id]).addQueryData({comment_tracking:C}).toString();return a("React").createElement(a("UFIComment.react"),{key:a("UFIComments").getRenderKey(i.id),isFirst:k,isFirstCommentComponent:k,isLast:l,showReplyLink:m,hasPartialBorder:n,comment:i,authorProfiles:q.authorProfiles,viewerIsAuthor:s,feedback:r,"data-ft":C,contextArgs:q.contextArgs,hideAsSpamForPageAdmin:w,isLocallyComposed:u,isOptimisticallyRendered:t,isFeatured:B,parentCanComment:A,permalink:D,showPermalink:x,showRemoveReportMenu:v,focusOnMount:i.id===q.commentIDToFocusOnMount,orderingMode:q.orderingMode,featuredCommentIDs:q.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?a("emptyFunction"):function(){return this.setState({viewerHasClickedSeeMore:true})}.bind(this),isLivePinnedComment:o,showTranslation:p||!!i.translationdata})};h.prototype.$StaticUFI36=function(i,j,k){return this.$StaticUFI38(i,j,k,false)};h.prototype.$StaticUFI37=function(i,j,k){return this.$StaticUFI38(i,j,k,true)};h.prototype.$StaticUFI38=function(i,j,k,l){var m=null,n=null;if(!j)m=this.$StaticUFI39(i,a("UFIPaging").TOP,l);if(!k)n=this.$StaticUFI39(i,a("UFIPaging").BOTTOM,l);return{topFilterWarning:m,bottomFilterWarning:n}};h.prototype.$StaticUFI39=function(i,j,k){__p&&__p();var l=this.props.allSeenActiveLoadDirectionData;if(!l)return null;var m=l[i];if(!m||!(j in m))return null;var n=this.props;if(!d||!d.shouldRender(n,i,j,k))return null;return a("React").createElement(d,{asReplyWarning:k,targetID:i,pagingDirection:j,ufiProps:n})};h.prototype.renderPagers=function(i,j,k,l){__p&&__p();var m=this.props;if(this.$StaticUFI20(i,l)||this.$StaticUFI11()||this.$StaticUFI14()||!j&&m.hideToplevelPager)return{topPager:null,bottomPager:null};var n=m.commentCounts[i],o=m.deletedCounts[i];Number.isInteger(n)||b(0);Number.isInteger(o)||b(0);Number.isInteger(l)||b(0);return a("UFIPagerGenerator").renderPagers({commentCount:n,contextArgs:m.contextArgs,currentLength:l,currentOffset:k,deletedCount:o,feedback:m.feedback,onPageCallback:function(p,q){var r=babelHelpers["extends"]({},m.contextArgs,{interactionRequestCorrelationID:a("UFICommonInteractionLogger").startInteraction(a("UFICommonInteractionEvents").UFI_TOP_LEVEL_COMMENTS_PAGINATION)});this.context.dispatch(a("UFIStoryAction").pageInComments(r,i,p,q))}.bind(this),orderingMode:m.orderingMode,range:m.ranges[i],targetID:i})};h.prototype.$StaticUFI40=function(i){if(!i)return null;return a("DOM").scry(i,'[name="add_comment_text_text"]').concat(a("DOM").scry(i,'[name="add_comment_text"]')).find(function(j){return!a("Parent").byClass(j,"UFIReplyList")})};h.prototype.$StaticUFI29=function(){return Boolean(a("UFIOrderingModeStore").isInverted(this.props.orderingMode,this.props.contextArgs.ftentidentifier))};h.prototype.hasReactions=function(i,j){return Boolean(i.displayreactions&&j.hasReactions&&(j.feedbackMode==="none"||j.feedbackMode==="toggle"))};h.contextTypes={dispatch:ka.func};h.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,loadingSpamIDs:{},loadingTranslationsMap:{}};ea.exports=a("FluxContainer").create(h,{pure:false,withProps:true})}),null);
__d("ExploreFeedDeepDiveUFIPosition",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LAST:"last",FIRST:"first",REPLACE_LIKE:"replace_like"})}),null);
__d("UFIBlingItem.react",["cx","fbt","NumberFormat","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){__p&&__p();var m=c("NumberFormat").formatInteger(this.props.count),n=m;switch(this.props.itemKey){case"like":n=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i._enum(this.props.count===1?"Like":"Likes",{Like:"Like",Likes:"Likes"})]);break;case"comment":n=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i._enum(this.props.count===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})]);break;case"reaction":n=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i._enum(this.props.count===1?"Reaction":"Reactions",{Reaction:"Reaction",Reactions:"Reactions"})]);break;case"reshare":n=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i._param("count",this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i._enum(this.props.count===1?"Share":"Shares",{Share:"Share",Shares:"Shares"})]);break}return c("React").createElement("span",{className:"_2u_j"},n)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("UFIBlingBox.react",["cx","fbt","NumberFormat","React","UFIBlingItem.react","UFIReactionTypes"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n=[],o="",p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c("UFIReactionTypes").LIKE]["default"]!==s;n.push(c("React").createElement(c("UFIBlingItem.react"),{className:n.length>0?"mls":"",count:v?s||0:q,countreduced:v?u||"":r,itemKey:v?"reaction":"like",key:"like"}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i._param("count",this.props.likes,[0])]);o+=" "}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c("NumberFormat").formatInteger(this.props.comments);n.push(c("React").createElement(c("UFIBlingItem.react"),{className:n.length>0?"mls":"",contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,itemKey:"comment",key:"comment"}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i._param("count",this.props.comments,[0])]);o+=" "}if(this.props.reshares){n.push(c("React").createElement(c("UFIBlingItem.react"),{className:n.length>0?"mls":"",count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:"reshare",key:"reshare"}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i._param("count",this.props.reshares,[0])])}if(this.props.readOnly)return c("React").createElement("span",{"aria-label":o},n);else{var x=this.props.contextArgs.commentajaxify;return c("React").createElement("a",{ajaxify:x,href:this.props.permalink,"data-ft":this.props["data-ft"],"data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"aria-label":o,onClick:this.props.onClick,rel:x?"dialog":"ignore"},n)}};function m(){j.apply(this,arguments)}m.propTypes={contextArgs:l.object.isRequired,"data-ft":l.string,"data-comment-prelude-ref":l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m}),null);
__d("renderCrosspostedTooltipText",["fbt","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var m=this.props,n=m.posts,o=m.postViews,p=m.otherPostsViews,q=Math.max(0,n-1);if(q<=1||p<1)return null;return c("React").createElement("div",null,c("React").createElement("strong",null,h._({"*":"Video Posted {number} Times","_1":"Video Posted 1 Time"},[h._plural(n,"number")])),c("React").createElement("br",null),h._({"*":"{number} views from this post","_1":"1 view from this post"},[h._plural(o,"number")]),c("React").createElement("br",null),h._({"*":{"*":"{number} views from {posts count} other posts","_1":"{number} views from {posts count} other post"},"_1":{"*":"1 view from {posts count} other posts","_1":"1 view from {posts count} other post"}},[h._plural(p,"number"),h._param("posts count",q),h._plural(q)]))};function k(){i.apply(this,arguments)}function l(m){var n=m.posts,o=m.otherPostsViews,p=Math.max(0,n-1);if(p<=1||o<1)return null;return c("React").createElement(k,m)}f.exports=l}),null);
__d("UFIReactionsBlingSocialSentence.react",["csx","cx","fbt","ActorURI","BanzaiLogger","Bootloader","BootloadOnRender.react","DOMQuery","FeedbackSourceType","HideFeedbackCounts","JSResource","LazyComponent.react","NumberFormat","PagesPrivateReplyConstants","React","SutroPhase2GatingConfig","TahoeV2Config","Tooltip.react","UFIPrivateReplyIndicator.react","UFIReactionsSocialSentence.react","URI","XUFICommentTooltipController","XUFIGroupSeenByProfileBrowserController","XUFIGroupSeenByProfileDialogController","XUFIShareTooltipController","renderCrosspostedTooltipText"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.onCommentsClick=function(event){if(this.props.onCommentClick){this.props.onCommentClick(event);event.preventDefault()}this.logCountAction("comments","click")}.bind(this),this.onSeensClick=function(event){var s=this.props.feedback,t=c("XUFIGroupSeenByProfileDialogController").getURIBuilder().setInt("id",s.entidentifier).getURI();t=c("ActorURI").create(t,s.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction("seens","click");event.preventDefault()}.bind(this),this.onSharesClick=function(event){if(this.isCompactSearch())return;var s=this.props.feedback,t=s.sharefbid||s.targetfbid,u=c("ActorURI").create(new(c("URI"))("/ajax/shares/view").setQueryData({target_fbid:t}),s.actorforpost);this.launchDialog(u.toString(),event.currentTarget);this.logCountAction("shares","click");event.preventDefault()}.bind(this),this.onViewsClick=function(event){this.logCountAction("views","click")}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction("views","hover")}.bind(this),o}m.prototype.launchSnowlift=function(n,o){"use strict";c("Bootloader").loadModules(["PhotoSnowlift"],function(p){p.bootstrap(n,o)},"UFIReactionsBlingSocialSentence.react")};m.prototype.launchDialog=function(n,o){"use strict";c("Bootloader").loadModules(["AsyncDialog"],function(p){p.bootstrap(n,o,"dialog")},"UFIReactionsBlingSocialSentence.react")};m.prototype.logCountAction=function(n,o){"use strict";c("BanzaiLogger").log("WebReactionsBlingLoggerConfig",{feedback_id:this.props.feedback.entidentifier,"interface":"www",action:o,target_type:"count",target_subtype:n})};m.prototype.renderComments=function(){"use strict";__p&&__p();var n=this.props.contextArgs.islivestreaming;if(this.props.contextArgs.source===c("FeedbackSourceType").TAHOE&&!c("TahoeV2Config").videoInfoOntheLeft||!this.props.commentCount||!this.props.aboveUFI&&this.props.contextArgs.feedbackMode==="expanded"&&!n||this.props.contextArgs.disableCommentAndLikeForGroupAds||this.props.aboveUFI&&!this.props.commentCount)return null;var o=null;if(c("HideFeedbackCounts").hideCommentCount)o=j._({"*":"See comments","_1":"See comment"},[j._plural(this.props.commentCount)]);else{var p=isNaN(this.props.feedback.commentcountreduced)&&!n?this.props.feedback.commentcountreduced:c("NumberFormat").formatInteger(this.props.commentCount);o=j._({"Comment":"{count} Comment","Comments":"{count} Comments"},[j._param("count",p),j._enum(this.props.commentCount===1?"Comment":"Comments",{Comment:"Comment",Comments:"Comments"})])}var q=c("ActorURI").create(c("XUFICommentTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c("React").createElement("div",{className:"_36_q"},c("React").createElement("a",{"aria-live":"polite",className:"_ipm _-56","data-comment-prelude-ref":this.props["data-comment-prelude-ref"],"data-ft":this.props["data-ft"],"data-hover":"tooltip","data-tooltip-uri":q,href:this.props.href,onClick:this.onCommentsClick,role:"button"},this.props.children,o))};m.prototype.renderSeens=function(){"use strict";__p&&__p();if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var n=this.props.feedback,o=n.seencount,p=void 0;if(n.seenbyall)p=j._("Seen by everyone");else if(o===1)p=j._("Seen by 1");else p=j._("Seen by {count}",[j._param("count",o)]);var q=new(c("URI"))("/ajax/ufi/seen_list_hovercard.php").setQueryData({id:n.entidentifier}),r=c("XUFIGroupSeenByProfileBrowserController").getURIBuilder().setInt("id",n.entidentifier).getURI();r=c("ActorURI").create(r,n.actorforpost);return c("React").createElement("div",{className:"_36_q"},c("React").createElement("span",{ref:"seen_by_text"},c("React").createElement("a",{href:r,"data-hovercard":q.toString(),className:"_ipm _2x0l",onClick:this.onSeensClick},p)))};m.prototype.renderShares=function(){"use strict";if(!this.props.feedback.sharecount)return null;var n=this.props.feedback.sharefbid||this.props.feedback.targetfbid,o=void 0;if(this.isCompactSearch()&&this.props.href!=null)o=this.props.href;else o=c("ActorURI").create(new(c("URI"))("/shares/view").setSubdomain("www").setQueryData({id:n}),this.props.feedback.actorforpost);var p=c("ActorURI").create(c("XUFIShareTooltipController").getURIBuilder().setString("ft_ent_identifier",this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c("React").createElement("div",{className:"_36_q"},c("React").createElement("a",{"aria-live":"polite",className:"_ipm _2x0m","data-hover":"tooltip","data-tooltip-uri":p,href:o,onClick:this.onSharesClick,role:"button"},j._({"Share":"{count} Share","Shares":"{count} Shares"},[j._param("count",this.props.feedback.sharecountreduced),j._enum(this.props.feedback.sharecount===1?"Share":"Shares",{Share:"Share",Shares:"Shares"})])))};m.prototype.renderSaves=function(){"use strict";if(!this.props.contextArgs.saveCount||!this.props.contextArgs.saveCollectionId)return null;return c("React").createElement("div",{className:"_36_q"},c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("UFIReactionsSaveDialog.react").__setRef("UFIReactionsBlingSocialSentence.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{saveCount:this.props.contextArgs.saveCountReduced,collectionId:this.props.contextArgs.saveCollectionId,buttonText:this.props.contextArgs.saveButtonTitle,storyId:this.props.contextArgs.saveStoryID,isSaveCountLink:this.props.contextArgs.isSaveCountLink})}))};m.prototype.renderViews=function(){"use strict";__p&&__p();var n=null;if(!this.props.contextArgs.viewCount&&this.props.contextArgs.source===c("FeedbackSourceType").TAHOE){var o=document.getElementById(this.props.contextArgs.rootid);if(o){var p=c("DOMQuery").scry(o,"^._1rh0 ._yjk")[0];n=p?p.getAttribute("data-view-count"):null}}var q=this.props.contextArgs.viewCount||n,r=null;if(this.canSeeConsolidatedTooltip())r=this.renderViewsTooltip();if(!q)return null;var s=this.props.contextArgs.viewCount?this.props.contextArgs.viewCountReduced:n;return c("React").createElement("div",{className:"_36_q"},c("React").createElement(c("Tooltip.react"),{tooltip:r,"data-hover":"tooltip","data-tooltip-alignh":"left","data-tooltip-position":"above","aria-live":"polite",className:"_ipm _2x0m",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},j._({"View":"{count} View","Views":"{count} Views"},[j._param("count",s),j._enum(q==="1"?"View":"Views",{View:"View",Views:"Views"})])))};m.prototype.canSeeConsolidatedTooltip=function(){"use strict";var n=this.props.contextArgs.postViewCount,o=this.props.contextArgs.totalPosts,p=this.props.contextArgs.otherPostsViewCount;return!!o&&o>1&&!!n&&!!p};m.prototype.isCompactSearch=function(){"use strict";return this.props.contextArgs.source===c("FeedbackSourceType").COMPACT_SEARCH};m.prototype.renderViewsTooltip=function(){"use strict";var n=+this.props.contextArgs.totalPosts||0,o=+this.props.contextArgs.postViewCount||0,p=+this.props.contextArgs.otherPostsViewCount||0;return c("renderCrosspostedTooltipText")({posts:n,postViews:o,otherPostsViews:p})};m.prototype.renderPrivateReply=function(){"use strict";var n=this.props.feedback.messagereplycontext;if(!n||n.status!==c("PagesPrivateReplyConstants").Status.ALREADY_REPLIED)return null;return c("React").createElement("div",{className:"_36_q"},c("React").createElement("span",{className:"_ipm"},c("React").createElement(c("UFIPrivateReplyIndicator.react"),{replyStatus:n.status})))};m.prototype.render=function(){"use strict";var n={feedback:this.props.feedback,contextArgs:this.props.contextArgs,reactionsLink:null};if(this.props.overrideReactionsLink)n.reactionsLink=this.props.href;var o=this.renderComments(),p=this.renderShares(),q=this.renderSaves(),r=this.renderSeens(),s=this.renderViews(),t=this.renderPrivateReply(),u=this.props.feedback.reactioncount,v=c("SutroPhase2GatingConfig").enabled_counts_on_left;if(this.props.contextArgs.viewCount!=null&&(this.props.contextArgs.saveCount!=null||this.props.contextArgs.seenCount!=null))return c("React").createElement("div",{className:"_ipn clearfix _-5d"+(v&&u==0?" _lca":"")},c("React").createElement("div",{className:"_ipo"},o,p,c("React").createElement("div",{className:"_34i1 _36_q"},q,r,s,t)),c("React").createElement(c("UFIReactionsSocialSentence.react"),n));else return c("React").createElement("div",{className:"_ipn clearfix _-5d"+(v&&u==0?" _lca":"")},c("React").createElement("div",{className:"_ipo"},o,p,q,r,s,t),c("React").createElement(c("UFIReactionsSocialSentence.react"),n))};f.exports=m}),null);
__d("UFIBling.react",["CommentPrelude","CommentPrivacyUtils","CommentSection","FeedbackSourceType","React","SutroPhase2GatingConfig","TrackingNodes","UFIBlingBox.react","UFIReactionsBlingSocialSentence.react","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","URI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l)}j.prototype.render=function(){__p&&__p();var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.BLINGBOX),n=l.permalink,o=new(c("URI"))(n).addQueryData({comment_tracking:m}).toString(),p=0;if(l.commentTotalCount)p=l.commentTotalCount;else p=c("UFIToplevelPagedCommentList").getCommentList(k.ftentidentifier,l.defaultcommentorderingmode,c("CommentSection").DEFAULT).getDisplayedCommentCount();var q=c("SutroPhase2GatingConfig").enabled_bling_above_ufi,r=(k.feedbackMode==="none"||k.feedbackMode==="toggle")&&k.hasReactions&&l.displayreactions,s=function(event){__p&&__p();event.preventDefault();if(r&&k.feedbackMode==="expanded")this.$UFIBling1();else if(k.source===c("FeedbackSourceType").COMPACT_SEARCH){var x=k.commentredirecturi!=null?new(c("URI"))(k.commentredirecturi):new(c("URI"))(o);if(x!=null)x.go()}else{c("CommentPrelude").onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged()}}.bind(this),t=c("CommentPrivacyUtils").hasPrivateConversationsTreatment(k,l.viewerid);if(r||q||t||this.props.contextArgs.source===c("FeedbackSourceType").TAHOE)return c("React").createElement(c("UFIReactionsBlingSocialSentence.react"),{aboveUFI:q||t,commentCount:p,contextArgs:k,"data-comment-prelude-ref":"action_link_bling","data-ft":m,feedback:l,href:o,onCommentClick:s});else{var u=void 0,v=void 0,w=void 0;if(k.hasReactions){u=l.reactioncount;v=l.reactioncountmap;w=l.reactioncountreduced}return c("React").createElement(c("UFIBlingBox.react"),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,"data-comment-prelude-ref":"action_link_bling","data-ft":m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:s,permalink:o,reactionCount:u,reactionCountMap:v,reactionCountReduced:w,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly})}};j.prototype.$UFIBling1=function(){c("UFISharedDispatcher").dispatch(c("UFIStoryAction").showComments(this.props.contextArgs))};f.exports=j}),null);
__d("UFICommentLink.react",["cx","fbt","React","TrackingNodes","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){var n=i._("Leave a comment"),o='{ "tn": "'+c("TrackingNodes").encodeTN(c("TrackingNodes").types.COMMENT_LINK)+'", "type": 24 }';return c("React").createElement("a",{className:"comment_link _5yxe",role:"button",href:this.props.href?this.props.href:"#",title:n,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,"data-ft":o},this.props.children)};function m(){j.apply(this,arguments)}m.propTypes={onClick:l.func,href:l.string,ajaxify:l.string,rel:l.string};m.defaultProps={onClick:c("emptyFunction")};f.exports=m}),null);
__d("UFICommentActionLink.react",["cx","fbt","Arbiter","React","UFICommentLink.react","UFISharedDispatcher","UFIStoryAction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){this.$UFICommentActionLink1=c("Arbiter").subscribe("UFIAction/"+this.props.contextArgs.ftentidentifier+"/showComments",function(n,o){if(!o)return;c("UFISharedDispatcher").dispatch(c("UFIStoryAction").showComments(this.props.contextArgs))}.bind(this))};m.prototype.componentWillUnmount=function(){if(this.$UFICommentActionLink1)c("Arbiter").unsubscribe(this.$UFICommentActionLink1)};m.prototype.render=function(){__p&&__p();var n=this.props.contextArgs,o=n.commentredirecturi,p=n.loggedOutLinkConfig,q=this.props.contextArgs.isaskquestion?i._("Answer"):i._("Comment"),r=void 0;if(p&&p.showCommentLink)r=p.commentAjaxifyURI;if(r)return c("React").createElement("span",{className:"_6a _15-3 _3h-u _4k43"},c("React").createElement(c("UFICommentLink.react"),{ajaxify:r,rel:"dialog"},q));else if(o)return c("React").createElement("span",{className:"_6a _15-6 _3h-u _4k43"},c("React").createElement(c("UFICommentLink.react"),{href:o},q));return c("React").createElement("span",{className:"_6a _15-7 _3h-u _4k43"},c("React").createElement(c("UFICommentLink.react"),{onClick:function(event){event.preventDefault();c("UFISharedDispatcher").dispatch(c("UFIStoryAction").showComments(this.props.contextArgs))}.bind(this)},q))};function m(){j.apply(this,arguments)}m.propTypes={contextArgs:l.object.isRequired};f.exports=m}),null);
__d("UFILikeLink.react",["cx","fbt","Bootloader","React","ReactDOM","TrackingNodes","UFILikeWebDriverIDs"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=null;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$UFILikeLink1=null,this.state={nuxShown:false},this.onClick=function(t){__p&&__p();if(this.props.href)return;t.preventDefault();this.props.onClick&&this.props.onClick(t);if(this.props.showLikeNuxForGroupMallAds){var u=!this.props.likeAction;if(!u){c("ReactDOM").findDOMNode(this.$UFILikeLink1).focus();this.setState({nuxShown:true});c("Bootloader").loadModules(["UFIGroupMallAdsLikeNux.react"],function(v){m=v},"UFILikeLink.react")}else this.setState({nuxShown:false})}}.bind(this),p}n.prototype.renderLayers=function(){if(!this.state.nuxShown||!m)return null;return c("React").createElement(m,{nuxShown:this.state.nuxShown,nuxContent:this.props.likeNuxContent,contextRef:this.$UFILikeLink1})};n.prototype.render=function(){var o=!this.props.likeAction,p=o?c("UFILikeWebDriverIDs").UNLIKE_LINK:c("UFILikeWebDriverIDs").LIKE_LINK,q=!o||!this.props.forcelegacyrendering?i._("Like"):i._("Unlike"),r=c("TrackingNodes").getTrackingInfo(o?c("TrackingNodes").types.UNLIKE_LINK:c("TrackingNodes").types.LIKE_LINK),s=o?i._("Unlike this"):i._("Like this");return c("React").createElement("span",{className:"_3wv2"},c("React").createElement("a",{className:"_48-k UFILikeLink"+(o?" UFILinkBright":""),ref:function(t){return this.$UFILikeLink1=t}.bind(this),"data-testid":p,href:this.props.href||"#",role:"button","aria-label":s,"aria-live":"polite","aria-pressed":o,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(t,u){this.props.onKeyDown&&this.props.onKeyDown(t,u)}.bind(this),"data-ft":r},q),this.renderLayers())};n.propTypes={ajaxify:l.string,forcelegacyrendering:l.bool,href:l.string,likeAction:l.bool,likeNuxContent:l.string,rel:l.string,showLikeNuxForGroupMallAds:l.bool};n.defaultProps={forcelegacyrendering:false,showLikeNuxForGroupMallAds:false};f.exports=n}),null);
__d("UFILikeActionLink.react",["React","UFILikeLink.react","UFIReactionsLinkImpl.react","UFIReactionTypes","UFIStoryAction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c("UFIStoryAction").changeReaction(this.props.contextArgs,q?c("UFIReactionTypes").NONE:c("UFIReactionTypes").LIKE,event.target))}.bind(this),m}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c("UFIReactionsLinkImpl.react"))return c("React").createElement(c("UFIReactionsLinkImpl.react"),{contextArgs:m,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions});else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return c("React").createElement(c("UFILikeLink.react"),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?"dialog":null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent})}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k}),null);
__d("UFISaveActionLink.react",["ix","cx","fbt","Bootloader","Image.react","React","SutroStoryHeaderUFIGatingConfig","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.$UFISaveActionLink1=function(){var o=this.state.showSave;c("Bootloader").loadModules(["AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","SavedStateActions","XSaveController"],function(p,q,r,s,t){new p().setData({action:o?s.SAVE:s.UNSAVE,mechanism:q.SAVED_UFI,story_id:this.props.storyID,surface:r.CAMPFIRE_NOTE}).setHandler(function(u){if(u.error===0)this.setState({showSave:!o})}.bind(this)).setURI(t.getURIBuilder().getURI()).send()}.bind(this),"UFISaveActionLink.react")}.bind(this);this.state={showSave:!n.isSaved}}m.prototype.render=function(){var n=this.state.showSave?j._("Save"):j._("Unsave"),o=null;if(!c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi){var p=this.state.showSave?h("122454"):h("138474");o=c("React").createElement(c("Image.react"),{src:p})}return c("React").createElement("span",{className:"_6a _38qe"+(c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qf":"")},c("React").createElement("a",{className:(!this.state.showSave?"_38qg":"")+(c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi?" _38qh":""),href:"#",onClick:this.$UFISaveActionLink1},o,n))};f.exports=m}),null);
__d("UFIShareLink.react",["cx","fbt","CurrentUser","React","TrackingNodes","XUISpinner.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFIShareLink1=function(event){if(this.props.href&&this.props.href!=="#"&&!this.props.onClick)return;event.preventDefault();this.props.onClick&&this.props.onClick(event)}.bind(this),n}l.prototype.render=function(){__p&&__p();var m=i._("Send this to friends or post it on your timeline.");if(c("CurrentUser").isWorkUser())m=i._("Send this to coworkers or post it on your timeline.");var n='{ "tn": "'+c("TrackingNodes").encodeTN(c("TrackingNodes").types.SHARE_LINK)+'", "type": 25 }',o=null;if(this.props.rel!=="dialog")o=c("React").createElement(c("XUISpinner.react"),{className:"UFIShareLinkSpinner _1wfk",showOnAsync:true});var p=this.props,q=p.openOnInit,r=babelHelpers.objectWithoutProperties(p,["openOnInit"]);return c("React").createElement("span",{className:"_27de _4noj"},c("React").createElement("a",babelHelpers["extends"]({},r,{className:c("joinClasses")(this.props.className,"share_action_link _5f9b"),onClick:this.$UFIShareLink1,ref:function s(t){if(t&&q)t.click()},role:"button",tabIndex:0,"data-ft":n,title:m}),i._("Share"),o))};f.exports=l}),null);
__d("UFIShareActionLink.react",["ActorURI","Arbiter","Bootloader","React","ReactShareButtonGatedModule","UFICommonInteractionEvents","UFICommonInteractionLogger","UFIShareLink.react","URI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("ReactShareButtonGatedModule").module,k=c("ReactShareButtonGatedModule").should_use_groups_dialog,l=c("ReactShareButtonGatedModule").store,m=c("ReactShareButtonGatedModule").orderAudiencesBy,n=c("React").PropTypes;h=babelHelpers.inherits(o,c("React").Component);i=h&&h.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=i.constructor).call.apply(p,[this].concat(s)),this.$UFIShareActionLink2=false,this.state={confirmed:false,openOnInitOverride:false},this.$UFIShareActionLink3=function(){if(!this.$UFIShareActionLink1&&!this.$UFIShareActionLink2)this.$UFIShareActionLink1=c("UFICommonInteractionLogger").startInteraction(c("UFICommonInteractionEvents").UFI_SHARE_DIALOG_OPENS)}.bind(this),this.$UFIShareActionLink4=function(){this.$UFIShareActionLink2=false}.bind(this),this.$UFIShareActionLink5=function(){if(this.$UFIShareActionLink1){c("UFICommonInteractionLogger").endInteraction(this.$UFIShareActionLink1);this.$UFIShareActionLink1=null}this.$UFIShareActionLink2=true;this.$UFIShareActionLink6()}.bind(this),q}o.prototype.render=function(){__p&&__p();var p=this.state,q=p.confirmed,r=p.openOnInitOverride,s=this.props,t=s.shareURI,u=s.shareRel,v=s.shareNowMenuURI,w=s.feedbackReferrer,x=s.feedbackSource,y=s.feedbackTarget,z=s.misinformationConfirmDialogURI;if(z&&!q)return c("React").createElement(c("UFIShareLink.react"),{href:"#",onClick:function(){this.$UFIShareActionLink7(z);this.$UFIShareActionLink6()}.bind(this)});var A={feedback_referrer:w,feedback_source:x},B=y&&y.actorforpost;if(B){t=t&&c("ActorURI").create(t,B);v=v&&new(c("URI"))(v).addQueryData("actor_id",B).toString()}if(k){var C={default_audience:"silent_disco",feedback_referrer:w,feedback_source:x};if(l)l.setShareNowURI(this.props.feedbackTarget?this.props.feedbackTarget.sharefbid:null,v);return c("React").createElement(c("UFIShareLink.react"),{href:new(c("URI"))(t).addQueryData(C),rel:u,openOnInit:r})}return v?c("React").createElement(j,{endpoint:v,endpointData:A,openOnInitOverride:r,onMouseUp:this.$UFIShareActionLink3,onShow:this.$UFIShareActionLink5,onHide:this.$UFIShareActionLink4,orderAudiencesBy:m}):c("React").createElement(c("UFIShareLink.react"),{href:new(c("URI"))(t).addQueryData(A),rel:u,openOnInit:r})};o.prototype.$UFIShareActionLink6=function(){if(this.props.feedbackTarget)c("Arbiter").inform("share_initiated",{entidentifier:this.props.feedbackTarget.entidentifier})};o.prototype.$UFIShareActionLink7=function(p){__p&&__p();var q="MISINFORMATION_RESHARE_ALERT_FUNNEL";c("Bootloader").loadModules(["AsyncDialog","AsyncRequest","FunnelLogger"],function(r,s,t){__p&&__p();t.startFunnel(q);r.send(new s(p),function(u){u.subscribe("confirm",function(){this.setState({confirmed:true,openOnInitOverride:true});t.appendAction(q,"continue");t.endFunnel(q);u.hide()}.bind(this));u.subscribe("cancel",function(){t.appendAction(q,"cancel");t.endFunnel(q);u.hide()})}.bind(this))}.bind(this),"UFIShareActionLink.react")};o.propTypes={feedbackTarget:n.object,shareURI:n.string,shareRel:n.string,shareNowMenuURI:n.string,shareLinkHref:n.string,feedbackReferrer:n.string,feedbackSource:n.number,misinformationConfirmDialogURI:n.string};f.exports=o}),null);
__d("UFIActionLinks.react",["cx","fbt","BanzaiODS","BootloadedComponent.react","CommentPrivacyUtils","ExploreFeedDeepDiveUFIPosition","FBFeedLocations","FeedbackSourceType","JSResource","React","SutroPhase2GatingConfig","SutroStoryHeaderUFIGatingConfig","TahoeV2Config","UFIBling.react","UFICommentActionLink.react","UFIConfig","UFIInstanceAction","UFILikeActionLink.react","UFIPrivateReplyLink.react","UFISaveActionLink.react","UFIShareActionLink.react","UFISharedDispatcher","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.componentDidMount=function(){var m=this.$UFIActionLinks1();c("BanzaiODS").bumpEntityKey("feedback",m)};l.prototype.renderActorSelector=function(){if(this.props.hideActorSelector||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var m=this.props.contextArgs,n=m.actorSelectorConfig,o=m.hasReactions;if(!n)return null;var p=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,q=n.module;return c("React").createElement("div",{className:"_40yk"+(p?" _610g":"")+(p?" _610h":"")+(o?" _pbn":"")},c("React").createElement(q,n.props))};l.prototype.renderActionList=function(){__p&&__p();var m=this.props.contextArgs.deepDiveParams,n=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderDeepDiveLink(),this.renderSaveLink()];if(m)if(m.ufiOrder===c("ExploreFeedDeepDiveUFIPosition").FIRST)n=[this.renderDeepDiveLink(),this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink()];else if(m.ufiOrder===c("ExploreFeedDeepDiveUFIPosition").REPLACE_LIKE)n=[this.renderDeepDiveLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink()];var o=n.filter(function(p){return p}).map(function(p,q){return c("React").createElement("span",{className:"_1mto",key:q},p)});if(o.length)return c("React").createElement("div",{className:"_42nr _1mtp"},o);else return null};l.prototype.renderBling=function(){var m=this.shouldRenderBling();if(!m)return null;return c("React").createElement(c("UFIBling.react"),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").toggleComments(this.props.contextArgs))}.bind(this)})};l.prototype.renderLikeLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=n.loggedOutLinkConfig,q=n.disableCommentAndLikeForGroupAds;if(q)return null;if(!o.hasviewerliked&&!o.viewercanlike&&!(p&&p.showLikeLink))return null;return c("React").createElement(c("UFILikeActionLink.react"),{feedback:o,contextArgs:n})};l.prototype.renderCommentLink=function(){__p&&__p();var m=this.props.contextArgs.disableCommentAndLikeForGroupAds;if(m||this.props.contextArgs.hideComments)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(n&&n.showCommentLink)){var o=this.props.contextArgs.disabledCommentTooltip;if(o){var p=i._("Comment");return c("React").createElement("span",null,c("React").createElement("span",{className:"_1ysv","data-hover":"tooltip","data-tooltip-content":o},p))}return null}return c("React").createElement(c("UFICommentActionLink.react"),{contextArgs:this.props.contextArgs})};l.prototype.$UFIActionLinks1=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return"ufi-share-link.unavailable";var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)return"ufi-share-link.loggedout";return"ufi-share-link.render"};l.prototype.renderShareLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)m.shareURI=n.shareAjaxifyURI;return c("React").createElement(c("UFIShareActionLink.react"),babelHelpers["extends"]({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},m))};l.prototype.renderPrivateReplyLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=o.actorforpost,q=o.messagereplycontext;if(!c("UFIPrivateReplyLink.react").willRender(q,p))return null;if(!q)return null;return c("React").createElement(c("UFIPrivateReplyLink.react"),{actorID:p,activityID:n.ftentidentifier,context:q,seeResponseLabel:false,shouldShowNux:n.shouldShowCommentPrivateReplyNux})};l.prototype.renderEmbedLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m||!m.embedURI||this.props.contextArgs.deepDiveParams)return null;var n=i._("Embed");return c("React").createElement("span",{className:"_4q8d _1mtq"},c("React").createElement("a",{href:m.embedURI,rel:"dialog",className:"_2g1w"},n))};l.prototype.renderDeepDiveLink=function(){var m=this.props.contextArgs.deepDiveParams;if(!m)return null;var n=c("SutroStoryHeaderUFIGatingConfig").is_uppercased?m.ufiLabel.toUpperCase():m.ufiLabel;return c("React").createElement("span",{className:"_630w _630x"},c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("UFIDeepDiveLink.react").__setRef("UFIActionLinks.react"),bootloadPlaceholder:c("React").createElement("div",null),deepDiveParams:m,label:n}))};l.prototype.renderSaveLink=function(){var m=null;try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(n){}if((m===c("FBFeedLocations").CAMPFIRE_NOTE||m===c("FBFeedLocations").WORKPLACE_HUB_PREVIEW||c("gkx")("AT4Uy69YtMsZgOlnec07LWfEe_br2cawuZsUmBYGKodHGkuDwO37kGYV-sXnGAnYydNhVcF3MEUtvpNZ-dGMIALC"))&&this.props.contextArgs.showsavelink){var o=this.props.contextArgs,p=o.isSaved,q=o.saveStoryID;return c("React").createElement(c("UFISaveActionLink.react"),{isSaved:p,storyID:q})}return null};l.prototype.renderSearchFeedback=function(){var m=this.props.contextArgs.inlineSearchFeedbackConfig;if(!m)return null;return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("InlineFeedback.react").__setRef("UFIActionLinks.react")},m))};l.prototype.renderCrowdsourceLabelingContainer=function(){if(!c("UFIConfig").showUFICrowdsource)return null;return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("UFICrowdsourceLabelingContainer.react").__setRef("UFIActionLinks.react"),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs})};l.prototype.renderLayout=function(m,n,o){n=n.map(function(p,q){return p&&c("React").createElement("div",{className:"_3m9g",key:q},p)}).filter(function(p){return p});if(!m&&n.length===0)return null;return c("React").createElement("div",{className:c("joinClasses")("_3399",o)},n,c("React").createElement("div",{className:"_524d"},m))};l.prototype.shouldRenderBling=function(){var m=this.props.contextArgs,n=m.feedcontext,o=m.source,p=m.showBling,q=null;if(n)try{q=JSON.parse(n).location_type}catch(r){}if(q===c("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||q===c("FBFeedLocations").GOODWILL_THROWBACK_SHARE||c("TahoeV2Config").videoInfoOntheLeft)return false;var s=c("CommentPrivacyUtils").hasPrivateConversationsTreatment(this.props.contextArgs,this.props.feedbacktarget.viewerid),t=c("SutroPhase2GatingConfig").enabled_bling_above_ufi;return p||t&&!this.props.hideBling||o===c("FeedbackSourceType").TAHOE||s&&!this.props.hideBling};l.prototype.shouldRenderActionButtons=function(){var m=null,n=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(o){}if(m===c("FBFeedLocations").GOODWILL_THROWBACK_PERMALINK||m===c("FBFeedLocations").GOODWILL_THROWBACK_PROMOTION||m===c("FBFeedLocations").GOODWILL_THROWBACK_SHARE||m===c("FBFeedLocations").GROUP_SUGGESTIONS_WITH_STORY||n===c("FeedbackSourceType").LIVE_WWW_BROADCASTING||n===c("FeedbackSourceType").COMPACT_SEARCH||n===c("FeedbackSourceType").LIVE_VIDEO_STORIES)return false;return true};l.prototype.hasCounts=function(){return!!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount)||this.props.feedbacktarget.reactioncount>0&&(c("SutroPhase2GatingConfig").enabled_bling_above_ufi||this.props.contextArgs.showBling||this.props.contextArgs.source===c("FeedbackSourceType").TAHOE||c("CommentPrivacyUtils").hasPrivateConversationsTreatment(this.props.contextArgs,this.props.feedbacktarget.viewerid))};l.prototype.render=function(){__p&&__p();var m=this.renderActorSelector(),n=this.renderSearchFeedback(),o=[],p=[],q=this.props.contextArgs.disableCommentAndLikeForGroupAds,r=null,s=c("SutroPhase2GatingConfig").enabled_bling_above_ufi,t=this.renderBling();if(this.props.contextArgs.showBling&&!s){o.push(m);if(this.hasCounts())r=this.renderLayout(null,[n],"_1f6t");else p.push(n)}else{o.push(m);o.push(n)}var u=this.props.contextArgs.source===c("FeedbackSourceType").COMPACT_SEARCH,v=this.shouldRenderActionButtons(),w=c("SutroStoryHeaderUFIGatingConfig").enabled_hide_ufi_border&&v,x="_1f6t"+(u?" _24vt":"")+(this.props.contextArgs.hasReactions?" _4_dr":"")+(w&&this.props.contextArgs.source!==c("FeedbackSourceType").PHOTOS_SNOWLIFT?" _20h5":""),y=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi,z=c("SutroStoryHeaderUFIGatingConfig").enabled_for_ufi_animation,A=c("SutroPhase2GatingConfig").enabled_bling_above_ufi,B=v?this.renderLayout(this.renderActionList(),o,"_a7s"+(w?" _20h6":"")+(y?" _610i":"")+(y?" _610j":"")+(y&&z?" _125r":"")+(A?" _2h27":"")+" clearfix _zw3"+(q?" _r9u":"")):null,C=this.renderCrowdsourceLabelingContainer();return c("React").createElement("div",{ref:"root",className:"_57w"},r,this.hasCounts()?this.renderLayout(t,p,x):null,B,C)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("UFIDispatcherContext.react",["React","UFIDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return{dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores}};k.prototype.render=function(){return this.props.children};function k(){h.apply(this,arguments)}k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k}),null);
__d("UFIActionHeader.react",["cx","FeedbackSourceType","FluxContainer","React","UFIActionLinks.react","UFICommercialBreakStore","UFIDispatcherContext.react","UFIPlayLiveVODHighlightsStore","ifRequired"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={inCommercialBreak:false,isPlayingLiveVODHighlights:false},m}k.getStores=function(){return[c("UFICommercialBreakStore"),c("UFIPlayLiveVODHighlightsStore")]};k.calculateState=function(l,m){var n=m.contextArgs.instanceid;return{inCommercialBreak:c("UFICommercialBreakStore").getValueFor(n),isPlayingLiveVODHighlights:c("UFIPlayLiveVODHighlightsStore").getValueFor(n)}};k.prototype.$UFIActionHeader1=function(){var l=c("ifRequired")("UFIVideoPlayerRegistry",function(o){return o.getAvailableVideoPlayerController(this.props.contextArgs.instanceid)}.bind(this)),m=l&&l.getOption("VideoWithInstreamVideo","controller"),n=m&&m.getConfig();return n};k.prototype.$UFIActionHeader2=function(){var l=this.props.contextArgs.source,m=l===c("FeedbackSourceType").COMPACT_SEARCH,n=c("React").createElement(c("UFIDispatcherContext.react"),{dispatcher:this.props.dispatcher,stores:this.props.stores},c("React").createElement(c("UFIActionLinks.react"),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:m}));if(this.state.isPlayingLiveVODHighlights)return c("React").createElement("div",{className:"_f_s"},n);if(!this.state.inCommercialBreak)return n;var o=this.$UFIActionHeader1(),p=o&&o.vodTransitionVersion!==0;if(!p)return null;return c("React").createElement("div",{className:"_4hqd"},n)};k.prototype.render=function(){return c("React").createElement("div",null,this.$UFIActionHeader2())};f.exports=c("FluxContainer").create(k,{withProps:true,pure:false})}),null);
__d("UFICallbackStore",["FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.__moduleID=f.id,l}j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,["type"]);this.__emitter.emit(l,m)};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l)};j.prototype.remove=function(){this.__emitter.removeAllListeners()};f.exports=j}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1435334373168219",queryID:"1723155404680538"})}),null);
__d("UFICommentLikeSubscription",["BaseGraphQLSubscription","CommentLikeWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/comment_like_subscribe/top_level_feedback_id_"+j},_getQueryID:function i(){return c("CommentLikeWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return"comment_like_subscribe"}});f.exports=h}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1547430308687571",queryID:"1951588341824272"})}),null);
__d("UFICommentSubscription",["BaseGraphQLSubscription","CommentCreateWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/comment_create_subscribe/top_level_feedback_id_"+j},_getQueryID:function i(){return c("CommentCreateWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return"comment_create_subscribe"}});f.exports=h}),null);
__d("UFIFeaturedReplyCommentListImpl",["UFIReplyCommentListImpl","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIReplyCommentListImpl"));i=h&&h.prototype;function j(k,l,m,n){__p&&__p();i.constructor.call(this,k,l,c("WebCommentViewOption").FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){if(r.id)q[r.id]=r});m.forEach(function(r){this.addOrUpdateComment(q[r])}.bind(this))}j.prototype.fetchComments=function(k,l,m){};f.exports=j}),null);
__d("UFIFeaturedToplevelCommentListImpl",["UFIToplevelPagedCommentListImpl","WebCommentViewOption"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("UFIToplevelPagedCommentListImpl"));i=h&&h.prototype;function j(k,l,m){__p&&__p();i.constructor.call(this,k,c("WebCommentViewOption").FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){if(q.id)p[q.id]=q});l.forEach(function(q){this.addOrUpdateComment(p[q])}.bind(this))}j.prototype.fetchComments=function(k,l,m){};f.exports=j}),null);
__d("UFIFeedbackFilters",[],(function a(b,c,d,e,f,g){"use strict";var h={getRequestedIDs:function i(j){var k=[];if(j.reactorids)k=k.concat(j.reactorids);if(j.actorforpost)k=k.concat(j.actorforpost);return k}};f.exports=h}),null);
__d("UFIFetcher",["Promise","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";var h={fetchShortProfiles:function i(j){return new(c("Promise"))(function(k,l){return c("ShortProfiles").getMulti(j,k)})},fetchComments:function i(j,k,l){return new(c("Promise"))(function(m,n){return j.getComments(k.getOffset(),k.getLength(),l,m)}).then(function(m){return Object.values(m)})},fetchCommentsOrThrow:function i(j,k,l){return Object.values(j.getCommentsOrThrow(k,l))}};f.exports=h}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1304193676334207",queryID:"264366153976871"})}),null);
__d("UFILikeSubscription",["BaseGraphQLSubscription","FeedbackLikeWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/feedback_like_subscribe/feedback_id_"+j},_getQueryID:function i(){return c("FeedbackLikeWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),feedback_id:j})}},_getSubscriptionCallName:function i(){return"feedback_like_subscribe"}});f.exports=h}),null);
__d("PageCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1774615255922429",queryID:"198063820795350"})}),null);
__d("UFIPageCommentSubscription",["BaseGraphQLSubscription","PageCommentCreateWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/page_comment_create_subscribe/top_level_feedback_id_"+j},_getQueryID:function i(){return c("PageCommentCreateWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return"page_comment_create_subscribe"}});f.exports=h}),null);
__d("UFIReactionStore",["Arbiter","FluxStore","UFIReactionTypes","UFIStoryActionType","UFIUIEvents","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.__moduleID=f.id,l}j.prototype.__onDispatch=function(k){switch(k.type){case c("UFIStoryActionType").CHANGE_REACTION:c("UFIUserActions").changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming,instanceid:k.contextArgs.instanceid},k.target,k.sphericalYaw,k.sphericalPitch);c("Arbiter").inform(c("UFIUIEvents").ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c("UFIReactionTypes").LIKE,reaction_type:k.reactionType,target:k.target});break}};f.exports=j}),null);
__d("UFIRetryActions",["JSLogger","UFICentralUpdates","UFIConstants","UFIUserActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("JSLogger").create("UFIRetryActions");function i(l,m){var n={actiontype:c("UFIConstants").UFIActionType.DELETE_COMMENT,commentid:l.id};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;c("UFIUserActions").addComment(l.ftentidentifier,o,p,{source:m,replyid:l.parentcommentid,attachedphoto:l.body.mentionsphoto,attachedvideo:l.body.mentionsvideo,attachedfile:l.body.mentionsfile,privacyValue:l.privacy_value})}function j(l,m){var n=l.body.text,o=l.body.mentionstext;c("UFIUserActions").editComment(l.id,n,o,{source:m,attachedPhoto:l.body.mentionsphoto,attachedSticker:l.attachment,attachedVideo:l.body.mentionsvideo,attachedFile:l.body.mentionsfile})}var k={retrySubmit:function l(m,n){switch(m.status){case c("UFIConstants").UFIStatus.FAILED_ADD:i(m,n);break;case c("UFIConstants").UFIStatus.FAILED_EDIT:j(m,n);break;default:h.error("retrysubmitstatus",{status:m.status});break}}};f.exports=k}),null);
__d("FacecastStreamingCommentDelayTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentDelayLoggerConfig",this.$FacecastStreamingCommentDelayTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentDelayLoggerConfig",this.$FacecastStreamingCommentDelayTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:FacecastStreamingCommentDelayLoggerConfig",this.$FacecastStreamingCommentDelayTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$FacecastStreamingCommentDelayTypedLogger1)};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers["extends"]({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appversion=j;return this};h.prototype.setClientUserID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.client_userid=j;return this};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this};var i={appid:true,appversion:true,client_userid:true,comment_id:true,event:true,protocol:true,vc:true};f.exports=h}),null);
__d("UFISubscriptionUpdates",["fbt","BanzaiODS","CommentPrivacyValue","FacecastStreamingCommentDelayTypedLogger","ImmutableObject","LiveWWWFeedbackTypedLogger","ShortProfiles","UFICentralUpdates","UFIComments","UFIConfig","UFIConstants","UFIReactionsUtils","UFISharedDispatcher","UFIStoryAction","UFIStreamingStateType","idx","requireWeak"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();c("BanzaiODS").setEntitySample("feedback",1e-4);function i(k,l,m){new(c("LiveWWWFeedbackTypedLogger"))().setMechanism("graphql_subscriptions").setEvent("receive_payload").setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log()}var j={handleLiveLike:function k(l,m,n){__p&&__p();c("BanzaiODS").bumpEntityKey("feedback","gql_like_received");i("like",n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[{actiontype:c("UFIConstants").UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count}],r=o.reactions_summary;if(r){var s=c("UFIReactionsUtils").getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push({actiontype:c("UFIConstants").UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}})}c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{actions:q})},handleLiveComment:function k(l,m,n){c("BanzaiODS").bumpEntityKey("feedback","gql_comment_received");var o=m&&m.comment;if(!o)return;i("comment",n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);if(m.serialized_short_profiles)c("ShortProfiles").setMulti(JSON.parse(m.serialized_short_profiles));c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{comments:[p]})},handleLiveStreamingComment:function k(l,m,n,o){__p&&__p();c("BanzaiODS").bumpEntityKey("feedback","gql_streaming_comment_received");var p=m&&m.comment;if(!p)return;i("comment",n,{comment_id:p.legacy_token});if(o)new(c("FacecastStreamingCommentDelayTypedLogger"))().setCommentID(p.legacy_fbid).setEvent("push").log();var q=this.prepareCommentData(l,p,n,m.client_mutation_id);if(m.serialized_short_profiles)c("ShortProfiles").setMulti(JSON.parse(m.serialized_short_profiles));c("requireWeak")("UFILiveStreamingComments",function(r){r.enqueueSubscribedComment(l,{comments:[q],streamingstate:c("UFIStreamingStateType").LIVE,priority:p.live_streaming_comment_priority},m.feedback.top_level_comments.total_count)})},handleLiveStreamingReply:function k(l,m,n){__p&&__p();c("BanzaiODS").bumpEntityKey("feedback","gql_streaming_reply_received");if(m==null)return;var o=m.comment;if(o==null)return;i("comment",n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);if(m.serialized_short_profiles)c("ShortProfiles").setMulti(JSON.parse(m.serialized_short_profiles));c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,{comments:[p],streamingstate:c("UFIStreamingStateType").LIVE,priority:o.live_streaming_comment_priority})},prepareCommentData:function k(l,m,n,o){__p&&__p();var p={__typename:"saved",author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,canreport:m.can_viewer_report,canembed:m.can_viewer_embed,canshare:m.can_viewer_share,commentshareuri:m.www_share_uri_raw,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("a few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthorbot:m.isauthorbot,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,privacy_value:c("CommentPrivacyValue")[m.comment_privacy_value],spamreplycount:0,hasConstituentBadge:m.has_constituent_badge,hasModeratorBadge:m.has_moderator_badge};if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length){var s=r[0];if(s=="sticker"){var t=q.target;p.attachment={fbid:t.id,metadata:{source_uri:t.img.uri,source_uri_2x:t.img_2x.uri,width:t.img.width,height:t.img.height,frameCount:t.frame_count,frameRate:t.frame_rate,framesPerCol:t.frames_per_column,framesPerRow:t.frames_per_row,sprite_uri:t.sprite_img&&t.sprite_img.uri,sprite_uri_2x:t.sprite_img_2x&&t.sprite_img_2x.uri},type:"sticker"}}else if(s=="photo"){var u=q.target;p.attachment={fbid:u.id,metadata:{preview_uri:u.photo_img&&u.photo_img.uri,width:u.photo_img.width,height:u.photo_img.height,url:u.url},type:"photo"}}else if(s=="share"||s=="image_share"){q.type="live_share";p.attachment=q}else if(s=="animated_image_share"||s=="animated_image_autoplay"||s=="animated_image_video"||s=="animated_image_video_autoplay"){q.type="gif";p.attachment=q}else if(s=="video_inline"){q.type="video";p.attachment=q}else if(s=="file_upload"){q.type="file";p.attachment=q}else if(s=="comment_place_info"){q.type="live_comment_place_info";p.attachment=q}else if(s=="donation"){q.type="donation";p.attachment=q}else if(s=="TIP_JAR_PAYMENT"){q.type="TIP_JAR_PAYMENT";p.attachment=q}}}var v=m.feedback;if(v.reactions_summary){p.canviewerreact=v.can_viewer_react;p.reactioncount=v.reactors.count;p.reactioncountmap=c("UFIReactionsUtils").getReactionCountMapFromSummary(v.reactions_summary);p.reactioncountreduced=v.reaction_count_reduced?v.reaction_count_reduced:v.reactors.count;p.viewerreaction=v.viewer_feedback_reaction_info?v.viewer_feedback_reaction_info.key:0}return p},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c("UFIComments").setComment(p.id,new(c("ImmutableObject"))(p));c("UFISharedDispatcher").dispatch(c("UFIStoryAction").pinComment(l,p.id))}else c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(l))},handleLiveCommentLike:function k(l,m,n){i("comment_like",n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c("UFIReactionsUtils").getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]})},handleFacecastCommentUpdate:function k(l,m,n){i("comment_like",n);var o=m&&m.facecast_comment_update_subscribe&&m.facecast_comment_update_subscribe.comment&&m.facecast_comment_update_subscribe.comment.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c("UFIReactionsUtils").getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c("UFIConstants").UFIActionType.COMMENT_LIKE,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]})}};f.exports=j}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1237650813017179",queryID:"1235619139887368"})}),null);
__d("UFITypingSubscription",["BaseGraphQLSubscription","FeedbackTypingWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/feedback_typing_subscribe/feedback_id_"+j},_getQueryID:function i(){return c("FeedbackTypingWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),feedback_id:j})}},_getSubscriptionCallName:function i(){return"feedback_typing_subscribe"}});f.exports=h}),null);
__d("UFITypingSubscriptionController",["TimeSlice","UFITypingSubscription","clearTimeout","getByPath","setTimeout"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=15*1e3;function i(l){var m=c("getByPath")(l,["feedback_typing_subscribe","feedback","feedback_typers","friend_count"]),n=c("getByPath")(l,["feedback_typing_subscribe","feedback","feedback_typers","other_count"]);return{friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0}}function j(l){return l.friendCount===0&&l.otherCount===0}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c("UFITypingSubscription").subscribe(l,this.$UFITypingSubscriptionController4.bind(this))}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe()};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c("setTimeout")(c("TimeSlice").guard(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0})}.bind(this),"UFITypingSubscriptionController freshnessTimer",{propagationType:c("TimeSlice").PropagationType.EXECUTION}),h)};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){c("clearTimeout")(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null}};f.exports=k}),null);
__d("UFITypingSubscriptionControllerFactory",["UFIConfig","UFISharedDispatcher","UFIStoryAction","UFITypingSubscriptionController","debounce"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=500,i={forUFIController:function j(k,l){var m=c("debounce")(function(n){var o=c("UFIConfig").typingIndicator.fromEveryone,p=void 0;if(n.friendCount)p=c("UFIStoryAction").friendTyping(l);else if(n.otherCount&&o)p=c("UFIStoryAction").someoneTyping(l);else p=c("UFIStoryAction").typingStopped(l);c("UFISharedDispatcher").dispatch(p)},h);return new(c("UFITypingSubscriptionController"))(k.targetfbid,m)}};f.exports=i}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/videos/vodcomments/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}})}),null);
__d("UFIVODStreamingComments",["AsyncRequest","BanzaiODS","CommentSection","SubscriptionsHandler","UFICentralUpdates","UFIConstants","UFIInstanceAction","UFILivePinnedCommentStore","UFISharedDispatcher","UFIStoryAction","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","WebCommentViewOption","XVODStreamingCommentsAsyncController","idx","setInterval"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();c("BanzaiODS").setEntitySample("feedback",1e-4);function h(j,k){__p&&__p();this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new(c("SubscriptionsHandler"))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?"MayPlay":"MayNotPlay";this.pinQueue=[];this.resetToTime(k.getCurrentTimePosition());var l=this.ufiController.getFtEntIdentifier(),m=this.ufiController.getInstanceID(),n=c("UFIToplevelPagedCommentList").getPagedCommentCountForFeedbackTargetID(l,c("CommentSection").DEFAULT);if(typeof n==="number")c("UFIToplevelStreamedCommentList").getCommentList(l,m).updateCommentCount(n);this.subscriptions.addSubscriptions(k.addListener("seekEnd",function(o){if(this.commentsAutoplayState==="MayNotPlay")this.commentsAutoplayState="MayPlay";this.resetToTime(o.position)}.bind(this)),k.addListener("unmute",function(o){if(this.commentsAutoplayState==="MayNotPlay")this.commentsAutoplayState="MayPlay";this.$UFIVODCommentStream1()}.bind(this)),k.addListener("updateStatus",function(o,p){var q=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>o.position)break;q=this.pinQueue.shift()}if(q)this.$UFIVODCommentStream2(q)}.bind(this)));c("setInterval")(this.renderNextComment.bind(this),2e3);c("BanzaiODS").bumpEntityKey("vod_comments","www_load")}h.prototype.renderNextComment=function(){__p&&__p();if(!this.videoPlayerController.isState("playing"))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,k.ufipayload);c("BanzaiODS").bumpEntityKey("feedback","facecast_vod_comment_rendered");break}this.$UFIVODCommentStream1()};h.prototype.fetchNewCommments=function(j,k,l,m){__p&&__p();var n=j+60,o=c("XVODStreamingCommentsAsyncController").getURIBuilder().setString("eft_id",this.ufiController.getFtEntIdentifier()).setString("target_ufi_instance_id",this.ufiController.getInstanceID()).setFloat("start_time",j).setFloat("end_time",n).setBool("should_backfill",k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new(c("AsyncRequest"))().setURI(o).setHandler(function(p){var q=p.getPayload();if(q.status==="error")return;if(q.backfillpayload)c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,q.backfillpayload);l(q.ufipayloads);m(q.pinnedcommentpayloads,q.backfillpinnedcommentpayload);this.queueEndTime=n}.bind(this)).setFinallyHandler(function(){if(k)c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").didReceiveVODComments(this.ufiController.getContextArgs()));this.currentRequest=null}.bind(this));this.currentRequest.send();if(k)c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").didRequestVODComments(this.ufiController.getContextArgs()))};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k)}.bind(this),function(k,l){this.pinQueue=this.pinQueue.concat(k)}.bind(this))};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c("UFIToplevelStreamedCommentList").resetCommentList(k,this.ufiController.getInstanceID());c("UFICentralUpdates").didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l}.bind(this),function(l,m){this.pinQueue=l;this.$UFIVODCommentStream2(m)}.bind(this))};h.prototype.stop=function(){this.subscriptions.release()};h.prototype.$UFIVODCommentStream1=function(){var j=c("UFIToplevelStreamedCommentList").getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||this.commentsAutoplayState!=="MayPlay"||!this.videoPlayerController.isState("playing"))return;c("BanzaiODS").bumpEntityKey("vod_comments","www_autoplay");this.commentsAutoplayState="Played";c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").changeOrderingMode(this.ufiController.getContextArgs(),c("WebCommentViewOption").LIVE_STREAMING));this.ufiController.scrollToTopOfCommentsInViewer()};h.prototype.$UFIVODCommentStream2=function(j){__p&&__p();var k,l=this.ufiController.getContextArgs(),m=c("UFILivePinnedCommentStore").getPinnedCommentID(l.ftentidentifier),n=j.ufipayload,o=(k=n)!=null?(k=k.pinnedcomments)!=null?k.length:k:k;if(!o){if(m!==null)c("UFISharedDispatcher").dispatch(c("UFIStoryAction").unpinComment(l,j.pineventid));return}var p=n.pinnedcomments[0].id;if(p===m)return;c("UFICentralUpdates").handleUpdate(c("UFIConstants").UFIPayloadSourceType.STREAMING,n);c("UFISharedDispatcher").dispatch(c("UFIStoryAction").pinComment(l,p,j.pineventid))};var i=new Map();f.exports={start:function j(k,l){var m=k.getInstanceID();if(i.get(m))return;i.set(m,new h(k,l))},stop:function j(k,l){var m=i.get(l);if(!m)return;m.stop();i["delete"](l)}}}),null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/plugins/comment-embed/async/embed/dialog/",{comment_id:{type:"String",required:true},width:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d("UFIController",["csx","invariant","Promise","Arbiter","AsyncRequest","BigPipe","BootloadedComponent.react","Bootloader","CommentPrelude","CommentSection","DOM","DOMContainer.react","DOMQuery","ErrorUtils","FBFeedLocations","FeedbackPayloadSourceType","FeedbackSourceType","IntersectionObserver","JSReliabilityFixesGatingConfig","JSResource","LivePinnedCommentEventCreateSubscription","LiveTimer","React","ReactDOM","Run","ShortProfiles","StaticUFI.react","SubscriptionsHandler","TranslationTrigger","UFIActionHeader.react","UFIActionLinks.react","UFIAddCommentActionType","UFIAsyncWrapper","UFICallbackStore","UFICentralUpdates","UFICommentActionType","UFICommentFilters","UFICommentLikeSubscription","UFICommentLogger","UFIComments","UFICommentSubscription","UFICommentUtils","UFICommentVisibilityStore","UFICommercialBreakAdapter","UFICommonInteractionLogger","UFIConfig","UFIConstants","UFIDispatcher","UFIDispatcherContext.react","UFIDomRootAdapter","UFIFeaturedReplyCommentListImpl","UFIFeaturedToplevelCommentListImpl","UFIFeedbackFilters","UFIFeedbackMode","UFIFeedbackStore","UFIFeedbackTargets","UFIFetcher","UFIInstanceAction","UFIInstanceActionType","UFILikeSubscription","UFILivePinnedCommentStore","UFINewCommentNotifier","UFIOrderingModeStore","UFIPageCommentSubscription","UFIPaging","UFIPlayLiveVODHighlightsAdapter","UFIRange","UFIReactionStore","UFIReplyCommentList","UFIRetryActions","UFIRootRegistry","UFISharedDispatcher","UFIStoryAction","UFIStoryActionType","UFISubscriptionUpdates","UFIToplevelPagedCommentList","UFIToplevelStreamedCommentList","UFITypingSubscriptionControllerFactory","UFIUIEvents","UFIUserActions","UFIVideoPlayerRegistry","UFIVisibility","UFIVODStreamingComments","URI","WebCommentViewOption","XCommentEmbedPluginEmbedAsyncDialogController","createArrayFromMixed","ex","flattenArray","forEachObject","gkx","isEmpty","onEnclosingPageletDestroy","requireWeak"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("JSReliabilityFixesGatingConfig").should_get_fix,k=Object.freeze({NEWSSTAND:"newsstand"}),l=function l(s,t,u,v){var w=s.getRequestedOffset(),x=s.getRequestedLength(),y=w+x===t,z=y&&m(v)?u-w:x;return new(c("UFIRange"))(w,z)},m=function m(s){return s==c("FeedbackPayloadSourceType").USER_ACTION||s==c("FeedbackPayloadSourceType").LIVE_SEND||s==c("FeedbackPayloadSourceType").STREAMING},n=void 0,o=false,p="none",q=0;r.factory=function(s,t,u){__p&&__p();if(!p||!n||t.feedLocationType!==c("FBFeedLocations").NEWSFEED||o||p==="none"||(p==="until_dd_only_2nd"||p==="until_dd_only_belowfold_only_2nd")&&t.substream_index!==1){r.$UFIController14(s,t,u);return}n.subscribeOnce(c("BigPipe").Events.displayed,function(){o=true;r.$UFIController14(s,t,u)});if(p==="until_dd_only_belowfold"||p==="until_dd_only_belowfold_only_2nd"&&t.substream_index===1){var v=q&&q!==0?{rootMargin:q+"px 0px"}:{},w=new(c("IntersectionObserver"))(function(x,w){x.forEach(function(y){if(y.isIntersecting||y.intersectionRatio>0){w.disconnect();r.$UFIController14(s,t,u)}})},v);w.observe(s)}};r.prepare=function(s){var t=arguments.length<=1||arguments[1]===undefined?0:arguments[1];c("Arbiter").subscribeOnce(c("BigPipe").Events.init,function(u,v){n=v.arbiter});p=(!s||s==="none")&&c("gkx")("AT6WQVzUqp1i8OmMGc8SvBitzwzq3J3DDBxsUNejZ9nkUmSy6aVEbWkQ1KjCvQZP3qKkJt5ApvhBiWkDW4avlRJFG880ZvRoIMyjd_dqQ-TrLA")?"until_dd_only_belowfold_only_2nd":s;q=t};r.$UFIController14=function(s,t,u){if(t.rootid)return;t.rootid=s.id;return new r(s,Object.freeze(t),u)};r.prototype.getRootNode=function(){return this.root};r.prototype.getContextArgs=function(){return this.$UFIController2};r.prototype.getFtEntIdentifier=function(){return this.$UFIController2.ftentidentifier};r.prototype.getInstanceID=function(){return this.$UFIController2.instanceid};r.prototype.getFluentContentToken=function(){return this.$UFIController2.fluentContentToken};r.prototype.shouldAutoplayLiveVODComments=function(){return!!this.$UFIController2.autoplayLiveVODComments};r.prototype.getIsCurrentCommentEmpty=function(){return this.$UFIController13};r.prototype.getOrderingMode=function(s){if(s===c("CommentSection").FRIENDS)return c("WebCommentViewOption").TOPLEVEL;return c("UFIOrderingModeStore").getOrderingMode(this.$UFIController2.instanceid)};function r(s,t,u){__p&&__p();var v,w;this.$UFIController6=false;this.$UFIController19=[];this.componentDidRender=function(){if(this.$UFIController19.length){this.$UFIController19.forEach(c("UFICommonInteractionLogger").endInteraction);this.$UFIController19.length=0}}.bind(this);this.$UFIController15();this.$UFIController16();this.root=s;this.$UFIController2=t;this.$UFIController7=null;c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").init(t,u));c("UFIRootRegistry").registerController(t.rootid,t.instanceid,t.ftentidentifier,function(){this.$UFIController17()}.bind(this));this.$UFIController4=new(c("UFIDomRootAdapter"))(this.root,this.$UFIController2);if(c("UFIConfig").feedfocusWrapperModule&&t.location==k.NEWSSTAND){var x=c("UFIConfig").feedfocusWrapperModule,y=c("DOMQuery").scry(this.root,"^._5pat"),z=y[0];if(z)(function(){var H=c("createArrayFromMixed")(z.children),I=document.createDocumentFragment();H.forEach(function(J){I.appendChild(J)});c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,c("React").createElement(x,{instanceID:t.instanceid},c("React").createElement(c("DOMContainer.react"),null,I))),z)})()}var A=t.feedbackMode===c("UFIFeedbackMode").NEVER||t.feedbackMode===c("UFIFeedbackMode").NONE;this.$UFIController10={payloadSource:null,feedback:null,oldRange:{},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:false,isHidden:A,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,focusTopLevelComposer:false,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:false,shouldTranslateAllVisibleComments:false,commentsLoadingTranslations:{},loadingCommentsForSection:new Set()};this.$UFIController10.oldRange[c("CommentSection").DEFAULT]={offset:0,length:0};this.$UFIController10.deletedCounts[c("CommentSection").DEFAULT]={};this.authorProfiles={};this.comments={};this.comments[c("CommentSection").DEFAULT]=[];this.commentsToSection={};this.repliesMap={};this.$UFIController13=true;var B=u.feedbacktarget?u.feedbacktarget:u.feedbacktargets&&u.feedbacktargets[0];if(!this.canRenderHeader())c("Bootloader").loadModules(["UFIActionLinkController"],function(H){return new H(s,t,B)},"UFIController");if(B)this.$UFIController18(B,t);var C=this.getOrderingMode(c("CommentSection").DEFAULT),D=null,E=null;if(u.featuredcommentlists&&u.featuredcommentlists.comments&&u.featuredcommentlists.comments[t.ftentidentifier]){D=u.featuredcommentlists.comments[t.ftentidentifier];this.$UFIController10.featuredCommentLists[t.ftentidentifier]=new(c("UFIFeaturedToplevelCommentListImpl"))(t.ftentidentifier,D.values,u.comments)}else{var F=u.commentlists&&u.commentlists.comments,G=F[t.ftentidentifier];D=G[C]}if(u.privatecommentlists&&u.privatecommentlists.comments&&u.privatecommentlists.comments[t.ftentidentifier]){E=u.privatecommentlists.comments[t.ftentidentifier][c("WebCommentViewOption").TOPLEVEL];this.$UFIController10.oldRange[c("CommentSection").FRIENDS]={offset:0,length:0}}if(u.featuredcommentids)this.$UFIController10.featuredCommentIDs=u.featuredcommentids;this.ranges={};this.replyRanges={};this.commentCounts={};this.commentCounts[t.ftentidentifier]=0;this.privateCommentsCount=0;this.ranges[c("CommentSection").DEFAULT]={};this.ranges[c("CommentSection").DEFAULT][C]=new(c("UFIRange"))(D.range.offset,D.range.length);this.$UFIController10.oldRange[c("CommentSection").DEFAULT]={offset:D.range.offset,length:this.comments[c("CommentSection").DEFAULT]&&this.comments[c("CommentSection").DEFAULT].length||0};if(E){this.$UFIController10.deletedCounts[c("CommentSection").FRIENDS]={};this.comments[c("CommentSection").FRIENDS]=[];this.ranges[c("CommentSection").FRIENDS]={};this.ranges[c("CommentSection").FRIENDS][c("WebCommentViewOption").TOPLEVEL]=new(c("UFIRange"))(E.range.offset,E.range.length);this.$UFIController10.oldRange[c("CommentSection").FRIENDS]={offset:E.range.offset,length:this.comments[c("CommentSection").FRIENDS]&&this.comments[c("CommentSection").FRIENDS].length||0}}if(u.commentlists.replies)D.values.concat((E||{}).values||[]).forEach(function(H){var I=u.commentlists.replies[H];if(I){this.commentCounts[H]=this.getReplyCommentList(H).getCommentCount();this.replaceReplyRange(H,new(c("UFIRange"))(I.range.offset,I.range.length))}}.bind(this));if(u.featuredcommentlists&&u.featuredcommentlists.replies)D.values.forEach(function(H){var I=u.featuredcommentlists.replies[H];if(I){this.$UFIController10.featuredCommentLists[H]=new(c("UFIFeaturedReplyCommentListImpl"))(t.ftentidentifier,H,I.values,u.comments);this.commentCounts[H]=this.getReplyCommentList(H).getCommentCount();this.replaceReplyRange(H,c("UFIRange").combine(new(c("UFIRange"))(I.range.offset,I.range.length),this.replyRanges[H]))}}.bind(this));this.$UFIController8=null;this.ufiCentralUpdatesSubscriptions=[c("UFICentralUpdates").subscribe("feedback-updated",function(H,I){var J=I.updates;if(t.ftentidentifier in J){this.$UFIController10.payloadSource=I.payloadSource;this.fetchAndUpdate(I.payloadSource,c("CommentSection").DEFAULT);if(E)this.fetchAndUpdate(I.payloadSource,c("CommentSection").FRIENDS)}}.bind(this)),c("UFICentralUpdates").subscribe("update-ranges",function(H,u){var I=u.adjustedRanges&&u.adjustedRanges[t.ftentidentifier];if(I)c("forEachObject")(I,function(J,K){var L=this.getRange(K);L.updateRequestedRange(J.offset,L.length+J.length)}.bind(this))}.bind(this)),c("UFICentralUpdates").subscribe("update-feedback",function(H,u){if(u.ircid)this.$UFIController19.push(u.ircid)}.bind(this))];this.$UFIController20(t);this.onUnloadSubscription=c("Run").onUnload(function(){return this.$UFIController21()}.bind(this));this.getToplevelCommentList(c("CommentSection").DEFAULT);if(E)this.getToplevelCommentList(c("CommentSection").FRIENDS);c("UFICentralUpdates").handleUpdate(c("FeedbackPayloadSourceType").INITIAL_SERVER,u);if(t.islivestreaming&&t.fluentContentToken)(function(){var H=Date.now();c("LivePinnedCommentEventCreateSubscription").subscribe(t.fluentContentToken,function(u){c("UFISubscriptionUpdates").handleLivePinnedComment(t,u,Date.now()-H)})})();if(t.islivestreaming||t.isLivingRoom)c("requireWeak")("UFILiveStreamingComments",function(H){var I=null;if(u.comments&&u.comments.length>0)I=u.comments[u.comments.length-1].fbid;H.start(t.ftentidentifier,B.commentcount,I,t.showLiveVideoAnnoucements,t.showLiveVideoBroadcastingJoinEvents,t.isViewerTheOwner,t.isLiveAudio,t.liveVideoAnnouncementRenderIntervalMilliSec,t);c("Run").onLeave(function(){return H.stop(t.ftentidentifier)})});if(t.mayAutoscrollToComments)this.scrollToTopOfCommentsInViewer();if(!t.lazyFetch&&!this.canRenderHeader())this.$UFIController22(B);if(this.$UFIController2.fluentContentToken)c("UFIVideoPlayerRegistry").registerUFIController(this,function(H){if(t.enableVODStreamingComments&&!this.$UFIController10.featuredCommentLists[t.ftentidentifier])c("UFIVODStreamingComments").start(this,H);c("UFICommercialBreakAdapter").start(t,H);c("UFIPlayLiveVODHighlightsAdapter").start(t,H);if(t.islivestreaming&&(this.$UFIController12||!j))this.$UFIController12.addSubscriptions(H.addListener("stateChange",function(){if(H.isState("playing"))this.render()}.bind(this)))}.bind(this),function(){if(t.enableVODStreamingComments)c("UFIVODStreamingComments").stop(this.$UFIController2.ftentidentifier,t.instanceid);c("UFICommercialBreakAdapter").stop(t.instanceid);c("UFIPlayLiveVODHighlightsAdapter").stop(t.instanceid)}.bind(this))}r.prototype.$UFIController20=function(s){__p&&__p();this.$UFIController1=new(c("SubscriptionsHandler"))();this.$UFIController1.addSubscriptions(c("onEnclosingPageletDestroy")(this.root,function(){this.$UFIController17()}.bind(this)),c("Arbiter").subscribe(c("UFIUIEvents").PageCleared,function(){this.$UFIController17()}.bind(this)),c("Arbiter").subscribe("ConversationNub/destroy",function(t,u){if(u.root&&c("DOMQuery").contains(u.root,this.root))this.$UFIController17()}.bind(this)),c("Arbiter").subscribe("WorkHub/destroy",function(t,u){if(u.root&&c("DOMQuery").contains(u.root,this.root))this.$UFIController17()}.bind(this)));if(s.viewas)this.$UFIController1.addSubscriptions(c("Arbiter").subscribe("pre_page_transition",function(t,u){if(s.viewas!==new(c("URI"))(u.to).getQueryData("viewas")){c("UFIToplevelPagedCommentList").resetCommentListsForFeedbackTargetID(s.ftentidentifier);c("UFIToplevelStreamedCommentList").resetAllCommentLists(s.ftentidentifier)}}))};r.prototype.$UFIController18=function(s,t){__p&&__p();this.$UFIController23();var u=Date.now(),v=[];if(s.ll||this.$UFIController2.source===c("FeedbackSourceType").TAHOE)v.push(c("UFILikeSubscription").subscribe(s.targetfbid,function(x){c("UFISubscriptionUpdates").handleLiveLike(t.ftentidentifier,x,Date.now()-u)}));if(s.pagelc)v.push(c("UFIPageCommentSubscription").subscribe(s.targetfbid,function(x){c("UFISubscriptionUpdates").handleLiveComment(t.ftentidentifier,x.page_comment_create_subscribe,Date.now()-u)}));if(s.lc)v.push(c("UFICommentSubscription").subscribe(s.targetfbid,function(x){c("UFISubscriptionUpdates").handleLiveComment(t.ftentidentifier,x.comment_create_subscribe,Date.now()-u)}));if(s.lcl)v.push(c("UFICommentLikeSubscription").subscribe(s.targetfbid,function(x){c("UFISubscriptionUpdates").handleLiveCommentLike(t.ftentidentifier,x,Date.now()-u)}));if(s.lti&&c("UFIConfig").typingIndicator.subscribe)v.push(c("UFITypingSubscriptionControllerFactory").forUFIController(s,t));var w=new(c("SubscriptionsHandler"))();w.addSubscriptions.apply(w,v.filter(function(x){return!!x}));this.$UFIController7=w};r.prototype.$UFIController24=function(){var s=c("UFIFeedbackStore").getState()[this.$UFIController2.ftentidentifier];if(s)this.$UFIController18(s,this.$UFIController2)};r.prototype.scrollToTopOfCommentsInViewer=function(){c("Arbiter").inform(c("UFIUIEvents").AutoplayLiveComments,{form:this.$UFIController4.getParentForm()})};r.prototype.$UFIController25=function(){__p&&__p();var s=c("DOMQuery").scry(this.root,"^._5pat");if(s&&s[0])c("ReactDOM").unmountComponentAtNode(s[0]);c("DOM").scry(this.root,"^form ._3csb").forEach(function(v){c("ReactDOM").unmountComponentAtNode(v)});var t=this.$UFIController4.getHeadRoot();if(t)c("ReactDOM").unmountComponentAtNode(t);if(c("UFIRootRegistry").isSnowliftNode(this.$UFIController2.rootid)){var u=this.$UFIController4.getSnowliftActionRoot();if(u)c("ReactDOM").unmountComponentAtNode(u)}if(this.reactRoot)this.reactRoot.unmount();c("ReactDOM").unmountComponentAtNode(this.root)};r.prototype.unitTestOnlySetFeedbackIntoState=function(s){this.$UFIController10.feedback=s};r.prototype.$UFIController15=function(){__p&&__p();if(!this.$UFIController12){this.$UFIController3=new(c("UFIDispatcher"))();this.$UFIController11={UFICallbackStore:new(c("UFICallbackStore"))(this.$UFIController3),UFIReactionStore:new(c("UFIReactionStore"))(this.$UFIController3)};this.$UFIController12=new(c("SubscriptionsHandler"))();this.$UFIController12.addSubscriptions(this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_LIKE,function(s){c("UFIUserActions").changeCommentLike(s.comment.id,s.like,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").CHANGE_REACTION,function(s){c("UFIUserActions").changeCommentReaction(s.comment.id,s.reactionType,{source:this.$UFIController2.source,instanceid:this.$UFIController2.instanceid},s.target)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").REMOVE,function(s){if(s.comment.candeletewithrule){c("Bootloader").loadModules(["UFICommentRemoveWithRule"],function(t){return t.show(s,this.$UFIController2)}.bind(this),"UFIController");return}else c("Bootloader").loadModules(["UFICommentRemoveDialog"],function(t){return t.show(function(u){c("UFIUserActions").removeComment(s.comment.id,{source:this.$UFIController2.source,oneclick:false,target:s.target},u);s.onConfirm()}.bind(this),s.comment.canblockcommenterafterdelete)}.bind(this),"UFIController")}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").REMOVE_AND_BLOCK,function(s){c("Bootloader").loadModules(["UFICommentRemoveDialog"],function(t){return t.show(function(){c("UFIUserActions").removeComment(s.comment.id,{source:this.$UFIController2.source,oneclick:false,target:s.target},true);s.onConfirm()}.bind(this),false,true)}.bind(this),"UFIController")}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").DELETE_COMMENT_AND_REMOVE_COMMENTER,function(s){c("Bootloader").loadModules(["UFICommentDeleteAndMemberRemoveDialog"],function(t){t.showEx(s.comment.author_name,s,{source:this.$UFIController2.source,oneclick:false,target:s.target})}.bind(this),"UFIController")}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").MUTE_MEMBER,function(s){if(!s.comment.ismuted)c("Bootloader").loadModules(["UFIMemberMuteDialog"],function(u){return u.show(function(v,w){c("UFIUserActions").muteMember(s.comment.id,{source:this.$UFIController2.source,oneclick:false,target:s.target},v,w)}.bind(this),s.comment.author_name)}.bind(this),"UFIController");else{var t;c("Bootloader").loadModules(["GroupsMemberMuteDurationDefaults"],function(u){t=u.UNMUTE},"UFIController");c("UFIUserActions").muteMember(s.comment.id,{source:this.$UFIController2.source,oneclick:false,target:s.target},t,null)}}.bind(this)),this.$UFIController11.UFICallbackStore.on("bulk_review",function(s){c("UFIUserActions").showBulkReview(s.comment.id,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_TEXT_DELIGHTS,function(s){c("UFIUserActions").toggleTextDelights(s.comment,{source:this.$UFIController2.source,target:s.target},!s.comment.text_delights_are_hidden)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TRANSLATE,function(s){if(!this.$UFIController10.commentsLoadingTranslations[s.comment.id]){this.$UFIController10.commentsLoadingTranslations[s.comment.id]=true;c("UFIUserActions").translateComments(s.comment.ftentidentifier,[s.comment.id],s.trigger,{source:this.$UFIController2.source,target:s.target});if(c("UFICommentUtils").shouldShowTranslateAll(this.comments[c("CommentSection").DEFAULT],this.repliesMap,babelHelpers["extends"]({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),this.$UFIController10.commentsLoadingTranslations))this.$UFIController10.translateAllCommentID=s.comment.id;this.render()}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_MARK_AS_SPAM,function(s){c("UFIUserActions").setHideAsSpam(s.comment.id,s.is_spam,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_KEEP_SPAM,function(s){c("UFIUserActions").keepSpam(s.comment.id,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_APPEAL_SPAM,function(s){c("UFIUserActions").appealSpam(s.comment.id,s.feedback.actorname,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_SECURE_ACCOUNT,function(s){c("Bootloader").loadModules(["UFICommentSecureAccountDialog"],function(t){return t.show(function(){c("UFIUserActions").secureAccount(s.comment.id,{source:this.$UFIController2.source,target:s.target})}.bind(this),s.feedback.actorname)}.bind(this),"UFIController")}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIStoryActionType").CHANGE_ACCEPTED_ANSWER,function(s){c("UFIUserActions").changeAcceptedAnswer(s.comment,s.doAccept)}),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_INLINE_BAN,function(s){return c("UFIUserActions").banUser(s.comment,s.ownerid,s.is_banned,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").TOGGLE_INLINE_STREAM_BAN,function(s){return c("UFIUserActions").streamBanUser(s.comment,s.ownerid,s.is_banned,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").EMBED,function(s){var t=c("XCommentEmbedPluginEmbedAsyncDialogController").getURIBuilder().setString("comment_id",s.comment.id).getURI();new(c("AsyncRequest"))(t).send()}),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").MANAGE_CONSTITUENT_BADGE,function(s){c("UFIUserActions").manageConstituentBadge(s.comment)}),this.$UFIController11.UFICallbackStore.on(c("UFIAddCommentActionType").SUBMIT_NEW,function(s){var t=this.$UFIController4.getParentForm();if(t)c("UFINewCommentNotifier").onNewComment(t,this.$UFIController2,s.comment,s.target,s.replyCommentID,s.timestamp)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIAddCommentActionType").PIVOT_SEND_MESSAGE,function(s){var t=this.$UFIController4.getParentForm();if(t)c("UFINewCommentNotifier").onNewCommentPivot(t,this.$UFIController2,s.comment,s.target,s.recipientID,s.timestamp)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIAddCommentActionType").SUBMIT_EDIT,function(s){var t=s.comment,u=s.commentData,v=s.target;if(!u.visibleValue&&!u.attachedPhoto&&!u.attachedVideo&&!u.attachedFile&&!u.attachedSticker&&!u.attachedShareURL)c("Bootloader").loadModules(["UFICommentRemoveDialog"],function(w){return w.show(function(){return c("UFIUserActions").removeComment(t.id,{source:this.$UFIController2.source,oneclick:false,target:v},false)}.bind(this),false)}.bind(this),"UFIController");else c("UFIUserActions").editComment(t.id,u.visibleValue,u.encodedValue,{source:this.$UFIController2.source,target:v,attachedPhoto:u.attachedPhoto,attachedVideo:u.attachedVideo,attachedFile:u.attachedFile,attachedSticker:u.attachedSticker,attachedShareURL:u.attachedShareURL,isMarkdown:u.isMarkdown})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFICommentActionType").REMOVE_PREVIEW,function(s){return c("UFIUserActions").removePreview(s.comment,{source:this.$UFIController2.source,target:s.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIAddCommentActionType").RETRY_SUBMIT,function(s){return c("UFIRetryActions").retrySubmit(s.comment,this.$UFIController2.source)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIStoryActionType").PAGE_IN_COMMENTS,function(s){this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").USER_ACTION;this.$UFIController26(s.commentID,s.direction,s.nextRange,s.section);this.fetchAndUpdateWithLogs(c("FeedbackPayloadSourceType").USER_ACTION,s.section||c("CommentSection").DEFAULT,s.direction,s.interactionRequestCorrelationID)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIStoryActionType").TOGGLE_REPLIES,function(s){__p&&__p();this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").USER_ACTION;var t=s.commentID,u=this.$UFIController10.repliesExpandedMap[t];if(u){delete this.$UFIController10.isActiveLoading[t];this.$UFIController10.repliesExpandedMap[t]=false;this.render()}else{this.$UFIController10.focusedReplyComposer={replyID:"replycomposer-"+t,initiatorComment:null};this.$UFIController26(t,c("UFIPaging").BOTTOM,this.$UFIController27(t));this.fetchAndUpdateWithLogs(c("FeedbackPayloadSourceType").USER_ACTION,this.commentsToSection[t]||c("CommentSection").DEFAULT)}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIStoryActionType").SHOW_REPLIES,function(s){this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").USER_ACTION;this.$UFIController10.focusedReplyComposer={replyID:"replycomposer-"+s.commentID,initiatorComment:s.initiatorComment};this.$UFIController26(s.commentID,c("UFIPaging").BOTTOM,this.$UFIController27(s.commentID));this.fetchAndUpdateWithLogs(c("FeedbackPayloadSourceType").USER_ACTION,this.commentsToSection[s.commentID]||c("CommentSection").DEFAULT)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c("UFIStoryActionType").COMMENTS_ARRIVED,function(s){__p&&__p();this.$UFIController10.loadingCommentsForSection["delete"](s.section);this.$UFIController10.payloadSource=s.source;this.$UFIController10.showLoadingUFI=false;this.$UFIController10.isActiveLoading={};this.$UFIController10.commentIDToFocusOnMount=s.source===c("FeedbackPayloadSourceType").USER_ACTION&&!this.$UFIController2.isBroadcasterUFI&&!this.$UFIController2.isLivingRoom?this.$UFIController28(s.newOffset,s.newLength,s.section):null;this.$UFIController10.oldRange[s.section]={offset:s.newOffset,length:s.newLength};this.$UFIController29();if(this.$UFIController10.shouldTranslateAllVisibleComments&&!c("UFIOrderingModeStore").isLiveStreaming(this.$UFIController2.instanceid))this.$UFIController30();if(s.interactionRequestCorrelationID)this.$UFIController19.push(s.interactionRequestCorrelationID);this.render();if(s.source==c("FeedbackPayloadSourceType").ENDPOINT_COMMENT_FETCH){c("Arbiter").inform(c("UFIUIEvents").CommentPager);if(c("UFIConfig").logCommentLoad)c("UFICommentLogger").logCommentFetchReceived(this.$UFIController2.ftentidentifier,Date.now())}}.bind(this)))}};r.prototype.$UFIController16=function(){__p&&__p();this.$UFIController9=[c("UFISharedDispatcher").register(function(s){__p&&__p();switch(s.type){case c("UFIInstanceActionType").REMOVE:if(s.instanceID!==this.$UFIController2.instanceid){if(s.ftentidentifier===this.$UFIController2.ftentidentifier)this.$UFIController24();return}c("UFIRootRegistry").cleanupInstance(s.instanceID);break;case c("UFIInstanceActionType").TOGGLE_COMMENTS:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").COLLAPSE_ACTION;this.$UFIController10.isHidden=!this.$UFIController10.isHidden;this.render();break;case c("UFIInstanceActionType").CHANGE_ORDER_MODE:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").USER_ACTION;if(this.comments[c("CommentSection").FRIENDS])this.$UFIController10.loadingCommentsForSection.add(c("CommentSection").DEFAULT);else this.$UFIController10.showLoadingUFI=true;this.render();this.fetchAndUpdate(c("FeedbackPayloadSourceType").USER_ACTION,c("CommentSection").DEFAULT);break;case c("UFIInstanceActionType").REQUESTED_VOD_COMMENTS:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=true;this.render();break;case c("UFIInstanceActionType").RECEIVED_VOD_COMMENTS:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=false;this.render();break;case c("UFIStoryActionType").LIVE_PIN_COMMENT:if(s.ftentidentifier!==this.$UFIController2.ftentidentifier)return;var t=c("UFIComments").getComment(s.commentID),u=t?t.author:null;if(u)c("ShortProfiles").get(u,function(v){this.authorProfiles[u]=v;if(!this.$UFIController6)this.render()}.bind(this));break;case c("UFIStoryActionType").LIVE_UNPIN_COMMENT:if(s.ftentidentifier!==this.$UFIController2.ftentidentifier)return;this.render();break;case c("UFIStoryActionType").SHOW_COMMENTS:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.isHidden=false;this.$UFIController10.focusTopLevelComposer=true;c("CommentPrelude").expand(this.root,false,"ufi_controller");if(this.staticUFI)c("CommentPrelude").expand(this.staticUFI,false,"ufi.react");this.render();break;case c("UFIInstanceActionType").TRANSLATE_ALL:if(s.instanceID!==this.$UFIController2.instanceid)return;if(this.$UFIController2.islivestreaming)break;this.$UFIController10.shouldTranslateAllVisibleComments=true;this.$UFIController10.translateAllCommentID=null;this.$UFIController30();this.render();break;case c("UFIAddCommentActionType").CHANGE_CONTENT:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController13=s.text.length===0;break;case c("UFIAddCommentActionType").SUBMIT_NEW:if(s.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController13=true;break}}.bind(this))]};r.prototype.getStores=function(){return this.$UFIController11};r.prototype.$UFIController27=function(s){var t=this.commentCounts[s],u=Math.min(t,this.$UFIController2.pagesize);return new(c("UFIRange"))(t-u,u)};r.prototype.$UFIController26=function(s,t,u,v){__p&&__p();v=v||this.commentsToSection[s]||c("CommentSection").DEFAULT;var w=this.$UFIController10,x=w.isActiveLoading,y=w.allSeenActiveLoadDirectionData,z=w.repliesExpandedMap,A=w.toplevelPagerClickCounts,B=w.replyPagerClickCounts,C=this.$UFIController2.ftentidentifier,D=s!==C;x[s]=t;var E=y[s]||{};E[t]=true;y[s]=E;if(D)z[s]=true;else this.$UFIController10.hasPagedToplevel=true;if(s==C){var F=this.getOrderingMode(v);A[v]=A[v]||{};var G=A[v][F]||0;A[v][F]=G+1;this.getRange(v).updateRequestedRange(u.offset,u.length)}else{var H=B[s]||0;B[s]=H+1;this.replyRanges[s].updateRequestedRange(u.offset,u.length)}};r.prototype.$UFIController31=function(){__p&&__p();this.$UFIController10.payloadSource=c("FeedbackPayloadSourceType").USER_ACTION;this.$UFIController10.showLoadingUFI=true;this.$UFIController10.requestedInitialComments=true;this.$UFIController10.loadingCommentsForSection.add(c("CommentSection").DEFAULT);this.comments[c("CommentSection").FRIENDS]&&this.$UFIController10.loadingCommentsForSection.add(c("CommentSection").FRIENDS);this.$UFIController10.loadingCommentsForSection.forEach(function(s){var t=this.getToplevelCommentList(s).getCommentCount(),u=Math.min(t,this.$UFIController2.numLazyComments||0);c("forEachObject")(this.ranges[s],function(v){v.updateRequestedRange(t-u,u)});this.fetchAndUpdate(c("FeedbackPayloadSourceType").USER_ACTION,s)}.bind(this));c("UFIFeedbackTargets").getFeedbackTarget(this.$UFIController2.ftentidentifier,function(s){if(this.canRenderHeader())this.renderHeader(s);else this.$UFIController22(s)}.bind(this))};r.prototype.$UFIController22=function(s){if(this.shouldShowCommentOrderingModeSelector(s))c("DOM").scry(this.root,"^form ._3csb").slice(0,1).forEach(function(t){c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("UFIOrderingModeSelectorContainer.react").__setRef("UFIController"),contextArgs:this.$UFIController2,feedback:s})),t)}.bind(this))};r.prototype.$UFIController29=function(){__p&&__p();if(Object.keys(this.$UFIController10.commentsLoadingTranslations).length==0)return;this.comments[c("CommentSection").DEFAULT].concat(this.comments[c("CommentSection").FRIENDS]||[]).forEach(function(s){if(this.$UFIController10.commentsLoadingTranslations[s.id]&&!!s.translationdata)delete this.$UFIController10.commentsLoadingTranslations[s.id]}.bind(this));Object.keys(this.repliesMap).forEach(function(s){var t=this.repliesMap[s];t.forEach(function(u){if(this.$UFIController10.commentsLoadingTranslations[u.id]&&!!u.translationdata)delete this.$UFIController10.commentsLoadingTranslations[u.id]}.bind(this))}.bind(this))};r.prototype.$UFIController30=function(){__p&&__p();var s=this.comments[c("CommentSection").DEFAULT].concat(this.comments[c("CommentSection").FRIENDS]||[]).filter(function(v){return this.$UFIController32(v)}.bind(this)).map(function(v){return v.id}),t=babelHelpers["extends"]({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),u=[];Object.keys(this.repliesMap).filter(function(v){return t[v]}).forEach(function(v){u=u.concat(this.repliesMap[v])}.bind(this));s=s.concat(u.filter(function(v){return this.$UFIController32(v)}.bind(this)).map(function(v){return v.id}));if(s.length>0){s.forEach(function(v){return this.$UFIController10.commentsLoadingTranslations[v]=true}.bind(this));c("UFIUserActions").translateComments(this.$UFIController2.ftentidentifier,s,c("TranslationTrigger").TRANSLATE_ALL,{source:this.$UFIController2.source})}};r.prototype.$UFIController32=function(s){return s.istranslatable&&!s.translationdata&&!this.$UFIController10.commentsLoadingTranslations[s.id]};r.prototype.canRenderHeader=function(){return!!this.$UFIController4.getHeadRoot()};r.prototype.renderHeader=function(s){if(!this.canRenderHeader())return;c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,c("React").createElement(c("UFIActionHeader.react"),{contextArgs:this.$UFIController2,dispatcher:this.$UFIController3,feedbacktarget:s,stores:this.$UFIController11})),this.$UFIController4.getHeadRoot());var t=c("UFIRootRegistry").isSnowliftNode(this.$UFIController2.rootid);if(t&&this.$UFIController4.getSnowliftActionRoot())c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,c("React").createElement(c("UFIDispatcherContext.react"),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c("React").createElement(c("UFIActionLinks.react"),{contextArgs:this.$UFIController2,feedbacktarget:s,hideActorSelector:true,hideBling:true}))),this.$UFIController4.getSnowliftActionRoot())};r.prototype.shouldComponentUpdate=function(){if(this.$UFIController2.islivestreaming&&(this.$UFIController10.payloadSource===c("FeedbackPayloadSourceType").STREAMING||this.$UFIController10.payloadSource===c("FeedbackPayloadSourceType").LIVE_SEND)){var s=c("UFIVideoPlayerRegistry").getAvailableVideoPlayerController(this.$UFIController2.instanceid),t=s?s.isState("playing")&&!s.getOption("WatchAndScroll","isActive"):false,u=c("UFICommentVisibilityStore").getVisibility(c("UFICommentVisibilityStore").getState(),this.$UFIController2)===c("UFIVisibility").VISIBLE;return t||u}return true};r.prototype.render=function(){__p&&__p();var s,t=this;if(!this.shouldComponentUpdate())return;if(this.$UFIController10.showLoadingUFI||c("UFIOrderingModeStore").isLiveStreaming(this.$UFIController2.instanceid)&&this.$UFIController10.loadingVODComments){c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,this.$UFIController33()),this.root);return}this.$UFIController10.feedback||i(0);var u=this.$UFIController10.feedback,v=u.reactionsentences,w=u.likesentences,x=u.replysocialsentencemaxreplies,y=this.comments[c("CommentSection").DEFAULT].length||this.comments[c("CommentSection").FRIENDS]&&this.comments[c("CommentSection").FRIENDS].length||!c("isEmpty")((v||w).current),z=this.$UFIController10.payloadSource;if(y&&m(z)&&this.$UFIController2.feedbackMode!==c("UFIFeedbackMode").NEVER){this.$UFIController10.isHidden=false;c("CommentPrelude").expand(this.root,false,"ufi_controller")}if(this.$UFIController2.disableCSSHiding&&this.$UFIController10.isHidden){c("ReactDOM").unmountComponentAtNode(this.root);return}if(this.$UFIController2.lazyFetch&&!this.$UFIController10.requestedInitialComments){c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,this.$UFIController33()),this.root);this.$UFIController31();return}var A=this.getRange(c("CommentSection").DEFAULT);if(this.$UFIController8===null)this.$UFIController8=A.getOffset()+A.getLength()-1;var B=x||-1,C={};C[this.$UFIController2.ftentidentifier]=new(c("UFIRange"))(A.offset,A.length).updateRequestedRange(A.requestedOffset,A.requestedLength);for(var D in this.replyRanges)C[D]=new(c("UFIRange"))(this.replyRanges[D].offset,this.replyRanges[D].length).updateRequestedRange(this.replyRanges[D].requestedOffset,this.replyRanges[D].requestedLength);var E=babelHelpers["extends"]({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),F=!!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier],G=c("UFIOrderingModeStore").isLiveStreaming(this.$UFIController2.instanceid)?true:this.getToplevelCommentList(c("CommentSection").DEFAULT).getClientHasAll()&&A.offset===0&&A.length===this.getToplevelCommentList(c("CommentSection").DEFAULT).getCommentCount(),H=this.$UFIController10.focusTopLevelComposer,I=this.$UFIController34(z),J=this.getOrderingMode(c("CommentSection").DEFAULT),K=this.comments[c("CommentSection").DEFAULT],L=this.comments[c("CommentSection").FRIENDS],M=(this.ranges[c("CommentSection").FRIENDS]||{})[c("WebCommentViewOption").TOPLEVEL],N=c("React").createElement(c("UFIDispatcherContext.react"),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c("React").createElement(c("StaticUFI.react"),{ref:function(P){this.staticUFI=P}.bind(this),feedback:this.$UFIController10.feedback,contextArgs:this.$UFIController2,repliesMap:this.repliesMap,commentCounts:this.commentCounts,deletedCounts:this.$UFIController10.deletedCounts[c("CommentSection").DEFAULT],privateDeletedCounts:this.$UFIController10.deletedCounts[c("CommentSection").FRIENDS],availableComments:K,availablePrivateComments:L,source:this.$UFIController2.source,payloadSource:z,ranges:C,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController8,replySocialSentenceMaxReplies:B,orderingMode:J,hideOrderingModeSelector:F,commentPermalinks:this.$UFIController10.commentPermalinks,canAddCommentMap:this.$UFIController10.canAddCommentMap,canReplyMap:this.$UFIController10.canReplyMap,focusTopLevelComposer:H,focusReply:I,isActiveLoading:this.$UFIController10.isActiveLoading,allSeenActiveLoadDirectionData:this.$UFIController10.allSeenActiveLoadDirectionData,repliesExpandedMap:E,hasPagedToplevel:this.$UFIController10.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController10.commentIDToFocusOnMount,hideToplevelPager:G,featuredCommentIDs:this.$UFIController10.featuredCommentIDs,loadingTranslationsMap:this.$UFIController10.commentsLoadingTranslations,translateAllCommentID:this.$UFIController10.translateAllCommentID,privateCommentsCount:this.privateCommentsCount,privateCommentsRange:M,loadingCommentsForSection:this.$UFIController10.loadingCommentsForSection}));if(this.$UFIController2.enableAsyncFacecastUFI)(function(){var P=t.reactRoot?t.reactRoot:t.reactRoot=c("ReactDOM").unstable_createRoot(t.root);if(z===c("FeedbackPayloadSourceType").INITIAL_SERVER)c("ReactDOM").flushSync(function(){P.render(N,this.componentDidRender)}.bind(t));else P.render(N,t.componentDidRender)})();else c("ReactDOM").render(c("React").createElement(c("UFIAsyncWrapper"),null,N),this.root,this.componentDidRender);c("LiveTimer").updateTimeStamps();var O=this.$UFIController4.getParentForm();if(O)c("Arbiter").inform(c("UFIUIEvents").Changed,{form:O});if(z!=c("FeedbackPayloadSourceType").INITIAL_SERVER)c("Arbiter").inform("reflow");this.$UFIController10.focusedReplyComposer=null;this.$UFIController10.focusTopLevelComposer=false};r.prototype.$UFIController35=function(s){return this.commentsToSection[s]||c("CommentSection").DEFAULT};r.prototype.$UFIController34=function(s){if(s===c("FeedbackPayloadSourceType").INITIAL_SERVER&&this.$UFIController10.feedback&&this.$UFIController10.feedback.permalinkcommentid)return{replyID:"replycomposer-"+this.$UFIController10.feedback.permalinkcommentid};else if(this.$UFIController10.focusedReplyComposer)return this.$UFIController10.focusedReplyComposer;return null};r.prototype.$UFIController28=function(s,t,u){var v=(this.$UFIController10.oldRange||{})[c("CommentSection").DEFAULT];if(v&&(v.offset!=s||v.length!=t)){var w=s<v.offset?v.length:0;if(w<t)return this.comments[u][w].id}return this.$UFIController10.commentIDToFocusOnMount};r.prototype.$UFIController36=function(s,t,u){__p&&__p();if(s&&t.id===s.permalinkcommentid)return true;if(u>1)return true;if(u>0&&t.interestingReplyOffset===undefined)return true;var v=s&&t.author===s.viewerid;if(v&&u==1)return true;return false};r.prototype.getNewRange=function(s,t,u,v){if(c("UFIOrderingModeStore").isLiveStreaming(this.$UFIController2.instanceid))return new(c("UFIRange"))(0,t.feedcarded?4:50);else{var w=v===c("CommentSection").FRIENDS?this.privateCommentsCount:this.commentCounts[t.ftentidentifier];return l(this.getRange(v),w,u,s)}};r.prototype.getNewReplyRange=function(s,t,u){var v=t.id;if(this.replyRanges[v])return l(this.getReplyRange(v),this.commentCounts[v],u,s);else if(t.interestingReplyOffset!==undefined)return new(c("UFIRange"))(t.interestingReplyOffset,1);else{var w=this.$UFIController10.feedback&&this.$UFIController10.feedback.isranked,x=w?0:Math.min(u,2);return new(c("UFIRange"))(0,x)}};r.prototype.fetchAndUpdateWithLogs=function(s,t,u,v){s===this.$UFIController10.payloadSource||i(0);this.$UFIController37(s,true,t,u,v)};r.prototype.fetchAndUpdate=function(s,t,u,v){s===this.$UFIController10.payloadSource||i(0);this.$UFIController37(s,false,t,u,v)};r.prototype.$UFIController38=function(s,t,u,v){var w=this.getOrderingMode(t),x=(this.$UFIController10.toplevelPagerClickCounts[t]||{})[w]||0;return{numPagerClicks:s?x:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext,feedbackSource:this.$UFIController2.source,streamingOrderReversed:this.$UFIController2.streamingCommentOrderReversed,direction:u,interactionRequestCorrelationID:v}};r.prototype.$UFIController39=function(s,t){return{numPagerClicks:t?this.$UFIController10.replyPagerClickCounts[s]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext}};r.prototype.$UFIController40=function(s,t){__p&&__p();var u=this.$UFIController10.feedback,v=this.getToplevelCommentList(t),w=this.getNewRange(s,this.$UFIController2,v.getCommentCount(),t),x=c("UFIFetcher").fetchCommentsOrThrow(v,w,this.$UFIController38(false,t));this.$UFIController41(w,x,t);var y=c("UFICommentFilters").getAuthors(x);x.forEach(function(B){var C=B.id,D=this.getReplyCommentList(C),w=this.getNewReplyRange(s,B,D.getCommentCount()),E=c("UFIFetcher").fetchCommentsOrThrow(D,w,this.$UFIController39(C,false));y.push.apply(y,c("UFICommentFilters").getAuthors(E));this.$UFIController42(w,B,E)}.bind(this));if(u)y.push.apply(y,c("UFIFeedbackFilters").getRequestedIDs(u));var z=c("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(z)y.push(z);if(u&&u.acceptedanswer){var A=c("UFIComments").getComment(u.acceptedanswer);if(A&&A.author)y.push(A.author)}Object.assign(this.authorProfiles,c("ShortProfiles").getMultiNow(y))};r.prototype.$UFIController37=function(s,t,u,v,w){__p&&__p();var x=c("UFIFeedbackTargets").getFeedbackTargetIfExists(this.$UFIController2.ftentidentifier);if(!x){var y=new Error(c("ex")("Feedback target %s not present while rendering UFI with source %s",this.$UFIController2.ftentidentifier,s));y.type="warn";c("ErrorUtils").reportError(y,true);return}this.$UFIController10.feedback=x;if(m(s))this.render();if(this.canRenderHeader())this.renderHeader(x);if(!this.$UFIController10.isHidden)if(s===c("FeedbackPayloadSourceType").INITIAL_SERVER){this.$UFIController40(s,u);this.$UFIController3.dispatch(c("UFIStoryAction").commentsArrived(this.$UFIController2,this.getRange(u).getOffset(),this.comments[u].length,s,u,w))}else this.fetchAllComments(s,t,u,v,w).done(function(){return this.$UFIController3.dispatch(c("UFIStoryAction").commentsArrived(this.$UFIController2,this.getRange(u).getOffset(),this.comments[u].length,s,u,w))}.bind(this))};r.prototype.fetchAllComments=function(s,t,u,v,w){__p&&__p();return c("Promise").resolve().then(function(){return this.fetchCommentsForFeedbackTarget(s,t,u,v,w).then(function(x){var y=c("UFICommentFilters").getAuthors(x);if(!this.$UFIController10.feedback||!this.$UFIController10.feedback.isthreaded||!x.length)return y;return this.fetchAllReplyIDsForComments(x,s,t).then(function(z){return y.concat(z)})}.bind(this)).then(function(x){if(!this.$UFIController10.feedback)return[];return c("UFIFeedbackFilters").getRequestedIDs(this.$UFIController10.feedback).concat(x)}.bind(this))}.bind(this)).then(function(x){var y=this.$UFIController10.feedback,z=c("UFILivePinnedCommentStore").getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(z)x.push(z);if(y&&y.acceptedanswer){var A=c("UFIComments").getComment(y.acceptedanswer);if(A&&A.author)x.push(A.author)}return c("UFIFetcher").fetchShortProfiles(x)}.bind(this)).then(function(x){return Object.assign(this.authorProfiles,x)}.bind(this))};r.prototype.fetchCommentsForFeedbackTarget=function(s,t,u,v,w){var x=this.getToplevelCommentList(u).getCommentCount(),y=this.getNewRange(s,this.$UFIController2,x,u);return c("UFIFetcher").fetchComments(this.getToplevelCommentList(u),y,this.$UFIController38(t,u,v,w)).then(function(z){this.$UFIController41(y,z,u);return z}.bind(this))};r.prototype.$UFIController41=function(s,t,u){__p&&__p();var v=this.getToplevelCommentList(u),w=this.$UFIController2.ftentidentifier,x=this.$UFIController10,y=x.deletedCounts,z=x.canAddCommentMap,A=x.canReplyMap,B=x.commentPermalinks;this.replaceRange(s,u);this.comments[u]=t;if(u===c("CommentSection").DEFAULT)this.commentCounts[w]=v.getCommentCount();else this.privateCommentsCount=v.getCommentCount();t.forEach(function(C){var D=C.id,E=C.cancomment;A[D]=E;B[D]=v.getPermalinkForComment(D);this.commentsToSection[D]=u}.bind(this));if(!y[u])y[u]={};y[u][w]=v.getDeletedCount();z[w]=!this.$UFIController10.featuredCommentLists[w]};r.prototype.fetchRepliesForComment=function(s,t,u){var v=s.id,w=this.getReplyCommentList(v).getCommentCount(),x=this.getNewReplyRange(t,s,w);return c("UFIFetcher").fetchComments(this.getReplyCommentList(v),x,this.$UFIController39(v,u)).then(function(y){this.$UFIController42(x,s,y);return y}.bind(this))};r.prototype.$UFIController42=function(s,t,u){__p&&__p();var v=t.id,w=this.getReplyCommentList(v),x=this.$UFIController10,y=x.deletedCounts,z=x.canAddCommentMap,A=x.featuredCommentLists,B=x.defaultRepliesExpandedMap,C=x.feedback,D=x.canReplyMap,E=x.commentPermalinks;this.replaceReplyRange(v,s);this.repliesMap[v]=u;this.commentCounts[v]=w.getCommentCount();y[c("CommentSection").DEFAULT][v]=w.getDeletedCount();z[v]=!A[v];B[v]=this.$UFIController36(C,t,u.length);u.forEach(function(F){var G=F.id,H=F.cancomment;D[G]=H;E[G]=w.getPermalinkForComment(G)})};r.prototype.fetchAllReplyIDsForComments=function(s,t,u){var v=new(c("Promise").all)(s.map(function(w){return this.fetchRepliesForComment(w,t,u).then(function(x){return c("UFICommentFilters").getAuthors(x)})}.bind(this)));return v.then(c("flattenArray"))};r.prototype.getToplevelCommentList=function(s){var t=this.$UFIController2;if(this.$UFIController10.featuredCommentLists[t.ftentidentifier])return this.$UFIController10.featuredCommentLists[t.ftentidentifier];if(c("UFIOrderingModeStore").isLiveStreaming(this.$UFIController2.instanceid))return c("UFIToplevelStreamedCommentList").getCommentList(t.ftentidentifier,t.islivestreaming?c("UFIToplevelStreamedCommentList").GLOBAL_ID:t.instanceid);var u=this.getOrderingMode(s);return c("UFIToplevelPagedCommentList").getCommentList(t.ftentidentifier,u,s)};r.prototype.getReplyCommentList=function(s){if(s in this.$UFIController10.featuredCommentLists)return this.$UFIController10.featuredCommentLists[s];var t=this.commentsToSection[s]||c("CommentSection").DEFAULT,u=this.getOrderingMode(t);return c("UFIReplyCommentList").getCommentList(this.$UFIController2.ftentidentifier,s,u)};r.prototype.getRange=function(s){var t=this.getOrderingMode(s);this.ranges[s]=this.ranges[s]||{};if(!(t in this.ranges[s])){var u=this.getToplevelCommentList(s).getCommentCount(),v=Math.min(u,this.$UFIController2.defaultNumCommentsToExpand);this.ranges[s][t]=new(c("UFIRange"))(u-v,v)}return this.ranges[s][t]};r.prototype.replaceRange=function(s,t){var u=this.getOrderingMode(t);this.ranges[t]=this.ranges[t]||{};this.ranges[t][u]=s};r.prototype.getReplyRange=function(s){if(!(s in this.replyRanges))this.replyRanges[s]=new(c("UFIRange"))();return this.replyRanges[s]};r.prototype.replaceReplyRange=function(s,t){this.replyRanges[s]=t};r.prototype.$UFIController17=function(){this.$UFIController6=true;this.$UFIController25();this.$UFIController43()};r.prototype.$UFIController43=function(){__p&&__p();this.$UFIController44();this.$UFIController45();this.$UFIController23();this.$UFIController46();this.$UFIController47();this.$UFIController48();this.$UFIController49();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").remove(this.$UFIController2))};r.prototype.$UFIController21=function(){this.$UFIController23()};r.prototype.$UFIController49=function(){var s=this.$UFIController2;c("UFIPlayLiveVODHighlightsAdapter").stop(s.instanceid)};r.prototype.$UFIController48=function(){var s=this.$UFIController2;c("UFICommercialBreakAdapter").stop(s.instanceid)};r.prototype.$UFIController47=function(){var s=this.$UFIController2;c("UFIVODStreamingComments").stop(s.ftentidentifier,s.instanceid)};r.prototype.$UFIController44=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(s){return s&&c("UFICentralUpdates").unsubscribe(s)})};r.prototype.$UFIController45=function(){this.$UFIController1&&this.$UFIController1.release()};r.prototype.$UFIController23=function(){this.$UFIController7&&this.$UFIController7.release()};r.prototype.$UFIController46=function(){if(this.$UFIController12){this.$UFIController12.release();this.$UFIController12=null}this.$UFIController9.forEach(function(s){return c("UFISharedDispatcher").unregister(s)})};r.prototype.$UFIController33=function(){var s=this.$UFIController2;return c("React").createElement(c("UFIDispatcherContext.react"),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c("React").createElement(c("StaticUFI.react"),{feedback:this.$UFIController10.feedback,id:this.$UFIController2.ftentidentifier,contextArgs:s,commentCounts:this.commentCounts,loadingComments:true}))};r.prototype.shouldShowCommentOrderingModeSelector=function(s){var t=this.getToplevelCommentList(c("CommentSection").DEFAULT).getCommentCount()||s.commentcount||0;return s.orderingmodes&&t>=c("UFIConstants").minCommentsForOrderingModeSelector&&!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier]};f.exports=r}),18);
__d("UFIMentionsInputProxy.react",["cx","Promise","JSResource","JSResourceReference","React","UFICommonInteractionEvents","UFICommonInteractionLogger","emptyFunction","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").createClass({displayName:"UFIMentionsInputProxy",_cmdBuffer:[],_interactionTrackingID:null,getInitialState:function j(){return{component:null,viewComponent:null}},componentDidMount:function j(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload()},componentDidUpdate:function j(k,l){if(this._interactionTrackingID&&this.state.component&&!l.component){c("UFICommonInteractionLogger").endInteraction(this._interactionTrackingID);this._interactionTrackingID=null}if(this.state.component)this._drainFnBuffer()},hasEnteredText:function j(){return this._fillCmdBuffer({fn:"hasEnteredText",args:[]})},getText:function j(){return this._fillCmdBuffer({fn:"getText",args:[]})},focus:function j(){this._bootload();this._fillCmdBuffer({fn:"focus",args:[]});if(!this.state.component)this._interactionTrackingID=c("UFICommonInteractionLogger").startInteraction(c("UFICommonInteractionEvents").UFI_COMPOSER_INPUT_FOCUS)},submitComment:function j(event,k){this._fillCmdBuffer({fn:"submitComment",args:[event,k]})},insertMention:function j(k){this._fillCmdBuffer({fn:"insertMention",args:[k]})},insertEmoticon:function j(k){this._fillCmdBuffer({fn:"insertEmoticon",args:[k]})},insertEmoji:function j(k){this._fillCmdBuffer({fn:"insertEmoji",args:[k]})},_bootload:function j(){c("Promise").all([c("JSResource")("UFIMentionsInput.react").__setRef("UFIMentionsInputProxy.react").load(),new(c("Promise"))(function(k){if(this.props.viewComponent instanceof c("JSResourceReference"))this.props.viewComponent.load().done(k);else k(this.props.viewComponent)}.bind(this))]).done(function(k){var l=k[0],m=k[1];if(this.isMounted())this.setState({component:l,viewComponent:m})}.bind(this))},_shouldDrainBuffer:function j(){return this._cmdBuffer.length>0},_fillCmdBuffer:function j(k){if(this.refs.mentionsinputchild)return this._execCmd(k);else this._cmdBuffer=this._cmdBuffer.concat([k])},_drainFnBuffer:function j(){if(this._shouldDrainBuffer()){var k=this._cmdBuffer[0];this._execCmd(k);this._cmdBuffer=this._cmdBuffer.slice(1);c("setImmediate")(this._drainFnBuffer)}},_execCmd:function j(k){var l=this.refs.mentionsinputchild;return l[k.fn].apply(l,k.args)},_renderProxyInput:function j(){var k="_1osa mentionsHidden";return c("React").createElement("input",{className:k,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus})},_renderDummy:function j(){var k="UFIAddCommentInput _1osb _1osc _2xww";return c("React").createElement("div",{onClick:this.focus,className:"_2xwx",onFocus:this.focus,onMouseOver:this._bootload,role:"presentation"},c("React").createElement("div",{className:k},this._renderProxyInput(),this.props.placeholder))},render:function j(){var k=this.state.component;if(!k)return this._renderDummy();return c("React").createElement(k,babelHelpers["extends"]({key:"mentionsinputchild",ref:"mentionsinputchild"},this.props,{viewComponent:this.state.viewComponent}),this.props.children)}});f.exports=i}),null);
__d("UFIShareNowMenuBootloader.react",["BootloadedComponent.react","JSResource","React","UFIShareLink.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j="ufi_share_link_placeholder",k="ufi_share_link_loaded";h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={openOnInit:false,focusOnInit:false,interacted:false},n}l.prototype.render=function(){var m=this.state,n=m.openOnInit,o=m.focusOnInit,p=m.interacted,q=this.props,r=q.endpoint,s=q.endpointData,t=q.onShow,u=q.onHide,v=q.openOnInitOverride,w=q.onMouseUp,x=c("React").createElement(c("UFIShareLink.react"),{href:"#","data-testid":j,onMouseUp:w,onClick:function(){return this.setState({interacted:true,openOnInit:true})}.bind(this),onFocus:function(){return this.setState({interacted:true,focusOnInit:true})}.bind(this),onMouseOver:function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true})}.bind(this)});if(p||v)return c("React").createElement(c("BootloadedComponent.react"),{bootloadLoader:c("JSResource")("UFIShareNowMenu.react").__setRef("UFIShareNowMenuBootloader.react"),bootloadPlaceholder:x,endpoint:r,endpointData:s,onShow:t,onHide:u,openOnInit:n||v,focusOnInit:o},c("React").createElement(c("UFIShareLink.react"),{onMouseUp:w,href:"#","data-testid":k}));return x};f.exports=l}),null);
__d("MultiBootstrapDataSource",["DataSource"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("DataSource"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints}j.prototype.bootstrapWithoutToken=function(){"use strict";for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true})};f.exports=j}),null);