webpackJsonp([0],{1236:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(547),E=a(1565),_=n(E),k=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,b.applicationModeCard)())}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,b.applicationModeReset)())}},{key:"render",value:function(){return y.default.createElement(_.default,{className:"CardView"},this.props.children)}}]),t}(y.default.Component);k.propTypes={children:m.default.object,dispatch:m.default.func.isRequired},t.default=(0,g.connect)()(k)},1244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={path:"/w/:broadcastId/card",getComponent:function(e,t){a.e(0).then(function(e){t(null,a(1700).default)}.bind(null,a)).catch(a.oe)}}},1352:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.Replay?{replay:(0,l.default)({},e.Replay)}:{}}function r(e){var t=i(e);return t.replay&&(t.replay.elapsed=0,t.replay.percentage=0),t}function s(e){return{dispatchSeekTo:function(t){var a=t.unix,n=t.ntp,i=t.seconds;e((0,d.chatSeek)(a,n)),e((0,u.replaySeekRequest)(i))},dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(5),l=n(o);t.replayFullMapper=i,t.replayMetadataMapper=r,t.replayDispatchMapper=s;var u=a(292),d=a(72)},1353:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};return e.Chat&&(t.chat=e.Chat,t.chatPending=e.Chat.pending,t.chatFailed=e.Chat.failed),t}function r(e){var t=i(e);return t.chat={chatSession:t.chat.chatSession,moderation:t.chat.moderation,paused:t.chat.paused,sessionError:t.chat.sessionError},t}Object.defineProperty(t,"__esModule",{value:!0}),t.chatSessionPropType=void 0,t.chatSessionMapper=r;var s=a(1),o=n(s);t.chatSessionPropType=o.default.shape({chatSession:o.default.object,moderation:o.default.object,paused:o.default.bool.isRequired,sessionError:o.default.bool.isRequired});t.default=i},1354:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(184),r=a(1394),s=n(r),o=a(1414),l=n(o),u=function(){return i.eventManager.publish(s.default.REGISTER_USER_INTERACTION)},d=function(e){var t=e.playAction;return i.eventManager.publish(s.default.PLAYBACK_REQUEST,{playAction:t})},c=function(){return i.eventManager.publish(s.default.PLAY_REQUEST)},p=function(){return i.eventManager.publish(s.default.PAUSE_REQUEST)},f=function(){return i.eventManager.publish(s.default.MUTE_REQUEST)},h=function(){return i.eventManager.publish(s.default.UNMUTE_REQUEST)},m=function(){return i.eventManager.publish(s.default.AD_SKIP_REQUEST)},v=function(e){var t=e.isAdPlaying;return i.eventManager.publish(l.default.ON_AD_STATE_UPDATE,{isAdPlaying:t})},y=function(e){var t=e.currentTime,a=e.played,n=e.duration,r=e.currentMonotonicTime;return i.eventManager.publish(l.default.ON_TIME_UPDATE,{currentTime:t,played:a,duration:n,currentMonotonicTime:r})},g=function(){return i.eventManager.publish(l.default.ON_ENDED)};t.default={registerUserInteraction:u,playbackRequest:d,playRequest:c,pauseRequest:p,muteRequest:f,unmuteRequest:h,adSkipRequest:m,onAdStateUpdate:v,onTimeUpdate:y,onEnded:g}},1356:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(2),E=a(526),_=n(E),k=a(1424),T=n(k),C=a(107),P=n(C),M=a(1354),S=n(M),w=a(131),R=a(527),I=n(R),A=a(20),O=n(A),N=a(17),L=a(9),D=new L.FileDebugger("MuteButton",!0,!0),U=y.default.createElement("div",{className:"MuteButtonLegacy-on"}),F=y.default.createElement("div",{className:"MuteButtonLegacy-off"}),H=1e4,V=function(){return{shouldPulse:!1}},B=function(){return{animateOutMutedAutoplay:!0}},x=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.shouldPulseTimeout=null,a.hasMutedAutoplay=e.muted&&O.default.hasMutedAutoplay(),a.state={volume:100,shouldPulse:!0,animateOutMutedAutoplay:!a.hasMutedAutoplay},a.handleEnter=function(){D.debug("handleEnter"),a.endPulse()},a.endPulse=function(){a.state.shouldPulse&&a.setState(V)},a.animateOutMutedAutoplay=function(){a.setState((0,N.compose)(V,B))},a.handleVolume=function(e){"0"===e?a.setMuted(!0):a.setMuted(!1),a.props.onVolumeChange(e),a.setState({volume:e})},a.toggleMute=function(e){e.preventDefault(),a.state.animateOutMutedAutoplay||a.animateOutMutedAutoplay();var t=a.props.muted;a.setMuted(!t)},a.setMuted=function(e){return e?S.default.muteRequest():S.default.unmuteRequest(),e?a.props.onClickOverride?a.props.onClickOverride(!0):a.props.dispatchAudioOff():a.props.onClickOverride?a.props.onClickOverride(!1):a.props.dispatchAudioOn()},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.shouldPulseTimeout=setTimeout(this.endPulse,H)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.shouldPulseTimeout)}},{key:"renderIcon",value:function(){var e=this.props,t=e.muted,a=e.onIcon,n=e.offIcon;return t?n:a}},{key:"renderMutedAutoplayPill",value:function(){var e=this.state.animateOutMutedAutoplay;return y.default.createElement(_.default,{disableHoverColor:!0,longOnHover:!0,text:!0,icon:!0,animate:e,pulse:this.state.shouldPulse},this.renderIcon(),this.renderVolumeSlider(),y.default.createElement(b.FormattedMessage,I.default.clickToUnmute))}},{key:"renderPill",value:function(){return y.default.createElement(_.default,{disableHoverColor:!0,longOnHover:!0,text:!0,icon:!0,animate:!0},this.renderIcon(),this.renderVolumeSlider())}},{key:"renderVolumeSlider",value:function(){return this.state.animateOutMutedAutoplay?y.default.createElement(T.default,{min:0,max:100,value:this.props.muted?0:this.state.volume,onChange:this.handleVolume}):null}},{key:"renderInsideTouchable",value:function(){return this.props.pill?this.hasMutedAutoplay?this.renderMutedAutoplayPill():this.renderPill():this.renderIcon()}},{key:"render",value:function(){var e=this.props,t=e.active,a=e.redesign,n=["MuteButton"];return t&&n.push("MuteButton--isActive"),a&&n.push("MuteButton--redesign"),y.default.createElement(P.default,{className:n.join(" "),onClick:this.toggleMute,onMouseEnter:this.handleEnter},this.renderInsideTouchable())}}]),t}(y.default.Component);x.defaultProps={muted:!1,active:!1,onIcon:U,offIcon:F},x.propTypes={pill:m.default.bool,redesign:m.default.bool,onIcon:m.default.node,offIcon:m.default.node,dispatchAudioOff:m.default.func,dispatchAudioOn:m.default.func,muted:m.default.bool,active:m.default.bool,onClickOverride:m.default.func,onVolumeChange:m.default.func},t.default=(0,g.connect)(function(){return{}},w.videoPlayerDispatchMapper)(x)},1357:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),s=a(27),o=a(18),l=a(30),u=a(1375);t.default={broadcast:s.broadcastPropType,commentInputState:u.commentInputShape,couchmode:r.default.bool,dispatch:r.default.func.isRequired,nextBroadcastCallback:r.default.func,player:r.default.object,profileIsVisible:r.default.bool,toggleProfileSidebar:r.default.func,user:o.userPropType,viewers:r.default.number,auth:l.authPropType,getTime:r.default.func,toggleChat:r.default.func,toggleSidebar:r.default.func,toggleFullscreen:r.default.func,onOverlayChange:r.default.func,onVolumeChange:r.default.func,hideUI:r.default.bool,hasNewMessages:r.default.bool,isChatVisible:r.default.bool,simple:r.default.bool,redesign:r.default.bool,timecodeShare:r.default.object,sharedEventListener:r.default.func.isRequired,sharedEventNode:r.default.func.isRequired,width:r.default.number,height:r.default.number,globalTooltip:r.default.object,periscopeEnvironment:r.default.object.isRequired}},1358:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,u.objectAssignWithAccessors)({},e,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerPropType=void 0,t.convertToDrawer=i;var r=a(1),s=n(r),o=a(580),l=n(o),u=a(11),d=s.default.shape({dismissable:s.default.bool}),c=(t.drawerPropType=s.default.shape({visible:s.default.bool,component:s.default.func,componentProps:s.default.object,options:d}),{get isSafari360AlertVisible(){return this.visible&&this.component===l.default}})},1359:function(e,t,a){"use strict";function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function i(e,t,a,i,r,l){if(!(isNaN(l)||l<1)){l|=0;for(var u=e.getContext("2d"),d=u.getImageData(t,a,i,r),c=d.data,p=void 0,f=void 0,h=void 0,m=void 0,v=void 0,y=void 0,g=void 0,b=void 0,E=void 0,_=void 0,k=void 0,T=void 0,C=void 0,P=void 0,M=void 0,S=void 0,w=void 0,R=l+l+1,I=i-1,A=r-1,O=l+1,N=O*(O+1)/2,L=new n,D=L,U=void 0,F=1;F<R;F++)D=D.next=new n,F===O&&(U=D);D.next=L;var H=null,V=null;m=h=0;for(var B=s[l],x=o[l],j=0;j<r;j++){k=T=C=v=y=g=0,b=O*(P=c[h]),E=O*(M=c[h+1]),_=O*(S=c[h+2]),v+=N*P,y+=N*M,g+=N*S,D=L;for(var q=0;q<O;q++)D.r=P,D.g=M,D.b=S,D=D.next;for(var W=1;W<O;W++)p=h+((I<W?I:W)<<2),v+=(D.r=P=c[p])*(w=O-W),y+=(D.g=M=c[p+1])*w,g+=(D.b=S=c[p+2])*w,k+=P,T+=M,C+=S,D=D.next;H=L,V=U;for(var Y=0;Y<i;Y++)c[h]=v*B>>x,c[h+1]=y*B>>x,c[h+2]=g*B>>x,v-=b,y-=E,g-=_,b-=H.r,E-=H.g,_-=H.b,p=m+((p=Y+l+1)<I?p:I)<<2,k+=H.r=c[p],T+=H.g=c[p+1],C+=H.b=c[p+2],v+=k,y+=T,g+=C,H=H.next,b+=P=V.r,E+=M=V.g,_+=S=V.b,k-=P,T-=M,C-=S,V=V.next,h+=4;m+=i}for(var z=0;z<i;z++){T=C=k=y=g=v=0,h=z<<2,b=O*(P=c[h]),E=O*(M=c[h+1]),_=O*(S=c[h+2]),v+=N*P,y+=N*M,g+=N*S,D=L;for(var G=0;G<O;G++)D.r=P,D.g=M,D.b=S,D=D.next;f=i;for(var K=1;K<=l;K++)h=f+z<<2,v+=(D.r=P=c[h])*(w=O-K),y+=(D.g=M=c[h+1])*w,g+=(D.b=S=c[h+2])*w,k+=P,T+=M,C+=S,D=D.next,K<A&&(f+=i);h=z,H=L,V=U;for(var J=0;J<r;J++)p=h<<2,c[p]=v*B>>x,c[p+1]=y*B>>x,c[p+2]=g*B>>x,v-=b,y-=E,g-=_,b-=H.r,E-=H.g,_-=H.b,p=z+((p=J+O)<A?p:A)*i<<2,v+=k+=H.r=c[p],y+=T+=H.g=c[p+1],g+=C+=H.b=c[p+2],H=H.next,b+=P=V.r,E+=M=V.g,_+=S=V.b,k-=P,T-=M,C-=S,V=V.next,h+=i}u.putImageData(d,t,a)}}function r(e,t,a,n,r){var s=e.naturalWidth,o=e.naturalHeight;t.width=n,t.height=r;var l=t.getContext("2d");l.clearRect(0,0,n,r);var u=1;u=s/n>o/r?o/r:s/n;var d=s/u,c=o/u;l.drawImage(e,Math.floor((d-n)/-2),Math.floor((c-r)/-2),Math.ceil(d),Math.ceil(c)),isNaN(a)||a<1||i(t,0,0,n,r,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.stackBlurCanvasRGB=i,t.stackBlurImage=r;var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},1360:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(184),E=a(287),_=a(284),k=a(1423),T=n(k),C=a(11),P={baseClass:"ViewerBadge-mode",liveClass:"live",replayClass:"replay"},M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={presence:null},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.presenceSub=b.eventManager.subscribe(_.CHAT_PRESENCE,function(t,a){var n=a.occupancy;n&&e.setState({presence:n})})}},{key:"componentWillUnmount",value:function(){this.presenceSub.remove()}},{key:"getViewers",value:function(){var e=this.props,t=e.isLive,a=e.ignoreChatOccupancyCount,n=e.viewers,i=this.state.presence;return a?n:t&&i||n}},{key:"hideViewerCount",value:function(){return 0===this.props.viewers}},{key:"renderCountText",value:function(){if(!this.hideViewerCount())return this.props.isLive?y.default.createElement(T.default,{useSmallIcon:this.props.isConjoined,count:this.getViewers()}):y.default.createElement(T.default,{includeIcon:!1,count:this.props.viewers})}},{key:"possiblyRender360Label",value:function(){if(this.props.is360)return y.default.createElement("span",{className:"ViewerBadge-360"},"360")}},{key:"renderMode",value:function(){var e=this,t=[P.baseClass],a=void 0;if(this.props.isLive){if(this.props.hideLiveBadge)return;a=E.live,t.push(P.liveClass)}else{if(!this.props.includeEndedLabel)return;a=E.ended,t.push(P.replayClass)}return y.default.createElement(g.FormattedMessage,a,function(a){return y.default.createElement("span",{className:t.join(" ")},a,e.possiblyRender360Label())})}},{key:"render",value:function(){var e=["ViewerBadge"];if(this.props.isHidden&&e.push("ViewerBadge--hidden"),this.props.isConjoined&&!this.hideViewerCount()&&e.push("ViewerBadge--conjoined"),this.props.isLive){var t=String((0,C.abbreviatedInteger)(this.getViewers())).length;e.push("ViewerBadge--"+t+"Digits")}return this.props.withFixedWidth&&e.push("ViewerBadge--withFixedWidth"),y.default.createElement("div",{className:e.join(" ")},this.renderMode(),y.default.createElement("div",{className:"ViewerBadge-count"},this.renderCountText()))}}]),t}(y.default.Component);M.propTypes={viewers:m.default.number,intl:m.default.object,isLive:m.default.bool,is360:m.default.bool,isHidden:m.default.bool,isConjoined:m.default.bool,includeEndedLabel:m.default.bool,hideLiveBadge:m.default.bool,withFixedWidth:m.default.bool,ignoreChatOccupancyCount:m.default.bool},M.defaultProps={isLive:!1,is360:!1,isHidden:!1,isConjoined:!1,includeEndedLabel:!1,hideLiveBadge:!1,ignoreChatOccupancyCount:!1,viewers:0},t.default=(0,g.injectIntl)(M)},1362:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentContainer=t.CommentContainerClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(2),E=a(49),_=a(23),k=a(41),T=a(1353),C=a(1385),P=n(C),M=a(27),S=a(513),w=a(1375),R=a(30),I=a(533),A=n(I),O=a(1476),N=n(O),L=a(1374),D=a(291),U=a(290),F=a(11),H=a(1366),V=a(17),B=t.CommentContainerClass="CommentContainer",x=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.input=null,a.state={isCoolDown:!1,isCommentError:!1},a.onMouseDown=a.onMouseDown.bind(a),a.commentError=a.commentError.bind(a),a.startCoolDown=a.startCoolDown.bind(a),a.handleFocus=function(){return a.input&&a.input.focusInput()},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.setFocusTimeout),clearTimeout(this.coolDownTimer),clearTimeout(this.commentErrorTimer)}},{key:"isAuthed",value:function(){return this.props.auth.isLoggedIn}},{key:"onMouseDown",value:function(e){var t=this;this.isAuthed()?!this.props.commentInputState.isFocused&&e.target.className.indexOf("CommentInput-input")<0&&(clearTimeout(this.setFocusTimeout),this.setFocusTimeout=setTimeout(function(){return t.props.dispatch((0,D.commentInputSetFocus)(!0))})):this.handleSignInCta()}},{key:"handleSignInCta",value:function(){this.props.dispatch((0,E.openSignInModal)({openedFrom:"COMMENT"})),this.props.dispatch((0,_.trackEvent)("SIGN_IN_COMMENT_CLICK"))}},{key:"isDisabled",value:function(){var e=this.props,t=e.chat,a=e.broadcast,n=e.video;return(0,H.isModeratedForBroadcast)(t.moderation,a)||this.isAuthed()&&n&&!n.canChat}},{key:"getChatStreamDisabled",value:function(){var e=this.props,t=e.video,a=e.chat;return t&&t.canChat?!!a.sessionError&&t.chatStreamDisabledMessage:t.chatStreamDisabledMessage}},{key:"getParticipantColorName",value:function(){return(0,F.getParticipantColorName)(this.props.chat.chatSession.participant_index)}},{key:"renderComment",value:function(){var e=["CommentContainer-comment"],t={};return this.isAuthed()&&(t.backgroundImage="url("+this.props.auth.user.avatarUrl+")",this.props.chat.chatSession&&this.props.chat.chatSession.participant_index&&e.push("CommentContainer-participant"+this.getParticipantColorName())),y.default.createElement("div",{className:e.join(" "),onMouseDown:this.onMouseDown},y.default.createElement("div",{className:"CommentContainer-avatarContainer"},y.default.createElement("div",{className:"CommentContainer-avatar",style:t}),this.state.isCoolDown&&y.default.createElement("div",{className:"CommentContainer-pieLoaderContainer"},y.default.createElement("div",{className:"CommentContainer-pieLoader"},y.default.createElement("span",null)))),this.renderCommentBody())}},{key:"renderCommentBody",value:function(){var e=this;if(this.isAuthed())return y.default.createElement("div",{className:"CommentContainer-body"},y.default.createElement(N.default,{ref:function(t){e.input=t},authUser:this.props.auth.user,broadcast:this.props.broadcast,chatStreamDisabled:this.getChatStreamDisabled(),commentError:this.commentError,dispatch:this.props.dispatch,intl:this.props.intl,isCoolDown:this.state.isCoolDown,isFocused:this.props.commentInputState.isFocused,moderation:this.props.chat.moderation,replyUsername:this.props.commentInputState.replyUsername,startCoolDown:this.startCoolDown,onChange:this.props.onChange,onUserChat:this.props.onUserChat}));var t=this.getChatStreamDisabled()?y.default.createElement(b.FormattedMessage,U.loginHeart):y.default.createElement(b.FormattedMessage,U.loginComment);return y.default.createElement("div",{className:"CommentContainer-body"},y.default.createElement("div",{className:"CommentContainer-text"},t))}},{key:"getDisabledCommentsReason",value:function(){return"Broadcast too full"}},{key:"startCoolDown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.setState({isCoolDown:!0}),clearTimeout(this.coolDownTimer),this.coolDownTimer=setTimeout(function(){e.setState({isCoolDown:!1})},t)}},{key:"commentError",value:function(){var e=this;this.setState({isCommentError:!0}),clearTimeout(this.commentErrorTimer),this.commentErrorTimer=setTimeout(function(){e.setState({isCommentError:!1})},500)}},{key:"render",value:function(){if(!this.props.video)return null;var e=[B];return this.props.commentInputState.isFocused&&e.push("CommentContainer--focused"),this.isAuthed()||e.push("CommentContainer--unauthed"),this.state.isCoolDown&&e.push("CommentContainer--isCoolDown"),this.state.isCommentError&&e.push("CommentContainer--isCommentError"),this.isDisabled()&&e.push("CommentContainer--isDisabled"),y.default.createElement("div",{className:e.join(" "),tabIndex:"0",onFocus:this.handleFocus},this.props.isLive?this.renderComment():null,this.props.children)}}]),t}(y.default.Component);x.defaultProps={commentInputState:{}},x.propTypes={commentInputState:w.commentInputShape,auth:R.authPropType,broadcast:M.broadcastPropType,chat:T.chatSessionPropType,dispatch:m.default.func.isRequired,intl:b.intlShape.isRequired,isLive:m.default.bool,video:S.videoPropType,children:m.default.oneOfType([m.default.element,m.default.arrayOf(m.default.element)]),onChange:m.default.func,onUserChat:m.default.func},t.CommentContainer=x,t.default=(0,g.connect)((0,V.compose)(P.default,L.commentInputStateToProps,k.authStateToProps,T.chatSessionMapper))((0,b.injectIntl)((0,A.default)(x)))},1363:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(145),r=n(i),s=a(535),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=a(106),T=n(k),C=a(74),P=n(C),M=a(538),S=n(M),w=a(1359),R=a(1395),I=a(548),A=a(9),O=n(A),N=["Blur"],L=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.unmounted=!0,a.updateImage=a.updateImage.bind(a),a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"shouldComponentUpdate",value:function(e){var t=this;return["img","blurRadius"].some(function(a){return t.props[a]!==e[a]})}},{key:"componentWillUnmount",value:function(){this.pendingUpdateImage&&this.pendingUpdateImage.cancel(),this.unmounted=!0}},{key:"updateImage",value:function(e){var t=this;this.pendingUpdateImage&&this.pendingUpdateImage.cancel(),this.pendingUpdateImage=P.default.runAfterInteractions(function(){if(!t.unmounted)try{var a=t.props,n=a.blurRadius,i=a.useImageResolution,r=(0,I.isImageData)(e),s=e.width,o=e.height,l=T.default.findDOMNode(t.refs.canvas);if(!i){var u=T.default.findDOMNode(t);u&&(s=u.offsetWidth||s,o=u.offsetHeight||o)}l.width=s,l.height=o,r?(0,R.microBlur)(e,l,n):(0,w.stackBlurImage)(e,l,n,s,o),t.props.onLoadFunction()}catch(e){O.default.warn("Blur","updateImage","error",e),t.props.onLoadFailFunction()}},"blur-update")}},{key:"render",value:function(){var e=this.props,t=e.img,a=e.className,n=e.canvasClass,i=e.children,s=e.canvasStyle,l=N.slice(0);return a&&l.push(a),_.default.createElement("div",{className:(0,o.default)(new r.default(l)).join(" ")},_.default.createElement(S.default,{src:t,onload:this.updateImage}),_.default.createElement("canvas",{className:n,style:s,ref:"canvas"}),i)}}]),t}(_.default.Component);L.defaultProps={blurRadius:0,onLoadFunction:function(){},onLoadFailFunction:function(){}},L.propTypes={children:b.default.node,img:I.isStringOrImageData,blurRadius:b.default.number,onLoadFunction:b.default.func,onLoadFailFunction:b.default.func,useImageResolution:b.default.bool,className:b.default.string,canvasStyle:b.default.object,canvasClass:b.default.string},t.default=L},1364:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,a=(0,l.default)(e,["children"]),n=(0,s.default)({},i.style,a.style);return delete a[n],p.default.createElement("div",(0,s.default)({},a,{style:n}),t)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(75),l=n(o),u=a(1),d=n(u),c=a(0),p=n(c);i.style={width:"inherit",height:"inherit"},i.propTypes={children:d.default.node},t.default=i},1365:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileMenuTooltipClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(2),E=a(33),_=a(1382),k=n(_),T=a(54),C=n(T),P=a(19),M=a(30),S=a(18),w=a(540),R=n(w),I=a(40),A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.logout=a.logout.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"logout",value:function(){(0,M.logout)(this.props.api)}},{key:"maybeRenderAccountStatsLink",value:function(){return y.default.createElement("li",null,y.default.createElement(E.Link,{className:"ProfileMenuTooltip-link",to:I.ACCOUNT_STATS_PATH},y.default.createElement(b.FormattedMessage,R.default.myStats),y.default.createElement(k.default,{style:{margin:"0 0 0 9px",verticalAlign:"text-bottom"}})))}},{key:"renderAccountSettingsLink",value:function(){return y.default.createElement("li",null,y.default.createElement(E.Link,{className:"ProfileMenuTooltip-link",to:I.ACCOUNT_SETTINGS_PATH},y.default.createElement(b.FormattedMessage,R.default.settings)))}},{key:"maybeRenderProducerLink",value:function(){var e=this.props.hello;return e.features&&e.features.external_encoders?y.default.createElement("li",null,y.default.createElement(E.Link,{className:"ProfileMenuTooltip-link",to:I.ACCOUNT_PRODUCER_PATH},y.default.createElement(b.FormattedMessage,R.default.producer))):null}},{key:"maybeRenderAccountDeveloper",value:function(){var e=this.props.hello;return e.features&&e.features.public_api_application_admin?y.default.createElement("li",null,y.default.createElement(E.Link,{className:"ProfileMenuTooltip-link",to:I.ACCOUNT_DEVELOPER_PATH},y.default.createElement(b.FormattedMessage,R.default.developer))):null}},{key:"maybeRenderSparkleLink",value:function(){return y.default.createElement("li",null,y.default.createElement("a",{className:"ProfileMenuTooltip-link",href:I.SPARKLE.PLUS_APPLY_PATH},y.default.createElement(b.FormattedMessage,R.default.superBroadcasters)))}},{key:"render",value:function(){var e=this.props.user;return y.default.createElement("div",{className:"ProfileMenuTooltip",onClick:this.props.dismiss},y.default.createElement("ul",null,y.default.createElement("li",null,y.default.createElement(E.Link,{className:"ProfileMenuTooltip-link",to:"/"+e.username},y.default.createElement(b.FormattedMessage,R.default.myProfile))),y.default.createElement("li",{className:"ProfileMenuTooltip-groupDelimiter"}),this.maybeRenderAccountStatsLink(),this.maybeRenderAccountDeveloper(),this.maybeRenderProducerLink(),this.maybeRenderSparkleLink(),y.default.createElement("li",{className:"ProfileMenuTooltip-groupDelimiter"}),this.renderAccountSettingsLink(),y.default.createElement("li",null,y.default.createElement("div",{className:"ProfileMenuTooltip-link",onClick:this.logout},y.default.createElement(b.FormattedMessage,R.default.logout)))))}}]),t}(y.default.Component);A.propTypes={dismiss:m.default.func.isRequired,user:S.userPropType,intl:b.intlShape.isRequired,api:P.wrappedApiShape.isRequired,dispatch:m.default.func.isRequired,hello:m.default.object};t.ProfileMenuTooltipClass=A;t.default=(0,g.connect)((0,C.default)(["hello"]))((0,P.injectApi)((0,b.injectIntl)(A)))},1366:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getModerationPrompt=t.isModeratedForBroadcast=void 0;var i=a(1413),r=n(i),s=a(557),o=n(s),l=a(559);t.isModeratedForBroadcast=function(e,t){return!!e&&(e.sentence_type!==r.default.COMMENTING_SUSPENDED&&e.sentence_type!==r.default.COMMENTING_DISABLED||t.id===e.broadcast_id)},t.getModerationPrompt=function(e,t){var a=t.formatMessage,n=void 0,i=e.report_type,s=e.message_body;if(i)switch(i){case o.default.ABUSE:n=a(l.reportTypeAbuse);break;case o.default.SPAM:n=a(l.reportTypeSpam);break;case o.default.OTHER:default:n=a(l.reportTypeOther)}if(i&&s)switch(s="*"+s+"*",e.sentence_type){case r.default.COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReportAndMessage,{messageBody:s,reportTypeString:n});case r.default.COMMENTING_DISABLED:return a(l.commentingDisabledWithReportAndMessage,{messageBody:s,reportTypeString:n});case r.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReportAndMessage,{messageBody:s,reportTypeString:n});case r.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReportAndMessage,{messageBody:s,reportTypeString:n});default:return""}else if(i)switch(e.sentence_type){case r.default.COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReport,{reportTypeString:n});case r.default.COMMENTING_DISABLED:return a(l.commentingDisabledWithReport,{reportTypeString:n});case r.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReport,{reportTypeString:n});case r.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReport,{reportTypeString:n});default:return""}else switch(e.sentence_type){case r.default.COMMENTING_SUSPENDED:return a(l.commentingSuspended);case r.default.COMMENTING_DISABLED:return a(l.commentingDisabled);case r.default.GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspended);case r.default.GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabled);default:return""}}},1368:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(17),E=a(1352),_=a(131),k=a(282),T=a(199),C=a(534),P=n(C),M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onSeekComplete=a.onSeekComplete.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"onSeekComplete",value:function(e){this.props.dispatchSeekTo(e),this.props.dispatchPlayVideo()}},{key:"render",value:function(){return y.default.createElement(P.default,{currentTimecode:this.props.currentTimecode,onSeekComplete:this.onSeekComplete,replay:this.props.replay,videoStartDate:this.props.videoStartDate,disableInteraction:this.props.disableInteraction})}}]),t}(y.default.Component);M.propTypes={dispatchSeekTo:m.default.func.isRequired,dispatchPlayVideo:m.default.func.isRequired,replay:k.replayPropType.isRequired,currentTimecode:m.default.number,videoStartDate:T.dateString.isRequired,disableInteraction:m.default.bool},t.default=(0,g.connect)((0,b.compose)(E.replayFullMapper),(0,b.compose)(E.replayDispatchMapper,_.videoPlayerDispatchMapper))(M)},1369:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(2),E=a(26),_=n(E),k=a(533),T=n(k),C=a(1379),P=n(C),M=a(1380),S=n(M),w=a(18),R=a(27),I=a(23),A=a(137),O=n(A),N=a(285),L=n(N),D=a(20),U=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trackClick=a.trackClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"getAppStoreLink",value:function(){var e=this.props.periscopeEnvironment;return e.ios()?O.default.APP_STORE:e.android()?O.default.PLAY_STORE:"/"}},{key:"trackClick",value:function(){var e=this.props,t=e.periscopeEnvironment,a=e.dispatch;return t.ios()?a((0,I.trackEvent)("GET_APP_CLICK")):t.android()?a((0,I.trackEvent)("GET_APP_ANDROID_CLICK")):void 0}},{key:"renderMobileHeader",value:function(){var e=this.props.periscopeEnvironment;if(e.ios()||e.android())return y.default.createElement("div",{className:"Header-container"},y.default.createElement("a",{href:this.getAppStoreLink(),onClick:this.trackClick,className:"Header-mobileLinkContainer"},y.default.createElement("div",{className:"Header-getAppPill"},y.default.createElement(b.FormattedMessage,L.default.get))),y.default.createElement(P.default,{withIcon:!0,onlyIcon:!0,isWhite:!0}))}},{key:"renderDesktopHeader",value:function(){var e=["Header-topRight","u-transition-1"];return y.default.createElement("div",{className:"Header-container"},y.default.createElement("div",{className:e.join(" ")},y.default.createElement(S.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,user:this.props.user,location:"Header",withoutBottomMargin:!0}),y.default.createElement(P.default,null)))}},{key:"renderLayoutHeader",value:function(e){return e?this.renderMobileHeader():this.renderDesktopHeader()}},{key:"render",value:function(){var e=["Header"],t=this.props.periscopeEnvironment.mobile();return t&&e.push("Header--isMobile"),y.default.createElement("header",{className:e.join(" ")},this.renderLayoutHeader(t))}}]),t}(y.default.Component);U.propTypes={dispatch:m.default.func.isRequired,periscopeEnvironment:m.default.object.isRequired,user:w.userPropType,broadcast:R.broadcastPropType},U.defaultProps={periscopeEnvironment:new D.UserAgentDetector},t.Header=U,t.default=(0,_.default)((0,T.default)((0,g.connect)()(U)))},1370:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedLinkClass=void 0;var i=a(5),r=n(i),s=a(16),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=a(14),T=a(1352),C=a(27),P=a(1376),M=a(282),S=a(18),w=a(23),R=a(1421),I=a(24),A=a(55),O=a(86),N=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.href=null,a.postMessage={outbound:{openLink:function(){}}},a.setProperties(e),a.handleClick=a.handleClick.bind(a),a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){"object"===("undefined"==typeof window?"undefined":(0,o.default)(window))&&(this.postMessage=(0,R.postMessage)(window.parent))}},{key:"componentWillReceiveProps",value:function(e){this.setProperties(e)}},{key:"setProperties",value:function(e){var t=e.disabled,a=e.broadcast,n=e.twitterEvent,i=e.user;t?this.href=null:n&&n.url?(this.title=n.title,this.href=n.url):a&&a.id?this.href=this.buildLinkWithParams(e,a.urlWithUsername):i&&i.username?this.href=i.url:this.href="#"}},{key:"buildLinkWithParams",value:function(e,t){var a=e.broadcast,n=e.replay;if(a.isRunning||!n)return t;var i=Math.round(n.elapsed),s=(0,r.default)({},(0,I.withAutoplay)(),(0,I.withTime)(i));return(0,O.withQuery)(t,s)}},{key:"handleClick",value:function(e){var t=this.props,a=t.user,n=t.broadcast,i=t.disabled;if(this.props.onClick(e),!i){var r=a&&a.username?"user":"missing",s=n&&n.id?"broadcast":r;this.props.dispatch((0,w.trackEvent)("VIEW_ON_PERISCOPE",{contentType:s})),this.postMessage.outbound.openLink(this.href)}}},{key:"render",value:function(){return _.default.createElement("a",(0,r.default)({className:"EmbedLink"},(0,A.getOverrideProps)(this.props,t.OverrideProps),{title:this.title,href:this.href,onClick:this.handleClick,target:"_blank"}),this.props.children)}}]),t}(_.default.Component);N.OverrideProps=["className"],N.defaultProps={disabled:!1,dispatch:function(){},onClick:function(){}},N.propTypes={className:b.default.string,broadcast:C.broadcastPropType,twitterEvent:P.twitterEventPropType,replay:M.replayPropType.isRequired,user:S.userPropType,disabled:b.default.bool,onClick:b.default.func,dispatch:b.default.func,children:b.default.node};t.EmbedLinkClass=N;t.default=(0,k.connect)(T.replayFullMapper)(N)},1372:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?28:t;return l.default.createElement("svg",{viewBox:"0 0 26 28",width:u*a,height:a},l.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M23.49 16.98L4.45 27.486A3 3 0 0 1 0 24.859V3.848a3 3 0 0 1 4.45-2.627l19.04 10.506a3 3 0 0 1 0 5.253z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=26/28;i.propTypes={size:s.default.number}},1373:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTENT_TYPE_BROADCAST="BROADCAST",t.CONTENT_TYPE_USER="USER",t.PLATFORM_TYPE_ANDROID="ANDROID",t.PLATFORM_TYPE_IOS="IOS",t.PLATFORM_TYPE_NATIVE="PERISCOPE"},1374:function(e,t,a){"use strict";function n(e){var t=e.CommentInput,a={};return a.commentInputState={},t&&(a.commentInputState.replyUsername=t.replyUsername,a.commentInputState.isFocused=t.isFocused),a}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputStateToProps=n},1375:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputShape=void 0;var i=a(1),r=n(i);t.commentInputShape=r.default.shape({isFocused:r.default.bool,replyUsername:r.default.string})},1376:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.twitterEventPropType=t.twitterEventShape=void 0;var i=a(1),r=n(i),s=t.twitterEventShape={title:r.default.string,url:r.default.string};t.twitterEventPropType=r.default.shape(s)},1377:function(e,t,a){"use strict";function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,r.abbreviatedInteger)(t);return a?0===t?e.formatMessage(i.countLabelNoViewers):1===t?e.formatMessage(i.countLabelOneViewer):e.formatMessage(i.countLabelPlural,{viewerCount:n}):n}Object.defineProperty(t,"__esModule",{value:!0}),t.getViewers=n;var i=a(563),r=a(11)},1379:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(17),E=a(83),_=a(104),k=n(_),T=a(1365),C=n(T),P=a(1389),M=n(P),S=a(514),w=a(41),R=a(515),I=a(30),A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.tooltipRef=null,a.toggleSignInModal=a.toggleSignInModal.bind(a),a.toggleDropdown=a.toggleDropdown.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"toggleSignInModal",value:function(e,t){e.preventDefault();var a=this.props,n=a.dispatchOpenSignInModal,i=a.dispatchHideModal,r=a.modal,s=a.auth;if(r.isSignInModalVisible)i();else{var o={openedFrom:"HEADER",banned:s.banned};t&&(o.initialState=t),n(o)}}},{key:"toggleDropdown",value:function(){var e=this.props,t=e.dispatch,a=e.auth;t((0,E.showTooltip)({component:C.default,target:this.tooltipRef,position:"bottom",componentProps:{user:a.user}}))}},{key:"renderProfilePic",value:function(){return y.default.createElement("button",{onClick:this.toggleDropdown,className:"AuthToggle-ToggleButton"},y.default.createElement(k.default,{user:this.props.auth.user,size:32,withoutBorder:!0}))}},{key:"render",value:function(){var e=this,t=["AuthToggle"];return this.props.auth.isLoggedIn&&t.push("AuthToggle--isLoggedIn"),this.props.onlyIcon&&t.push("AuthToggle--isOnlyIcon"),y.default.createElement("div",{ref:function(t){e.tooltipRef=t},className:t.join(" ")},this.props.auth.isLoggedIn?this.renderProfilePic(this.props.auth.user):y.default.createElement(M.default,{buttonClass:this.props.buttonClass,withIcon:this.props.withIcon,onlyIcon:this.props.onlyIcon,isWhite:!!this.props.isWhite,onClick:this.toggleSignInModal}))}}]),t}(v.Component);A.propTypes={buttonClass:m.default.string,auth:I.authPropType,dispatch:m.default.func.isRequired,dispatchOpenSignInModal:m.default.func.isRequired,dispatchHideModal:m.default.func.isRequired,modal:R.modalPropType.isRequired,withIcon:m.default.bool,onlyIcon:m.default.bool,isWhite:m.default.bool},t.default=(0,g.connect)((0,b.compose)(w.authStateToProps,S.modalStateToProps),(0,b.compose)(S.modalDispatchToProps))(A)},1380:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(23),E=a(49),_=a(27),k=a(18),T=a(285),C=n(T),P=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleOpenGetAppCta=a.handleOpenGetAppCta.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleOpenGetAppCta",value:function(){this.props.dispatch((0,E.openGetAppModal)({broadcast:this.props.broadcast,user:this.props.user})),this.props.dispatch((0,b.trackEvent)("GET_APP_CTA_CLICK",{location:this.props.location}))}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.withoutBottomMargin&&e.push("AppLink--withoutBottomMargin"),y.default.createElement("div",{className:"GetAppCTA"},y.default.createElement("div",{className:e.join(" "),onClick:this.handleOpenGetAppCta},y.default.createElement(g.FormattedMessage,C.default.get)))}}]),t}(y.default.Component);P.propTypes={dispatch:m.default.func.isRequired,broadcast:_.broadcastPropType,user:k.userPropType,location:m.default.oneOf(["Header","BroadcastDetails"]),withoutBottomMargin:m.default.bool},P.defaultProps={location:"Header"},t.default=P},1381:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return l.default.createElement("span",{className:"ViewersText"},(0,d.getViewers)(e.intl,e.count,e.withText))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o),u=a(2),d=a(1377);i.propTypes={intl:u.intlShape.isRequired,count:s.default.number.isRequired,withText:s.default.bool},i.defaultProps={count:0},t.default=(0,u.injectIntl)(i)},1382:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=e.style,n=(0,s.default)({fontSize:t,lineHeight:h*t+"px"},a);return d.default.createElement("div",{className:"BetaBadge",style:n},d.default.createElement(c.FormattedMessage,f.default.beta))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r);t.default=i;var o=a(1),l=n(o),u=a(0),d=n(u),c=a(2),p=a(518),f=n(p),h=19/14;i.defaultProps={size:14},i.propTypes={size:l.default.number,style:l.default.object}},1383:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=["InfoIcon"];return e.isActive&&t.push("isActive"),l.default.createElement("svg",{className:t.join(" "),viewBox:"0 0 30 30"},l.default.createElement("path",{className:"InfoIcon-innerCircle",d:"M15,27.9C7.9,27.9,2.1,22.1,2.1,15S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}),l.default.createElement("g",null,l.default.createElement("path",{className:"InfoIcon-i",d:"M13.1,9h3.1V6.2h-3.1V9z M13.1,23.8h3.1V11.2h-3.1V23.8z"})),l.default.createElement("path",{className:"InfoIcon-outerCircle",d:"M15,0C6.7,0,0,6.7,0,15s6.7,15,15,15s15-6.7,15-15S23.3,0,15,0z M15,27.9C7.9,27.9,2.1,22.1,2.1,15S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={isActive:s.default.bool}},1384:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.analyticsEventValues=void 0;var i=a(13),r=n(i),s="on_intend_to_play",o="on_ad_skip",l="on_play",u="on_pause",d="on_mute",c="on_unmute",p="on_tick_event",f="on_track_finished",h="on_replay",m={ON_INTEND_TO_PLAY:s,ON_AD_SKIP:o,ON_PLAY:l,ON_PAUSE:u,ON_MUTE:d,ON_UNMUTE:c,ON_TICK_EVENT:p,ON_TRACK_FINISHED:f,ON_REPLAY:h},v=(0,r.default)(m).map(function(e){return m[e]});t.analyticsEventValues=v,t.default=m},1385:function(e,t,a){"use strict";function n(e,t){var a={},n=void 0;if(t.broadcastId?n=t.broadcastId:t.broadcast&&t.broadcast.id?n=t.broadcast.id:t.params&&t.params.broadcastId&&(n=t.params.broadcastId),e.Video){var i=e.Video.video;i&&i.broadcast.id===n?a.video=i:a.video=null}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.mapBroadcastVideo=n,t.default=function(e){var t={};return e.Video&&(t.video=e.Video.video,t.videosPending=e.Video.pending,t.videosFailed=e.Video.failed),t}},1387:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e?T.limited:T.unlimited}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),s=n(r),o=a(12),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(297),h=a(193),m=a(1415),v=n(m),y=a(71),g=n(y),b=a(288),E=n(b),_=a(9),k=new _.FileDebugger("PaymanAPI",!0),T=(0,g.default)({limited:!0,unlimited:!0}),C=function(){function e(){var t,a,n=this;(0,d.default)(this,e),this._api=null,this._token=(t={},(0,l.default)(t,T.limited,null),(0,l.default)(t,T.unlimited,null),t),this._pendingToken=(a={},(0,l.default)(a,T.limited,null),(0,l.default)(a,T.unlimited,null),a),this.getStatus=function(){return n._request("cashoutApplicationStatus",{limited:!1}).then(function(e){var t=e.body,a=m.CashoutApplicationStatusLookup[t.status];return a||v.default.NoState}).catch(function(e){return k.error("cashoutApplicationStatus",e),v.default.NoState})},this.balance=function(){return new s.default(function(e,t){return n._request("balance",{limited:!1}).then(function(a){if(!a||200!==a.statusCode)return t(a);e(a.body)}).catch(function(e){k.error("balance",e),t(e)})})},this.apply=function(e){return new s.default(function(t,a){return n._request("cashout",{data:e,limited:!1}).then(function(e){if(!e||200!==e.statusCode)return a(e);t(e)}).catch(function(e){k.error("cashout",e),a(e)})})},this.topContributors=function(e){return new s.default(function(t,a){return n._request("topContributors",{data:{chat_token:e},limited:!0}).then(function(e){if(!e||200!==e.statusCode)return a(e);t(e.body||{})}).catch(function(e){k.error("topContributors",e),a(e)})})}}return(0,p.default)(e,[{key:"init",value:function(e){var t=this;return this._api=e,this._getToken(!0).then(function(e){t._setLocalToken(e,!0)})}},{key:"_getLocalToken",value:function(e){var t=this._token[i(e)];return t||null}},{key:"_setLocalToken",value:function(e,t){this._token[i(t)]=e}},{key:"_getLocalPending",value:function(e){return this._pendingToken[i(e)]}},{key:"_setLocalPending",value:function(e,t){this._pendingToken[i(t)]=e}},{key:"_getToken",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this._api,n=this._getLocalToken(t);return new s.default(function(i,r){if(n)return i(n);if(!a)return s.default.reject(new Error("PaymanAPI: api not set"));if(e._getLocalPending(t))return e._getLocalPending(t);var o=(0,f.fetchServiceToken)({api:a,service:h.PAYMAN_SERVICE,params:{limited:t}}).then(function(a){var n=a.token;e._setLocalToken(n,t),i(n)}).catch(function(e){return k.error("Payman._getToken",e),r(e)}).then(function(){e._setLocalPending(null,t)});return e._setLocalPending(o,t),o})}},{key:"_request",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,E.default)(e,"_request requires an endpoint");var n=a.data,i=a.limited;return this._getToken(i).then(function(a){return t._api?t._api.callAsync(e,n,{Authorization:a}):s.default.reject(new Error("PaymanAPI: api not set"))})}}]),e}();t.default=new C},1388:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedHeaderClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(285),E=n(b),_=a(46),k=n(_),T=a(27),C=a(1376),P=a(18),M=a(581),S=n(M),w=a(1502),R=n(w),I=a(1370),A=n(I),O=a(26),N=n(O),L=a(20),D=a(103),U=n(D),F=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"has360Broadcast",value:function(){return this.props.broadcast&&this.props.broadcast.broadcast&&this.props.broadcast.broadcast.has360Video}},{key:"hasBroadcast",value:function(){return this.props.broadcast&&this.props.broadcast.id}},{key:"hasUser",value:function(){return this.props.user&&this.props.user.id}},{key:"hasEvent",value:function(){return this.props.twitterEvent&&this.props.twitterEvent.title&&this.props.twitterEvent.url}},{key:"shouldRenderPeriscopeCTA",value:function(){return!!U.default.isDisabled("CardEventCTA")&&(this.hasBroadcast()||this.hasUser())}},{key:"shouldRenderEventCTA",value:function(){return!U.default.isDisabled("CardEventCTA")&&this.hasEvent()}},{key:"clickHandler",value:function(e){e.stopPropagation(),this.props.onClick()}},{key:"shouldDisableLink",value:function(){return!!this.has360Broadcast()||this.props.periscopeEnvironment.isDevice()}},{key:"renderCTAText",value:function(e){return y.default.createElement("p",{className:"EmbedHeader-ctaText"},e)}},{key:"render",value:function(){if(this.shouldRenderEventCTA())return y.default.createElement("div",{className:"EmbedHeader"},y.default.createElement(A.default,{onClick:this.clickHandler,twitterEvent:this.props.twitterEvent},y.default.createElement("div",{className:"EmbedHeader-cta EmbedHeader-cta--twitterEvent u-pullLeft"},y.default.createElement("p",{className:"EmbedHeader-ctaText"},this.props.twitterEvent.title),y.default.createElement(R.default,null))));if(this.shouldRenderPeriscopeCTA()){var e=this.props.user?k.default.periscopeLink:E.default.external;return y.default.createElement("div",{className:"EmbedHeader"},y.default.createElement(A.default,{onClick:this.clickHandler,broadcast:this.props.broadcast,user:this.props.user,disabled:this.shouldDisableLink()},y.default.createElement("div",{className:"EmbedHeader-cta EmbedHeader-cta--periscope u-pullRight"},y.default.createElement(g.FormattedMessage,e,this.renderCTAText),y.default.createElement(S.default,null))))}return null}}]),t}(y.default.Component);F.defaultProps={onClick:function(){},periscopeEnvironment:new L.UserAgentDetector},F.propTypes={broadcast:T.broadcastPropType,onClick:m.default.func,twitterEvent:C.twitterEventPropType,user:P.userPropType,periscopeEnvironment:m.default.object.isRequired},t.default=(0,N.default)(F);t.EmbedHeaderClass=F},1389:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(1391),E=n(b),_=a(290),k=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"possiblyRenderIcon",value:function(){return this.props.withIcon?y.default.createElement("div",{className:"LoginSignupButton-AvatarImage"},y.default.createElement(E.default,{white:!!this.props.isWhite})):null}},{key:"renderJoinedButton",value:function(){return this.props.onlyIcon?null:y.default.createElement("div",{className:"LoginSignupButton-SignInText"},y.default.createElement(g.FormattedMessage,_.login),y.default.createElement("span",{className:"LoginSignupButton-separator"},"|"),y.default.createElement(g.FormattedMessage,_.signup))}},{key:"render",value:function(){var e=this;return y.default.createElement("a",{href:"#",className:"LoginSignupButton-SignInButton "+(this.props.buttonClass||""),onClick:function(t){return e.props.onClick(t)}},this.possiblyRenderIcon(),this.renderJoinedButton())}}]),t}(y.default.Component);k.propTypes={buttonClass:m.default.string,withIcon:m.default.bool,onlyIcon:m.default.bool,onClick:m.default.func,isWhite:m.default.bool},t.default=k},1390:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){return{userActivityHeight:e}}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m),y=a(1),g=n(y),b=a(0),E=n(b),_=a(1398),k=n(_),T=a(9),C=new T.FileDebugger("AnimatingUsersActivity",!0),P=32,M=function(e){function t(e){(0,d.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={userActivityHeight:0},a.handleUserActivityUpdate=function(e){var t=e?P:0;a.setState(i(t)),a.props.onUpdate(t)},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"render",value:function(){return E.default.createElement("div",{className:"AnimatingUsersActivity",style:{height:this.state.userActivityHeight}},E.default.createElement(k.default,(0,s.default)({},this.props,{onUpdate:this.handleUserActivityUpdate})))}}]),t}(E.default.Component);t.default=M,M.defaultProps={onUpdate:function(){return C.warn("onUpdate not provided")}},M.propTypes={onUpdate:g.default.func}},1391:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=["ProfileIcon"];return e.white&&t.push("ProfileIcon--white"),l.default.createElement("div",{className:t.join(" ")},l.default.createElement("svg",{viewBox:"6 7 61 61"},l.default.createElement("path",{d:"M25.5,38.9v1.7C25.5,46.9,30.6,52,37,52c6.4,0,11.5-5.1,11.5-11.5v-1.7c1.2-0.4,2-1.5,2-2.8s-0.8-2.4-2-2.8 v-1.7C48.5,25.2,43.3,20,37,20c-6.4,0-11.5,5.1-11.5,11.5v1.7c-1.2,0.4-2,1.5-2,2.8S24.3,38.5,25.5,38.9z"}),l.default.createElement("path",{d:"M36.5,7c-16.6,0-30,13.4-30,30s13.4,30,30,30s30-13.4,30-30S53.1,7,36.5,7z M56.2,57c-0.9-2.3-2.2-4.5-3.9-6.4 c-0.4-0.4-0.9-0.7-1.5-0.6c-0.6,0-1.1,0.2-1.5,0.7C46.1,54,41.7,56,37,56c-4.5,0-8.7-1.8-11.8-5c-0.4-0.4-0.9-0.6-1.5-0.6 c-0.6,0-1.1,0.3-1.5,0.7c-1.8,2.1-3.1,4.6-3.9,7.2c-6-5.1-9.8-12.8-9.8-21.3c0-15.5,12.5-28,28-28s28,12.5,28,28 C64.5,44.8,61.3,51.9,56.2,57z"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={white:s.default.bool}},1392:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.username;if(Array.isArray(e.usernames))for(var a=e.usernames.length-1;a>-1&&!(t=e.usernames[a]);a--);return t}function r(e){return e.type===U.default.SYSTEM||e.type===U.default.SENTENCE}Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v);t.messageUsername=i,t.isSystemMessage=r;var g=a(1),b=n(g),E=a(0),_=n(E),k=a(49),T=a(304),C=n(T),P=a(1509),M=n(P),S=a(1507),w=n(S),R=a(1506),I=n(R),A=a(1505),O=n(A),N=a(11),L=a(567),D=a(283),U=n(D),F=a(584),H=n(F),V=a(27),B=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.messageClick=a.messageClick.bind(a),a.handleEntered=function(){a.props.message.entered=!0},a.handleExited=function(){var e=a.props.message;e.exiting&&(e.exited=!0)},a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.elementNode.addEventListener("animationend",this.handleEntered),this.elementNode.addEventListener("transitionend",this.handleExited)}},{key:"componentWillUnmount",value:function(){this.elementNode.removeEventListener("animationend",this.handleEntered),this.elementNode.removeEventListener("transitionend",this.handleExited)}},{key:"messageClick",value:function(){var e=this.props.message,t=i(e);this.props.dispatch((0,k.openProfileModal)({message:e,username:t,params:{}}))}},{key:"getBaseMessageProps",value:function(){var e=this.props;return{broadcast:e.broadcast,messageDidAnimateOut:e.messageDidAnimateOut,animationTime:e.animationTime,isLive:e.isLive,message:e.message,timelineTimeOffset:e.timelineTimeOffset,timeOnScreen:e.timeOnScreen,redesign:e.redesign}}},{key:"renderChat",value:function(e){var t=this.props,a=t.blocked,n=t.broadcast,i=t.getCurrentTime,r=t.handleVideoJump,s=t.isTopContributor,l=t.mutedUsers,u=t.pauseChat;return _.default.createElement(C.default,(0,o.default)({},this.getBaseMessageProps(),{isTopContributor:s,handleVideoJump:r,getCurrentTime:i,pauseChat:u,messageClick:this.messageClick,participantColor:(0,N.getParticipantColorName)(e.participant_index),isMuted:(0,L.isMuted)(e,{mutedUsers:l,broadcast:n,blocked:a}),isBlocked:(0,L.isBlocked)(e,{blocked:a})}))}},{key:"renderSystem",value:function(){return _.default.createElement(M.default,this.getBaseMessageProps())}},{key:"renderJoin",value:function(e){return _.default.createElement(w.default,(0,o.default)({},this.getBaseMessageProps(),{messageClick:this.messageClick,collapsed:e.collapsed,participantColor:(0,N.getParticipantColorName)(e.participant_index)}))}},{key:"renderFirstSparkle",value:function(e){return _.default.createElement(I.default,(0,o.default)({},this.getBaseMessageProps(),{messageClick:this.messageClick,participantColor:(0,N.getParticipantColorName)(e.participant_index)}))}},{key:"renderBlocked",value:function(e){return _.default.createElement(O.default,{redesign:this.props.redesign,username:e.broadcasterBlockedUsername})}},{key:"renderChatMessage",value:function(e){switch(e.type){case U.default.USER_CHAT:case U.default.CHAT:return this.renderChat(e);case U.default.SYSTEM:case U.default.SENTENCE:return this.renderSystem();case U.default.JOIN:return this.renderJoin(e);case U.default.FIRST_SPARKLE:return this.renderFirstSparkle(e);case U.default.BROADCASTER_BLOCKED_VIEWER:return this.renderBlocked(e);default:return null}}},{key:"renderControlMessage",value:function(e){switch(e.type){case H.default.JOIN:return this.renderJoin(e);default:return null}}},{key:"renderMessage",value:function(e){return e.isControl?this.renderControlMessage(e):this.renderChatMessage(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.isFirst;if(a.hidden)return null;var i=this.renderMessage(a),r=["MessageElement"];return a.entered||r.push("enter"),n&&r.push("first"),a.exiting&&r.push("exit"),a.exited&&r.push("exited"),a.exitNow&&r.push("exit-now"),a.slideOut&&r.push("slide-out"),a.delay&&r.push("delay-"+a.delay),_.default.createElement("div",{ref:function(t){e.elementNode=t},className:r.join(" ")},i)}}]),t}(_.default.Component);B.propTypes={blocked:b.default.object,broadcast:V.broadcastPropType,timelineTimeOffset:b.default.number,animationTime:b.default.number,messageDidAnimateOut:b.default.func,mutedUsers:b.default.object,dispatch:b.default.func,message:b.default.object,timeOnScreen:b.default.number,isLive:b.default.bool,isTopContributor:b.default.bool,isFirst:b.default.bool,handleVideoJump:b.default.func,getCurrentTime:b.default.func,pauseChat:b.default.func,redesign:b.default.bool},t.default=B},1393:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};return e.isVertical||(t.transform="rotate(90deg)"),l.default.createElement("svg",{className:"Ellipsis",style:t,width:"4px",height:"20px",viewBox:"0 0 4 20"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none"},l.default.createElement("g",{transform:"translate(-868.000000, -37.000000)",fill:"#40A4C4"},l.default.createElement("g",{transform:"translate(868.000000, 37.000000)"},l.default.createElement("circle",{cx:"2",cy:"2",r:"2"}),l.default.createElement("circle",{cx:"2",cy:"10",r:"2"}),l.default.createElement("circle",{cx:"2",cy:"18",r:"2"})))))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={isVertical:s.default.bool},i.defaultProps={isVertical:!0},t.default=i},1394:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.userEventValues=void 0;var i=a(13),r=n(i),s=a(71),o=n(s),l=(0,o.default)({REGISTER_USER_INTERACTION:!0,AD_SKIP_REQUEST:!0,MUTE_REQUEST:!0,PAUSE_REQUEST:!0,PLAY_REQUEST:!0,PLAYBACK_REQUEST:!0,REPLAY_REQUEST:!0,UNMUTE_REQUEST:!0});t.userEventValues=(0,r.default)(l);t.default=l},1395:function(e,t,a){"use strict";function n(e,t){var a=document.createElement("canvas"),n=a.getContext("2d"),i=a.width=e.width,r=a.height=e.height,s=t.width,o=t.height;n.putImageData(e,0,0);var l=i/s,u=r/o,d=l>u,c=d?u:l,p=i/c,f=r/c,h=Math.floor((p-s)/-2),m=Math.floor((f-o)/-2),v=Math.ceil(p),y=Math.ceil(f),g=t.getContext("2d");g.clearRect(0,0,s,o),g.drawImage(a,h,m,v,y)}function i(e,t,a){t.width=300,t.height=150,n(e,t),(0,r.stackBlurCanvasRGB)(t,0,0,t.width,t.height,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.microBlur=i;var r=a(1359)},1398:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(19),k=a(1458),T=n(k),C=a(58),P=n(C),M=a(546),S=n(M),w=a(1492),R=n(w),I=a(72),A=a(1353),O=a(41),N=a(142),L=a(1417),D=a(1387),U=n(D),F=a(17),H=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={topContributors:[],topContributorsIds:[]},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.pollForSparkles()}},{key:"componentWillReceiveProps",value:function(e){this.props.auth.isLoggedIn!==e.auth.isLoggedIn&&this.pollForSparkles(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.pollTimeout),this.pollTimeout=null}},{key:"isSparkleEnabled",value:function(){var e=this.props.broadcast;return e&&e.data&&e.data.data&&e.data.data.enabled_sparkles}},{key:"pollForSparkles",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(!this.isSparkleEnabled()||!t.auth.isLoggedIn)return clearTimeout(this.pollTimeout);this.pollTimeout=setTimeout(function(){e.getTopContib().then(function(){return e.pollForSparkles()})},5e3)}},{key:"getTopContib",value:function(){var e=this,t=this.props,a=t.api,n=t.chat;if(n&&n.chatSession)return this.paymanAPI?this.paymanAPI.topContributors(n.chatSession.access_token).then(function(t){var a=t.top_contributors,n=a.map(function(e){return e.user_id}).sort();e.state.topContributorsIds.join(",")!==n.join(",")&&e.props.dispatch((0,I.chatSetTopContributorsIds)(n)),e.setState({topContributors:a,topContributorsIds:n})}):U.default.init(a).then(function(){e.paymanAPI=U.default})}},{key:"getTopContributors",value:function(){return this.props.auth.isLoggedIn?this.state.topContributors:[]}},{key:"render",value:function(){return b.default.createElement("div",{className:"UsersActivity-container"},b.default.createElement(T.default,null),b.default.createElement(R.default,(0,r.default)({},this.props,{topContributors:this.getTopContributors()})))}}]),t}(b.default.Component);H.propTypes={api:_.wrappedApiShape,auth:S.default,broadcast:P.default,chat:A.chatSessionPropType,dispatch:y.default.func.isRequired,following:y.default.arrayOf(y.default.string),roster:y.default.arrayOf(y.default.object)},t.default=(0,E.connect)((0,F.compose)(N.authFollowingMapper,O.authStateToProps,A.chatSessionMapper,L.rosterStateToProps))((0,_.injectApi)(H))},1399:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.rosterUser,a=e.user,n=e.userId,i=e.withDisplayName,r=(0,l.default)(e,["rosterUser","user","userId","withDisplayName"]);return a||t?p.default.createElement(y.default,(0,s.default)({},r,{user:(0,_.default)(a||t),withDisplayName:i})):n?p.default.createElement(m.default,{userId:n}):null}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(75),l=n(o),u=a(1),d=n(u),c=a(0),p=n(c),f=a(14),h=a(532),m=n(h),v=a(1493),y=n(v),g=a(136),b=n(g),E=a(565),_=n(E);i.propTypes={dispatch:d.default.func.isRequired,user:d.default.object,rosterUser:d.default.object,withDisplayName:d.default.bool,isPresent:d.default.bool,userId:d.default.string,isSparkle:d.default.bool},t.default=(0,f.connect)(b.default)(i)},1401:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.node=null,t.fadeTimeout=null,t.state={hide:!e.out},t.handleFadeEnd=function(e){"opacity"===e.propertyName&&e.target===t.node&&t.props.onFadeEnd()},t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){M(this.props)&&this.fade(),this.node.addEventListener("transitionend",this.handleFadeEnd)}},{key:"componentWillReceiveProps",value:function(e){M(e)&&!M(this.props)&&this.fade()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.fadeTimeout),this.node.removeEventListener("transitionend",this.handleFadeEnd)}},{key:"fade",value:function(){var e=this;clearTimeout(this.fadeTimeout),this.fadeTimeout=setTimeout(function(){e.setState(S),e.props.onFade()},this.props.delay)}},{key:"render",value:function(){var t=this,a=this.state.hide,n=["withFade"];a&&n.push("withFade--hidden"),a||n.push("withFade--visible");var i=w(this.props);return i.opacity=a?0:1,E.default.createElement("div",{ref:function(e){t.node=e},className:n.join(" "),style:i},E.default.createElement(e,(0,s.default)({},this.props,{withFadeHide:a})))}}]),a}(E.default.Component);return(0,k.default)(t,e),t.displayName="WithFade("+(0,T.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={delay:0,duration:1e3,curve:"cubic-bezier(0.165, 0.84, 0.44, 1)",onFade:function(){return P.warn("onFade not provided")},onFadeEnd:function(){return P.warn("onFadeEnd not provided")}},t.propTypes={withFadeVisible:g.default.bool.isRequired,out:g.default.bool,delay:g.default.number,duration:g.default.number,curve:g.default.string,onFade:g.default.func,onFadeEnd:g.default.func},t}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m);t.default=i;var y=a(1),g=n(y),b=a(0),E=n(b),_=a(56),k=n(_),T=a(55),C=a(9),P=new C.FileDebugger("withFade",!0),M=function(e){return e.out?!e.withFadeVisible:e.withFadeVisible},S=function(e){return{hide:!e.hide}},w=function(e){return{transition:"opacity "+e.duration+"ms "+e.curve,opacity:e.out?1:0,width:"inherit",height:"inherit"}}},1402:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(23),E=a(1373),_=a(541),k=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trackClick=a.trackClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"trackClick",value:function(){this.props.dispatch((0,b.trackEvent)(this.props.trackEventName,{location:this.props.trackEventLocation}))}},{key:"possiblyRenderIcon",value:function(){switch(this.props.platform){case E.PLATFORM_TYPE_ANDROID:return y.default.createElement("span",{className:"AppLink-icon AppLink-icon--playstore"},y.default.createElement("img",{src:"/v/images/logo_playstore.svg"}));case E.PLATFORM_TYPE_IOS:return y.default.createElement("span",{className:"AppLink-icon AppLink-icon--apple"},y.default.createElement("img",{src:"/v/images/logo_apple.svg"}));case E.PLATFORM_TYPE_NATIVE:return y.default.createElement("span",{className:"AppLink-icon AppLink-icon--native"},y.default.createElement("img",{src:"/v/images/largepin.svg"}));default:return null}}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.platform&&e.push("AppLink--withIcon"),y.default.createElement("a",{className:e.join(" "),href:this.props.href,onClick:this.trackClick},this.possiblyRenderIcon(),this.props.children)}}]),t}(y.default.Component);t.default=k,k.propTypes={children:m.default.node,href:m.default.string.isRequired,platform:m.default.oneOf([E.PLATFORM_TYPE_ANDROID,E.PLATFORM_TYPE_IOS,E.PLATFORM_TYPE_NATIVE]),dispatch:m.default.func.isRequired,trackEventName:m.default.string,trackEventLocation:m.default.string},k.defaultProps={children:y.default.createElement(g.FormattedMessage,_.app.open),trackEventLocation:"",platform:null}},1403:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastBackgroundClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(1363),b=n(g),E=a(26),_=n(E),k=a(102),T=a(27),C=a(11),P=n(C),M={baseClass:"BroadcastBackground",readyState:"ready",flexClass:"u-flexParent"},S={baseClass:"BackgroundImage",dimOpacity:"u-opacity-50",brightOpacity:"u-opacity-90",transition:"u-transition-1",flexClass:"u-flexItem"},w=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.reset()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.revealImageTimeout)}},{key:"componentWillReceiveProps",value:function(e){(!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state))&&(this.props.dispatch((0,k.playerBackgroundReady)(!1)),this.reset())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.revealImageTimeout)}},{key:"reset",value:function(){this.backgroundShown=!1,this.setState({imageFadeOut:!1}),this.broadcastBackgroundReady()}},{key:"broadcastBackgroundReady",value:function(e){this.backgroundShown||(this.backgroundShown=!0,this.props.dispatch((0,k.playerBackgroundReady)(!0)),e&&e.target&&e.target.width>e.target.height&&this.props.player.height>this.props.player.width&&this.props.dispatch((0,k.playerCurrentOrientation)(270)))}},{key:"buildImageClasses",value:function(){var e=this,t=[S.baseClass,S.flexClass],a=!1;return(this.props.player.isPlayback&&this.props.broadcast.isEnded||this.props.periscopeEnvironment.shouldUseMobileLayout())&&(a=!0),a?this.state&&this.state.imageFadeOut?(t.push(S.transition),t.push(S.dimOpacity)):(t.push(S.brightOpacity),clearTimeout(this.revealImageTimeout),this.revealImageTimeout=setTimeout(function(){e.setState({imageFadeOut:!0})})):t.push(S.brightOpacity),this.props.broadcast.isEnded&&(t=t.filter(function(e){return e!==S.brightOpacity}),t.push(S.dimOpacity)),P.default.onlyUnique(t).join(" ")}},{key:"possiblyRenderBackgroundImage",value:function(){if(this.props.broadcast.image_url){var e=""!==this.props.broadcast.localThumbnailUrl?this.props.broadcast.localThumbnailUrl:this.props.broadcast.image_url;if(!this.props.shouldBlur){var t={backgroundImage:"url("+e+")"};return y.default.createElement("div",{className:this.buildImageClasses(),style:t},y.default.createElement("img",{style:{display:"none"},src:e}))}return y.default.createElement(b.default,{className:this.buildImageClasses(),canvasClass:"u-fullScreen",img:e,blurRadius:80})}}},{key:"buildBackgroundClasses",value:function(){var e=[M.baseClass,M.flexClass],t=this.props.player&&this.props.player.playerBackgroundReady;return this.props.player.videoHasStarted&&this.props.player.isPlayback&&!this.props.periscopeEnvironment.mobile()&&(t=!1),t&&e.push(M.readyState),P.default.onlyUnique(e).join(" ")}},{key:"render",value:function(){return y.default.createElement("div",{className:this.buildBackgroundClasses()},this.possiblyRenderBackgroundImage())}}]),t}(y.default.Component);w.defaultProps={shouldBlur:!0},w.propTypes={dispatch:m.default.func.isRequired,player:m.default.object.isRequired,broadcast:T.broadcastPropType,shouldBlur:m.default.bool,periscopeEnvironment:m.default.object.isRequired},t.default=(0,_.default)(w);t.BroadcastBackgroundClass=w},1404:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){switch(e){case"ERROR":return S.default.error;case"NOT_FOUND":return S.default.notFound;case"LIVE":return S.default.live;case"CONNECTED":return S.default.connected;case"ENDED_AGO":return S.default.endedAgo;case"CONNECTING":return S.default.connecting;default:return S.default.ended}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m),y=a(1),g=n(y),b=a(0),E=n(b),_=a(2),k=a(26),T=n(k),C=a(27),P=a(282),M=a(287),S=n(M),w=9e4,R=function(e){function t(e){(0,d.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={endedCounter:0},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.endedTimer||(this.endedTimer=setInterval(function(){e.setState({endedCounter:e.state.endedCounter+1})},w))}},{key:"componentWillUnmount",value:function(){this.endedTimer&&clearInterval(this.endedTimer)}},{key:"possiblyIncludeReplayNotice",value:function(){if(!this.props.broadcastError.isServerError&&!this.props.broadcastError.isNotFound&&!this.props.broadcastError.isUnavailable&&this.props.broadcast.isEnded&&!this.props.replay.replayAvailable)return E.default.createElement("p",{className:"BroadcastState-noReplay"},"Replay Unavailable")}},{key:"broadcastState",value:function(){return this.props.broadcastError.isServerError?"ERROR":this.props.broadcastError.isNotFound||this.props.broadcastError.isUnavailable?"NOT_FOUND":!this.props.broadcast.isRunning||!this.props.broadcastError.isUnavailable&&this.props.periscopeEnvironment.isVideoSupported()?this.props.broadcast.isRunning&&this.props.player.isConnecting?"CONNECTING":this.props.player.playerIsUnavailable||this.props.player.isConnected?"CONNECTED":this.props.broadcast.isEnded?"ENDED_AGO":this.props.periscopeEnvironment.hasInlineAutoplayVideo()?"CONNECTING":"CONNECTED":"LIVE"}},{key:"render",value:function(){var e=this.broadcastState(),t=["BroadcastState"];switch(e){case"ERROR":case"NOT_FOUND":t.push("BroadcastState--error")}var a=i(e);if(this.props.broadcast&&"ENDED_AGO"===e){var n=this.props.broadcast.endTime;return E.default.createElement("div",{className:t.join(" ")},E.default.createElement("p",null,E.default.createElement(_.FormattedRelative,{value:n},function(e){return E.default.createElement("time",{dateTime:n,title:n},E.default.createElement(_.FormattedMessage,(0,s.default)({},a,{values:{ended_ago:e}})))})),this.possiblyIncludeReplayNotice())}return E.default.createElement("div",{className:t.join(" ")},E.default.createElement("p",null,E.default.createElement(_.FormattedMessage,a)))}}]),t}(E.default.Component);R.propTypes={player:g.default.object,replay:P.replayPropType,broadcast:C.broadcastPropType,broadcastError:g.default.object,periscopeEnvironment:g.default.object.isRequired},t.default=(0,T.default)(R)},1405:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsContainer=void 0;var i=a(1),r=n(i),s=a(0),o=n(s),l=a(14),u=a(27),d=a(1375),c=a(30),p=a(1484),f=n(p),h=a(1491),m=n(h),v=a(41),y=a(1374),g=a(17),b=function(e){var t=e.auth,a=e.broadcast,n=e.classNames,i=e.commentInputState,r=e.width,s=e.disableUserHeart,l=a.isEnded,u=["HeartsContainer"].concat(n);return o.default.createElement("div",{className:u.join(" ")},s||o.default.createElement(m.default,{commentIsFocused:i&&i.isFocused,isAuthed:t.isLoggedIn,isLive:!l,authUser:t.user}),o.default.createElement(f.default,{broadcast:a,isLive:!l,width:r}))};b.defaultProps={classNames:[]},b.propTypes={auth:c.authPropType,broadcast:u.broadcastPropType,commentInputState:d.commentInputShape,classNames:r.default.arrayOf(r.default.string),dispatch:r.default.func.isRequired,width:r.default.number,disableUserHeart:r.default.bool},t.HeartsContainer=b,t.default=(0,l.connect)((0,g.compose)(v.authStateToProps,y.commentInputStateToProps))(b)},1406:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(287),E="LoadingOverlay--isLoading",_=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"possiblyRenderMessage",value:function(){if(!this.props.player.videoHasStarted&&this.props.player.isLoadingVideo){var e=this.props.player.isLiveMode?b.connecting:b.loading;return y.default.createElement(g.FormattedMessage,e,function(e){return y.default.createElement("span",{className:"LoadingOverlay-text"},e)})}}},{key:"render",value:function(){var e=["LoadingOverlay"];return this.props.player.isLoadingVideo&&e.push(E),y.default.createElement("div",{className:e.join(" ")},this.possiblyRenderMessage())}}]),t}(y.default.Component);_.propTypes={player:m.default.object},t.default=_},1407:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(21),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(131),k=a(1412),T=n(k),C=a(1372),P=n(C),M=a(1418),S=n(M),w=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"handleClick",value:function(){S.default.togglePlayback(this.props)}},{key:"render",value:function(){var e=["PlaybackControls","PlaybackControls--redesign"].concat((0,r.default)(S.default.buildStateClasses(this.props.player)));return b.default.createElement("div",{className:e.join(" ")},b.default.createElement("div",{className:"PlaybackControls-button",onClick:this.handleClick},b.default.createElement("div",{className:"PlaybackControls-pause"},b.default.createElement(T.default,null)),b.default.createElement("div",{className:"PlaybackControls-play"},b.default.createElement(P.default,null))))}}]),t}(b.default.Component);w.propTypes={dispatchPauseVideo:y.default.func.isRequired,dispatchPlayVideo:y.default.func.isRequired,player:y.default.object},t.default=(0,E.connect)(function(){return{}},_.videoPlayerDispatchMapper)(w)},1408:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.className,a=e.children;return g.default.createElement("div",{className:t},a)}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoInterstitialContainerWithFade=void 0;var r=a(6),s=n(r),o=a(3),l=n(o),u=a(4),d=n(u),c=a(8),p=n(c),f=a(7),h=n(f),m=a(1),v=n(m),y=a(0),g=n(y),b=a(27),E=a(1401),_=n(E),k=a(9),T=new k.FileDebugger("VideoInterstitial",!1),C={baseClass:"VideoInterstitial",hiddenModifier:"VideoInterstitial--hidden",delayModifier:"VideoInterstitial--delay"},P=1e3,M={flexParent:"u-flexParent",fullHeight:"u-fullHeight"};i.propTypes={className:v.default.string,children:v.default.node};var S=t.VideoInterstitialContainerWithFade=(0,_.default)(i),w=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.state={shouldHide:!1},a.shouldHideTimeout=null,a}return(0,h.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(){!this.props.player.isPlayback&&this.state.shouldHide?this.handleHide(!1):this.isHidden()&&!this.state.shouldHide&&this.handleHide(!0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.hideTimeout),clearTimeout(this.shouldHideTimeout)}},{key:"handleHide",value:function(e){var t=this,a=e?P:0;T.debug("handleHide","delay "+a+"ms"),clearTimeout(this.shouldHideTimeout),this.shouldHideTimeout=setTimeout(function(){e!==t.state.shouldHide&&t.setState({shouldHide:e}),t.shouldHideTimeout=null},a)}},{key:"isHidden",value:function(){var e=this.props.player;return e.isPlayback&&e.videoHasStarted}},{key:"render",value:function(){var e=this.props.player,t=this.isHidden(),a=[C.baseClass,M.fullHeight,M.flexParent];return t&&(a=a.concat([C.hiddenModifier,C.delayModifier])),e.isPlayback||(a=a.filter(function(e){return e!==C.delayModifier||e!==C.hiddenModifier})),this.props.baseClass&&a.push(this.props.baseClass),this.state.shouldHide?null:g.default.createElement(S,{className:a.join(" "),out:!0,withFadeVisible:!t,duration:this.props.duration,delay:this.props.delay,onFade:this.props.onFade},this.props.children)}}]),t}(g.default.Component);w.propTypes={baseClass:v.default.string,children:v.default.node,player:v.default.object,broadcast:b.broadcastPropType,delay:v.default.number,duration:v.default.number,onFade:v.default.func},t.default=w},1409:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=(0,p.getFormattedTime)(e.time),a=t.replace(/:/g,"").match(/\d+/),n=void 0;return a&&a.length&&(n=10*a[0].length),u.default.createElement(f,{width:n},t)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),s=n(r),o=(0,s.default)(["\n  display: inline-block;\n  width: ","px;\n"],["\n  display: inline-block;\n  width: ","px;\n"]);t.default=i;var l=a(0),u=n(l),d=a(50),c=n(d),p=a(84),f=c.default.div(o,function(e){return e.width})},1410:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.buttons;return l.default.createElement("div",{className:"Broadcast-OverflowTooltip"},l.default.createElement("div",{className:"Broadcast-OverflowTooltip-buttons"},t))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={buttons:s.default.node},t.default=i},1411:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(0),m=n(h),v=a(529),y=a(1368),g=n(y),b=a(1472),E=n(b),_=a(1405),k=n(_),T=a(1485),C=n(T),P=a(1356),M=n(P),S=a(1486),w=n(S),R=a(1487),I=n(R),A=a(1407),O=n(A),N=a(1398),L=n(N),D=a(1360),U=n(D),F=a(1500),H=n(F),V=a(1457),B=n(V),x=a(1501),j=n(x),q=a(1357),W=n(q),Y=a(103),z=n(Y),G=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleJumpToLive=function(){a.props.dispatch((0,v.timecodeShareBroadcastRemove)(a.props.broadcast.id))},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"isLiveTimecodeShare",value:function(){return z.default.isEnabled("LiveTimecodeSharing")&&this.props.timecodeShare&&this.props.timecodeShare.isLive}},{key:"shouldRenderReplayElement",value:function(){return this.props.periscopeEnvironment.isVideoSupported()&&(this.isLiveTimecodeShare()||this.props.broadcast.isEnded)}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyIncludePlaybackControlsOverlay",value:function(){if(this.shouldRenderReplayElement()&&!this.allowVideoInteractivity())return m.default.createElement(I.default,{player:this.props.player,broadcast:this.props.broadcast,dispatch:this.props.dispatch,sharedEventListener:this.props.sharedEventListener})}},{key:"possiblyIncludeVideoSeeker",value:function(){if(this.shouldRenderReplayElement())return m.default.createElement(g.default,{videoStartDate:this.props.broadcast.start,disableInteraction:this.props.periscopeEnvironment.mobile()})}},{key:"possiblyIncludeUsersActivity",value:function(){if(!this.shouldRenderReplayElement())return m.default.createElement(L.default,{broadcast:this.props.broadcast})}},{key:"possiblyIncludePlaybackControls",value:function(){if(this.shouldRenderReplayElement())return m.default.createElement(O.default,{player:this.props.player,broadcast:this.props.broadcast})}},{key:"possiblyIncludeNextBroadcastButton",value:function(){if(this.props.couchmode)return m.default.createElement(E.default,{player:this.props.player,nextBroadcast:this.props.nextBroadcastCallback})}},{key:"renderMessages",value:function(){var e=this.shouldRenderReplayElement(),t=!this.props.periscopeEnvironment.mobile()&&this.props.redesign;return m.default.createElement(C.default,{broadcast:this.props.broadcast,isLive:!e,redesign:t})}},{key:"renderShareBroadcastButton",value:function(e){var t=this.props,a=t.broadcast,n=t.user,i=n&&n.isShellAccount;return m.default.createElement(H.default,{broadcast:a,useBroadcastUrl:i},e||m.default.createElement(B.default,{active:this.props.periscopeEnvironment.mobile()}))}},{key:"renderMuteButton",value:function(e){var t=e?w.default:M.default;return m.default.createElement(t,{active:this.props.periscopeEnvironment.mobile(),muted:this.props.player.muted,onVolumeChange:this.props.onVolumeChange})}},{key:"possiblyRenderTimecodeShareJump",value:function(){return this.isLiveTimecodeShare()?m.default.createElement(j.default,{broadcast:this.props.broadcast,timecodeShare:this.props.timecodeShare,onJumpToLive:this.handleJumpToLive}):null}},{key:"renderViewerBadge",value:function(){var e=this.shouldRenderReplayElement();return m.default.createElement(U.default,{hideLiveBadge:this.props.periscopeEnvironment.mobile(),withFixedWidth:!0,viewers:this.props.viewers,isLive:!e,is360:this.props.broadcast.has360Video})}},{key:"renderHeartsContainer",value:function(){var e=this.props.simple;return m.default.createElement(k.default,{broadcast:this.props.broadcast,width:e?0:53,disableUserHeart:e})}}]),t}(m.default.Component);G.propTypes=W.default,t.default=G},1412:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?21:t;return l.default.createElement("svg",{viewBox:"0 0 16 21",width:u*a,height:a},l.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M0 .999A.996.996 0 0 1 1 0h3.895c.552 0 1 .452 1 .999v18.708a.996.996 0 0 1-1 .999H1c-.552 0-1-.452-1-.999V1zm10.105 0a.996.996 0 0 1 1-.999H15c.552 0 1 .452 1 .999v18.708a.996.996 0 0 1-1 .999h-3.895c-.552 0-1-.452-1-.999V1z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=16/21;i.propTypes={size:s.default.number}},1413:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={COMMENTING_SUSPENDED:1,COMMENTING_DISABLED:2,GLOBAL_COMMENTING_SUSPENDED:3,GLOBAL_COMMENTING_DISABLED:4}},1414:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(71),r=n(i);t.default=(0,r.default)({ON_AD_STATE_UPDATE:!0,ON_TIME_UPDATE:!0,ON_ENDED:!0})},1415:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CashoutApplicationStatusLookup=void 0;var i=a(71),r=n(i),s=(0,r.default)({Loading:!0,NoState:!0,Eligible:!0,Ineligible:!0,Pending:!0,TipaltiPending:!0,Approved:!0,TemporaryRejection:!0,PermanantRejection:!0,Escalated:!0});t.CashoutApplicationStatusLookup={0:s.NoState,1:s.Eligible,2:s.Pending,3:s.TipaltiPending,4:s.Approved,5:s.TemporaryRejection,6:s.PermanantRejection,7:s.Escalated,8:s.Ineligible};t.default=s},1416:function(e,t,a){"use strict";function n(e){var t=e.GlobalDrawer;return{drawer:(0,r.convertToDrawer)(t)}}function i(e){return{dispatchShowSafari360Drawer:function(){e(s.showSafari360Alert.apply(void 0,arguments))},dispatchHideDrawer:function(){e(s.hideDrawer.apply(void 0,arguments))},dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerDispatchToProps=void 0,t.drawerStateToProps=n;var r=a(1358),s=a(592),o=a(143);t.drawerDispatchToProps=(0,o.memoize)(i)},1417:function(e,t,a){"use strict";function n(e){var t=e.Chat,a=e.Roster,n={},i=t&&t.chatSession&&t.chatSession.room_id;return i&&a&&a.rooms[i]&&(n.roster=a.rooms[i].roster),n}function i(e){return{dispatchRosterReceive:function(t,a){e((0,r.rosterReceive)(t,a))},dispatchRosterRemoveUser:function(t,a){e((0,r.rosterRemoveUser)(t,a))},dispatchRosterAddUser:function(t,a){e((0,r.rosterAddUser)(t,a))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rosterDispatchToProps=void 0,t.rosterStateToProps=n;var r=a(311),s=a(143);t.rosterDispatchToProps=(0,s.memoize)(i)},1418:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=1,a=0;(new TimelineLite).fromTo(e,t/2,{opacity:a},{opacity:1,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).to(e,t/2,{opacity:a,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).fromTo(e,t,{scale:1.5},{scale:3,transformOrigin:"center center",bezier:{values:[{x:.19,y:1},{x:.22,y:1}]}},0)}function r(e){var t=[];return e.isExpectingVideo?t.push("is-playing"):t.push("is-paused"),t}function s(e){e.player.isExpectingVideo?(u.default.pauseRequest(),i(c),e.dispatchPauseVideo(),e.dispatch((0,o.trackEvent)("VIDEO_PAUSE"))):(u.default.playRequest(),i(d),e.dispatchPlayVideo(),e.dispatch((0,o.trackEvent)("VIDEO_UNPAUSE")))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(23),l=a(1354),u=n(l),d=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-play svg",c=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-pause svg";t.default={buildStateClasses:r,togglePlayback:s}},1420:function(e,t){function a(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=a},1421:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessage=void 0;var i=a(5),r=n(i),s=a(1427),o=n(s),l=a(1384),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.ORIGIN,a=o.default.Shared,n=o.default.Outbound,i=o.default.Inbound,u=function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.default)({type:a},n);e.postMessage(i,t)},d={init:function(e){return u(a.INIT,e)},stopPolling:function(){return u(a.STOP_POLLING)}},c={};return l.analyticsEventValues.forEach(function(e){c[e]=function(t){return u(e,t)}}),{inbound:(0,r.default)({},d,{update:function(e){return u(i.UPDATE,e)},updateError:function(){return u(i.UPDATE_ERROR)},startPlaying:function(){return u(i.START_PLAYING)},stopPlaying:function(){return u(i.STOP_PLAYING)},adResponse:function(e){return u(i.AD_RESPONSE,e)}}),outbound:(0,r.default)({},d,c,{openLink:function(e){return u(n.OPEN_LINK,{url:e})},adRequest:function(){return u(n.AD_REQUEST)}})}};t.postMessage=u},1423:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=["Viewers"];return e.useSmallIcon&&t.push("Viewers--small"),e.includeIcon||t.push("Viewers--noIcon"),l.default.createElement("div",{className:t.join(" "),title:(0,p.getViewers)(e.intl,e.count,!0)},l.default.createElement(c.default,{withText:!e.includeIcon,count:e.count}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o),u=a(2),d=a(1381),c=n(d),p=a(1377);i.propTypes={intl:u.intlShape.isRequired,count:s.default.number.isRequired,includeIcon:s.default.bool,useSmallIcon:s.default.bool},i.defaultProps={useSmallIcon:!1,includeIcon:!0,count:0},t.default=(0,u.injectIntl)(i)},1424:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.min,a=void 0===t?0:t,n=e.max,i=void 0===n?100:n,r=e.value,s=void 0===r?0:r,o=e.onChange,l=void 0===o?function(){return k.warn("onChange not provided")}:o,u=s/i;return h.default.createElement(S,null,h.default.createElement(I,{tabIndex:"-1",type:"range",onClick:(0,E.default)(),min:a,max:i,value:s,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return l(e.target.value)})}),h.default.createElement(R,null,h.default.createElement(A,null,h.default.createElement(O,{percent:u})),h.default.createElement(w,{percent:u})))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),s=n(r),o=(0,s.default)(["\n  position: relative;\n  height: ","px;\n  margin: 0 0 0 2px;\n"],["\n  position: relative;\n  height: ","px;\n  margin: 0 0 0 2px;\n"]),l=(0,s.default)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  box-shadow: 0px 0px 3px ",";\n\n  background: ",";\n  transition: 0.1s "," background;\n\n  transform: translateX(","px);\n  margin-left: -","px;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ","px;\n  height: ","px;\n  border-radius: ","px;\n  box-shadow: 0px 0px 3px ",";\n\n  background: ",";\n  transition: 0.1s "," background;\n\n  transform: translateX(","px);\n  margin-left: -","px;\n"]),u=(0,s.default)(["\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ","px;\n  height: ","px;\n  pointer-events: none;\n\n  display: flex;\n  align-items: center;\n"],["\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ","px;\n  height: ","px;\n  pointer-events: none;\n\n  display: flex;\n  align-items: center;\n"]),d=(0,s.default)(["\n  opacity: 0;\n  margin: 0;\n  padding: 0;\n\n  &:active + "," > "," {\n    background: ",";\n  }\n"],["\n  opacity: 0;\n  margin: 0;\n  padding: 0;\n\n  &:active + "," > "," {\n    background: ",";\n  }\n"]),c=(0,s.default)(["\n  overflow: hidden;\n  width: 100%;\n  height: ","px;\n  border-radius: ","px;\n  background: ",";\n"],["\n  overflow: hidden;\n  width: 100%;\n  height: ","px;\n  border-radius: ","px;\n  background: ",";\n"]),p=(0,s.default)(["\n  width: 100%;\n  height: 100%;\n  transform: translateX(","%);\n  background: ",";\n"],["\n  width: 100%;\n  height: 100%;\n  transform: translateX(","%);\n  background: ",";\n"]);t.default=i;var f=a(0),h=n(f),m=a(50),v=n(m),y=a(85),g=n(y),b=a(549),E=n(b),_=a(9),k=new _.FileDebugger("Slider",!0,!0),T=15,C=129,P=14,M=4,S=v.default.div(o,T),w=v.default.div(l,P,P,P,g.default.Colors.withAlpha(g.default.Colors.Black,.6),g.default.Colors.White,g.default.Animations.EaseOutCubic,function(e){return C*e.percent},function(e){return e.percent*P}),R=v.default.div(u,C,T),I=v.default.input(d,R,w,g.default.Colors.WhiteGray),A=v.default.div(c,M,M,g.default.Colors.withAlpha(g.default.Colors.White,.5)),O=v.default.div(p,function(e){return-1*(1-e.percent)*100},g.default.Colors.White)},1425:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return l.default.createElement("div",{className:"HeartIcon"},l.default.createElement("svg",{viewBox:"0 0 59 51",fill:e.fill},l.default.createElement("path",{className:"shape",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"}),l.default.createElement("path",{fill:"#ffffff",className:"border",d:"M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681, 0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088, 37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008, 46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143, 50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267, 50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936, 49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252, 48.1206415 34.6153918, 47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458, 35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59, 6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546, 6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843, 8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058, 33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424, 45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483, 48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402, 48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022, 48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846, 44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217, 8.28393371 Z"})))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={fill:s.default.string},t.default=i},1427:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ORIGIN=void 0;var i=a(5),r=n(i),s=a(1384),o=n(s),l="init",u="update",d="update_error",c="ad_request",p="ad_response",f="start_playing",h="stop_playing",m="stop_polling",v="open_link",y={INIT:l,STOP_POLLING:m},g=(0,r.default)({},y,o.default,{OPEN_LINK:v,AD_REQUEST:c}),b=(0,r.default)({},y,{UPDATE:u,UPDATE_ERROR:d,START_PLAYING:f,STOP_PLAYING:h,AD_RESPONSE:p});t.ORIGIN="https://twitter.com",t.default={Shared:y,Outbound:g,Inbound:b}},1436:function(e,t,a){function n(e,t){return(o(e)?i:r)(e,s(t,3))}var i=a(301),r=a(550),s=a(135),o=a(28);e.exports=n},1439:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(57),m=n(h),v=(0,m.default)(["\n  width: inherit;\n  height: inherit;\n\n  ","\n"],["\n  width: inherit;\n  height: inherit;\n\n  ","\n"]),y=a(0),g=n(y),b=a(1),E=n(b),_=a(50),k=n(_),T=a(2),C=a(551),P=n(C),M=a(308),S=n(M),w=a(9),R=new w.FileDebugger("ErrorBoundary",!0),I=k.default.div(v,function(e){return e.center?"\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  ":""}),A=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={hasError:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidCatch",value:function(e,t){R.error("componentDidCatch",e,t),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?this.props.global?g.default.createElement(P.default,{title:S.default.error,subtitle:S.default.somethingWrong}):g.default.createElement(I,{className:"ErrorBoundary",center:this.props.center},g.default.createElement(T.FormattedMessage,S.default.somethingWrong)):this.props.children}}]),t}(g.default.Component);A.propTypes={global:E.default.bool,center:E.default.bool,children:E.default.node},t.default=A},1441:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatFunctionalComponent=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(1547),E=n(b),_=a(1550),k=n(_),T=a(27),C=a(528),P=a(18),M=a(30),S=a(297),w=a(72),R=a(19),I=a(1353),A=n(I),O=a(54),N=n(O),L=a(41),D=a(569),U=n(D),F=a(1453),H=n(F),V=a(184),B=a(103),x=n(B),j=a(9),q=n(j),W=a(17),Y="safety",z=new Date("Oct 31 2016 GMT"),G=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.inFlightHearts=[],a.inFlightChats=[],a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.checkChatState(this.props)}},{key:"componentWillUnmount",value:function(){this.reset()}},{key:"componentWillReceiveProps",value:function(e){this.removeResolvedInflightHearts(e),this.checkChatState(e)}},{key:"checkChatState",value:function(e){this.broadcastDidChange(e)&&this.reset();var t=this.isReplayMode(e);e.chat&&e.chat.queuedMessages.hearts.length&&(this.sendUserHearts(e.chat.queuedMessages.hearts,t),e.dispatch((0,w.chatClearMessageQueue)())),e.chat&&e.chat.queuedMessages.chats.length&&(this.sendUserChats(e.chat.queuedMessages.chats,t),e.dispatch((0,w.chatClearMessageQueue)())),this.needsToFetchSafetyServiceToken(e)&&this.fetchSafetyServiceToken(e),this.needsToSetupChatman(e)?this.setupChatman(e):e.chat&&e.chat.inited&&!V.eventManager.hasTimer()?this.setUpTimer(e):e.chat&&e.chat.needsMoreMessages&&!e.chat.fetching&&this.chatNeedsMoreMessages(e)}},{key:"needsToFetchSafetyServiceToken",value:function(e){return e.broadcast&&e.auth.isLoggedIn&&!e.safetyServiceToken.token&&!e.safetyServiceToken.pending}},{key:"fetchSafetyServiceToken",value:function(e){var t=e.api;(0,S.fetchServiceToken)({api:t,service:Y})}},{key:"sendUserHearts",value:function(e,t){var a=this;if(this.chatman){var n=this.inFlightHearts;(0,E.default)(e,n,"uuid").forEach(function(e){a.inFlightHearts.push(e),t?a.props.dispatch((0,w.chatAddNewReplayHeart)(e)):a.chatman.sendLiveHeart.call(a.chatman,e)})}}},{key:"sendUserChats",value:function(e,t){var a=this;if(this.chatman&&!t){var n=this.inFlightChats;(0,E.default)(e,n,"uuid").forEach(function(e){a.inFlightChats.push(e),a.chatman.sendLiveChat.call(a.chatman,e)})}}},{key:"removeResolvedInflightHearts",value:function(e){var t=this,a=e.chat.queuedMessages.hearts;(0,E.default)(this.inFlightHearts,a,"uuid").forEach(function(e){return(0,k.default)(t.inFlightHearts,{uuid:e.uuid})})}},{key:"broadcastDidChange",value:function(e){var t=this.props.broadcast,a=e.broadcast,n=!t&&a,i=t&&a,r=i&&a.id!==t.id,s=i&&a.state!==t.state,o=r||s;return n||o}},{key:"chatmanSessionDidChange",value:function(e){var t=this.props.chat.chatSession,a=e.chat.chatSession;return t.endpoint!==a.endpoint||t.access_token!==a.access_token}},{key:"needsToSetupChatman",value:function(e){return!this.chatman||this.chatmanSessionDidChange(e)||this.broadcastDidChange(e)}},{key:"isReplayMode",value:function(e){var t=e.broadcast;return x.default.isEnabled("LiveTimecodeSharing")&&e.timecodeSharing&&e.timecodeSharing[t.id]||t.isEnded}},{key:"setupChatman",value:function(e){var t={endpoint:e.chat.chatSession.endpoint,access_token:e.chat.chatSession.access_token,broadcastId:e.broadcast.id};if(t.endpoint&&t.access_token&&t.broadcastId){var a=this.isReplayMode(e);this.chatman&&this.chatman.closeSocket();var n=e.broadcast.created_at&&new Date(e.broadcast.created_at)<z;this.chatman=new U.default({videoData:t,broadcastEnded:a,wrappedApi:e.api,useLegacyJoins:n}),this.chatman.init({broadcastHasReplay:a,chatSession:e.chat.chatSession,authUser:e.auth.user,locale:e.locale})}}},{key:"setUpTimer",value:function(e){if(e.isPlayback){var t=this.isReplayMode(e),a=new H.default({mostRecentNTP:e.chat.currentNtp,replay:t,dispatch:e.dispatch,options:{onNewHeartEvents:function(){}}});V.eventManager.setTimer(a),t&&this.chatman.backfillReplay()}}},{key:"reset",value:function(){this.chatman&&(this.chatman.endBroadcast(),this.chatman=null),(0,this.props.dispatch)((0,w.chatReset)(!0))}},{key:"chatNeedsMoreMessages",value:function(e){var t=e.chat,a=t.config;t.backfill?(q.default.log("--------BACKFILL CASE"),this.chatman.backfillReplay(a)):a.cursor&&this.chatman.getHistory(a)}},{key:"render",value:function(){return null}}]),t}(y.default.Component);G.propTypes={api:R.wrappedApiShape.isRequired,auth:M.authPropType,broadcast:T.broadcastPropType.isRequired,chat:C.chatPropType,dispatch:m.default.func.isRequired,isPlayback:m.default.bool,safetyServiceToken:m.default.object,user:P.userPropType,timecodeSharing:m.default.object},t.ChatFunctionalComponent=G,t.default=(0,g.connect)((0,W.compose)(A.default,(0,N.default)(["safetyServiceToken","locale","timecodeSharing"]),L.authStateToProps))((0,R.injectApi)(G))},1443:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return l.default.createElement(c.default,{className:"EmbedCTA",broadcast:e.broadcast,user:e.user,disabled:e.periscopeEnvironment.isDevice(),onClick:e.onClick},e.children)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o),u=a(14),d=a(1370),c=n(d),p=a(26),f=n(p),h=a(27),m=a(18),v=a(133),y=a(136),g=n(y),b=a(20);i.defaultProps={dispatch:function(){},onClick:function(){},periscopeEnvironment:new b.UserAgentDetector},i.propTypes={broadcast:h.broadcastPropType,children:s.default.node,dispatch:s.default.func,player:v.playerPropType,user:m.userPropType,onClick:s.default.func,periscopeEnvironment:s.default.object.isRequired},t.default=(0,f.default)((0,u.connect)(g.default)(i))},1446:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PeriscopeVideoTest=t.BroadcastVideoTest=t.NewPeriscopeVideo=t.PeriscopeVideoWithAd=t.PeriscopeVideo=t.BroadcastVideo=void 0;var i=a(185),r=n(i),s=a(1461),o=n(s),l=a(1464),u=n(l),d=a(1467),c=n(d),p=a(1468),f=n(p),h=a(1462),m=n(h),v=a(1466),y=n(v),g=a(571),b=n(g),E=t.BroadcastVideo=(0,y.default)((0,o.default)((0,b.default)((0,f.default)(r.default)))),_=t.PeriscopeVideo=(0,m.default)((0,u.default)(E)),k=(t.PeriscopeVideoWithAd=(0,c.default)(_),t.NewPeriscopeVideo=(0,u.default)(E),t.BroadcastVideoTest=(0,f.default)(r.default,!0));t.PeriscopeVideoTest=(0,u.default)(k,!0)},1447:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=void 0;var i=a(1531),r=n(i),s=a(1533),o=n(s);t.Easings=o.default,t.default=r.default},1450:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(88),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(513),c=a(586),p=function(){function e(t){(0,o.default)(this,e),this.wrappedApi=t,this.possiblyNeedStopWatching=this.possiblyNeedStopWatching.bind(this),this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),window&&window.addEventListener&&navigator&&navigator.sendBeacon&&window.addEventListener("unload",this.possiblyNeedStopWatching,!1)}return(0,u.default)(e,[{key:"possiblyNeedStopWatching",value:function(){if(this.isWatching){var e=this.wrappedApi.apiService,t=e.host,a=e.store,n=a.getState(),i=this.isReplay?"videoStopWatchingReplay":"videoStopWatchingLive",s=this.wrappedApi.apiService.getEndpoint(i),o=s.path,l={session:this.session};this.isReplay&&(l.n_hearts=n.Chat.replayHearts),navigator.sendBeacon(t+o,(0,r.default)(l))}}},{key:"updateLifeCycleToken",value:function(e){this.lifeCycleToken=e,this.isWatching&&(this.stopWatching(),this.handleStartWatching())}},{key:"updateSession",value:function(e){this.session=e}},{key:"updateIsReplay",value:function(e){this.isReplay=e}},{key:"updateWatchTimeDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.WATCH_TIME_DELAY_DEFAULT;this.watchTimeDelay=1e3*e}},{key:"setStartWatchingTimer",value:function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,this.watchTimeDelay)}},{key:"clearStartWatchingTimer",value:function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)}},{key:"handleStartWatching",value:function(){if(!this.isWatching){this.stopPingWatching();var e=(0,d.videoStartWatching)(this.wrappedApi,this.lifeCycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession);return this.startPingWatching(),this.isWatching=!0,e}}},{key:"startPingWatching",value:function(){var e=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval(function(){e.isWatching?(0,d.videoPingWatching)(e.wrappedApi,e.session,e.isReplay):e.stopPingWatching()},1e3*c.WATCH_TIME_PING_INTERVAL)}},{key:"stopPingWatching",value:function(){clearInterval(this.pingWatchingTimer)}},{key:"startWatching",value:function(){return this.isVideoPreview=!1,this.handleStartWatching()}},{key:"startWatchingPreview",value:function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()}},{key:"update",value:function(e){var t=e.lifeCycleToken,a=e.isReplay,n=e.watchTimeDelay;void 0!==t&&t!==this.lifeCycleToken&&this.updateLifeCycleToken(t),void 0!==a&&a!==this.isReplay&&this.updateIsReplay(a),this.updateWatchTimeDelay(n)}},{key:"stopWatching",value:function(){this.isWatching&&(this.stopPingWatching(),(0,d.videoStopWatching)(this.wrappedApi,this.session,this.isReplay),this.isWatching=!1)}},{key:"destroy",value:function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifeCycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0,window.removeEventListener("unload",this.possiblyNeedStopWatching,!1)}}]),e}();t.default=p},1451:function(e,t,a){"use strict";e.exports=function(){return'\n    <svg width="59px" height="51px" viewBox="0 0 59 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <path class="shape" d="M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"></path>\n      <path class="border" d="M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681,0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088,37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008,46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143,50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267,50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936,49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252,48.1206415 34.6153918,47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458,35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59,6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546,6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843,8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058,33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424,45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483,48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402,48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022,48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846,44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217,8.28393371 Z"></path>\n    </svg>\n  '}},1452:function(e,t,a){"use strict";e.exports=function(){return'\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="56px" height="47px" viewBox="0 0 56 47" version="1.1">\n      <path d="M40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L40.7493875,8 Z" class="camera-fill"/>\n      <path d="M46.0031624,8 L46.0031624,8 L40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L46.0031624,8 Z M46.0031624,6 C51.5290116,6 56,10.4782954 56,16.005662 L56,36.994338 C56,42.521845 51.5256529,47 46.0031624,47 L9.99683765,47 C4.47098837,47 0,42.5217046 0,36.994338 L0,16.005662 C0,10.478155 4.47434713,6 9.99683765,6 C9.99683765,6 13.8449707,5.96875 13.8377754,5.97928921 C15.4002867,2.41301236 18.9562991,0 22.9952753,0 L33.0047247,0 C37.5895478,0 40.5981825,2.4158698 42.1618752,5.98217617 C42.1568604,5.984375 46.0031624,6 46.0031624,6 Z" class="camera-outline" fill="#FFFFFF"/>\n      <path d="M28,36 C34.0751322,36 39,31.0751322 39,25 C39,18.9248678 34.0751322,14 28,14 C21.9248678,14 17,18.9248678 17,25 C17,31.0751322 21.9248678,36 28,36 L28,36 Z M28,38 L28,38 C20.8202983,38 15,32.1797017 15,25 C15,17.8202983 20.8202983,12 28,12 C35.1797017,12 41,17.8202983 41,25 C41,32.1797017 35.1797017,38 28,38 L28,38 Z" class="camera-lens" fill="#FFFFFF"/>\n    </svg>\n  '}},1453:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(16),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(13),c=n(d),p=a(305),f=n(p),h=a(283),m=n(h),v=a(184),y=a(284),g=a(72),b=a(286),E=a(11),_=a(9),k=n(_),T=100,C=50,P=[f.default.USER_CHAT.label,f.default.CHAT.label,f.default.HEART.label,f.default.JOIN.label,f.default.FIRST_SPARKLE.label,f.default.SYSTEM.label,f.default.VIDEO.label],M=function(e){var t=void 0;return(0,c.default)(f.default).forEach(function(a){f.default[a].kind===e&&(t=f.default[a].label)}),t},S="Periscope__DisableEventProcessing",w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.mostRecentNTP,n=t.replay,i=t.dispatch,r=t.options,s=void 0===r?{}:r;(0,o.default)(this,e),this.mostRecentNTP=a,this.replay=n,this.options=s,this.blockMoreMessagesHack=!0,this.dispatch=i,this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],FirstSparkleStack:[],FirstSparkleHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]},this.reset(),this.start()}return(0,u.default)(e,[{key:"start",value:function(){this.processStackInterval()}},{key:"flush",value:function(){this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],FirstSparkleStack:[],FirstSparkleHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]}}},{key:"stop",value:function(){clearTimeout(this.intervalId),this.intervalId=null}},{key:"processEvent",value:function(t,a){e.setEventTime(t,this.replay),e.setUUID(t);var n=M(a),i=this.EventMemory[n+"Stack"],r=e.binarySearch(i,function(a){return e.getEventTime(t)-e.getEventTime(a)})+1;this.EventMemory[n+"Stack"].splice(r,0,t)}},{key:"reset",value:function(){this.mostRecentNTP=0,this.timerTick=0,this.previousNtp=this.mostRecentNTP,this.interpolatedTime=this.previousNtp}},{key:"processStackInterval",value:function(){var e=this;this.processStack(),clearTimeout(this.intervalId),this.intervalId=setTimeout(function(){return e.processStackInterval()},T)}},{key:"processStack",value:function(){var t=this;this.previousNtp===this.mostRecentNTP?(this.timerTick++,this.interpolatedTime=this.mostRecentNTP+this.timerTick*T/1e3):(this.timerTick=0,this.interpolatedTime=this.previousNtp=this.mostRecentNTP);for(var a=function(a){if(!t.intervalId)return k.default.log("no interval id, so breaking"),{v:void 0};if(window[S])return{v:void 0};var n=t.EventMemory[P[a]+"Stack"];if(0===n.length)return"continue";if(P[a]===f.default.SYSTEM.label)return v.eventManager.publish(y.CHAT_SYSTEM_MESSAGES,n),n.forEach(function(e){e.type===m.default.SENTENCE&&t.dispatch((0,g.chatUpdateModeration)(e))}),t.EventMemory[P[a]+"Stack"]=[],"continue";if(P[a]===f.default.JOIN.label)return v.eventManager.publish(y.CHAT_JOINS,n),t.EventMemory[P[a]+"Stack"]=[],"continue";var i=t.EventMemory[P[a]+"Heap"],r=e.binarySearch(n,function(a){return t.interpolatedTime-.2-e.getEventTime(a,!0)});r>0&&n.splice(0,r);var s=e.binarySearch(n,function(a){return t.interpolatedTime-e.getEventTime(a,!0)});if(s<0)return"continue";if(n.splice(0,s+1).forEach(function(e){i.push(e)}),s>=0)switch(P[a]){case f.default.VIDEO.label:if(!t.EventMemory.VideoEventHeap.length)return{v:void 0};t.EventMemory.VideoEventHeap.forEach(function(e){0!==e.webClient_ntpInSeconds&&e.type===m.default.BROADCAST_ENDED&&(0,b.endLiveBroadcast)(t.dispatch,e.broadcastId)}),t.EventMemory.VideoEventHeap=[];break;case f.default.FIRST_SPARKLE.label:if(!t.EventMemory.FirstSparkleHeap.length)return{v:void 0};v.eventManager.publish(y.CHAT_FIRST_SPARKLES,t.EventMemory.FirstSparkleHeap.slice()),t.EventMemory.FirstSparkleHeap=[];break;case f.default.CHAT.label:if(!t.EventMemory.ChatEventHeap.length)return{v:void 0};v.eventManager.publish(y.CHAT_COMMENTS,t.EventMemory.ChatEventHeap.slice()),t.EventMemory.ChatEventHeap=[];break;case f.default.HEART.label:default:if(!t.EventMemory.HeartEventHeap.length)return{v:void 0};var o=t.EventMemory.HeartEventHeap.slice();v.eventManager.publish(y.CHAT_HEARTS,o),t.options.onNewHeartEvents&&t.options.onNewHeartEvents(o),t.EventMemory.HeartEventHeap=[]}},n=0;n<P.length;n++){var i=a(n);switch(i){case"continue":continue;default:if("object"===(void 0===i?"undefined":(0,r.default)(i)))return i.v}}for(var s=0,n=0;n<P.length;n++){var o=this.EventMemory[P[n]+"Stack"];s+=Number(o.length)}this.replay&&!this.blockMoreMessagesHack&&s<C&&this.dispatch((0,g.chatReplayNeedsMoreMessages)())}}],[{key:"binarySearch",value:function(e,t){for(var a=0,n=e.length-1,i=void 0,r=void 0,s=void 0;a<=n;){if(i=Math.floor((a+n)/2),r=t(e[i]),void 0!==s&&0!==r)return s;r>=0?a=i+1:n=i-1,0===r&&(s=i)}return void 0!==s||r>0?i:i-1}},{key:"setEventTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t&&!!e.ntpForBroadcasterFrame,n=a?e.ntpForBroadcasterFrame:e.ntpForLiveFrame||0;e.webClient_ntpInSeconds=parseFloat(n/4294967296)}},{key:"getEventTime",value:function(e){return e&&e.webClient_ntpInSeconds}},{key:"setUUID",value:function(e){e.uuid||(e.uuid=(0,E.guid)())}},{key:"sendEndBroadcast",value:function(){}}]),e}();t.default=w},1454:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return s.default.createElement(u.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),s=n(r),o=a(14),l=a(1470),u=n(l);t.default=(0,o.connect)()(i)},1455:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),r=n(i),s=a(0),o=n(s),l=a(14),u=a(1416),d=a(1483),c=n(d),p=a(1358),f=a(17),h=function(e){return o.default.createElement(c.default,e)};h.defaultProps={drawer:{visible:!1,component:null,componentProps:null,options:{}}},h.propTypes={dispatch:r.default.func.isRequired,drawer:p.drawerPropType.isRequired},t.default=(0,l.connect)((0,f.compose)(u.drawerStateToProps),u.drawerDispatchToProps)(h)},1456:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(41),E=a(1353),_=a(17),k=a(519),T=n(k),C=a(30),P=a(72),M=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.clickListener=null,a.sendHeart=a.sendHeart.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.clickListener=this.props.sharedEventListener("click",this.sendHeart)}},{key:"componentWillUnmount",value:function(){(0,T.default)(this.clickListener,"remove")}},{key:"sendHeart",value:function(){var e=this.props,t=e.auth,a=e.chat,n=e.dispatch;a&&a.paused||t.isLoggedIn&&n((0,P.chatAddNewUserHeart)({authUser:t.user}))}},{key:"render",value:function(){return null}}]),t}(y.default.Component);M.propTypes={sharedEventListener:m.default.func.isRequired,dispatch:m.default.func.isRequired,auth:C.authPropType,chat:E.chatSessionPropType},t.default=(0,g.connect)((0,_.compose)(b.authStateToProps,E.chatSessionMapper))(M)},1457:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.modal,a=e.active,n=a||t.isShareOverlayVisible;return l.default.createElement(f.default,{active:n})}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o),u=a(14),d=a(514),c=a(515),p=a(1521),f=n(p);i.propTypes={modal:c.modalPropType.isRequired,active:s.default.bool},i.defaultProps={modal:c.modalDefaultProps},t.default=(0,u.connect)(d.modalStateToProps)(i)},1458:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(184),E=a(284),_=a(142),k=a(1417),T=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.newLeaveSub=b.eventManager.subscribe(E.CHAT_LEAVE,function(t,a){!a.user_id||!e.props.following||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterRemoveUser(t,a)}),this.newJoinSub=b.eventManager.subscribe(E.CHAT_JOIN,function(t,a){!a.user_id||!e.props.following||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterAddUser(t,a)})}},{key:"componentWillUnmount",value:function(){this.newRosterSub&&this.newRosterSub.remove(),this.newLeaveSub&&this.newLeaveSub.remove(),this.newJoinSub&&this.newJoinSub.remove(),this.newRosterSub=null,this.newLeaveSub=null,this.newJoinSub=null}},{key:"render",value:function(){return null}}]),t}(y.default.Component);T.propTypes={dispatchRosterReceive:m.default.func.isRequired,dispatchRosterRemoveUser:m.default.func.isRequired,dispatchRosterAddUser:m.default.func.isRequired,following:m.default.arrayOf(m.default.string)},t.default=(0,g.connect)(_.authFollowingMapper,k.rosterDispatchToProps)(T)},1459:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayerFunctionalComponent=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(131),E=a(11),_=a(54),k=n(_),T=a(27),C=a(108),P=a(102),M=a(286),S=a(26),w=n(S),R=a(194),I=n(R),A=a(189),O=n(A),N=a(293),L=n(N),D=a(9),U=new D.FileDebugger("VideoPlayerFunctional",!0),F=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.updatePlayerMode(this.props),this.updatePlayerAudio()}},{key:"componentWillUnmount",value:function(){(0,M.resetVideoState)(this.props.dispatch)}},{key:"componentWillReceiveProps",value:function(e){this.props.broadcast.id!==e.broadcast.id?((0,M.resetVideoState)(e.dispatch),this.updatePlayerAudio()):this.updatePlayerMode(e),e.player.isPlayback&&!this.props.player.isPlayback&&(U.debug("startedPlayback"),this.updatePlayerAudio())}},{key:"updatePlayerMode",value:function(e){if(!this.props.broadcast.isEnded&&e.broadcast.isEnded)return void(0,M.endLiveBroadcast)(this.props.dispatch,this.props.broadcast.id);e.broadcast.isRunning&&(0,E.playerFormatIsApp)(e.playerFormat)&&e.periscopeEnvironment.hasInlineAutoplayVideo()&&(e.player.isVideoPresentation||e.dispatch((0,P.playerPresentation)(O.default.VIDEO))),e.broadcast.isRunning?e.player.isLiveMode||e.dispatch((0,P.playerMode)(I.default.LIVE)):e.player.isReplayMode||e.dispatch((0,P.playerMode)(I.default.REPLAY))}},{key:"updatePlayerAudio",value:function(){var e=this.props.settings.muted;switch(this.props.playerFormat){case L.default.EMBED:this.props.dispatchAudioOff();break;case L.default.APP:default:this.props.periscopeEnvironment.hasMutedAutoplay()||e||this.props.dispatchAudioOn()}}},{key:"render",value:function(){return null}}]),t}(y.default.Component);F.defaultProps={playerFormat:L.default.APP,settings:C.settingsPropDefault},F.propTypes={dispatch:m.default.func.isRequired,dispatchAudioOn:m.default.func.isRequired,dispatchAudioOff:m.default.func.isRequired,playerFormat:m.default.oneOf(N.playerFormatValues).isRequired,broadcast:T.broadcastPropType.isRequired,player:m.default.object.isRequired,settings:C.settingsPropType,periscopeEnvironment:m.default.object.isRequired},t.VideoPlayerFunctionalComponent=F,t.default=(0,w.default)((0,g.connect)((0,k.default)(["settings"]),b.videoPlayerDispatchMapper)(F))},1461:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return Math.min(Math.max(t,e),a)}function r(e){var t=function(t){function a(e){(0,f.default)(this,a);var t=(0,y.default)(this,(a.__proto__||(0,c.default)(a)).call(this,e));return(0,w.reconciler)(t),t.listeners={},t.isPanning=!1,t.startX=0,t.startY=0,t.startT=0,t.velocityX=0,t.velocityY=0,t.pitch=0,t.yaw=Y,t.keyStates={},t.setVideoRef=t.setVideoRef.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onSourceUpdate=t.onSourceUpdate.bind(t),t.handle360Inputs=t.handle360Inputs.bind(t),t.handleMouseDown=t.handleMouseDown.bind(t),t.handleMouseUp=t.handleMouseUp.bind(t),t.handleMouseMove=t.handleMouseMove.bind(t),t.handleTouchStart=t.handleTouchStart.bind(t),t.handleTouchEnd=t.handleTouchEnd.bind(t),t.handleTouchCancel=t.handleTouchCancel.bind(t),t.handleTouchMove=t.handleTouchMove.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.handleKeyUp=t.handleKeyUp.bind(t),t}return(0,b.default)(a,t),(0,m.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,w.reconciler)(this,e)}},{key:"componentWillUnmount",value:function(){this.remove360KeyboardListeners()}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"init",value:function(){this.remove360KeyboardListeners(),this.videoRef.is360()&&(this.videoRef.setVRFOV(W),this.add360InputListeners())}},{key:"onSourceUpdate",value:function(){this.init()}},{key:"onTimeUpdate",value:function(){this.videoRef.is360()&&this.videoRef.setVRFOV(W)}},{key:"handleKeyboardInputs",value:function(){(this.keyStates[I.default.I]||this.keyStates[I.default.UP_ARROW])&&(this.pitch=i(this.pitch+j,-q,q)),(this.keyStates[I.default.J]||this.keyStates[I.default.LEFT_ARROW])&&(this.yaw+=j),(this.keyStates[I.default.K]||this.keyStates[I.default.DOWN_ARROW])&&(this.pitch=i(this.pitch-j,-q,q)),(this.keyStates[I.default.L]||this.keyStates[I.default.RIGHT_ARROW])&&(this.yaw-=j)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case I.default.I:case I.default.J:case I.default.K:case I.default.L:case I.default.LEFT_ARROW:case I.default.UP_ARROW:case I.default.DOWN_ARROW:case I.default.RIGHT_ARROW:this.keyStates[e.keyCode]=!0}}},{key:"handleKeyUp",value:function(e){delete this.keyStates[e.keyCode]}},{key:"addListener",value:function(e,t){var a=this.props.sharedEventListener;a||D.error("sharedEventListener not provided"),this.listeners[e]=a(e,t)}},{key:"add360InputListeners",value:function(){this.props.touchEnabled&&(this.addListener("mousedown",this.handleMouseDown),this.addListener("mouseup",this.handleMouseUp),this.addListener("mousemove",this.handleMouseMove),this.addListener("touchstart",this.handleTouchStart),this.addListener("touchend",this.handleTouchEnd),this.addListener("touchcancel",this.handleTouchCancel),this.addListener("touchmove",this.handleTouchMove)),this.props.keyboardEnabled&&(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)),requestAnimationFrame(this.handle360Inputs)}},{key:"remove360KeyboardListeners",value:function(){(0,S.default)(this.listeners,function(e){return(0,O.default)(e,"remove")}),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"handle360Inputs",value:function(){if(this.videoRef){this.props.touchEnabled&&this.handleFlick(),this.props.keyboardEnabled&&this.handleKeyboardInputs();var e={};e.yaw=this.yaw*F,e.pitch=this.pitch*F,e.roll=this.roll*F,(0,u.default)(e).forEach(function(t){isNaN(e[t])&&(e[t]=0)}),this.videoRef.setVROrientation(e),requestAnimationFrame(this.handle360Inputs)}}},{key:"handleMouseDown",value:function(e){this.isPanning=!0,this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}},{key:"handleMouseUp",value:function(){this.isPanning=!1,event.preventDefault(),event.stopPropagation()}},{key:"handlePan",value:function(e,t){this.yaw+=e,this.pitch=i(this.pitch+t,-q,q);var a=Date.now()-this.startT;a>0&&(this.velocityX=e/a*x,this.velocityY=t/a*x)}},{key:"handleFlick",value:function(){this.isPanning||(this.yaw+=this.velocityX,this.pitch=i(this.pitch+this.velocityY,-q,q),this.velocityX*=B,this.velocityY*=B)}},{key:"handleMouseMove",value:function(e){if(this.isPanning){var t=(e.offsetX-this.startX)*V,a=(e.offsetY-this.startY)*V;this.handlePan(t,a),this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}}},{key:"handleTouchStart",value:function(e){this.isPanning=!0,this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation()}},{key:"handleTouchEnd",value:function(e){this.isPanning=!1,event.stopPropagation(),e.preventDefault()}},{key:"handleTouchCancel",value:function(e){this.isPanning=!1,this.event.stopPropagation(),e.preventDefault()}},{key:"handleTouchMove",value:function(e){if(this.isPanning){var t=(e.touches[0].pageX-this.startX)*V,a=(e.touches[0].pageY-this.startY)*V;this.handlePan(t,a),this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation(),e.preventDefault()}}},{key:"render",value:function(){return T.default.createElement(e,(0,o.default)({},this.props,{setVideoRef:this.setVideoRef,onTimeUpdate:this.onTimeUpdate,onSourceUpdate:this.onSourceUpdate}))}}]),a}(T.default.Component);return(0,P.default)(t,e),t.displayName="With360("+(0,N.getDisplayName)(e)+")",t.WrappedComponent=e,t.propTypes={touchEnabled:_.default.bool,keyboardEnabled:_.default.bool,sharedEventListener:_.default.func.isRequired},t.defaultProps={touchEnabled:!0,keyboardEnabled:!0},t}Object.defineProperty(t,"__esModule",{value:!0}),t.YAW_INITIAL=t.VERTICAL_FOV=t.PITCH_VIEW_LIMIT=t.KEYBOARD_TRANSLATION_FACTOR=t.RAD2DEG=void 0;var s=a(5),o=n(s),l=a(13),u=n(l),d=a(6),c=n(d),p=a(3),f=n(p),h=a(4),m=n(h),v=a(8),y=n(v),g=a(7),b=n(g);t.default=r;var E=a(1),_=n(E),k=a(0),T=n(k),C=a(56),P=n(C),M=a(1548),S=n(M),w=a(185),R=a(134),I=n(R),A=a(519),O=n(A),N=a(55),L=a(9),D=new L.FileDebugger("with360",!0),U=Math.PI/2,F=t.RAD2DEG=180/Math.PI,H=.9,V=.0025*U,B=.85,x=5,j=t.KEYBOARD_TRANSLATION_FACTOR=.016*U,q=t.PITCH_VIEW_LIMIT=.7*U,W=t.VERTICAL_FOV=2*F*Math.atan2(Math.tan(U/2),H),Y=t.YAW_INITIAL=Math.PI},1462:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,M.reconciler)(t),t.onInitialized=t.onInitialized.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onEnded=t.onEnded.bind(t),t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,M.reconciler)(this,e)}},{key:"onInitialized",value:function(){P.default.onAdStateUpdate({isAdPlaying:this.props.isAdPlaying})}},{key:"onTimeUpdate",value:function(e){var t=e.currentTime,a=e.played,n=e.duration;P.default.onTimeUpdate({currentTime:t,played:a,duration:n})}},{key:"onEnded",value:function(){P.default.onEnded(),P.default.onAdStateUpdate({isAdPlaying:this.props.isAdPlaying})}},{key:"render",value:function(){var t=this;return E.default.createElement(e,(0,s.default)({},this.props,{videoRef:function(e){t.videoRef=e},onInitialized:this.onInitialized,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded}))}}]),a}(E.default.Component);return(0,k.default)(t,e),t.displayName="WithCardPlayback("+(0,T.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={isAdPlaying:!1},t.propTypes={isAdPlaying:g.default.bool.isRequired},t}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m);t.default=i;var y=a(1),g=n(y),b=a(0),E=n(b),_=a(56),k=n(_),T=a(55),C=a(1354),P=n(C),M=a(185)},1463:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.withRef,a=e.cursor,n=e.disabled,r=e.is360,s=e.hideCursor,o=(0,f.default)({},i.style);return n&&(o.pointerEvents="none"),a&&(o.cursor="pointer"),r&&(o.cursor="move"),s&&(o.cursor="none"),T.default.createElement("div",{ref:t,className:"EventHandler-Layer",style:o})}function r(e){var t=function(t){function a(e){(0,y.default)(this,a);var t=(0,u.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e));return t.eventHandlerLayer=null,t.sharedEventHandler=new N,t}return(0,c.default)(a,t),(0,b.default)(a,[{key:"componentDidMount",value:function(){if(!this.eventHandlerLayer)throw new Error("eventHandlerLayer does not exist");this.sharedEventHandler.init(this.eventHandlerLayer)}},{key:"componentWillUnmount",value:function(){this.sharedEventHandler.deinit()}},{key:"render",value:function(){var t=this;return T.default.createElement(S.default,null,T.default.createElement(e,(0,f.default)({},this.props,{sharedEventListener:this.sharedEventHandler.listen})),T.default.createElement(i,{withRef:function(e){t.eventHandlerLayer=e},cursor:this.sharedEventHandler.hasClickEvent()}))}}]),a}(T.default.Component);(0,P.default)(t,e);var a=(0,w.getDisplayName)(e);return t.displayName="WithEventHandler("+a+")",t.WrappedComponent=e,t.defaultProps={},t.propTypes={},t}Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;var s=a(6),o=n(s),l=a(8),u=n(l),d=a(7),c=n(d),p=a(5),f=n(p),h=a(13),m=n(h),v=a(3),y=n(v),g=a(4),b=n(g);t.EventHandlerLayer=i,t.default=r;var E=a(1),_=n(E),k=a(0),T=n(k),C=a(56),P=n(C),M=a(1364),S=n(M),w=a(55),R=a(9),I=a(288),A=n(I),O=new R.FileDebugger("withEventHandler",!0),N=t.EventHandler=function(){function e(){var t=this;(0,y.default)(this,e),this.node=null,this.handlers={},this.getNode=function(){return t.node},this.handleEvent=function(e){var a=t.handlers[e.type];if(!a)throw new Error(e.type+" event not registered");a.forEach(function(t){t&&t(e)})},this.listen=function(e,a){(0,A.default)(t.node,"EventHandler node unavailable"),O.debug("EventHandler.listen",e),t._ensureEvent(e);var n=t.handlers[e].push(a)-1;return{remove:function(){delete t.handlers[e][n]}}}}return(0,b.default)(e,[{key:"_ensureEvent",value:function(e){(0,A.default)(this.node,"EventHandler node unavailable"),O.debug("EventHandler._ensureEvent",e,this.handlers),this.handlers[e]||(this.handlers[e]=[]),this.node&&this.node.removeEventListener(e,this.handleEvent),this.node&&this.node.addEventListener(e,this.handleEvent)}},{key:"init",value:function(e){var t=this;O.debug("EventHandler.init"),this.node=e,this.node&&(0,m.default)(this.handlers).forEach(function(e){t._ensureEvent(e)})}},{key:"deinit",value:function(){var e=this;O.debug("EventHandler.deinit"),(0,m.default)(this.handlers).forEach(function(t){e.node&&e.node.removeEventListener(t,e.handleEvent)})}},{key:"hasClickEvent",value:function(){var e=this.handlers.click;if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++){if("function"==typeof e[t])return!0}return!1}}]),e}();i.style={position:"absolute",width:"100%",height:"100%",top:0,left:0},i.propTypes={withRef:_.default.func,disabled:_.default.bool,cursor:_.default.bool,is360:_.default.bool,hideCursor:_.default.bool}},1464:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,V.reconciler)(t),t.propsHaveChanged=J.default.propsHaveChanged(),t.setVideoRef=t.setVideoRef.bind(t),t.onMetadata=t.onMetadata.bind(t),t.onInitialized=t.onInitialized.bind(t),t.onCanPlay=t.onCanPlay.bind(t),t.onPlaying=t.onPlaying.bind(t),t.onPlay=t.onPlay.bind(t),t.onPause=t.onPause.bind(t),t.onSeeking=t.onSeeking.bind(t),t.onSeeked=(0,S.default)(t.onSeeked.bind(t),1e3),t.onStalled=t.onStalled.bind(t),t.onTimeUpdate=t.onTimeUpdate.bind(t),t.onEnded=t.onEnded.bind(t),t.onError=t.onError.bind(t),t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,V.reconciler)(this,e),this.controlSeeking(e),this.controlPlayback(e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.stalledTimer)}},{key:"mutedChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.muted!==e.player.muted}},{key:"orientationChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.orientation!==e.player.orientation}},{key:"playerModeChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerMode!==e.player.playerMode}},{key:"playerStateChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerState!==e.player.playerState}},{key:"isReplayMode",value:function(){return!(!this.props||!this.props.player)&&this.props.player.isReplayMode}},{key:"windowDimensionsChanged",value:function(e){return this.propsHaveChanged(["windowWidth","windowHeight"],e)}},{key:"videoDimensionsChanged",value:function(e){return this.propsHaveChanged(["playerWidth","playerHeight"],e)}},{key:"srcChanged",value:function(e){return this.propsHaveChanged("url",e)}},{key:"onMetadata",value:function(e){this.props.dispatch((0,q.playerMetadata)(e))}},{key:"onInitialized",value:function(){this.props.periscopeEnvironment.hasInlineAutoplayVideo()&&this.props.dispatch((0,q.playerState)(F.default.CONNECTING))}},{key:"onCanPlay",value:function(){this.props.dispatch((0,q.playerStarted)(!0))}},{key:"onPlay",value:function(){var e=this.props,t=e.dispatch,a=e.player;t((0,Y.chatResume)()),this.props.periscopeEnvironment.hasInlineVideo()||a.isPlaying||t((0,q.playerState)(F.default.PLAYING))}},{key:"onPlaying",value:function(){var e=this.props,t=e.dispatch;e.player.isPlaying||(this.isReplayMode()&&t((0,W.replaySeekReset)()),this.props.dispatch((0,q.playerState)(F.default.PLAYING)))}},{key:"onPause",value:function(){var e=this.props,t=e.dispatch,a=e.player;t((0,Y.chatPause)()),this.props.periscopeEnvironment.hasInlineVideo()||a.isPaused||t((0,q.playerState)(F.default.PAUSED))}},{key:"onSeeking",value:function(){this.isReplayMode()&&this.onStalled()}},{key:"onSeeked",value:function(){var e=this.props,t=e.dispatch;e.player.isStopped||(t((0,q.playerState)(F.default.PLAYING)),this.isReplayMode()&&t((0,W.replaySeekReset)()))}},{key:"onStalled",value:function(){var e=this.props,t=e.dispatch,a=e.player;a&&(a.isStopped||a.isStalled||(t((0,q.playerState)(F.default.STALLED)),t((0,Y.chatPause)()),this.startStalledTimer()))}},{key:"startStalledTimer",value:function(){var e=this;clearTimeout(this.stalledTimer),this.stalledTimer=setTimeout(function(){return e.handleStall()},te)}},{key:"handleStall",value:function(){var e=this;clearTimeout(this.stalledTimer);var t=this.props,a=t.player,n=t.isReplay,i=t.disableStallingRecovery,r=t.dispatch;if(!i&&a&&a.isStalled){if(n)return r((0,z.broadcastForceRequest)()),void this.startStalledTimer();var s=this.props.api;(0,I.fetchBroadcast)(s,this.props.broadcast.id).then(function(e){if(e=(0,A.broadcastWithAccessors)(e.broadcast),e.isEnded)return ee.warn("stalledTimer","broadcast ended"),(0,G.endLiveBroadcast)(r,e.id),!0}).catch(function(e){ee.warn("stalledTimer","broadcast fetch err",e)}).then(function(t){t?ee.warn("stalledTimer","done"):(ee.warn("stalledTimer","continue stall"),e.startStalledTimer())})}}},{key:"onTimeUpdate",value:function(e){var t=this.props.dispatch,a=e.currentTime,n=e.duration,i=0===this.props.replay.elapsed||a-this.props.replay.elapsed>.5;this.props.player.isPlayback&&i&&t((0,W.replayPlaybackTime)(a,n))}},{key:"onEnded",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.broadcast,i=t.timecodeShare;i&&i.isLive?(ee.debug("onEnded","timecodeShare","fetchBroadcast"),a((0,Y.chatPause)()),a((0,q.playerState)(F.default.PAUSED)),(0,I.fetchBroadcast)(this.props.api,n.id).then(function(e){return(0,A.broadcastWithAccessors)(e.broadcast)}).catch(function(e){ee.debug("onEnded","timecodeShare","broadcast","err",e)}).then(function(t){t&&t.isEnded?(0,j.setTimecodeShare)(a,n.id,e.props.replay.elapsed):a((0,j.timecodeShareBroadcastRemove)(n.id)),e.props.dispatch(T.routerActions.replace((0,X.removeQueryParamFromLocation)({location:e.props.router.getCurrentLocation(),name:H.TIMECODE})))})):n.isEnded?(0,G.resetVideoState)(a):(0,G.endLiveBroadcast)(a,n.id)}},{key:"onError",value:function(){this.props.dispatch((0,q.playerState)(F.default.UNAVAILABLE))}},{key:"controlSeeking",value:function(e){if(this.videoRef&&e.replay){var t=e.replay.requestedPosition;"number"==typeof t&&e.player.isReplayMode&&(this.videoRef.setTime(t),this.props.dispatch((0,W.replaySeekReset)()))}}},{key:"controlPlayback",value:function(e){if(e.player){var t=e.player.playerState;if(this.props.player.playerState!==t)switch(t){case F.default.PAUSED:this.videoRef&&this.videoRef.pause(),e.dispatch((0,Y.chatPause)());break;case F.default.STALLED:e.dispatch((0,Y.chatPause)());break;case F.default.PLAYING:this.videoRef&&this.videoRef.play(),e.dispatch((0,Y.chatResume)())}}}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"render",value:function(){if(this.props.withPlayerDisabled)return E.default.createElement(e,(0,s.default)({},this.props,{setVideoRef:this.setVideoRef,onSetupCapture:this.onSetupCapture}));var t=this.props,a=t.player,n=t.video,i=a&&a.playerState===F.default.PAUSED,r=a&&a.muted,o=a&&a.orientation||0,l=this.props.isReplay||a&&a.isReplayMode,u=this.props.timecodeShare&&this.props.timecodeShare.timecode,d=n&&n.needsCredentials;return E.default.createElement(e,(0,s.default)({},this.props,{setVideoRef:this.setVideoRef,needsCredentials:d,isReplay:l,autoplay:!0,muted:r,paused:i,orientation:o,requestedTimecode:u,onMetadata:this.onMetadata,onSetupCapture:this.onSetupCapture,onInitialized:this.onInitialized,onCanPlay:this.onCanPlay,onPlaying:this.onPlaying,onPlay:this.onPlay,onPause:this.onPause,onSeeking:this.onSeeking,onSeeked:this.onSeeked,onStalled:this.onStalled,onTimeUpdate:this.onTimeUpdate,onEnded:this.onEnded,onError:this.onError}))}}]),a}(E.default.Component);return(0,P.default)(a,e),a.displayName="WithPlayer("+(0,Q.getDisplayName)(e)+")",a.WrappedComponent=e,a.defaultProps={disableStallingRecovery:!1,player:{},periscopeEnvironment:new Z.UserAgentDetector},a.propTypes={isReplay:g.default.bool,withPlayerDisabled:g.default.bool,disableStallingRecovery:g.default.bool.isRequired,video:L.videoPropType.isRequired,broadcast:I.broadcastPropType.isRequired,api:D.wrappedApiShape.isRequired,timecodeShare:g.default.object,dispatch:g.default.func,replay:N.replayPropType,player:O.playerPropType.isRequired,periscopeEnvironment:g.default.object.isRequired,router:g.default.object},t?a:(0,k.withRouter)((0,D.injectApi)((0,x.default)((0,_.connect)((0,X.compose)(w.replayFullMapper,R.videoPlayerStateMapper),void 0,void 0,{withRef:!0})(a))))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m);t.default=i;var y=a(1),g=n(y),b=a(0),E=n(b),_=a(14),k=a(33),T=a(42),C=a(56),P=n(C),M=a(521),S=n(M),w=a(1352),R=a(131),I=a(27),A=a(138),O=a(133),N=a(282),L=a(513),D=a(19),U=a(105),F=n(U),H=a(24),V=a(185),B=a(26),x=n(B),j=a(529),q=a(102),W=a(292),Y=a(72),z=a(139),G=a(286),K=a(11),J=n(K),Q=a(55),X=a(17),Z=a(20),$=a(9),ee=new $.FileDebugger("withPlayer",!0),te=5e3},1465:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return M.debug("setTime",e),function(){return{time:e}}}function r(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t.state={time:0},t.timerRAF=null,t.runTimer=function(){var e=t.props.getTime,a=e(),n=a.elapsed;t.state.time!==n&&t.setState(i(n)),t.props.disabled||(t.timerRAF=requestAnimationFrame(t.runTimer))},t.stopTimer=function(){return cancelAnimationFrame(t.timerRAF)},t}return(0,y.default)(a,t),(0,f.default)(a,[{key:"componentDidMount",value:function(){this.runTimer()}},{key:"componentWillReceiveProps",value:function(e){var t=e.disabled&&!this.props.disabled,a=!e.disabled&&this.props.disabled;t?this.stopTimer():a&&this.runTimer()}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return _.default.createElement(e,(0,o.default)({},this.props,{currentTimecode:this.state.time}))}}]),a}(_.default.Component);return(0,T.default)(t,e),t.displayName="WithSmoothTime("+(0,C.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={getTime:function(){return M.warn("getTime not provided")}},t.propTypes={disabled:b.default.bool,getTime:b.default.func},t}Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v);t.default=r;var g=a(1),b=n(g),E=a(0),_=n(E),k=a(56),T=n(k),C=a(55),P=a(9),M=new P.FileDebugger("withSmoothTime",!1)},1466:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return(0,_.reconciler)(t),t.setStalledTimeout=null,t.state={stalled:!1},t.onPlayerStateChange=function(e){if(e===P.default.STALLED)return t.shouldSetStalled(!0);t.shouldSetStalled(!1)},t.onSeeking=function(){return t.shouldSetStalled(!0)},t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentWillReceiveProps",value:function(e){(0,_.reconciler)(this,e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.setStalledTimeout)}},{key:"shouldSetStalled",value:function(e){var t=this;clearTimeout(this.setStalledTimeout),e!==this.state.stalled&&(e?(w.debug("stalling..."),this.setState(I(e))):this.setStalledTimeout=setTimeout(function(){w.debug("...stalled done"),t.setState(I(e))},R))}},{key:"render",value:function(){return g.default.createElement("div",null,g.default.createElement(e,(0,s.default)({},this.props,{onPlayerStateChange:this.onPlayerStateChange})),g.default.createElement(T.default,{isStalled:this.state.stalled}))}}]),a}(g.default.Component);return(0,E.default)(t,e),t.displayName="WithStallOverlay("+(0,M.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={},t.propTypes={},t}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m);t.default=i;var y=a(0),g=n(y),b=a(56),E=n(b),_=a(185),k=a(1489),T=n(k),C=a(105),P=n(C),M=a(55),S=a(9),w=new S.FileDebugger("withStallOverlay",!1),R=250,I=function(e){return{stalled:e}}},1467:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return{update:e.update+1}}function r(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return(0,P.reconciler)(t),t.playbackTimer=null,t.mutedOverride=null,t.state={update:0},t.setVideoRef=t.setVideoRef.bind(t),t.runPlaybackTimer=t.runPlaybackTimer.bind(t),t.onEnded=t.onEnded.bind(t),t.handleSkip=t.handleSkip.bind(t),t.handleClick=t.handleClick.bind(t),t.handleMuteClick=t.handleMuteClick.bind(t),t}return(0,y.default)(a,t),(0,f.default)(a,[{key:"componentDidMount",value:function(){this.runPlaybackTimer()}},{key:"componentWillUnmount",value:function(){this.endPlaybackTimer()}},{key:"componentWillReceiveProps",value:function(e){(0,P.reconciler)(this,e)}},{key:"runPlaybackTimer",value:function(){this.setState(i),this.playbackTimer=requestAnimationFrame(this.runPlaybackTimer)}},{key:"endPlaybackTimer",value:function(){cancelAnimationFrame(this.playbackTimer)}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"onEnded",value:function(){this.endPlaybackTimer()}},{key:"handleClick",value:function(){this.videoRef&&(this.videoRef.isPaused()?(U.default.playRequest(),this.runPlaybackTimer(),this.videoRef.play()):(U.default.pauseRequest(),this.endPlaybackTimer(),this.videoRef.pause()),this.setState(i))}},{key:"handleSkip",value:function(e){e.stopPropagation(),U.default.adSkipRequest(),this.endPlaybackTimer(),this.props.onEnded()}},{key:"handleMuteClick",value:function(e){if(e.stopPropagation(),this.videoRef){var t=this.videoRef.isMuted();t?U.default.unmuteRequest():U.default.muteRequest(),this.videoRef.mute(!t),this.mutedOverride=!t,this.setState(i)}}},{key:"getAdCurrentTime",value:function(){return this.videoRef?this.videoRef.getTime().elapsed:H}},{key:"getAdDuration",value:function(){return this.videoRef?this.videoRef.getTime().duration:H}},{key:"renderTimeLeft",value:function(){var e=this.getAdCurrentTime(),t=this.getAdDuration();return(0,F.getFormattedTime)(Math.round(t-e),t)}},{key:"renderElapsed",value:function(){return(0,F.getFormattedTime)(Math.round(this.getAdCurrentTime()),this.getAdDuration())}},{key:"renderDuration",value:function(){var e=this.getAdDuration();return(0,F.getFormattedTime)(Math.round(e),e)}},{key:"renderPlaybackIcon",value:function(){return this.videoRef?_.default.createElement("div",{className:"TwitterAdUI-playbackIcon"},_.default.createElement(R.default,{paused:this.videoRef.isPaused()})):null}},{key:"renderMuteIcon",value:function(){return this.videoRef?_.default.createElement("div",{className:"TwitterAdUI-mutedIcon",onClick:this.handleMuteClick},_.default.createElement(S.default,{muted:this.videoRef.isMuted()})):null}},{key:"renderAdCountdown",value:function(){return _.default.createElement("div",{className:"TwitterAdUI-time TwitterAdUI-button"},_.default.createElement(C.FormattedMessage,N.default.advertisement)," ","·"," ",this.renderTimeLeft()," ",_.default.createElement("div",{className:"TwitterAdUI-audioIcon"}))}},{key:"renderSkipButton",value:function(e){if(!(this.getAdDuration()<V)){var t=["TwitterAdUI-skip","TwitterAdUI-rowGroup"];return e&&t.push("TwitterAdUI-button"),[_.default.createElement("div",{className:"TwitterAdUI-controlSpacer"}),_.default.createElement("div",{className:t.join(" "),onClick:this.handleSkip},_.default.createElement(C.FormattedMessage,N.default.skip),_.default.createElement(A.default,null))]}}},{key:"renderControls",value:function(){return _.default.createElement("div",{className:"TwitterAdUI-controls"},_.default.createElement("div",{className:"TwitterAdUI-controlsLeft TwitterAdUI-rowGroup"},_.default.createElement("div",{className:"TwitterAdUI-rowGroup"},this.renderPlaybackIcon(),_.default.createElement(C.FormattedMessage,N.default.advertisement))),_.default.createElement("div",{className:"TwitterAdUI-controlsRight TwitterAdUI-rowGroup"},_.default.createElement("div",{className:"TwitterAdUI-timer"},this.renderElapsed()," / ",this.renderDuration()),this.renderMuteIcon(),this.renderSkipButton(!1)))}},{key:"possiblyRenderAdUI",value:function(){if(this.props.isAdPlaying){var e=["TwitterAdUI-fader","TwitterAdUI-paddedContainer"],t=["TwitterAdUI-container"].concat(e).join(" "),a=["TwitterAdUI-activeBackground"].concat(e).join(" ");return _.default.createElement("div",{className:"TwitterAdUI",onClick:this.handleClick},_.default.createElement("div",{className:t},this.renderAdCountdown(),this.renderSkipButton(!0)),_.default.createElement("div",{className:a},this.renderControls()))}}},{key:"render",value:function(){var t="boolean"==typeof this.mutedOverride?this.mutedOverride:this.props.muted;return _.default.createElement("div",null,_.default.createElement(e,(0,o.default)({},this.props,{muted:t,onEnded:this.onEnded,setVideoRef:this.setVideoRef})),this.possiblyRenderAdUI())}}]),a}(_.default.Component);return(0,T.default)(t,e),t.displayName="WithTwitterAd("+(0,L.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={onEnded:function(){}},t.propTypes={intl:C.intlShape,isAdPlaying:b.default.func.isRequired,onEnded:b.default.func,muted:b.default.bool},(0,C.injectIntl)(t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=a(56),T=n(k),C=a(2),P=a(185),M=a(1527),S=n(M),w=a(1528),R=n(w),I=a(1523),A=n(I),O=a(587),N=n(O),L=a(55),D=a(1354),U=n(D),F=a(84),H=(0,F.getFormattedTime)(0),V=7;t.default=r},1468:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=function(t){function a(e){(0,d.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.setVideoRef=t.setVideoRef.bind(t),t.onPause=function(){return t.handleStopWatching()},t.onEnded=function(){return t.handleStopWatching()},t.onSeeked=function(){t.props.isVideoReady&&!t.isVideoState(R.default.STOPPED)&&t.handleStartWatching()},(0,M.reconciler)(t),t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){this.videoLifeCycle=new P.default(this.props.api),this.lifeCycleTokenPresent(this.props)&&this.updateVideoLifeCycle(this.props)}},{key:"componentWillReceiveProps",value:function(e){(0,M.reconciler)(this,e),this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(e)}},{key:"componentDidUpdate",value:function(e){this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(this.props),this.props.isVideoReady&&this.isVideoState(R.default.PLAYING)&&this.handleStartWatching()}},{key:"componentWillUnmount",value:function(){this.videoLifeCycle&&(this.videoLifeCycle.destroy(),this.videoLifeCycle=null)}},{key:"handleStartWatching",value:function(){this.videoLifeCycle&&(this.props.isVideoPreview?this.videoLifeCycle.startWatchingPreview():this.videoLifeCycle.startWatching())}},{key:"handleStopWatching",value:function(){this.videoLifeCycle&&this.videoLifeCycle.stopWatching()}},{key:"isVideoState",value:function(e){return!!this.videoRef&&this.videoRef.getPlayerState()===e}},{key:"lifeCycleTokenPresent",value:function(e){var t=e.video;return t&&t.life_cycle_token}},{key:"lifeCycleTokenHasChanged",value:function(e){var t=e.video;return!(!this.props.video||!t)&&this.props.video.life_cycle_token!==t.life_cycle_token}},{key:"replayStateHasChanged",value:function(e){var t=e.isReplay;if(this.props.isReplay!==t)return!0}},{key:"lifeCycleHasChanged",value:function(e){var t=e.video,a=e.isReplay;return!!this.lifeCycleTokenHasChanged({video:t})||!!this.replayStateHasChanged({isReplay:a})}},{key:"updateVideoLifeCycle",value:function(e){var t=e.video,a=void 0===t?{}:t,n=e.isReplay;this.videoLifeCycle&&this.videoLifeCycle.update({lifeCycleToken:a.life_cycle_token,isReplay:n,watchTimeDelay:a.watchTimeDelay})}},{key:"setVideoRef",value:function(e){this.videoRef=e}},{key:"render",value:function(){return this.props.lifecycleDisabled?E.default.createElement(e,(0,s.default)({},this.props,{setVideoRef:this.setVideoRef})):E.default.createElement(e,(0,s.default)({},this.props,{setVideoRef:this.setVideoRef,onPause:this.onPause,onSeeked:this.onSeeked,onEnded:this.onEnded}))}}]),a}(E.default.Component);return(0,k.default)(a,e),a.displayName="WithWatchingLifecycle("+(0,I.getDisplayName)(e)+")",a.WrappedComponent=e,a.defaultProps={isReplay:!1,isVideoPreview:!1,isVideoReady:!0},a.propTypes={api:T.wrappedApiShape.isRequired,video:S.videoPropType.isRequired,lifecycleDisabled:g.default.bool,isReplay:g.default.bool,isVideoPreview:g.default.bool,isVideoReady:g.default.bool},t?a:(0,T.injectApi)(a)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m),y=a(1),g=n(y),b=a(0),E=n(b),_=a(56),k=n(_),T=a(19),C=a(1450),P=n(C),M=a(185),S=a(513),w=a(105),R=n(w),I=a(55);t.default=i},1469:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return l.default.createElement("div",{className:"AppLinks"},l.default.createElement(m.default,{href:p.default.APP_WEB,platform:f.PLATFORM_TYPE_IOS,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_CLICK",trackEventLocation:e.trackEventLocation},l.default.createElement(u.FormattedMessage,d.app.ios)),l.default.createElement(m.default,{href:p.default.PLAY_STORE,platform:f.PLATFORM_TYPE_ANDROID,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_ANDROID_CLICK",trackEventLocation:e.trackEventLocation},l.default.createElement(u.FormattedMessage,d.app.android)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=a(2),d=a(541),c=a(137),p=n(c),f=a(1373),h=a(1402),m=n(h);i.propTypes={dispatch:s.default.func.isRequired,trackEventLocation:s.default.string}},1470:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(27),b=a(1380),E=n(b),_=a(1402),k=n(_),T=a(1469),C=n(T),P=a(26),M=n(P),S=a(1373),w=a(24),R=a(86),I="BroadcastDetails",A=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props.periscopeEnvironment;return this.isBroadcastError()?null:e.ios()?this.getMobileCTA("OPEN_IN_APP_CLICK"):e.android()?this.getMobileCTA("OPEN_IN_APP_ANDROID_CLICK"):e.isDevice()?null:this.props.broadcast.isRunning?null:this.defaultCTA()}},{key:"isBroadcastError",value:function(){return this.props.broadcastError.isServerError||this.props.broadcastError.isUnavailable||this.props.broadcastError.isNotFound}},{key:"getMobileCTA",value:function(e){var t=this.props,a=t.broadcast,n=t.timecodeShare,i=a.inAppUrl,r=n&&n.timecode,s=r?(0,R.withQuery)(i,(0,w.withTime)(r)):i;return y.default.createElement("div",{className:"BroadcastDetails-appCta BroadcastDetails-appCta--deviceWithApp"},y.default.createElement(k.default,{href:s,dispatch:this.props.dispatch,trackEventName:e,trackEventLocation:I,platform:S.PLATFORM_TYPE_NATIVE}))}},{key:"defaultCTA",value:function(){return y.default.createElement("div",{className:"BroadcastDetails-appCta"},y.default.createElement(E.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,location:I}),y.default.createElement(C.default,{dispatch:this.props.dispatch,trackEventLocation:I}))}}]),t}(y.default.Component);A.propTypes={dispatch:m.default.func.isRequired,broadcast:g.broadcastPropType.isRequired,broadcastError:m.default.object.isRequired,timecodeShare:m.default.object,periscopeEnvironment:m.default.object.isRequired},t.default=(0,M.default)(A)},1471:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(27),k=a(18),T=a(282),C=a(131),P=a(1408),M=n(P),S=a(1403),w=n(S),R=a(1478),I=n(R),A=a(525),O=n(A),N=a(537),L=n(N),D=a(1474),U=n(D),F=a(1404),H=n(F),V=a(1473),B=n(V),x=a(1454),j=n(x),q=a(1369),W=n(q),Y=a(26),z=n(Y),G=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"possiblyRenderReplayButton",value:function(){if(this.props.periscopeEnvironment.isVideoSupported()){var e=b.default.createElement(U.default,{dispatch:this.props.dispatch,player:this.props.player}),t=this.props.broadcast;if(t&&t.isRunning&&!this.props.periscopeEnvironment.hasInlineAutoplayVideo())return e;if(this.props.replay.replayAvailable)return e}}},{key:"shouldRenderData",value:function(){return!this.props.broadcastError.isServerError&&(!this.props.broadcastError.isNotFound&&(!this.props.broadcastError.isUnavailable&&!(!this.props.broadcast||!this.props.user)))}},{key:"possiblyRenderBroadcastTitle",value:function(){if(this.shouldRenderData())return b.default.createElement(O.default,{broadcast:this.props.broadcast})}},{key:"possiblyRenderBroadcastUser",value:function(){if(this.shouldRenderData())return b.default.createElement(L.default,{user:this.props.user,location:"BroadcastDetails",profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar})}},{key:"possiblyRenderCouchmodeCTA",value:function(){if(this.props.broadcastError.isUnavailable&&this.props.periscopeEnvironment.isVideoSupported())return b.default.createElement(I.default,null)}},{key:"possiblyRenderBroadcastBackground",value:function(){if(this.props.broadcast)return b.default.createElement(w.default,{broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,dispatch:this.props.dispatch})}},{key:"renderBroadcastStatePreview",value:function(){return this.props.periscopeEnvironment.shouldUseMobileLayout()?b.default.createElement(B.default,{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay,viewers:this.props.viewers,dispatch:this.props.dispatch}):b.default.createElement(H.default,{broadcast:this.props.broadcast,player:this.props.player,replay:this.props.replay,broadcastError:this.props.broadcastError})}},{key:"possiblyRenderBackground",value:function(){return this.props.disableBackground?null:b.default.createElement("div",{className:"u-flexItem"},this.possiblyRenderBroadcastBackground())}},{key:"render",value:function(){return b.default.createElement(M.default,(0,r.default)({baseClass:"BroadcastDetails"},this.props),b.default.createElement("div",{className:"BroadcastDetails-overlay u-flexItem u-flexParent"},this.possiblyRenderReplayButton(),this.renderBroadcastStatePreview(),this.possiblyRenderCouchmodeCTA(),this.possiblyRenderBroadcastTitle(),this.possiblyRenderBroadcastUser(),b.default.createElement(j.default,{timecodeShare:this.props.timecodeShare,broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,dispatch:this.props.dispatch})),this.possiblyRenderBackground(),b.default.createElement(W.default,{broadcast:this.props.broadcast}))}}]),t}(b.default.Component);G.propTypes={user:k.userPropType,replay:T.replayPropType,broadcastError:y.default.object,profileIsVisible:y.default.bool,width:y.default.number,toggleProfileSidebar:y.default.func,broadcast:_.broadcastPropType,dispatch:y.default.func.isRequired,viewers:y.default.number,disableBackground:y.default.bool,timecodeShare:y.default.object,withoutDelay:y.default.bool,onFadeOut:y.default.func,onFadeOutEnd:y.default.func,periscopeEnvironment:y.default.object.isRequired,player:y.default.object.isRequired},t.default=(0,z.default)((0,E.connect)(C.videoPlayerStateMapper)(G))},1472:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=["BroadcastNextButton","u-transition-1"];return e.player.isCinemaPlayer&&t.push("u-opacity-0","u-pointer-events-none"),l.default.createElement("div",{className:t.join(" "),onClick:e.nextBroadcast},l.default.createElement("button",{className:"BroadcastNextButton-button"},l.default.createElement(d.default,null)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=a(1517),d=n(u);i.propTypes={player:s.default.object,nextBroadcast:s.default.func.isRequired}},1473:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(139),E=a(49),_=a(27),k=a(282),T=a(1404),C=n(T),P=a(1381),M=n(P),S=a(1372),w=n(S),R=a(287),I=n(R),A=5e3,O=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={thumbLoaded:!1},a.thumbnailPreviewInterval=null,a.handleThumbClick=a.handleThumbClick.bind(a),a.handleThumbLoaded=a.handleThumbLoaded.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.possiblyLaunchApp(),this.props.broadcast.isRunning&&!this.thumbnailPreviewInterval&&(this.thumbnailPreviewInterval=setInterval(function(){e.props.dispatch((0,b.broadcastForceRequest)(e.props.broadcast.id))},A))}},{key:"componentWillReceiveProps",value:function(e){e.broadcast.isRunning||clearInterval(this.thumbnailPreviewInterval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.thumbnailPreviewInterval)}},{key:"possiblyRenderBroadcastPreview",value:function(){if(this.props.broadcast&&this.props.broadcast.image_url){var e=["BroadcastPreview-imageWrapper"];this.props.broadcast.isRunning&&e.push("BroadcastPreview-imageWrapper--live");var t=this.props.intl;return y.default.createElement("div",{className:"BroadcastPreview-imageContainer",onClick:this.handleThumbClick},y.default.createElement("div",{className:e.join(" "),"data-tag-label":t.formatMessage(I.default.live)},y.default.createElement("img",{className:"BroadcastPreview-image",src:this.props.broadcast.image_url,onLoad:this.handleThumbLoaded})),y.default.createElement("span",{className:"BroadcastPreview-playIcon"},y.default.createElement(w.default,null)))}}},{key:"handleThumbClick",value:function(){this.props.dispatch((0,E.openAppLinkModal)({broadcast:this.props.broadcast}))}},{key:"handleThumbLoaded",value:function(){this.state.thumbLoaded||this.setState({thumbLoaded:!0})}},{key:"possiblyLaunchApp",value:function(){return!1}},{key:"renderSubhead",value:function(){return this.props.broadcast.isRunning?y.default.createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchingCount()):y.default.createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchedCount(),y.default.createElement(C.default,{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay}))}},{key:"possiblyRenderWatchingCount",value:function(){if(this.props.viewers)return y.default.createElement("div",{className:"BroadcastPreview-watching"},y.default.createElement(M.default,{withText:!0,count:this.props.viewers}))}},{key:"possiblyRenderWatchedCount",value:function(){if(this.props.viewers)return y.default.createElement("div",{className:"BroadcastPreview-viewers"},y.default.createElement(M.default,{withText:!0,count:this.props.viewers}))}},{key:"render",value:function(){var e=["BroadcastPreview"];return this.state.thumbLoaded&&e.push("BroadcastPreview--withImage"),y.default.createElement("div",{className:e.join(" ")},this.possiblyRenderBroadcastPreview(),this.renderSubhead())}}]),t}(y.default.Component);O.propTypes={broadcast:_.broadcastPropType,broadcastError:m.default.object,dispatch:m.default.func,intl:g.intlShape.isRequired,viewers:m.default.number,player:m.default.object,replay:k.replayPropType},t.default=(0,g.injectIntl)(O)},1474:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(0),y=n(v),g=a(1),b=n(g),E=a(14),_=a(23),k=a(286),T=a(131),C=a(577),P=n(C),M=a(26),S=n(M),w=a(20),R=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.togglePlayerMode=a.togglePlayerMode.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"togglePlayerMode",value:function(){if(this.playbackNotSupported())return void this.props.dispatch((0,_.trackEvent)("REPLAY_UNSUPPORTED_PLAYBACK_CLICK"));this.props.player.isInterstitialPresentation?this.props.dispatchManualPlayStart():(0,k.resetVideoState)(this.props.dispatch)}},{key:"playbackNotSupported",value:function(){return!this.props.periscopeEnvironment.isVideoSupported()}},{key:"render",value:function(){var e=this.props.player.isInterstitialPresentation,t=this.props.player.isVideoPresentation,a=this.props.player.isStopped,n=this.props.player.videoHasStarted,i={};return e&&a||(t&&!n?i.loading=!0:n&&(i.playing=!0)),y.default.createElement(P.default,(0,r.default)({},i,{className:"BroadcastReplayButton",disabled:this.playbackNotSupported(),onClick:this.togglePlayerMode}))}}]),t}(y.default.Component);R.propTypes={dispatch:b.default.func,dispatchManualPlayStart:b.default.func,player:b.default.object,periscopeEnvironment:b.default.object.isRequired},R.defaultProps={periscopeEnvironment:new w.UserAgentDetector},t.default=(0,S.default)((0,E.connect)(function(){return{}},T.videoPlayerDispatchMapper)(R))},1476:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(1477),E=n(b),_=a(1362),k=a(72),T=a(291),C=a(27),P=a(134),M=n(P),S=a(283),w=n(S),R=a(1413),I=n(R),A=a(1536),O=n(A),N=a(11),L=a(1366),D=a(9),U=a(307),F=new D.FileDebugger("CommentInput",!0),H=100,V=/(?:\r\n|\r|\n)/,B="CommentInput-input",x=function(e){if(e)if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}},j=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));a.state={html:"",isDisabled:null};var n=e.intl.formatMessage;return a.placeholder=n(U.placeholder),a.setInputReference=a.setInputReference.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.onBlur=a.onBlur.bind(a),a.onFocus=a.onFocus.bind(a),a.onPaste=a.onPaste.bind(a),a.onChange=a.onChange.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.checkDisabled(e)||(e.replyUsername&&e.replyUsername!==this.props.replyUsername?this.setState({html:"@"+e.replyUsername+"&nbsp;"},function(){return t.focusInput()}):e.isFocused&&!this.props.isFocused&&this.focusInput())}},{key:"componentDidMount",value:function(){this.checkDisabled(this.props),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e,t){this.state.html!==t.html&&this.props.onChange(this.input)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.resetInputTimeout),clearTimeout(this.setModerationTimerTimeout),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"checkDisabled",value:function(e){var t=e.broadcast,a=e.chatStreamDisabled,n=e.moderation;if(this.state.isDisabled)return!0;if(a||(0,L.isModeratedForBroadcast)(n,t))return this.setState({isDisabled:!0}),a?this.setState({html:this.getChatStreamDisabledText(a)}):n.sentence_type===I.default.COMMENTING_SUSPENDED||n.sentence_type===I.default.GLOBAL_COMMENTING_SUSPENDED?this.setModerationTimer(e):this.setState({html:this.getModerationText()}),!0}},{key:"getChatStreamDisabledText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.chatStreamDisabled;return(0,this.props.intl.formatMessage)(e)}},{key:"setModerationTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.moderation;if(a){var n=1e3*a.sentence_duration_sec-(Date.now()-a.timestamp);if(n<=0)return this.props.dispatch((0,k.chatClearModeration)()),void this.setState({isDisabled:!1,html:""});var i=this.getTimeoutUnit(n),r=n%i>0?n%i:i;this.setState({html:this.getModerationText(n)}),clearTimeout(this.setModerationTimerTimeout),this.setModerationTimerTimeout=setTimeout(function(){return e.setModerationTimer()},r)}}},{key:"getTimeoutUnit",value:function(e){return e<=6e4?1e3:e<=36e5?6e4:e<=864e5?36e5:864e5}},{key:"getModerationText",value:function(e){var t=this.props.intl,a=t.formatRelative,n=t.formatMessage;if(!e)return n(U.disabledForBroadcast);var i=a(Date.now()+e);return n(U.limited,{relativeTime:i})}},{key:"setInputReference",value:function(e){this.input=e}},{key:"focusInput",value:function(){this.input&&this.input.focus&&(x(this.input),this.props.dispatch((0,T.commentInputSetFocus)(!0)))}},{key:"blurInput",value:function(){this.input&&this.input.blur&&(this.input.blur(),window.getSelection&&window.getSelection().removeAllRanges(),this.props.dispatch((0,T.commentInputSetFocus)(!1)))}},{key:"handleKeyDown",value:function(e){if(!this.state.isDisabled){var t=e.target;if(e.shiftKey||e.keyCode!==M.default.ENTER||(e.stopPropagation(),e.preventDefault(),this.props.isFocused?this.handleEnterPress(t):this.focusInput()),!t||t===this.input){e.stopPropagation();var a=(0,N.containsMetaKey)(e);if(this.props.isFocused){if(e.keyCode===M.default.ESC)return this.blurInput();e.keyCode!==M.default.SPACE_BAR||a||""!==this.serializeInput(t).trim()||e.preventDefault()}t.innerText&&t.innerText.length>H&&!a&&e.preventDefault()}}}},{key:"handleKeyUp",value:function(e){if(!this.state.isDisabled){e.stopPropagation(),e.preventDefault();var t=e.target,a=(0,N.containsMetaKey)(e);if(e.keyCode===M.default.SPACE_BAR&&!a&&""===this.serializeInput(t).trim()){var n=this.props,i=n.authUser;(0,n.dispatch)((0,k.chatAddNewUserHeart)({authUser:i}))}}}},{key:"handleEnterPress",value:function(e){var t=this,a=this.serializeInput(e).trim();if(0!==a.length)return this.shouldSendComment(a)?(this.sendComment(a),clearTimeout(this.resetInputTimeout),void(this.resetInputTimeout=setTimeout(function(){return t.resetInput()},100))):void this.props.commentError()}},{key:"shouldSendComment",value:function(e){return!(this.lastComment&&this.lastComment===e||this.props.isCoolDown)}},{key:"sendComment",value:function(e){var t=this.props.authUser;this.props.onUserChat(),this.props.dispatch((0,k.chatNewUserChat)({body:e,authUser:t,type:w.default.CHAT})),this.lastComment=e,this.props.startCoolDown()}},{key:"resetInput",value:function(){this.setState({html:""})}},{key:"serializeInput",value:function(e){return e.innerText.split(V).filter(function(e){return e.length>0}).join(" ")}},{key:"onBlur",value:function(e){if(!!(0,O.default)(e.relatedTarget,function(e){return e.classList.contains(_.CommentContainerClass)}))return F.debug("blur inside comment container, do nothing"),this.focusInput(),e.preventDefault(),!1;var t=this.state.html;this.props.dispatch((0,T.commentInputSetFocus)(!1)),""===e.target.innerText.trim()&&(t=""),this.setState({html:t})}},{key:"onFocus",value:function(){this.props.dispatch((0,T.commentInputSetFocus)(!0))}},{key:"onChange",value:function(e,t){this.setState({html:t})}},{key:"onPaste",value:function(e){if(!e||!e.clipboardData||!e.clipboardData.getData)return!0;try{var t=e.clipboardData.getData("text/plain");if(window.getSelection){var a=window.getSelection();if(a.rangeCount){var n=a.getRangeAt(0),i=t.split(V);n.deleteContents(),i.forEach(function(e){n.insertNode(document.createTextNode(e)),n.insertNode(document.createElement("br"))})}}else if(document.selection&&document.selection.createRange){var r=document.selection.createRange();r.text=t}return this.setState({html:e.target.innerHTML}),e.stopPropagation(),e.preventDefault(),!1}catch(e){}}},{key:"render",value:function(){return y.default.createElement("div",{className:"CommentInput"},y.default.createElement(E.default,{key:"comment-input",getInputReference:this.setInputReference,className:B,html:this.state.html,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.onPaste,onChange:this.onChange,placeholder:this.state.isDisabled?this.state.html:this.placeholder,locked:this.state.isDisabled}))}}]),t}(y.default.Component);j.defaultProps={},["startCooldown","commentError","onChange","onUserChat"].forEach(function(e){j.defaultProps[e]=function(){return F.warn(e+" not provided")}}),j.propTypes={authUser:m.default.object,broadcast:C.broadcastPropType,commentError:m.default.func,chatStreamDisabled:m.default.oneOfType([m.default.bool,m.default.object]),dispatch:m.default.func.isRequired,intl:g.intlShape.isRequired,isCoolDown:m.default.bool,isFocused:m.default.bool,moderation:m.default.object,replyUsername:m.default.string,startCoolDown:m.default.func,onChange:m.default.func,onUserChat:m.default.func},t.default=j},1477:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(13),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=["className","onFocus","onBlur","onKeyDown","onKeyUp","onPaste","onChange","placeholder"],T=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.emitChange=a.emitChange.bind(a),a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"shouldComponentUpdate",value:function(e){var t=!this.htmlMatchesInnerHtml(e),a=this.props.locked!==e.locked,n=this.props.onChange!==e.onChange,i=this.props.parser!==e.parser,r=this.props.className!==e.className;return t||a||n||i||r}},{key:"componentDidMount",value:function(){this.props.getInputReference(this.refs.input)}},{key:"componentDidUpdate",value:function(){this.htmlMatchesInnerHtml()||(this.refs.input.innerHTML=this.props.html,this.emitChange())}},{key:"htmlMatchesInnerHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.refs.input&&e.html===this.refs.input.innerHTML}},{key:"emitChange",value:function(){this.props.parser&&this.props.parser(this.refs.input);var e=this.refs.input.innerHTML;e!==this.lastHtml&&this.props.onChange(this.refs.input,e),this.lastHtml=e}},{key:"render",value:function(){var e=this,t={};return(0,o.default)(this.props).forEach(function(a){k.indexOf(a)>=0&&(t[a]=e.props[a])}),_.default.createElement("div",(0,r.default)({},t,{ref:"input",onInput:this.emitChange,contentEditable:!this.props.locked,suppressContentEditableWarning:!0}),this.props.html)}}]),t}(_.default.Component);T.defaultProps={onChange:function(){},getInputReference:function(){}},T.propTypes={html:b.default.string.isRequired,getInputReference:b.default.func,className:b.default.string,onChange:b.default.func,parser:b.default.func,locked:b.default.bool},t.default=T},1478:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return s.default.createElement("div",{className:"CouchmodeCTA"},s.default.createElement("div",{className:"CouchmodeCTA-prompt"},s.default.createElement(o.FormattedMessage,d.default.couchmodePrompt)),s.default.createElement(l.Link,{to:"/couchmode",className:"CouchmodeCTA-button"},s.default.createElement(o.FormattedMessage,d.default.couchmodeButton)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(0),s=n(r),o=a(2),l=a(33),u=a(285),d=n(u)},1479:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(198),b=n(g),E=a(27),_=a(133),k=a(1368),T=n(k),C=a(1407),P=n(C),M=a(1360),S=n(M),w=a(1356),R=n(w),I=a(1370),A=n(I),O=a(26),N=n(O),L=a(20),D=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderRightButtons",value:function(){var e=this,t=!1,a=[y.default.createElement("span",{onMouseEnter:function(){if(!t){t=!0;var a=e.refs.rightButtons;a&&(a.querySelector(".MediaExpand").title=b.default.player&&b.default.player.version())}}},y.default.createElement(A.default,{key:"MediaExpand",className:"MediaExpand",broadcast:this.props.broadcast}))];return this.props.periscopeEnvironment.hasAudioControl()&&a.unshift(y.default.createElement(R.default,{key:"MuteButton",muted:this.props.player.muted})),y.default.createElement("div",{ref:"rightButtons",className:"EmbedFooter-fixed"},a)}},{key:"renderLiveFooter",value:function(){return y.default.createElement("div",{className:"EmbedFooter"},y.default.createElement(S.default,{viewers:this.props.viewers,is360:this.props.broadcast.has360Video,isLive:!0,isConjoined:!0,includeEndedLabel:!0}),this.renderRightButtons())}},{key:"renderReplayFooter",value:function(){return y.default.createElement("div",{className:"EmbedFooter EmbedFooter--isReplay"},y.default.createElement(S.default,{viewers:this.props.viewers,is360:this.props.broadcast.has360Video,isConjoined:!0,includeEndedLabel:!0}),y.default.createElement("div",{className:"EmbedFooter-dynamic"},y.default.createElement("div",{className:"EmbedFooter-playback"},y.default.createElement(P.default,{player:this.props.player,broadcast:this.props.broadcast}),y.default.createElement(T.default,{videoStartDate:this.props.broadcast.start})),this.renderRightButtons()))}},{key:"render",value:function(){return this.props.player.isLiveMode?this.renderLiveFooter():this.renderReplayFooter()}}]),t}(y.default.Component);D.propTypes={broadcast:E.broadcastPropType.isRequired,viewers:m.default.number.isRequired,player:_.playerPropType.isRequired,periscopeEnvironment:m.default.object.isRequired},D.defaultProps={periscopeEnvironment:new L.UserAgentDetector},t.default=(0,N.default)(D)},1480:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(590),k=n(_),T=a(27),C=a(18),P=a(1403),M=n(P),S=a(1408),w=n(S),R=a(1360),I=n(R),A=a(1406),O=n(A),N=a(1388),L=n(N),D=a(1482),U=n(D),F=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getBroadcastUrl",value:function(){var e=this.props,t=e.broadcast,a=e.user,n=e.periscopeResources;return t?a?n.HOST_DOMAIN+"/"+a.username+"/"+t.id:n.HOST_DOMAIN+"/w/"+t.id:"#"}},{key:"render",value:function(){return b.default.createElement(w.default,(0,r.default)({baseClass:"EmbedInterstitial"},this.props),b.default.createElement(M.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,height:this.props.height,shouldBlur:!1}),b.default.createElement(O.default,{player:this.props.player}),b.default.createElement(L.default,{broadcast:this.props.broadcast}),b.default.createElement(I.default,{viewers:this.props.viewers,isLive:this.props.player.isLiveMode,is360:this.props.broadcast&&this.props.broadcast.has360Video,isHidden:this.props.player.isUnknownMode,isConjoined:!0,includeEndedLabel:!0}),b.default.createElement(U.default,{player:this.props.player,url:this.getBroadcastUrl()}))}}]),t}(b.default.Component);F.propTypes={broadcast:T.broadcastPropType,user:C.userPropType,viewers:y.default.number,player:y.default.object,width:y.default.number,height:y.default.number,dispatch:y.default.func.isRequired,periscopeResources:_.periscopeResourcesPropType.isRequired},t.default=(0,E.connect)(k.default)(F)},1481:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(27),E=a(133),_=a(1376),k=a(131),T=a(1529),C=a(1406),P=n(C),M=a(1443),S=n(M),w=a(1388),R=n(w),I=a(1479),A=n(I),O=a(26),N=n(O),L=a(20),D=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a.disableOnClick=a.disableOnClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"disableOnClick",value:function(){this.props.player.isLiveMode?this.props.dispatchAudioOff():this.props.dispatchPauseVideo()}},{key:"clickHandler",value:function(){this.props.periscopeEnvironment.isDevice()?this.clickHandlerDevice():this.disableOnClick()}},{key:"togglePlayback",value:function(){this.props.player.isExpectingVideo?this.props.dispatchPauseVideo():this.props.dispatchPlayVideo()}},{key:"toggleAudio",value:function(){this.props.player.muted?this.props.dispatchAudioOn():this.props.dispatchAudioOff()}},{key:"clickHandlerDevice",value:function(){var e=this.props,t=e.player,a=e.periscopeEnvironment;if(t.isReplayMode)return void this.togglePlayback();a.hasInlineVideo()&&a.hasAudioControl()?this.toggleAudio():this.togglePlayback()}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyRenderPeriscopeClickthrough",value:function(){if(!this.allowVideoInteractivity())return y.default.createElement(S.default,{broadcast:this.props.broadcast,player:this.props.player,onClick:this.clickHandler})}},{key:"render",value:function(){var e=["EmbedOverlay"];return this.props.periscopeEnvironment.isDevice()&&e.push("EmbedOverlay--isForced"),this.allowVideoInteractivity()&&e.push("EmbedOverlay--withInteractivity"),y.default.createElement("div",{className:e.join(" ")},y.default.createElement("div",{className:"EmbedOverlay-alpha"}),y.default.createElement(P.default,{player:this.props.player}),this.possiblyRenderPeriscopeClickthrough(),y.default.createElement(R.default,{broadcast:this.props.broadcast,twitterEvent:this.props.twitterEvent,onClick:this.clickHandler}),y.default.createElement(A.default,this.props))}}]),t}(y.default.Component);D.defaultProps={dispatch:function(){},dispatchAudioOff:function(){},dispatchAudioOn:function(){},dispatchPauseVideo:function(){},dispatchPlayVideo:function(){},periscopeEnvironment:new L.UserAgentDetector},D.propTypes={broadcast:b.broadcastPropType,twitterEvent:_.twitterEventPropType,player:E.playerPropType.isRequired,viewers:m.default.number.isRequired,dispatch:m.default.func.isRequired,dispatchAudioOff:m.default.func,dispatchAudioOn:m.default.func,dispatchPauseVideo:m.default.func,dispatchPlayVideo:m.default.func,periscopeEnvironment:m.default.object.isRequired},t.default=(0,N.default)((0,g.connect)(T.twitterEventMapper,k.videoPlayerDispatchMapper)(D))},1482:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(131),E=a(1354),_=n(E),k=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"onClickHandler",value:function(e){e.preventDefault(),_.default.playbackRequest({playAction:this.props.dispatchManualPlayStart})}},{key:"render",value:function(){var e=["EmbedPlayButton"];return this.props.player.isStopped&&!this.props.player.isUnknownMode||e.push("EmbedPlayButton--hidden"),this.props.player.isLiveMode&&e.push("EmbedPlayButton--isLive"),this.props.player.isReplayMode&&e.push("EmbedPlayButton--isReplay"),y.default.createElement("a",{className:e.join(" "),href:this.props.url,onClick:this.onClickHandler},y.default.createElement("div",{className:"EmbedPlayButton-liveButton"}),y.default.createElement("div",{className:"EmbedPlayButton-replayButton"}))}}]),t}(y.default.Component);k.propTypes={dispatchManualPlayStart:m.default.func.isRequired,player:m.default.object,url:m.default.string.isRequired},t.default=(0,g.connect)(void 0,b.videoPlayerDispatchMapper)(k)},1483:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(37),r=n(i),s=a(5),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=a(192),T=a(1358),C=20,P=200,M=function(e){return{top:-1*e}},S=function(e){return{top:(0,k.spring)(-1*(e+C))}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stiffness:190,damping:19};return{top:(0,k.spring)(-1*C,e)}},R=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.drawerRef=null,a.drawerHeight=P,a.renderInterpolatedStyles=a.renderInterpolatedStyles.bind(a),a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidUpdate",value:function(){if(this.drawerRef){var e=this.drawerRef.getBoundingClientRect();this.drawerHeight=e.height}}},{key:"handleDismiss",value:function(e){var t=this;return function(){return t.props.dispatchHideDrawer(e)}}},{key:"getVisibleStyles",value:function(){var e=this.props.drawer;return e.visible?[{key:"drawer",style:w(e.options.springConfig)}]:[]}},{key:"possiblyRenderChild",value:function(){return this.props.drawer.component?_.default.createElement(this.props.drawer.component,(0,o.default)({},this.props.drawer.componentProps,{dismiss:this.handleDismiss("drawer-content"),dispatch:this.props.dispatch,isVisible:this.props.drawer.visible})):null}},{key:"renderInterpolatedStyles",value:function(e){var t=this,a=(0,r.default)(e,1),n=a[0];return n?_.default.createElement("div",{className:"GlobalDrawer",ref:function(e){t.drawerRef=e},style:{top:Math.round(n.style.top)+"px"}},_.default.createElement("div",{className:"GlobalDrawer-content"},this.possiblyRenderChild()),_.default.createElement("img",{className:"GlobalDrawer-close",src:"/v/images/icon_close.svg",onClick:this.props.dispatchHideDrawer})):null}},{key:"render",value:function(){var e=this;return _.default.createElement(k.TransitionMotion,{styles:this.getVisibleStyles(),willEnter:function(){return M(e.drawerHeight)},willLeave:function(){return S(e.drawerHeight)}},this.renderInterpolatedStyles)}}]),t}(_.default.Component);R.propTypes={dispatch:b.default.func,dispatchHideDrawer:b.default.func,drawer:T.drawerPropType.isRequired},t.default=R},1484:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Z.hasOwnProperty(e))return Z[e].width;var t=U.default.giftStyleLookup[e];return t?2*t.image_width:133}function r(e){var t=e.theme,a=e.assets,n=J[t];if(n)return b.default.resolve(n);var i=(0,y.default)(a,1),r=i[0];return new b.default(function(e){M.default.get(r.asset_url).end(function(a,n){return!a&&n.text&&n.text.indexOf("<svg")>=0?(J[t]=n.text,e(J[t])):e(G)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsClass=void 0;var s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(37),y=n(v),g=a(10),b=n(g),E=a(1),_=n(E),k=a(0),T=n(k),C=a(14),P=a(568),M=n(P),S=a(1551),w=n(S),R=a(184),I=a(517),A=a(19),O=a(54),N=n(O),L=a(27),D=a(570),U=n(D),F=a(284),H=a(283),V=n(H),B=a(539),x=a(11),j=a(9),q=(new j.FileDebugger("Hearts",!0,!0),"FeedbackItem"),W=6,Y=32,z={HEART:"heart",SCREENSHOT:"screenshot",SPARKLE:"sparkle"},G=a(1451)(),K=a(1452)(),J={heart:G,screenshot:K},Q=100,X=2,Z={valentines:{width:177}},$=function(e){var t=e.body;return new b.default(function(e,a){return t?t.themes&&t.themes.length?(t.themes.forEach(r),void e()):a("No themes returned"):a("No body response")})},ee=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={hearts:[],userHearts:[]},a._isMounted=!1,a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,U.default.setApi(this.props.api),this.setupHearts(this.props),this.currentHeartIntervalCount=0,this.maxHeartIntervalID=setInterval(function(){e.currentHeartIntervalCount=0},Q),this.heartsSub=R.eventManager.subscribe(F.CHAT_HEARTS,function(t){e.setState({hearts:t,lastHeartUuid:t.slice(-1).pop().uuid})}),this.userHeartsSub=R.eventManager.subscribe(F.CHAT_USER_HEARTS,function(t){e.setState({userHearts:t,lastUserHeartUuid:t.slice(-1).pop().uuid})})}},{key:"shouldComponentUpdate",value:function(e,t){return!e.tabHidden&&(t.hearts!==this.state.hearts||t.userHearts!==this.state.userHearts)}},{key:"componentWillReceiveProps",value:function(e){this.setupHearts(e)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.maxHeartIntervalID),this.heartsSub.remove(),this.userHeartsSub.remove()}},{key:"setupHearts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.broadcast;if(t&&t.heart_theme){var a=[];if(t.heart_theme.forEach(function(e){J[e]||a.push(e)}),!a.length)return;this.props.api.callAsync("getHeartThemes",{theme_ids:a,platform:"web"}).then($)}}},{key:"getBroadcastThemes",value:function(){return this.props.broadcast.heart_theme||[]}},{key:"getRandomValueForRange",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"getHeartTheme",value:function(){if(this.shouldUseHeartTheme()){var e=this.getBroadcastThemes();return e[this.getRandomValueForRange(0,e.length)]||z.HEART}return z.HEART}},{key:"shouldUseHeartTheme",value:function(){var e=this.getBroadcastThemes();return!(!e||0===e.length)&&this.getRandomValueForRange(1,W+1)===W}},{key:"generateElement",value:function(e){var t=e.giftStyle,a=e.svg,n=e.eggmojiOverride,r=document.createDocumentFragment(),s=document.createElement("body"),o=void 0;if(n)s.innerHTML="<span>"+n+"</span>";else if(a)s.innerHTML=a;else{var l=i(t);s.innerHTML='<canvas width="'+l+'px" height="'+l+'"></canvas>'}for(;o=s.firstChild;)r.appendChild(o);return r}},{key:"getParticipantColorName",value:function(e){return e.userHeart&&!this.props.isLive?B.REPLAY_COLOR_NAME:(0,x.getParticipantColorName)(e.participant_index)}},{key:"getParticipantColor",value:function(e){return e.userHeart&&!this.props.isLive?B.REPLAY_COLOR_NAME:(0,x.getParticipantColor)(e.participant_index)}},{key:"getFeedbackTypeForItem",value:function(e){switch(e.type){case V.default.SCREENSHOT:return z.SCREENSHOT;case V.default.SPARKLE:return z.SPARKLE;case V.default.HEART:return this.getHeartTheme();default:return}}},{key:"getIdForItem",value:function(e){return"item-"+e.uuid}},{key:"getUuidFromHeartId",value:function(e){return e.replace("item-","")}},{key:"getHeartContainerElement",value:function(e){this.currentHeartIntervalCount++;var t=this.getIdForItem(e);if(!document.getElementById(t)){var a={eggmojiOverride:e.eggmojiOverride,giftStyle:e.gift_style};return e.eggmojiOverride||e.isSparkled||(a.svg=J[this.getFeedbackTypeForItem(e)]),this.generateElement(a)}}},{key:"getHeartContainerWithHeart",value:function(e){var t="u-participant"+this.getParticipantColorName(e),a=this.getHeartContainerElement(e);if(a){var n=a.querySelector("svg")||a.querySelector("span")||a.querySelector("canvas"),i=e.eggmojiOverride?56:parseInt(n.getAttribute("width"),10)||170,r="number"==typeof this.props.width?this.props.width:Y,s=(r-i)/2,o=[q,q+"--"+this.getFeedbackTypeForItem(e),t];return e.userHeart&&(o.push(q+"--userHeart"),e.eggmojiOverride&&o.push("isEggmoji")),n.setAttribute("class",o.join(" ")),n.setAttribute("id",this.getIdForItem(e)),n.setAttribute("style","left: "+s+"px"),a}}},{key:"setupAnimation",value:function(e){var t=this.getIdForItem(e);if(e.isSparkled){var a=this.refs.heartsContainer.querySelector("#"+t),n=e.sparkle_id,i=e.gift_style,r=U.default.getSparkle({sparkleId:n,giftStyle:i});if(!r)return void this.removeHeart(t);var s=this.getParticipantColor(e),o=e.profile_image_url,l=r({color:s,canvas:a,avatarImage:o});this.animateEl(t,l)}else this.animateEl(t)}},{key:"addHeart",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&!arguments[1]||e.userHeart||!(this.currentHeartIntervalCount>=X)){var t=this.getHeartContainerWithHeart(e);t&&(this.refs.heartsContainer.appendChild(t),this.setupAnimation(e))}}},{key:"appendHearts",value:function(){var e=this;(this.state.hearts.length||this.state.userHearts.length)&&((0,w.default)(this.state.hearts,"uuid").forEach(function(t){return e.addHeart(t)}),(0,w.default)(this.state.userHearts,"uuid").forEach(function(t){return e.addHeart(t,!1)}))}},{key:"removeHeart",value:function(e){var t=document.getElementById(e);if(t&&t.parentNode&&t.parentNode.removeChild(t),this._isMounted){var a=this.getUuidFromHeartId(e);a===this.state.lastUserHeartUuid?this.setState({userHearts:[],lastUserHeartUuid:null}):a===this.state.lastHeartUuid&&this.setState({hearts:[],lastHeartUuid:null})}}},{key:"flushHearts",value:function(){for(var e=this.refs.heartsContainer;e.firstChild;)e.removeChild(e.firstChild)}},{key:"getAnimationSettings",value:function(e,t){var a="thru",n=1.5,i=.5,r=80,s=100,o=5,l=this.props.dimensions.height,u=.25,d=t?5:3,c=0,p=.3,f=.6,h=document.getElementsByClassName(q).length,m=h*o+l*u;m=Math.min(m,l),m+=100*Math.random(),t&&(m*=1.7);var v=Math.random()*i-i/2,y=-m/2,g=r/2-Math.random()*r,b=-m;return{heartSelector:"#"+e,SCALE_DURATION_IN_SECONDS:p,FINAL_SCALE:f,FLOAT_DURATION_IN_SECONDS:d,FINAL_OPACITY:c,rotation:v,BEZIER_TYPE:a,BEZIER_CURVINESS:n,bezierPointOneX:g,bezierPointOneY:y,bezierPointTwoX:s/2-Math.random()*s,bezierPointTwoY:b}}},{key:"animateEl",value:function(e,t){var a=this,n=!!t,i=this.getAnimationSettings(e,n),r=i.heartSelector,s=i.SCALE_DURATION_IN_SECONDS,o=i.FINAL_SCALE,l=i.FLOAT_DURATION_IN_SECONDS,u=i.FINAL_OPACITY,d=i.rotation,c=i.BEZIER_TYPE,p=i.BEZIER_CURVINESS,f=i.bezierPointOneX,h=i.bezierPointOneY,m=i.bezierPointTwoX,v=i.bezierPointTwoY;TweenLite.to(r,s,{scaleY:o,scaleX:o,ease:Back.easeOut}),TweenLite.to(r,n?l-.4:l,{delay:n?.4:0,opacity:u,ease:n?SlowMo.ease.config(.1,.7,!1):Linear.easeNone}),TweenLite.to(r,l,{rotation:d+"rad",ease:Linear.easeNone,bezier:{type:c,curviness:p,autoRotate:!1,values:[{x:f,y:h},{x:m,y:v}]},onComplete:function(){t&&t.destroy(),a.removeHeart(e)}})}},{key:"componentDidUpdate",value:function(){this.appendHearts()}},{key:"render",value:function(){return T.default.createElement("ul",{className:"Hearts",ref:"heartsContainer",id:"heartsContainer"})}}]),t}(T.default.Component);ee.defaultProps={dimensions:{height:0,width:0}},ee.propTypes={api:A.wrappedApiShape,dimensions:_.default.object,broadcast:L.broadcastPropType,isLive:_.default.bool,tabHidden:_.default.bool,width:_.default.number};t.HeartsClass=ee;t.default=(0,A.injectApi)((0,C.connect)((0,N.default)(["dimensions","tabHidden"]))((0,I.purify)(ee)))},1485:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(21),o=n(s),l=a(6),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(3),m=n(h),v=a(4),y=n(v),g=a(1),b=n(g),E=a(0),_=n(E),k=a(14),T=a(521),C=n(T),P=a(184),M=a(284),S=a(1392),w=n(S),R=a(54),I=n(R),A=a(1353),O=n(A),N=a(528),L=a(27),D=a(283),U=n(D),F=a(517),H=a(17),V=15,B=4500,x=1e3,j=7e3,q=3e4,W=1e3,Y=500,z=3e3,G=400,K=function(){function e(){(0,m.default)(this,e),this.isDelayed=!1,this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.mouseMove=(0,C.default)(this.mouseMove.bind(this),200,{maxWait:1e3,leading:!0,trailing:!1})}return(0,y.default)(e,[{key:"setDelay",value:function(e){e||this.clearTimeouts(),this.isDelayed=e}},{key:"mouseEnter",value:function(){this.isDelayed||this.setDelay(Date.now())}},{key:"mouseLeave",value:function(){this.isDelayed&&this.setDelay(!1)}},{key:"mouseMove",value:function(){this.isDelayed&&this.inactivityTimeout()}},{key:"inactivityTimeout",value:function(){var e=this;clearTimeout(this._inactivityTimeout),this._inactivityTimeout=setTimeout(function(){e.setDelay(!1)},z)}},{key:"clearTimeouts",value:function(){clearTimeout(this._inactivityTimeout),clearTimeout(this._maxPauseTimeout)}}]),e}(),J=function(e){function t(e){(0,m.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={forceUpdate:0},a.lastUpdate=null,a.activeMessages=[],a.messagePauser=new K,a.flushQueuedMessages(),a}return(0,f.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){this.eventManagerSubscribe()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.forceUpdateTimeout),this.messagePauser.clearTimeouts(),this.eventManagerUnsubscribe()}},{key:"eventManagerSubscribe",value:function(){var e=this;this.commentSub=P.eventManager.subscribe(M.CHAT_COMMENTS,function(t){e.queuedMessages.comments=e.queuedMessages.comments.concat(t),e.queueForcedUpdate()}),this.userCommentSub=P.eventManager.subscribe(M.CHAT_USER_COMMENTS,function(t){e.queuedMessages.userComments=e.queuedMessages.userComments.concat(t),e.queueForcedUpdate()}),this.systemMessageSub=P.eventManager.subscribe(M.CHAT_SYSTEM_MESSAGES,function(t){e.queuedMessages.systemMessages=e.queuedMessages.systemMessages.concat(t),e.queueForcedUpdate()}),this.joinSub=P.eventManager.subscribe(M.CHAT_JOINS,function(t){e.queuedMessages.joins=e.queuedMessages.joins.concat(t),e.queueForcedUpdate()}),this.firstSparklesSub=P.eventManager.subscribe(M.CHAT_FIRST_SPARKLES,function(t){e.queuedMessages.firstSparkles=e.queuedMessages.firstSparkles.concat(t),e.queueForcedUpdate()})}},{key:"eventManagerUnsubscribe",value:function(){this.commentSub.remove(),this.userCommentSub.remove(),this.systemMessageSub.remove(),this.joinSub.remove(),this.firstSparklesSub.remove()}},{key:"componentWillReceiveProps",value:function(e){e.chat.shouldFlush&&this.flush(e)}},{key:"isNextTick",value:function(){return this.queuedMessages.userComments.length||this.queuedMessages.systemMessages.length||new Date-this.lastUpdate>=Y}},{key:"shouldComponentUpdate",value:function(e){return this.props.tabHidden===e.tabHidden&&!!this.isNextTick()}},{key:"flush",value:function(){this.activeMessages.length=0,this.flushQueuedMessages()}},{key:"flushQueuedMessages",value:function(){this.queuedMessages={queue:[],userComments:[],systemMessages:[],comments:[],joins:[],firstSparkles:[]}}},{key:"isImmediateMessage",value:function(e){switch(e.type){case U.default.USER_CHAT:case U.default.SYSTEM:return!0;default:return!1}}},{key:"queueForcedUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(function(){var t=e.state.forceUpdate;t++,e.setState({forceUpdate:t})},t)}},{key:"getUsersTimelineTime",value:function(){var e=Date.now(),t=this.messagePauser.isDelayed,a=t||e;return{usersTimelineTime:this.props.tabHidden?e:a,now:e}}},{key:"updateActiveMessages",value:function(){this.lastUpdate=new Date;var e=this.getUsersTimelineTime(),t=e.usersTimelineTime,a=e.now,n=V+this.queuedMessages.userComments.length+this.queuedMessages.systemMessages.length+this.queuedMessages.queue.length,i=[].concat((0,o.default)(this.queuedMessages.queue),(0,o.default)(this.queuedMessages.userComments),(0,o.default)(this.queuedMessages.systemMessages),(0,o.default)(this.queuedMessages.comments),(0,o.default)(this.queuedMessages.joins),(0,o.default)(this.queuedMessages.firstSparkles)).slice(0,n);if(this.messagePauser.isDelayed)return i.length&&this.queueForcedUpdate(200),this.activeMessages;this.flushQueuedMessages();var r=this.props.dimensions,s=r&&r.height||G,l=Math.max(Math.floor((s+50)/100)-2,1);this.activeMessages=this.activeMessages.reduce(function(e,a){if(a.exiting&&(t>a.exiting+B||a.exitNow&&t>a.exiting+x))return e;var n=a.sticky?q:j,i=t>a.displayDate+W+n;return!a.exiting&&i&&(a.sticky&&(a.slideOut=!0),a.exiting=t),e.push(a),e},[]);var u=i.findIndex(function(e,t,a){var n=a[t+1];return 0!==t&&e.isJoin&&!!n&&n.isJoin});if(u>=0){var d=i.splice(u,i.length);this.queuedMessages.queue=[].concat((0,o.default)(this.queuedMessages.queue),(0,o.default)(d))}for(var c=i.shift();c;)this.addMessage(c,t,a),c=i.shift();this.activeMessages.slice(0,-1*l).forEach(function(e){e.exiting||(e.exiting=t),e.exitNow=!0}),(i.length||this.activeMessages.length||this.queuedMessages.queue.length)&&this.queueForcedUpdate(200)}},{key:"addMessage",value:function(e,t,a){var n=void 0;for(n=this.activeMessages.length-1;n>=0&&this.activeMessages[n].sticky;n--);var i=this.activeMessages[n];if(e.isJoin&&i&&i.isJoin){var s=i.usernames?[].concat((0,o.default)(i.usernames),[e.username]):[i.username,e.username];this.activeMessages[n]=(0,r.default)({},this.activeMessages[n],{user_id:e.user_id,vip:e.vip,superfan:e.superfan,displayDate:a,collapsed:!0,usernames:s,exiting:void 0})}else e.displayDate=a,this.activeMessages.splice(n+1,0,e)}},{key:"isTopContributor",value:function(e){return!(!e||!e.user_id)&&this.props.chat.topContributorsIds.indexOf(e.user_id)>=0}},{key:"renderMessages",value:function(){var e=this;return this.updateActiveMessages(),this.activeMessages.map(function(t){return _.default.createElement(w.default,{key:t.uuid,message:t,isTopContributor:e.isTopContributor(t),isLive:e.props.isLive,broadcast:e.props.broadcast,blocked:e.props.blocked,mutedUsers:e.props.chat.mutedUsers,dispatch:e.props.dispatch,redesign:e.props.redesign})})}},{key:"render",value:function(){var e=["Messages"].concat(this.props.classNames).join(" ");return _.default.createElement("div",{className:e,onMouseEnter:this.messagePauser.mouseEnter,onMouseLeave:this.messagePauser.mouseLeave,onMouseMove:this.messagePauser.mouseMove},_.default.createElement("ul",null,this.renderMessages()))}}]),t}(_.default.Component);J.propTypes={broadcast:L.broadcastPropType,isLive:b.default.bool,classNames:b.default.array,redesign:b.default.bool,dispatch:b.default.func,chat:N.chatPropType,dimensions:b.default.object,tabHidden:b.default.bool,blocked:b.default.object},t.default=(0,k.connect)((0,H.compose)(O.default,(0,I.default)(["dimensions","tabHidden","blocked"])))((0,F.purify)(J))},1486:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return l.default.createElement(d.default,(0,s.default)({},e,{pill:!0,redesign:!0,onIcon:m,offIcon:v}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(0),l=n(o),u=a(1356),d=n(u),c=a(1525),p=n(c),f=a(1524),h=n(f),m=l.default.createElement(p.default,null),v=l.default.createElement(h.default,null);i.propTypes=(0,s.default)({},d.default.propTypes),t.default=i},1487:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(21),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(1412),k=n(_),T=a(1372),C=n(T),P=a(131),M=a(519),S=n(M),w=a(1418),R=n(w),I=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.clickListener=null,a.handleClick=function(){return R.default.togglePlayback(a.props)},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.clickListener=this.props.sharedEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){(0,S.default)(this.clickListener,"remove")}},{key:"render",value:function(){var e=["PlaybackControlsOverlay"].concat((0,r.default)(R.default.buildStateClasses(this.props.player)));return b.default.createElement("div",{className:e.join(" ")},b.default.createElement("div",{className:"PlaybackControlsOverlay-cover"},b.default.createElement("div",{className:"PlaybackControlsOverlay-hud"},b.default.createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-pause"},b.default.createElement(k.default,null)),b.default.createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-play"},b.default.createElement(C.default,null)))))}}]),t}(b.default.Component);I.propTypes={dispatch:y.default.func.isRequired,dispatchPauseVideo:y.default.func.isRequired,dispatchPlayVideo:y.default.func.isRequired,player:y.default.object.isRequired,sharedEventListener:y.default.func.isRequired},t.default=(0,E.connect)(function(){return{}},P.videoPlayerDispatchMapper)(I)},1488:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return s.default.createElement("div",{className:"PlaybackTime"},(0,c.getFormattedTime)(e.replay.elapsed))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),s=n(r),o=a(14),l=a(17),u=a(1352),d=a(282),c=a(84);i.propTypes={replay:d.replayPropType.isRequired},t.default=(0,o.connect)((0,l.compose)(u.replayFullMapper))(i)},1489:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.isStalled,a=[u];return t&&a.push(d),l.default.createElement("div",{className:a.join(" ")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u="SeekingOverlay",d="SeekingOverlay--isSeeking";i.propTypes={isStalled:s.default.bool}},1490:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(1399),E=n(b),_=a(322),k=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"renderUserListItems",value:function(){return this.props.users.map(function(e){return y.default.createElement(_.ListViewItem,{key:e.user_id,height:38},y.default.createElement("div",{className:"UserActivityList-item"},y.default.createElement(E.default,{rosterUser:e,withDisplayName:!0})))})}},{key:"render",value:function(){var e=["UserActivityList","UserActivityList--"+this.props.users.length+"items"];return y.default.createElement("div",{className:e.join(" ")},y.default.createElement(_.ListView,{aveCellHeight:38,runwayItems:3,runwayItemsOpposite:3},this.renderUserListItems()))}}]),t}(y.default.Component);k.defaultProps={users:[]},k.propTypes={dispatch:m.default.func.isRequired,users:m.default.array},t.default=(0,g.connect)()(k)},1491:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserHeartClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(186),E=n(b),_=a(1353),k=a(72),T=a(49),C=a(23),P=a(1503),M=n(P),S=a(107),w=n(S),R=a(134),I=n(R),A=a(539),O=a(11),N=a(9),L=new N.FileDebugger("UserHeart",!0,!0),D=700,U=200,F=3e4,H=F/U+1,V={INACTIVE:"INACTIVE",ACTIVE_VIA_CLICK:"ACTIVE_VIA_CLICK",ACTIVE_VIA_KEY:"ACTIVE_VIA_KEY"},B=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return E.default.set("UserHeart",a),a.state={currentState:V.INACTIVE,eggmoji:!1},a.heartsFromBlast=0,a.sendHeart=a.sendHeart.bind(a),a.handleClick=a.handleClick.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("keyup",this.handleKeyUp,!0)}},{key:"componentWillUnmount",value:function(){this.setState({currentState:V.INACTIVE,eggmoji:!1}),this.clearTimeouts(),window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("keyup",this.handleKeyUp,!0)}},{key:"handleClick",value:function(){this.state.currentState===V.ACTIVE_VIA_KEY&&this.handleKeyUp(),this.sendHeart()}},{key:"targetIsInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;return!!t&&("INPUT"===t.tagName||void 0)}},{key:"keyPressIsValid",value:function(e){return(!this.props.chat||!this.props.chat.paused)&&(e.keyCode===I.default.SPACE_BAR&&(!(this.heartsFromBlast>H)&&(!this.targetIsInput(e)&&!this.props.commentIsFocused)))}},{key:"handleKeyPress",value:function(e){var t=this;this.keyPressIsValid(e)&&this.setState({currentState:V.ACTIVE_VIA_KEY},function(){t.props.isAuthed&&!t.spaceTimer&&(clearTimeout(t.spaceTimer),t.spaceTimer=setTimeout(function(){t.state.currentState===V.ACTIVE_VIA_KEY&&t.blastHearts()},D))})}},{key:"handleKeyUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clearTimeouts(),this.heartsFromBlast=0,this.setState({currentState:V.INACTIVE}),this.keyPressIsValid(e)&&e.keyCode===I.default.SPACE_BAR&&this.sendHeart()}},{key:"clearTimeouts",value:function(){this.spaceTimer&&(clearTimeout(this.spaceTimer),this.spaceTimer=null),this.eggModeTimer&&(clearTimeout(this.eggModeTimer),this.eggModeTimer=null),clearTimeout(this.heartBlastTimer),clearTimeout(this.blastHeartsTimeout)}},{key:"blastHearts",value:function(){var e=this;if(this.props.commentIsFocused||this.props.chat&&this.props.chat.paused||this.heartBlastTimer||this.state.currentState!==V.ACTIVE_VIA_KEY||this.heartsFromBlast>H)return L.debug("blastHearts clear",this.props.commentIsFocused,this.props.chat&&this.props.chat.paused,this.state.currentState,this.heartsFromBlast,H),this.clearTimeouts();L.debug("blastHearts enter",this.eggModeTimer),clearTimeout(this.heartBlastTimer),this.heartBlastTimer=setTimeout(function(){e.heartBlastTimer=null,e.props.isLive&&!e.eggModeTimer&&(L.debug("create eggModeTimer"),clearTimeout(e.eggModeTimer),e.eggModeTimer=setTimeout(function(){return e.eggMode()},F)),e.heartsFromBlast++,e.sendHeart(),clearTimeout(e.blastHeartsTimeout),e.blastHeartsTimeout=setTimeout(function(){return e.blastHearts()})},U)}},{key:"eggMode",value:function(){L.debug("eggMode");var e=this.props.chat;return e&&e.paused?this.clearTimeouts():this.state.currentState===V.INACTIVE?this.clearTimeouts():(this.props.dispatch((0,C.trackEvent)("EGGMOJI_MODE"),{color:(0,O.getParticipantColorName)(e.chatSession.participant_index)}),void this.setState({eggmoji:(0,O.getParticipantEggmoji)(e.chatSession.participant_index)}))}},{key:"sendHeart",value:function(){var e=this.props.chat;if(!e||!e.paused){if(!this.props.isAuthed)return void this.props.dispatch((0,T.openSignInModal)({openedFrom:"HEART"}));var t=this.props,a=t.authUser;(0,t.dispatch)((0,k.chatAddNewUserHeart)({authUser:a,eggmojiOverride:this.state.eggmoji}))}}},{key:"getParticipantColorName",value:function(){return this.props.isLive?(0,O.getParticipantColorName)(this.props.chat.chatSession.participant_index):A.REPLAY_COLOR_NAME}},{key:"render",value:function(){var e=this.props.isAuthed,t=["UserHeart"];if(e){var a=this.getParticipantColorName();this.state.currentState!==V.INACTIVE&&t.push("UserHeart--active"),a&&t.push("UserHeart--participant"+a),this.state.eggmoji&&t.push("UserHeart-eggmoji")}else t.push("UserHeart--inactive");return y.default.createElement(w.default,{className:t.join(" "),onClick:this.handleClick},this.state.eggmoji||y.default.createElement(M.default,null))}}]),t}(y.default.Component);B.propTypes={authUser:m.default.object,chat:_.chatSessionPropType,commentIsFocused:m.default.bool,dispatch:m.default.func.isRequired,isAuthed:m.default.bool,isLive:m.default.bool};t.UserHeartClass=B;t.default=(0,g.connect)(_.chatSessionMapper)(B)},1492:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(521),b=n(g),E=a(1549),_=n(E),k=a(594),T=n(k),C=a(1490),P=n(C),M=a(1399),S=n(M),w=a(1393),R=n(w),I=a(83),A=a(9),O=new A.FileDebugger("UserActivity",!0),N=34,L=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.showOverflow=a.showOverflow.bind(a),a.tooltipRef=null,a.userActivityRef=null,a.overflowIsOpen=!1,a.debouncedTooltipResize=(0,b.default)(a.debouncedTooltipResize.bind(a),1500),a.state=a.setFriendsAndContributorsState(e),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.handleUpdateCallbacks()}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.setFriendsAndContributorsState(e))}},{key:"shouldComponentUpdate",value:function(e){return this.props.roster!==e.roster||this.props.following!==e.following||this.props.topContributors!==e.topContributors}},{key:"componentDidUpdate",value:function(){this.handleUpdateCallbacks()}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,I.hideTooltip)())}},{key:"handleUpdateCallbacks",value:function(){var e=this.state,t=e.topContributorsList,a=e.friendsWatchingList,n=!(!t.length&&!a.length);this.props.onUpdate(n)}},{key:"setFriendsAndContributorsState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getFriends(e),a=t.map(function(e){return e.user_id}),n=e.topContributors.map(function(e){return e.user_id}),i=(0,_.default)(a,n),r=this.getTopContributors(e,i),s=t.filter(function(e){return i.indexOf(e.user_id)<0});return{topContributorsList:(0,T.default)(r,function(e){return e.user_id}),friendsWatchingList:(0,T.default)(s,function(e){return e.user_id})}}},{key:"showOverflow",value:function(){var e=this,t=this.props.dispatch,a=this.getOverflowUsers();if(!a.length)return this.overflowIsOpen=!1,void t((0,I.hideTooltip)());this.addResizeListener(),this.overflowIsOpen=!0,t((0,I.showTooltip)({component:P.default,target:this.tooltipRef,position:"top",componentProps:{users:a},onClose:function(){e.overflowIsOpen=!1}}))}},{key:"addResizeListener",value:function(){this.removeEventListener(),this.overflowIsOpen&&window.addEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"removeEventListener",value:function(){window.removeEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"debouncedTooltipResize",value:function(){this.overflowIsOpen&&this.showOverflow()}},{key:"userHasRequiredInformation",value:function(e){return e&&e.username&&e.display_name&&e.participant_index}},{key:"getTopContributors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.topContributors.reduce(function(e,a){return a.is_present?e.length<3?(e.push(a),e):t.indexOf(a.user_id)>=0?(e.push(a),e):e:e},[])}},{key:"getFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.following,n=t.roster;return a&&n?n.filter(function(t){return e.userHasRequiredInformation(t)&&a.indexOf(t.user_id)>=0}):[]}},{key:"getOverflowUsers",value:function(){var e=this.getFriends(),t=this.userActivityRef.clientWidth,a=e.length-Math.floor(t/N)+1;return a<1?[]:e.slice(-1*a).reverse()}},{key:"possiblyRenderTopContributors",value:function(){var e=this.state,t=e.topContributorsList,a=e.friendsWatchingList;if(!t.length)return null;var n=["UsersActivity-sparkleContainer"];return a.length&&n.push("with-seperator"),y.default.createElement("div",{className:n.join(" ")},t.map(function(e){return y.default.createElement(S.default,{key:e.user_id,isPresent:e.is_present,participantIndex:e.participant_index,userId:e.user_id,isSparkle:!0,sparklePercent:5*Math.ceil(e.contributed_stars/t[0].contributed_stars*100/5)})}))}},{key:"possiblyRenderFriends",value:function(){var e=this,t=this.state.friendsWatchingList;if(!t.length)return null;var a=t.map(function(e){return y.default.createElement(S.default,{key:e.user_id,rosterUser:e,participantIndex:e.participant_index})});return y.default.createElement("div",{className:"UsersActivity-friendsContainer",ref:function(t){e.userActivityRef=t}},y.default.createElement("div",{onClick:this.showOverflow,ref:function(t){e.tooltipRef=t},className:"UsersActivity-overflowContainer"},y.default.createElement("div",{className:"UsersActivity-overflowClickHandler"}),y.default.createElement("div",{className:"UsersActivity-overflow"},y.default.createElement(R.default,{isVertical:!1}))),a)}},{key:"render",value:function(){var e=["UsersActivity"];return this.props.left&&e.push("UsersActivity--left"),y.default.createElement("div",{className:e.join(" ")},this.possiblyRenderTopContributors(),this.possiblyRenderFriends())}}]),t}(y.default.Component);L.defaultProps={roster:[],following:[],topContributors:[],onUpdate:function(){return O.debug("onUpdate not provided")}},L.propTypes={dispatch:m.default.func.isRequired,following:m.default.arrayOf(m.default.string),roster:m.default.arrayOf(m.default.object),topContributors:m.default.array,left:m.default.bool,onUpdate:m.default.func},t.default=L},1493:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(184),b=a(284),E=a(1425),_=n(E),k=a(291),T=a(18),C=a(11),P=3e3,M=5e3,S=200,w=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.onNewHeart=a.onNewHeart.bind(a),a.isMyHeart=a.isMyHeart.bind(a),a.state={showHeart:!1,isBeating:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.heartsSub=g.eventManager.subscribe(b.CHAT_HEARTS,this.onNewHeart,this.isMyHeart)}},{key:"getId",value:function(){return this.props.user.userId}},{key:"isMyHeart",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){if(e[t].user_id===this.getId())return!0}return!1}},{key:"onNewHeart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=!!t.filter(function(t){return t.user_id===e.getId()&&t.isSparkled}).length;this.setState({showHeart:!0,isBeating:!0}),clearTimeout(this.beatTimer),this.beatTimer=setTimeout(function(){return e.setState({isBeating:!1})},S),clearTimeout(this.showHeartTimer),this.showHeartTimer=setTimeout(function(){return e.setState({showHeart:!1})},a?M:P)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.beatTimer),clearTimeout(this.showHeartTimer),this.heartsSub.remove(),this.heartsSub=null}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.user!==e.user||this.state.showHeart!==t.showHeart||this.state.isBeating!==t.isBeating}},{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.user;t((0,k.commentInputSetReply)(a.username))}},{key:"hasUserInformation",value:function(){var e=this.props.user;return e&&e.username&&e.display_name&&this.getParticipantIndex()}},{key:"getParticipantIndex",value:function(){return this.props.participantIndex||this.props.user.participant_index}},{key:"renderSparklePie",value:function(){var e=["UsersActivityItem-pieContainer"];return e.push("is-pie"+(this.props.sparklePercent||0)+"Percent"),y.default.createElement("div",{className:e.join(" ")},y.default.createElement("div",{className:"UsersActivityItem-pie"},y.default.createElement("span",null)))}},{key:"render",value:function(){if(!this.hasUserInformation())return null;var e=this.props,t=e.user,a=e.isSparkle,n=e.withDisplayName,i=this.state,r=i.showHeart,s=i.isBeating,o=["UsersActivityItem","UsersActivityItem--participant"+(0,C.getParticipantColorName)(this.getParticipantIndex())];r&&(o.push("UsersActivityItem--withHeart"),s&&o.push("UsersActivityItem--withBeat")),a&&o.push("UsersActivityItem--isSparkle");var l=t.avatarUrl;return y.default.createElement("div",{className:o.join(" "),onClick:this.handleClick,title:"@"+t.username+" – "+t.display_name},y.default.createElement("div",{className:"UsersActivityItem-avatarContainer"},y.default.createElement(_.default,null),y.default.createElement("img",{className:"UsersActivityItem-avatar",src:l}),y.default.createElement("div",{className:"UsersActivityItem-avatarBackground"}),a?this.renderSparklePie():null),n?y.default.createElement("div",{className:"UsersActivityItem-displayName"},t.display_name):null)}}]),t}(y.default.Component);w.propTypes={dispatch:m.default.func.isRequired,user:T.userPropType,isSparkle:m.default.bool,participantIndex:m.default.number,sparklePercent:m.default.number,showHeart:m.default.bool,withDisplayName:m.default.bool},t.default=w},1494:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){return{isPlayback:e}}}function r(e){return function(){return{isOverlayVisible:e}}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(33),k=a(19),T=a(293),C=n(T),P=a(545),M=n(P),S=a(24),w=a(27),R=a(18),I=a(513),A=a(282),O=a(1358),N=a(1439),L=n(N),D=a(517),U=a(1463),F=a(1401),H=n(F),V=a(1364),B=n(V),x=a(26),j=n(x),q=a(1441),W=n(q),Y=a(1459),z=n(Y),G=a(1455),K=n(G),J=a(1513),Q=n(J),X=a(1515),Z=n(X),$=a(1471),ee=n($),te=a(1481),ae=n(te),ne=a(1480),ie=n(ne),re=a(54),se=n(re),oe=a(131),le=a(1416),ue=a(17),de=a(103),ce=n(de),pe=a(9),fe=new pe.FileDebugger("VideoPlayer",!0),he=0,me=1e3,ve=(0,H.default)(Z.default),ye=(0,H.default)(Q.default),ge=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.connectingTimer=null,a.sharedEventHandler=new U.EventHandler,a.state={isPlayback:!1,isOverlayVisible:!0},a.setupSharedEventHandler=function(e){e||fe.error("layer is null, possibly unmounting"),a.sharedEventHandler.init(e)},a.handleInterstitialOut=function(){a.state.isPlayback||(a.setState(i(!0)),a.props.onInterstitialOut())},a.handleOverlayChange=function(e){a.setState(r(e))},a.handleVideoEnded=function(){var e=a.getTimecodeShare();e&&e.isLive||a.setState((0,ue.compose)(r(!0),i(!1)))},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.handleSafari360Drawer(e),this.handleSafari360DrawerDismissal(e),e.hideVideo&&!this.props.hideVideo&&this.handleVideoEnded()}},{key:"componentDidUpdate",value:function(){this.handleAutoplayQuery()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.connectingTimer),this.sharedEventHandler.deinit()}},{key:"getLocation",value:function(){var e=this.props.router;return e?e.getCurrentLocation():{}}},{key:"broadcastHasChanged",value:function(e){return!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state)}},{key:"handleAutoplayQuery",value:function(){var e=this.getLocation();(0,ue.hasUrlQueryParam)({location:e,name:S.AUTOPLAY})&&(this.props.player&&this.props.player.isStoppedInterstitial&&this.props.periscopeEnvironment.hasInlineAutoplayVideo()?(fe.debug("dispatchAutoPlayStart"),this.props.dispatchAutoPlayStart()):this.props.player.isPlayback&&this.canRenderVideo()&&(fe.debug("dispatchClearAutoplay"),this.props.dispatchClearAutoplay(e)))}},{key:"handleSafari360Drawer",value:function(e){!this.props.periscopeEnvironment.has360Support()&&!this.props.player.isExpectingVideo&&e.player.isExpectingVideo&&e.broadcast.has360Video&&e.dispatchShowSafari360Drawer()}},{key:"handleSafari360DrawerDismissal",value:function(e){e.drawer.isSafari360AlertVisible&&e.player.isStopped&&e.dispatchHideDrawer()}},{key:"getVideoUrl",value:function(){return!!this.props.video&&this.props.video.autoUrl}},{key:"getViewerCount",value:function(){var e=this.props,t=e.broadcast,a=e.n_watching,n=e.n_watched;return t.isRunning?a:n}},{key:"isPlayerFormat",value:function(e){return this.props.playerFormat===e}},{key:"getFillMode",value:function(){switch(this.props.playerFormat){case C.default.EMBED:return M.default.COVER;case C.default.APP:default:return M.default.CONTAIN}}},{key:"getTimecodeShare",value:function(){var e=this.props.broadcast;if(e.isEnded||ce.default.isEnabled("LiveTimecodeSharing"))return this.props.timecodeSharing[e.id]}},{key:"canRenderVideo",value:function(){var e=this.props,t=e.player,a=e.playerFormat;if(!t)return!1;var n=!t.isStoppedInterstitial;return this.props.periscopeEnvironment.hasInlineAutoplayVideo()||(n=!0),(a!==C.default.APP||!this.props.periscopeEnvironment.shouldUseMobileLayout())&&(n&&this.getVideoUrl())}},{key:"renderVideo",value:function(){var e=this.props,t=e.broadcast,a=e.player,n=e.width,i=e.height,r=t?t.width:0,s=t?t.height:0,o=this.getFillMode(),l=this.getVideoUrl(),u=a.dimensions.width||r,d=a.dimensions.height||s,c=this.isPlayerFormat(C.default.EMBED),p=a.isAutoplay&&c;return b.default.createElement(ve,{url:l,video:this.props.video,broadcast:this.props.broadcast,isVideoPreview:p,isReplay:t.isEnded,is360:t.has360Video,fillMode:o,playerWidth:u,playerHeight:d,windowWidth:n,windowHeight:i,dispatch:this.props.dispatch,player:this.props.player,couchmode:this.props.couchmode,playerFormat:this.props.playerFormat,disableStallingRecovery:c,setVideoRef:this.props.setVideoRef,sharedEventListener:this.sharedEventHandler.listen,duration:me,withFadeVisible:!this.props.hideVideo&&this.state.isPlayback,onEnded:this.handleVideoEnded,timecodeShare:this.getTimecodeShare()})}},{key:"possiblyRenderVideo",value:function(){if(this.canRenderVideo())return b.default.createElement(L.default,{center:!0},b.default.createElement(B.default,null,this.renderVideo(),b.default.createElement(U.EventHandlerLayer,{disabled:!this.shouldIncludeVideoOverlay(),withRef:this.setupSharedEventHandler,cursor:this.sharedEventHandler.hasClickEvent(),is360:this.props.broadcast.has360Video,hideCursor:!this.state.isOverlayVisible}),this.possiblyRenderVideoOverlay()))}},{key:"shouldIncludeVideoOverlay",value:function(){return!!this.props.player.includeVideoUI&&!this.props.player.adPlaylist}},{key:"possiblyRenderVideoOverlay",value:function(){if(!this.shouldIncludeVideoOverlay())return null;var e=this.props.broadcast,t=this.getViewerCount();switch(this.props.playerFormat){case C.default.EMBED:return b.default.createElement(ae.default,{dispatch:this.props.dispatch,broadcast:e,viewers:t,player:this.props.player});case C.default.APP:default:return b.default.createElement(ye,{broadcast:e,viewers:t,user:this.props.user,player:this.props.player,profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,couchmode:this.props.couchmode,nextBroadcastCallback:this.props.nextBroadcastCallback,getTime:this.props.getTime,toggleChat:this.props.toggleChat,toggleSidebar:this.props.toggleSidebar,toggleFullscreen:this.props.toggleFullscreen,hideUI:this.props.hideUI,hasNewMessages:this.props.hasNewMessages,isChatVisible:this.props.isChatVisible,onOverlayChange:this.handleOverlayChange,onVolumeChange:this.props.onVolumeChange,simple:this.props.simple,redesign:this.props.redesign,timecodeShare:this.getTimecodeShare(),sharedEventListener:this.sharedEventHandler.listen,sharedEventNode:this.sharedEventHandler.getNode,width:this.props.width,height:this.props.height,delay:0,duration:250,withFadeVisible:!this.props.hideVideo&&this.state.isPlayback,onFade:this.props.onOverlayIn})}}},{key:"renderInterstitial",value:function(){var e=this.getViewerCount();switch(this.props.playerFormat){case C.default.EMBED:return b.default.createElement(ie.default,{user:this.props.user,broadcast:this.props.broadcast,viewers:e,player:this.props.player,width:this.props.width,height:this.props.height,delay:500,duration:500,onFade:this.handleInterstitialOut});case C.default.APP:default:return b.default.createElement(ee.default,{broadcast:this.props.broadcast,viewers:e,user:this.props.user,replay:this.props.replay,profileIsVisible:this.props.profileIsVisible,width:this.props.width,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,broadcastError:this.props.broadcastError,disableBackground:this.props.disableBackground,timecodeShare:this.getTimecodeShare(),duration:he,onFade:this.handleInterstitialOut})}}},{key:"possibleIncludeChatFunctional",value:function(){return this.shouldIncludeVideoOverlay()?b.default.createElement(W.default,{isPlayback:this.props.player.isPlayback,broadcast:this.props.broadcast,user:this.props.user}):null}},{key:"render",value:function(){return b.default.createElement("div",{className:"VideoPlayer u-fullHeight"},b.default.createElement(z.default,this.props),this.possiblyRenderVideo(),this.renderInterstitial(),b.default.createElement(K.default,null),!ce.default.isEnabled("BroadcastRedesignVideo")&&this.possibleIncludeChatFunctional())}}]),t}(b.default.Component);ge.defaultProps={playerFormat:C.default.APP,onInterstitialOut:function(){return fe.warn("onInterstitialOut not provided")},onOverlayIn:function(){return fe.warn("onOverlayIn not provided")}},ge.propTypes={broadcast:w.broadcastPropType,broadcastError:y.default.object,couchmode:y.default.bool,dispatchShowSafari360Drawer:y.default.func.isRequired,dispatchHideDrawer:y.default.func.isRequired,drawer:O.drawerPropType.isRequired,playerFormat:y.default.oneOf(T.playerFormatValues),height:y.default.number,n_watched:y.default.number,n_watching:y.default.number,nextBroadcastCallback:y.default.func,profileIsVisible:y.default.bool,replay:A.replayPropType.isRequired,router:y.default.object,toggleProfileSidebar:y.default.func,user:R.userPropType,video:I.videoPropType,width:y.default.number,dispatch:y.default.func.isRequired,player:y.default.object,dispatchAutoPlayStart:y.default.func.isRequired,dispatchClearAutoplay:y.default.func.isRequired,timecodeSharing:y.default.object.isRequired,api:k.wrappedApiShape.isRequired,setVideoRef:y.default.func,disableBackground:y.default.bool,getTime:y.default.func,onVolumeChange:y.default.func,toggleChat:y.default.func,toggleSidebar:y.default.func,toggleFullscreen:y.default.func,hideUI:y.default.bool,hasNewMessages:y.default.bool,isChatVisible:y.default.bool,simple:y.default.bool,redesign:y.default.bool,hideVideo:y.default.bool,onInterstitialOut:y.default.func,onOverlayIn:y.default.func,periscopeEnvironment:y.default.object.isRequired},t.default=(0,_.withRouter)((0,k.injectApi)((0,j.default)((0,E.connect)((0,ue.compose)(le.drawerStateToProps,oe.videoPlayerStateMapper,(0,se.default)(["timecodeSharing"])),(0,ue.compose)(le.drawerDispatchToProps,oe.videoPlayerDispatchMapper))((0,D.purify)(ge)))))},1495:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.auth.isLoggedIn||e.allowLimbo&&e.auth.isLimbo?e.children:"function"==typeof e.placeholder?e.placeholder():e.placeholder||null}Object.defineProperty(t,"__esModule",{value:!0}),t.WhenAuthed=i;var r=a(14),s=a(41),o=a(30),l=a(1),u=n(l);i.propTypes={auth:o.authPropType.isRequired,allowLimbo:u.default.bool,placeholder:u.default.oneOfType([u.default.node,u.default.func]),children:u.default.node},t.default=(0,r.connect)(s.authStateToProps)(i)},1496:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.auth.isLoggedIn?"function"==typeof e.placeholder?e.placeholder():e.placeholder||null:e.children}Object.defineProperty(t,"__esModule",{value:!0}),t.WhenNotAuthed=i;var r=a(14),s=a(41),o=a(30),l=a(1),u=n(l);i.propTypes={auth:o.authPropType.isRequired,placeholder:u.default.oneOfType([u.default.node,u.default.func]),children:u.default.node},t.default=(0,r.connect)(s.authStateToProps)(i)},1497:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.hasNewMessages;return l.default.createElement("div",{className:"ChatButton"},l.default.createElement(p.default,{icon:!0},l.default.createElement(d.default,null)),!!t&&l.default.createElement("div",{className:"ChatButton-indicator"}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o),u=a(1518),d=n(u),c=a(526),p=n(c);i.propTypes={hasNewMessages:s.default.bool},t.default=i},1498:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){return e||(e=t.duration+1),{duration:e}}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m),y=a(57),g=n(y),b=(0,g.default)(["\n  will-change: transform;\n  transition: 0.2s "," transform;\n\n  perspective: 1000;\n  backface-visibility: hidden;\n  transform: translate3d(0, 0, 0);\n\n  display: flex;\n  align-items: center;\n"],["\n  will-change: transform;\n  transition: 0.2s "," transform;\n\n  perspective: 1000;\n  backface-visibility: hidden;\n  transform: translate3d(0, 0, 0);\n\n  display: flex;\n  align-items: center;\n"]),E=(0,g.default)(["\n  transform: translateY(0px);\n  position: absolute;\n"],["\n  transform: translateY(0px);\n  position: absolute;\n"]),_=(0,g.default)(["\n  transform: translateY(","px);\n"],["\n  transform: translateY(","px);\n"]),k=(0,g.default)(["\n  color: white;\n  text-decoration: none;\n"],["\n  color: white;\n  text-decoration: none;\n"]),T=(0,g.default)(["\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n  overflow: hidden;\n  height: ","px;\n  border-radius: ","px;\n  padding: 0 22px;\n  background-color: ",";\n  will-change: background-color;\n  transition: 0.2s "," background-color;\n  font-size: 14px;\n  font-family: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background-color: ",";\n\n    "," {\n      transform: translateY(-","px);\n    }\n\n    "," {\n      transform: translateY(0px);\n    }\n  }\n"],["\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n  overflow: hidden;\n  height: ","px;\n  border-radius: ","px;\n  padding: 0 22px;\n  background-color: ",";\n  will-change: background-color;\n  transition: 0.2s "," background-color;\n  font-size: 14px;\n  font-family: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    background-color: ",";\n\n    "," {\n      transform: translateY(-","px);\n    }\n\n    "," {\n      transform: translateY(0px);\n    }\n  }\n"]),C=(0,g.default)(["\n  margin: -1px 0 0 6px;\n"],["\n  margin: -1px 0 0 6px;\n"]),P=a(0),M=n(P),S=a(1),w=n(S),R=a(2),I=a(33),A=a(50),O=n(A),N=a(1522),L=n(N),D=a(1409),U=n(D),F=a(527),H=n(F),V=a(85),B=n(V),x=a(9),j=new x.FileDebugger("TimecodeSharingJump",!1),q=32,W=O.default.div(b,B.default.Animations.EaseOutCubic),Y=W.extend(E),z=W.extend(_,q),G=(0,O.default)(I.Link)(k),K=O.default.div(T,q,q,B.default.Colors.PeriscopeRed,B.default.Animations.EaseOutCubic,B.default.Fonts.MuseoBold,B.default.Colors.PeriscopeRedVeryDark,Y,q,z),J=O.default.div(C),Q=function(e){function t(e){(0,d.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.last=Date.now(),a.timer=null,a.state={duration:e.duration},a.incrementDuration=function(){clearTimeout(a.timer),a.timer=setTimeout(function(){var e=Date.now();e-a.last>1e3&&(a.last=e,j.debug("JumpToLive","timer",a.state.duration),a.setState(i())),a.incrementDuration()},250)},a.handleClick=function(){j.warn("JumpToLive","handleClick"),a.props.onJumpToLive()},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.incrementDuration()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"componentWillReceiveProps",value:function(e){e.duration!==this.props.duration&&(j.warn("JumpToLive","componentWillReceiveProps","new duration"),this.setState(i(e.duration)))}},{key:"render",value:function(){return M.default.createElement(G,{to:this.props.url},M.default.createElement(K,{onClick:this.handleClick},M.default.createElement(Y,null,M.default.createElement(R.FormattedMessage,H.default.skipToLive),M.default.createElement(J,null,M.default.createElement(L.default,null))),M.default.createElement(z,null,M.default.createElement(R.FormattedMessage,(0,s.default)({},H.default.skipToTime,{values:{time:M.default.createElement(U.default,{time:this.state.duration})}})),M.default.createElement(J,null,M.default.createElement(L.default,null)))))}}]),t}(M.default.Component);t.default=Q,Q.propTypes={url:w.default.string.isRequired,duration:w.default.number.isRequired,onJumpToLive:w.default.func.isRequired}},1499:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LogInRequired=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(0),m=n(h),v=a(1),y=n(v),g=a(14),b=a(49),E=a(9),_=new E.FileDebugger("ReportBroadcast",!0),k=t.LogInRequired=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.signIn=a.signIn.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"signIn",value:function(){var e=this.props,t=e.dispatch,a=e.onLoggedIn,n=e.onClick,i=e.prompt;t((0,b.openSignInModal)({onLoggedIn:a,prompt:i,prioritizeLogin:!0})),n()}},{key:"render",value:function(){return m.default.createElement("button",{type:"button",className:"LoginRequiredButton",onClick:this.signIn},this.props.children)}}]),t}(h.Component);k.propTypes={dispatch:y.default.func,onClick:y.default.func,children:y.default.node,onLoggedIn:y.default.func,prompt:y.default.string},k.defaultProps={onClick:function(){return _.warn("onClick not provided.")}},t.default=(0,g.connect)()(k)},1500:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ShareBroadcastClass=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(2),b=a(14),E=a(17),_=a(1352),k=a(23),T=a(49),C=a(27),P=a(282),M=a(589),S=n(M),w=a(306),R=n(w),I=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.location,n=e.broadcast,i=e.replay,r=this.getShareComponents();t((0,k.trackEvent)("SHARE_BROADCAST_CLICK",{location:a})),t((0,T.openShareOverlay)({shareComponents:r,broadcast:n,videoStartTime:i.elapsed,videoDuration:i.duration}))}},{key:"generateBroadcastTitle",value:function(){var e=this.props.broadcast;return e?e.status:this.props.intl.formatMessage(R.default.title)}},{key:"getShareComponents",value:function(){var e=this.props,t=e.broadcast,a=e.useBroadcastUrl,n=this.generateBroadcastTitle(),i="";return t.twitter_username&&""!==t.twitter_username&&(i=".@"+t.twitter_username),{text:i,title:n,url:a?t.url:t.urlWithUsername}}},{key:"render",value:function(){var e=this.props.intl;return y.default.createElement("a",{href:"#",className:"ShareBroadcast",title:e.formatMessage(S.default.button.linkTitle),onClick:this.handleClick},this.props.children)}}]),t}(y.default.Component);I.defaultProps={location:"VideoOverlay",broadcast:null,useBroadcastUrl:!1},I.propTypes={broadcast:C.broadcastPropType,dispatch:m.default.func.isRequired,intl:m.default.object.isRequired,location:m.default.string,replay:P.replayPropType.isRequired,useBroadcastUrl:m.default.bool,children:m.default.node};t.ShareBroadcastClass=I;t.default=(0,g.injectIntl)((0,b.connect)((0,E.compose)(_.replayFullMapper))(I))},1501:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return d.default.createElement(P,null,d.default.createElement(y.default,{time:e.replay.elapsed}),d.default.createElement(M,null),d.default.createElement(b.default,{url:e.broadcast.relativeUrl,duration:e.replay.duration,onJumpToLive:e.onJumpToLive}))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),s=n(r),o=(0,s.default)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  color: white;\n  font-size: 16px;\n  font-family: ",";\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n\n  color: white;\n  font-size: 16px;\n  font-family: ",";\n"]),l=(0,s.default)(["\n  margin: 0px 9px;\n  &::after {\n    content: '/';\n  }\n"],["\n  margin: 0px 9px;\n  &::after {\n    content: '/';\n  }\n"]),u=a(0),d=n(u),c=a(1),p=n(c),f=a(14),h=a(50),m=n(h),v=a(1409),y=n(v),g=a(1498),b=n(g),E=a(1352),_=a(85),k=n(_),T=a(9),C=new T.FileDebugger("TimecodeSharingJump",!1),P=m.default.div(o,k.default.Fonts.MuseoNormal),M=m.default.div(l);i.defaultProps={timecodeEnabled:!1,onJumpToLive:function(){return C.error("onJumpToLive not provided")}},i.propTypes={broadcast:p.default.object.isRequired,timecodeShare:p.default.object.isRequired,onJumpToLive:p.default.func.isRequired,replay:p.default.object.isRequired},t.default=(0,f.connect)(E.replayFullMapper)(i)},1502:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return s.default.createElement("svg",{className:"CaretDisclosure",width:"15px",height:"20px",viewBox:"0 0 15 20"},s.default.createElement("defs",null,s.default.createElement("path",{d:"M1125.07107,1901.51472 C1124.68054,1901.90524 1124.68054,1902.53841 1125.07107,1902.92893 C1125.46159,1903.31946 1126.09476,1903.31946 1126.48528,1902.92893 L1131.59619,1897.81802 C1131.98672,1897.4275 1131.98672,1896.79433 1131.59619,1896.40381 L1126.48528,1891.29289 C1126.09476,1890.90237 1125.46159,1890.90237 1125.07107,1891.29289 C1124.68054,1891.68342 1124.68054,1892.31658 1125.07107,1892.70711 L1129.47487,1897.11091 L1125.07107,1901.51472 Z",id:"path-1"}),s.default.createElement("filter",{x:"-98.4%",y:"-40.9%",width:"296.9%",height:"214.5%",filterUnits:"objectBoundingBox",id:"filter-2"},s.default.createElement("feOffset",{dx:"0",dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}),s.default.createElement("feGaussianBlur",{stdDeviation:"2",in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),s.default.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1"}),s.default.createElement("feColorMatrix",{values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0",type:"matrix",in:"shadowBlurOuter1"}))),s.default.createElement("g",{id:"new",stroke:"none",strokeWidth:"1",fill:"none","fill-rule":"evenodd"},s.default.createElement("g",{transform:"translate(-1121.000000, -1889.000000)","fill-rule":"nonzero"},s.default.createElement("g",null,s.default.createElement("use",{fill:"#FFFFFF","fill-rule":"evenodd",xlinkHref:"#path-1"})))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(0),s=n(r)},1503:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r.default.createElement("div",{className:"OutlineHeart"},r.default.createElement("svg",{viewBox:"0 0 59 51"},r.default.createElement("path",{strokeDasharray:"1,3",className:"shape",strokeLinejoin:"round",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"}),r.default.createElement("path",{className:"fill",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"})))};var i=a(0),r=n(i)},1505:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.username,a=e.redesign,n=["BlockedMessage"];return a&&n.push("BlockedMessageRedesign"),d.default.createElement("li",{className:n.join(" ")},d.default.createElement("div",{className:"BlockedMessage-message"},d.default.createElement(c.FormattedMessage,(0,s.default)({},f.default.broadcasterBlockedViewer,{values:{username:d.default.createElement("strong",null,"@"+t)}}))))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(1),l=n(o),u=a(0),d=n(u),c=a(2),p=a(295),f=n(p);i.propTypes={redesign:l.default.bool,username:l.default.string.isRequired};var h=(0,c.injectIntl)(i);t.default=h},1506:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(1),o=n(s),l=a(0),u=n(l),d=a(2),c=a(295),p=n(c),f=function(e){var t=["FirstSparkleMessage","FirstSparkleMessage-participant"+e.participantColor];return e.redesign&&t.push("FirstSparkleMessage--messageRedesign"),u.default.createElement("li",{className:t.join(" "),onClick:e.messageClick},u.default.createElement("div",{className:"FirstSparkleMessage-messageContainer"},u.default.createElement("div",{className:"FirstSparkleMessage-message"},u.default.createElement("div",{className:"FirstSparkleMessage-title"},u.default.createElement(d.FormattedMessage,p.default.firstSparkleTitle)),u.default.createElement("strong",null,u.default.createElement(d.FormattedMessage,(0,r.default)({values:{username:e.message.username}},p.default.firstSparkleMessage)))),u.default.createElement("div",{className:"FirstSparkleMessage-avatarContainer"},u.default.createElement("div",{className:"FirstSparkleMessage-avatar",style:{backgroundImage:"url("+e.message.profile_image_url+")"}}))))};f.propTypes={messageClick:o.default.func.isRequired,participantColor:o.default.string,message:o.default.object,redesign:o.default.bool},f.defaultProps={message:{}},t.default=f},1507:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(1392),b=a(573),E=n(b),_=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.messageClasses=["JoinMessage","Join-participant"+e.participantColor],e.redesign&&a.messageClasses.push("JoinMessageRedesign"),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.collapsed}},{key:"componentWillReceiveProps",value:function(e){e.collapsed&&!this.props.collapsed&&(this.messageClasses=this.messageClasses.filter(function(t){return t!=="Join-participant"+e.participantColor}),this.messageClasses.push("Join-participantDefault"))}},{key:"render",value:function(){var e=this.props.message,t=(0,g.messageUsername)(e);return t?y.default.createElement("li",{className:this.messageClasses.join(" "),onClick:this.props.messageClick},y.default.createElement("div",{className:"JoinMessage-message"},y.default.createElement("strong",null,"@",t)," ",y.default.createElement(E.default,{message:e,withLeadingIcon:!0})," joined")):null}}]),t}(y.default.Component);t.default=_,_.propTypes={collapsed:m.default.bool.isRequired,messageClick:m.default.func.isRequired,participantColor:m.default.string,message:m.default.object,redesign:m.default.bool},_.defaultProps={collapsed:!1,message:{}}},1508:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(2),E=a(285),_=n(E),k=a(27),T=a(49),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.openInApp=a.openInApp.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"openInApp",value:function(){this.props.dispatch((0,T.openAppLinkModal)({broadcast:this.props.broadcast}))}},{key:"render",value:function(){return y.default.createElement("li",{className:"OpenInAppMessage",onClick:this.openInApp},y.default.createElement("img",{className:"OpenInAppMessage-logo",src:"/v/images/largepin.svg"}),y.default.createElement("div",{className:"OpenInAppMessage-message"},y.default.createElement(b.FormattedMessage,_.default.open)))}}]),t}(y.default.Component);C.propTypes={broadcast:k.broadcastPropType,intl:b.intlShape,dispatch:m.default.func},t.default=(0,g.connect)()((0,b.injectIntl)(C))},1509:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.message,a=e.intl;if(t.type===T.default.SENTENCE)return E.default.createElement("span",null,(0,I.getModerationPrompt)(t,a));var n=t.data?t.data.username:"";switch(t.systemMessageType){case P.default.MUTE:return E.default.createElement(_.FormattedMessage,(0,v.default)({},R.default.userMuted,{values:{username:E.default.createElement("strong",null,"@",n)}}));case P.default.COMMENT_REPORTED:return E.default.createElement(_.FormattedMessage,(0,v.default)({},R.default.commentReported,{values:{username:E.default.createElement("strong",null,"@",n)}}));case P.default.PRESS_HOLD_SEEK:return E.default.createElement(_.FormattedMessage,(0,v.default)({},R.default.pressHoldSeek,{values:{pressAndHold:E.default.createElement("strong",null,E.default.createElement(_.FormattedMessage,R.default.pressAndHold))}}));default:return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.ISystemMessageText=void 0;var r=a(6),s=n(r),o=a(3),l=n(o),u=a(4),d=n(u),c=a(8),p=n(c),f=a(7),h=n(f),m=a(5),v=n(m),y=a(1),g=n(y),b=a(0),E=n(b),_=a(2),k=a(283),T=n(k),C=a(294),P=n(C),M=a(1508),S=n(M),w=a(560),R=n(w),I=a(1366);i.propTypes={message:g.default.object.isRequired,intl:_.intlShape.isRequired};var A=t.ISystemMessageText=(0,_.injectIntl)(i),O=function(e){function t(e){(0,l.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.displayDate=a.props.message.displayDate,a.messageClasses=["SystemMessage"],e.redesign&&a.messageClasses.push("SystemMessage--messageRedesign"),a}return(0,h.default)(t,e),(0,d.default)(t,[{key:"renderMessage",value:function(){return E.default.createElement("span",{className:"SystemMessage-message"},E.default.createElement(A,{message:this.props.message}))}},{key:"renderOpenInApp",value:function(){return E.default.createElement(S.default,{broadcast:this.props.message.broadcast})}},{key:"render",value:function(){switch(this.props.message.systemMessageType){case P.default.OPEN_IN_APP:return this.renderOpenInApp();default:return E.default.createElement("li",{key:this.props.message.uuid,className:this.messageClasses.join(" ")},E.default.createElement("div",{className:"SystemMessage-message"},this.renderMessage()))}}}]),t}(E.default.Component);O.propTypes={message:g.default.object.isRequired,redesign:g.default.bool},t.default=O},1510:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=getComputedStyle(e);return[t.height,t.marginTop,t.marginBottom].map(parseFloat).reduce(function(e,t){return e+t},0)}function r(e){return function(){return{gradientHeight:e}}}function s(e){return function(){return{showTitle:e}}}function o(e){return{showTitle:!e.showTitle}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(5),u=n(l),d=a(13),c=n(d),p=a(6),f=n(p),h=a(3),m=n(h),v=a(4),y=n(v),g=a(8),b=n(g),E=a(7),_=n(E),k=a(1),T=n(k),C=a(0),P=n(C),M=a(2),S=a(300),w=n(S),R=a(146),I=a(186),A=n(I),O=a(74),N=n(O),L=a(83),D=a(49),U=a(102),F=a(583),H=n(F),V=a(1520),B=n(V),x=a(1383),j=n(x),q=a(1526),W=n(q),Y=a(1390),z=n(Y),G=a(289),K=n(G),J=a(1497),Q=n(J),X=a(576),Z=n(X),$=a(526),ee=n($),te=a(578),ae=n(te),ne=a(1499),ie=n(ne),re=a(1364),se=n(re),oe=a(1495),le=n(oe),ue=a(1496),de=n(ue),ce=a(1362),pe=n(ce),fe=a(1410),he=n(fe),me=a(1368),ve=n(me),ye=a(1369),ge=n(ye),be=a(554),Ee=n(be),_e=a(525),ke=n(_e),Te=a(537),Ce=n(Te),Pe=a(1405),Me=n(Pe),Se=a(1465),we=n(Se),Re=a(1514),Ie=n(Re),Ae=a(1357),Oe=n(Ae),Ne=a(1411),Le=n(Ne),De=a(73),Ue=n(De),Fe=a(527),He=n(Fe),Ve=a(134),Be=n(Ve),xe=a(11),je=a(519),qe=n(je),We=a(1447),Ye=n(We),ze=a(71),Ge=n(ze),Ke=a(9),Je=new Ke.FileDebugger("DesktopRedesign",!0),Qe=(0,we.default)(ve.default),Xe=(0,Ge.default)({Viewers:!0,OverflowButton:!0,BottomUI:!0,Hearts:!0}),Ze=5e3,$e=1e3,et="VideoOverlayRedesign--inactive",tt=function(e){function t(e){(0,m.default)(this,t);var a=(0,b.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return A.default.set("VideoOverlayDesktopRedesign",a),a.isAnimating=!1,a.hideTitleTimeout=null,a.state={gradientHeight:180,showTitle:!0},a.nodes={},a.interactions={},(0,c.default)(Xe).forEach(function(e){a.nodes[e]=null,a.interactions[e]=null}),a.handleActiveChange=function(e){a.isLiveSimple()&&(e=!0),a.animateViewers(e),a.animateHearts(e),a.props.onOverlayChange(e),a.props.dispatch((0,U.showPlayerUI)(e))},a.hideTooltip=function(){return a.props.dispatch((0,L.hideTooltip)())},a.handleOverflowClick=function(e,t){Je.debug("handleOverflowClick"),a.props.dispatch((0,L.showTooltip)({component:he.default,componentProps:{buttons:t},target:a.nodes[Xe.OverflowButton],position:"topright",animate:!0,callout:{circle:!0,disableBackground:!0,onTargetClick:a.hideTooltip,onDismiss:a.hideTooltip}})),w.default.event("VideoOverlay.Buttons.overflow")},a.setShowTitle=function(e){return a.setState(s(e))},a.toggleTitle=function(){clearTimeout(a.hideTitleTimeout),a.setState(o)},a.handleKeydown=function(e){if((0,xe.hasKeyboardMetas)(e,{}))switch(e.keyCode){case Be.default.I:return a.toggleTitle()}},a.toggleCinemaMode=function(){a.hideTooltip(),a.props.dispatch((0,U.toggleCinema)()),w.default.event("VideoOverlay.Buttons.toggleCinema")},a.toggleFullscreen=function(){a.hideTooltip(),a.props.toggleFullscreen(),w.default.event("VideoOverlay.Buttons.toggleFullscreen")},a.toggleChat=function(){a.props.toggleChat(),w.default.event("VideoOverlay.Buttons.toggleChat")},a.triggerReportBroadcast=function(){a.props.dispatch((0,D.openReportBroadcast)({broadcastId:a.props.broadcast.id,username:a.props.broadcast.username}))},a}return(0,_.default)(t,e),(0,y.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=i(this.nodes[Xe.BottomUI]),a=i(this.nodes[Xe.Viewers]),n=t+a;this.setState(r(n)),this.hideTitleTimeout=setTimeout(function(){e.setShowTitle(!1)},Ze),window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillReceiveProps",value:function(e){var t=!this.props.simple&&e.simple,a=this.props.simple&&!e.simple;(t||a)&&this.props.forceActive(!0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.hideTitleTimeout),window.removeEventListener("keydown",this.handleKeydown)}},{key:"isLiveSimple",value:function(){return!this.props.broadcast.isEnded&&this.props.simple}},{key:"isInactive",value:function(){return!this.isLiveSimple()&&!this.props.isActive}},{key:"animateViewers",value:function(e,t){var a=this,n=function(){(0,qe.default)(a.interactions[Xe.Viewers],"done"),a.interactions[Xe.Viewers]=null};this.interactions[Xe.Viewers]&&n();var i=this.nodes[Xe.Viewers];if(!i)return Je.debug("animateViewers","element null");this.isAnimating=!0,this.interactions[Xe.Viewers]=N.default.createInteraction("animateViewers");var r=new Ye.default({element:i,duration:$e,onComplete:function(){a.isAnimating=!1,t&&t(),n()},easing:We.Easings.EaseOutCubic});r.first(),e?r.removeClass(et):r.addClass(et),r.last(),r.invert(),r.play()}},{key:"animateHearts",value:function(e,t){var a=this,n=function(){(0,qe.default)(a.interactions[Xe.Hearts],"done"),a.interactions[Xe.Hearts]=null};this.interactions[Xe.Hearts]&&n();var i=this.nodes[Xe.Hearts];if(!i)return Je.debug("animateHearts","element null");this.isAnimating=!0,this.interactions[Xe.Hearts]=N.default.createInteraction("animateHearts");var r=new Ye.default({element:i,duration:$e,onComplete:function(){a.isAnimating=!1,t&&t(),n()},easing:We.Easings.EaseOutCubic});r.first(),e?r.removeClass(et):r.addClass(et),r.last(),r.invert(),r.play()}},{key:"possiblyShowPlaybackControls",value:function(){if(this.shouldRenderReplayElement()){var e=this.props.DisableFadeOut;return P.default.createElement(e,{className:"VideoOverlayRedesign-Playback"},P.default.createElement("div",{className:"VideoOverlayRedesign-PlaybackControls"},this.possiblyIncludePlaybackControls()),P.default.createElement("div",{className:"VideoOverlayRedesign-Seeker"},P.default.createElement(Qe,{getTime:this.props.getTime,videoStartDate:this.props.broadcast.start})))}}},{key:"renderHearts",value:function(){var e=this,t=this.props.DisableFadeOut;return P.default.createElement(t,null,P.default.createElement("div",{className:"VideoOverlayRedesign-Hearts",ref:function(t){e.nodes[Xe.Hearts]=t}},P.default.createElement(Me.default,{broadcast:this.props.broadcast,width:32})))}},{key:"renderPersistLeft",value:function(){var e=this,t=this.props,a=t.broadcast,n=t.simple,i=["VideoOverlayRedesign-PersistLeft"],r=!a.isEnded,s=r&&n;return P.default.createElement("div",{ref:function(t){e.nodes[Xe.Viewers]=t},className:i.join(" ")},n&&this.renderMessages(),s&&P.default.createElement(z.default,{left:!0,broadcast:a}),s&&P.default.createElement("div",{className:"VideoOverlayRedesign-commentInput"},P.default.createElement(pe.default,{broadcast:a,isLive:!a.isEnded}),P.default.createElement("div",{className:"VideoOverlayRedesign-titleToggle",onClick:this.toggleTitle},P.default.createElement(j.default,null))),n&&!r&&P.default.createElement("div",{className:"VideoOverlayRedesign-MessageSpacer"}),!s&&this.renderViewerBadge())}},{key:"renderTheaterModeButton",value:function(){return P.default.createElement(K.default,{animate:!0,disableArrow:!0,message:P.default.createElement(M.FormattedMessage,He.default.theaterMode)},P.default.createElement("div",{onClick:this.toggleCinemaMode},P.default.createElement(ee.default,{icon:!0},P.default.createElement(W.default,null))))}},{key:"renderBackgroundGradient",value:function(){var e={};return this.isInactive()||(e.height=this.state.gradientHeight),P.default.createElement("div",{className:"VideoOverlayRedesign-BackgroundGradient",style:e})}},{key:"renderBroadcastDetails",value:function(){var e=this.props,t=e.broadcast,a=e.DisableFadeOut,n=["VideoOverlayRedesign-BroadcastDetails"];return this.isLiveSimple()&&!this.state.showTitle&&n.push("VideoOverlayRedesign-BroadcastDetails--hidden"),P.default.createElement(a,{className:n.join(" ")},this.possiblyRenderTimecodeShareJump(),P.default.createElement(ke.default,{broadcast:t}),P.default.createElement(Ee.default,{broadcast:t}))}},{key:"renderTopBar",value:function(){var e=this.isLiveSimple();return P.default.createElement("div",{className:"VideoOverlayRedesign-TopBar"},P.default.createElement("div",{className:"VideoOverlayRedesign-TopBarLeft"},e&&this.renderPersistLeft(),this.renderBroadcastDetails()),P.default.createElement("div",{className:"VideoOverlayRedesign-TopBarRight"},this.renderHearts(),e&&this.renderViewerBadge()))}},{key:"renderBottomBar",value:function(){var e=this,t=this.props,a=t.broadcast,n=t.user,i=t.profileIsVisible,r=t.DisableFadeOut,s=t.dispatch;return P.default.createElement("div",{className:"VideoOverlayRedesign-BottomBar"},P.default.createElement(r,{className:"VideoOverlayRedesign-BottomBar-Left"},n&&P.default.createElement(Ce.default,{ref:"username",user:n,noWrap:!0,isLink:!0,withAvatar:!0,includeUsername:!1,profileIsVisible:i,toggleProfileSidebar:this.props.toggleSidebar}),P.default.createElement("div",{className:"VideoOverlayRedesign-MuteButton"},this.renderMuteButton("redesign"))),P.default.createElement(r,{className:"VideoOverlayRedesign-BottomBar-Right"},this.renderShareBroadcastButton(P.default.createElement(ee.default,{text:!0},P.default.createElement(M.FormattedMessage,Ue.default.share))),P.default.createElement(R.ExperimentBoundary,{id:"CinemaFullscreen",not:!0,group:"OnlyFullscreen"},this.renderTheaterModeButton()),P.default.createElement(R.ExperimentBoundary,{id:"CinemaFullscreen",not:!0,group:"OnlyCinema"},P.default.createElement(K.default,{animate:!0,disableArrow:!0,message:P.default.createElement(M.FormattedMessage,He.default.fullscreen)},P.default.createElement("div",{onClick:this.toggleFullscreen},P.default.createElement(ee.default,{icon:!0},P.default.createElement(B.default,null))))),P.default.createElement(K.default,{animate:!0,disableArrow:!0,message:P.default.createElement(M.FormattedMessage,He.default.moreOptions)},P.default.createElement(Z.default,{setRef:function(t){e.nodes[Xe.OverflowButton]=t},onClick:this.handleOverflowClick},P.default.createElement("div",{className:"Broadcast-OverflowTooltip-row"},P.default.createElement(le.default,null,P.default.createElement(ae.default,{broadcast:a,dispatch:s,onClick:this.hideTooltip},P.default.createElement(H.default,null)," ",P.default.createElement(M.FormattedMessage,Ue.default.report))),P.default.createElement(de.default,null,P.default.createElement(ie.default,{dispatch:s,onClick:this.hideTooltip,onLoggedIn:this.triggerReportBroadcast,prompt:Ue.default.loginToReport},P.default.createElement(H.default,null)," ",P.default.createElement(M.FormattedMessage,Ue.default.report)))),P.default.createElement(R.ExperimentBoundary,{id:"CinemaFullscreen",group:"OnlyFullscreen"},P.default.createElement("div",{className:"Broadcast-OverflowTooltip-row"},P.default.createElement("div",{onClick:this.toggleCinemaMode},P.default.createElement(W.default,null)," ",P.default.createElement(M.FormattedMessage,He.default.theaterMode)))),P.default.createElement(R.ExperimentBoundary,{id:"CinemaFullscreen",group:"OnlyCinema"},P.default.createElement("div",{className:"Broadcast-OverflowTooltip-row"},P.default.createElement("div",{onClick:this.toggleFullscreen},P.default.createElement(B.default,null)," ",P.default.createElement(M.FormattedMessage,He.default.fullscreen)))))),!this.props.simple&&P.default.createElement(K.default,{animate:!0,disableArrow:!0,message:this.props.isChatVisible?P.default.createElement(M.FormattedMessage,He.default.hideChat):P.default.createElement(M.FormattedMessage,He.default.showChat)},P.default.createElement("div",{onClick:this.toggleChat},P.default.createElement(Q.default,{hasNewMessages:this.props.hasNewMessages})))))}},{key:"renderBottom",value:function(){var e=this,t=this.props.DisableFadeOut;return P.default.createElement("div",{ref:function(t){e.nodes[Xe.BottomUI]=t},className:"VideoOverlayRedesign-Bottom"},P.default.createElement(t,{className:"VideoOverlayRedesign-PersistLeftWrapper"},!this.isLiveSimple()&&this.renderPersistLeft()),this.renderTopBar(),this.renderBottomBar(),!this.isLiveTimecodeShare()&&this.possiblyShowPlaybackControls())}},{key:"renderUI",value:function(){var e=this.props,t=e.broadcast,a=e.DisableFadeOut;return P.default.createElement(se.default,{className:"VideoOverlayRedesign-default"},this.possiblyIncludePlaybackControlsOverlay(),this.renderBackgroundGradient(),this.renderBottom(),P.default.createElement(a,{className:"VideoOverlayRedesign-NextBroadcast"},this.possiblyIncludeNextBroadcastButton()),P.default.createElement(a,null,P.default.createElement(ge.default,{broadcast:t})))}},{key:"render",value:function(){if(!this.props.broadcast)return null;var e=["VideoOverlayRedesign"];return this.isInactive()&&e.push(et),this.props.hideUI&&e.push("VideoOverlayRedesign--hideUI"),this.props.simple&&e.push("VideoOverlayRedesign--simple"),P.default.createElement("div",{className:e.join(" ")},this.renderUI(),P.default.createElement("div",{className:"VideoOverlayRedesign-theater"},P.default.createElement("div",{className:"VideoOverlayRedesign-BackgroundGradient"}),P.default.createElement("div",{className:"VideoOverlayRedesign-theaterExit"},this.renderTheaterModeButton())))}}]),t}(Le.default);tt.defaultProps={getTime:function(){return Je.error("getTime not provided")},toggleChat:function(){return Je.error("toggleChat not provided")},toggleSidebar:function(){return Je.error("toggleSidebar not provided")},toggleFullscreen:function(){return Je.error("toggleFullscreen not provided")},onOverlayChange:function(){return Je.error("onOverlayChange not provided")}},tt.propTypes=(0,u.default)({},Oe.default,{getTime:T.default.func,toggleChat:T.default.func,toggleSidebar:T.default.func,toggleFullscreen:T.default.func,onOverlayChange:T.default.func,hideUI:T.default.bool,hasNewMessages:T.default.bool,simple:T.default.bool,isChatVisible:T.default.bool,forceActive:T.default.func}),t.default=(0,Ie.default)(tt)},1511:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(0),m=n(h),v=a(184),y=a(283),g=n(y),b=a(294),E=n(b),_=a(284),k=a(1362),T=n(k),C=a(1488),P=n(C),M=a(556),S=n(M),w=a(1383),R=n(w),I=a(1456),A=n(I),O=a(579),N=n(O),L=a(1390),D=n(L),U=a(1357),F=n(U),H=a(1411),V=n(H),B=a(1512),x=n(B),j=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.gesturesRef=null,a.state={isInfoPanelVisible:!0,showPlaybackControls:!1},a.showInfoPanel=function(){a.setState({isInfoPanelVisible:!0})},a.hideInfoPanel=function(){a.setState({isInfoPanelVisible:!1})},a.showPlaybackControls=function(){a.setState({showPlaybackControls:!0})},a.blurFocus=function(){document.activeElement.blur()},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.shouldRenderReplayElement();clearTimeout(this.startupMessagesTimeout),this.startupMessagesTimeout=setTimeout(function(){var a=[{uuid:"OpenInAppMessage",type:g.default.SYSTEM,systemMessageType:E.default.OPEN_IN_APP,sticky:!0,broadcast:e.props.broadcast}];t&&a.push({uuid:"PressHoldSeekMessage",type:g.default.SYSTEM,systemMessageType:E.default.PRESS_HOLD_SEEK}),v.eventManager.publish(_.CHAT_SYSTEM_MESSAGES,a)},1e3),t&&(clearTimeout(this.showPlaybackControlsTimeout),this.showPlaybackControlsTimeout=setTimeout(function(){e.showPlaybackControls()},2e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.startupMessagesTimeout),clearTimeout(this.showPlaybackControlsTimeout)}},{key:"renderPlaybackControls",value:function(){return m.default.createElement("div",{className:"VideoOverlayMobile-PlaybackControls"},m.default.createElement(P.default,null),this.possiblyIncludePlaybackControls())}},{key:"renderChat",value:function(e){var t=["VideoOverlayMobile-Viewers"];return this.state.showPlaybackControls&&t.push("VideoOverlayMobile-Viewers--showPlaybackControls"),m.default.createElement("div",{className:"VideoOverlayMobile-Chat"},m.default.createElement("div",{className:"VideoOverlayMobile-Comments"},this.renderMessages(),e?this.renderSidebarShareAudioButtons():m.default.createElement(D.default,{left:!0,broadcast:this.props.broadcast})),m.default.createElement("div",{className:"VideoOverlayMobile-ViewersAndHearts"},m.default.createElement("div",{className:"VideoOverlayMobile-Hearts"},this.renderHeartsContainer()),m.default.createElement("div",{className:t.join(" ")},this.renderViewerBadge(),e&&this.renderPlaybackControls())))}},{key:"renderInfo",value:function(e){var t=this.props,a=t.broadcast,n=t.commentInputState;if(e)return null;var i=["VideoOverlayMobile-InfoPanel"],r=this.state.isInfoPanelVisible;return e&&i.push("VideoOverlayMobile-InfoPanel--isReplay"),r&&i.push("VideoOverlayMobile-InfoPanel--isActive"),m.default.createElement("div",{className:i.join(" ")},m.default.createElement("div",{className:"VideoOverlayMobile-Divider"}),m.default.createElement("div",{className:"VideoOverlayMobile-Info"},m.default.createElement("div",{className:"VideoOverlayMobile-UserChat"},m.default.createElement(T.default,{broadcast:a,isLive:!e})),n.isFocused?m.default.createElement("div",{className:"VideoOverlayMobile-UserChat-Close",onClick:this.blurFocus},m.default.createElement(S.default,null)):this.renderSidebarShareAudioButtons()))}},{key:"renderSidebarShareAudioButtons",value:function(){return m.default.createElement("div",{className:"VideoOverlayMobile-Buttons"},m.default.createElement("div",{className:"VideoOverlayMobile-Sidebar",onClick:this.props.toggleProfileSidebar},m.default.createElement(R.default,null)),m.default.createElement("div",{className:"VideoOverlayMobile-Share"},this.renderShareBroadcastButton()),m.default.createElement("div",{className:"VideoOverlayMobile-Audio"},this.renderMuteButton()))}},{key:"render",value:function(){var e=this,t=this.state.isInfoPanelVisible,a=this.shouldRenderReplayElement(),n=["VideoOverlayMobile"];a&&n.push("VideoOverlayMobile--isReplay"),t&&n.push("VideoOverlayMobile--isActiveInfoPanel");var i=this.props.sharedEventNode();return m.default.createElement("div",{className:"VideoOverlay-container VideoOverlayContainerMobile"},m.default.createElement(A.default,{sharedEventListener:this.props.sharedEventListener}),a&&m.default.createElement(x.default,{gesturesRef:i,broadcast:this.props.broadcast}),m.default.createElement(N.default,{gesturesRef:i,onSwipeUp:this.showInfoPanel,onSwipeDown:this.hideInfoPanel}),m.default.createElement("div",{className:"VideoOverlay-container--touchable",ref:function(t){e.gesturesRef=t}},m.default.createElement("div",{className:n.join(" ")},this.renderChat(a),this.renderInfo(a))))}}]),t}(V.default);j.propTypes=F.default,t.default=j},1512:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(1352),E=a(54),_=n(E),k=a(310),T=n(k),C=a(131),P=a(27),M=a(133),S=a(282),w=a(534),R=a(574),I=n(R),A=a(17),O=a(313),N=n(O),L=a(84),D=a(11),U=a(585),F=[U.PAN_START,U.PAN_END,U.PAN_UP,U.PAN_DOWN,U.PAN_LEFT,U.PAN_RIGHT].join(" "),H=[U.PRESS,U.PRESS_UP].join(" "),V="PanSeekOverlay",B=250,x=.5,j=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.elementRef=null,a.gestureHandler=null,a.isPanning=!1,a.state={isSeeking:!1,seekTimes:{seconds:0}},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillUpdate",value:function(e,t){var a=e.replay,n=e.player,i=t.isSeeking,r=t.seekTimes;i&&n.isExpectingVideo&&this.props.dispatchPauseVideo(),!this.state.isSeeking||i||n.isExpectingVideo||(Math.abs(r.seconds-a.elapsed)<x?this.props.dispatchPlayVideo():this.props.dispatchSeekTo(r))}},{key:"componentDidUpdate",value:function(){var e=this;this.gestureHandler||this.props.gesturesRef&&a.e(3).then(function(t){a(536),window.Hammer&&(e.gestureHandler=new window.Hammer(e.props.gesturesRef),e.initGestures())}.bind(null,a)).catch(a.oe)}},{key:"componentWillUnmount",value:function(){this.gestureHandler&&(this.gestureHandler.off(F),this.gestureHandler.off(H))}},{key:"initGestures",value:function(){var e=this;this.gestureHandler.get(U.PAN).set({direction:window.Hammer.DIRECTION_ALL}),this.gestureHandler.get(U.PRESS).set({time:B}),this.gestureHandler.on(U.PRESS,function(){var t=e.getSeekTimes(0);e.setState({isSeeking:!0,seekTimes:t})}),this.gestureHandler.on(U.PRESS_UP,function(){e.setState({isSeeking:!1})}),this.gestureHandler.on(F,function(t){if(t.type===U.PAN_START&&(e.isPanning=!0),t.type===U.PAN_END&&(e.isPanning=!1,e.setState({isSeeking:!1})),!e.isPanning||t.type!==U.PAN_LEFT&&t.type!==U.PAN_RIGHT?t.type!==U.PAN_UP&&t.type!==U.PAN_DOWN||(e.isPanning=!1):e.setState({isSeeking:!0}),e.state.isSeeking){var a=e.getSeekTimes(-1*t.deltaX);e.setState({seekTimes:a})}})}},{key:"getSeekTimes",value:function(e){return(0,w.getSeekTimes)(this.props.replay.elapsed,e,this.props.dimensions.width,this.props.replay.duration,this.props.broadcast.start)}},{key:"getPreviewThumbnail",value:function(){var e=this.props.thumbnailIndex;if(!e||!e.length)return null;var t=this.state.seekTimes,a=N.default.getThumbnailForPosition(e,t.seconds);return y.default.createElement("div",{className:"PanSeekOverlay-thumbnail"},y.default.createElement("img",{src:a}))}},{key:"render",value:function(){var e=this.state,t=e.isSeeking,a=e.seekTimes,n=(0,L.getFormattedTime)(a.seconds),i=(0,D.toPercentage)(a.seconds/this.props.replay.duration),r=(0,D.toPercentage)(this.props.replay.elapsed/this.props.replay.duration),s=[V];return t&&s.push("PanSeekOverlay--isSeeking"),y.default.createElement("div",{className:s.join(" ")},y.default.createElement("div",{className:"PanSeekOverlay-seeker"},this.getPreviewThumbnail(),y.default.createElement("div",{className:"PanSeekOverlay-seekTime"},n),y.default.createElement("div",{className:"PanSeekOverlay-bar",style:{transform:"translateX(-"+i+"%)"}},y.default.createElement("div",{className:"PanSeekOverlay-currentTime",style:{left:r+"%"}}),y.default.createElement(I.default,{hideTimes:!0,hideMarker:!0,currentTimecode:a.seconds,duration:this.props.replay.duration,seekSeconds:a.seconds,thumbnailIndex:this.props.thumbnailIndex}))))}}]),t}(y.default.Component);j.propTypes={gesturesRef:m.default.object,broadcast:P.broadcastPropType,replay:S.replayPropType.isRequired,dimensions:m.default.object,thumbnailIndex:m.default.array,player:M.playerPropType,dispatchSeekTo:m.default.func.isRequired,dispatchPlayVideo:m.default.func.isRequired,dispatchPauseVideo:m.default.func.isRequired},t.default=(0,g.connect)((0,A.compose)(b.replayFullMapper,T.default,C.videoPlayerStateMapper,(0,_.default)(["dimensions"])),(0,A.compose)(b.replayDispatchMapper,C.videoPlayerDispatchMapper))(j)},1513:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.periscopeEnvironment.mobile()?l.default.createElement(T.default,(0,s.default)({},e,{simple:!0})):l.default.createElement(_.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),s=n(r),o=a(0),l=n(o),u=a(14),d=a(517),c=a(26),p=n(c),f=a(17),h=a(1530),m=n(h),v=a(41),y=a(1374),g=a(1357),b=n(g),E=a(1510),_=n(E),k=a(1511),T=n(k);i.propTypes=b.default,t.default=(0,p.default)((0,u.connect)((0,f.compose)(v.authStateToProps,y.commentInputStateToProps,m.default))((0,d.purify)(i)))},1514:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){return{isActive:e}}}function r(e){var t=function(t){function a(e){(0,c.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t.overlayRef=null,t.inactivityTimeout=null,t.mousemoveListener=null,t.disabledInactivityCheck=!1,t.DisableFadeOut=null,t.state={isActive:!0},t.setOverlayRef=function(e){t.overlayRef=e},t.setActive=function(e){if(t.state.isActive!==e&&!t.disabledInactivityCheck&&!t.isUITooltipOpen()){if(t.setState(i(e)),!t.overlayRef)return O.error("overlayRef is missing");var a=t.overlayRef.handleActiveChange;a&&a(e)}},t.resetInactivityTimeout=function(){clearTimeout(t.inactivityTimeout),t.inactivityTimeout=setTimeout(function(){return t.setActive(!1)},N)},t.handleActivity=function(){t.resetInactivityTimeout(),t.setActive(!0)},t.DisableFadeOut=function(e){return _.default.createElement("div",(0,o.default)({},e,{onMouseEnter:function(){t.disabledInactivityCheck=!0},onMouseLeave:function(){t.disabledInactivityCheck=!1}}))},t}return(0,y.default)(a,t),(0,f.default)(a,[{key:"componentDidMount",value:function(){this.resetInactivityTimeout(),this.mousemoveListener=this.props.sharedEventListener("mousemove",this.handleActivity)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.inactivityTimeout),(0,R.default)(this.mousemoveListener,"remove")}},{key:"isUITooltipOpen",value:function(){var e=this.props.globalTooltip;return e.visible&&(e.component===P.default||e.component===S.default)}},{key:"render",value:function(){return _.default.createElement(e,(0,o.default)({},this.props,{ref:this.setOverlayRef,isActive:this.state.isActive,forceActive:this.setActive,DisableFadeOut:this.DisableFadeOut}))}}]),a}(_.default.Component);(0,T.default)(t,e);var a=(0,I.getDisplayName)(e);return t.displayName="WithInactivityCheck("+a+")",t.WrappedComponent=e,t.defaultProps={sharedEventListener:function(){return O.error("sharedEventListener not provided")}},t.propTypes={sharedEventListener:b.default.func,globalTooltip:b.default.object.isRequired},t}Object.defineProperty(t,"__esModule",{value:!0});var s=a(5),o=n(s),l=a(6),u=n(l),d=a(3),c=n(d),p=a(4),f=n(p),h=a(8),m=n(h),v=a(7),y=n(v);t.default=r;var g=a(1),b=n(g),E=a(0),_=n(E),k=a(56),T=n(k),C=a(1410),P=n(C),M=a(1365),S=n(M),w=a(519),R=n(w),I=a(55),A=a(9),O=new A.FileDebugger("withInactivityCheck",!0),N=2500},1515:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoClass=void 0;var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(14),_=a(189),k=n(_),T=a(102),C=a(1446),P=function(){return{isAdPlaying:!1}},M=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e)),n=e.player.adPlaylist;return a.state={hasAd:!!n,isAdPlaying:!!n,adPlaylist:n},a.onPlayingAd=a.onPlayingAd.bind(a),a.onEndedAd=a.onEndedAd.bind(a),a.onPlayingPeriscope=a.onPlayingPeriscope.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"onPlayingAd",value:function(){this.props.dispatch((0,T.playerStarted)(!0))}},{key:"onEndedAd",value:function(){this.props.dispatch((0,T.removeAdVariant)()),this.props.dispatch((0,T.playerStarted)(!1)),this.props.dispatch((0,T.playerPresentation)(k.default.INTERSTITIAL)),this.setState(P)}},{key:"onPlayingPeriscope",value:function(){this.props.player.isPlaying||(this.props.dispatch((0,T.playerStarted)(!0)),this.props.dispatch((0,T.playerPresentation)(k.default.VIDEO)))}},{key:"render",value:function(){if(!this.state.hasAd)return b.default.createElement(C.PeriscopeVideo,this.props);var e=this.state,t=e.isAdPlaying,a=e.adPlaylist,n=void 0;return n=t?{lifecycleDisabled:!0,withPlayerDisabled:!0,is360:!1,url:a,needsCredentials:!1,muted:!0,onPlaying:this.onPlayingAd,onEnded:this.onEndedAd,playerWidth:this.props.windowWidth,playerHeight:this.props.windowHeight}:{onPlaying:this.onPlayingPeriscope},n.isAdPlaying=t,b.default.createElement(C.PeriscopeVideoWithAd,(0,r.default)({},this.props,n))}}]),t}(b.default.Component);M.propTypes={dispatch:y.default.func,player:y.default.object.isRequired,windowWidth:y.default.number.isRequired,windowHeight:y.default.number.isRequired};t.VideoClass=M;t.default=(0,E.connect)()(M)},1517:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return s.default.createElement("svg",{className:"CaretRight",viewBox:"0 0 35 20"},s.default.createElement("g",{transform:"translate(17.500000, 10.000000) rotate(180.000000) translate(-17.500000, -10.000000)",fill:"#FFFFFF"},s.default.createElement("path",{d:"M17.337,19.225 C16.831,19.225 16.327,19.033 15.941,18.648 L0.877,3.584 C0.106,2.812 0.106,1.563 0.877,0.793 C1.648,0.021 2.897,0.021 3.668,0.793 L17.337,14.461 L31.006,0.793 C31.777,0.021 33.026,0.021 33.797,0.793 C34.568,1.564 34.568,2.812 33.797,3.584 L18.732,18.648 C18.347,19.033 17.842,19.225 17.337,19.225 L17.337,19.225 Z",transform:"translate(17.337000, 9.719500) rotate(90.000000) translate(-17.337000, -9.719500)"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(0),s=n(r)},1518:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?15:t;return l.default.createElement("svg",{viewBox:"0 0 14 15",width:a,height:u*a},l.default.createElement("path",{fill:"#FFF",fillRule:"evenodd",d:"M7.355 12.439L3.17 15v-2.576A3.498 3.498 0 0 1 0 8.941V3.498A3.503 3.503 0 0 1 3.497 0h7.006A3.497 3.497 0 0 1 14 3.498v5.443a3.503 3.503 0 0 1-3.497 3.498H7.355zM3.852 6.951a.699.699 0 0 0-.702.698v.068c0 .385.322.698.702.698h3.496c.388 0 .702-.31.702-.698V7.65a.704.704 0 0 0-.702-.698H3.852zm-.005-2.927a.696.696 0 0 0-.697.698v.068c0 .386.311.698.697.698h6.306c.385 0 .697-.31.697-.698v-.068a.697.697 0 0 0-.697-.698H3.847z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=14/15;i.propTypes={size:s.default.number}},1520:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?16:t;return l.default.createElement("svg",{viewBox:"0 0 16 14",width:a,height:u*a,className:"Fullscreen"},l.default.createElement("g",{fill:"#FFF",fillRule:"nonzero",opacity:".7"},l.default.createElement("path",{d:"M14.008 2.019H10V0h6v5h-1.992zM14.008 11.981H10V14h6V9h-1.992zM1.992 2.019H6V0H0v5h1.992zM1.992 11.981H6V14H0V9h1.992z"})))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=.875;i.propTypes={size:s.default.number}},1521:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.active,a=["ShareIconContainer"];return t&&a.push("active"),l.default.createElement("div",{className:a.join(" ")},l.default.createElement("svg",{className:"ShareIcon",width:"18px",height:"18px",viewBox:"0 0 18 18"},l.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},l.default.createElement("g",null,l.default.createElement("path",{d:"M1.9999997,14.0007869 C1.9999999,14.0005246 2,14.0002623 2,14 C2,13.4477153 1.55228475,13 1,13 C0.44771525,13 0,13.4477153 0,14 L0,16 C0,17.1054293 0.893203454,18 2.00087166,18 L15.9991283,18 C17.1047241,18 18,17.1078829 18,16 L18,14 C18,13.4477153 17.5522847,13 17,13 C16.4477153,13 16,13.4477153 16,14 L16,16 C16,16.0017278 2.00087166,16 2.00087166,16 C1.99847802,16 1.99997514,14.0324605 1.9999997,14.0003962 Z"}),l.default.createElement("g",{transform:"translate(4.000000, 0.400000)"},l.default.createElement("rect",{x:"4",y:"2",width:"2",height:"10",rx:"1"}),l.default.createElement("polyline",{strokeWidth:"2",strokeLinecap:"round",points:"-2.83608236e-16 6 5 1 10 6"}))))))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={active:s.default.bool},t.default=i},1522:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?9:t;return s.default.createElement("svg",{className:"Skip",width:a,height:u*a,viewBox:"0 0 9 12"},s.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.default.createElement("g",{transform:"translate(-212.000000, -136.000000)",fill:"#FFFFFF"},s.default.createElement("g",{transform:"translate(37.000000, 126.000000)"},s.default.createElement("g",{transform:"translate(65.000000, 0.000000)"},s.default.createElement("path",{d:"M118.261528,10.7337511 L117.769214,10.7337511 C117.361578,10.7337511 117.030742,11.0921371 117.030742,11.5337198 L117.030742,15.2546407 L110.567146,10.7961487 C110.454406,10.7177518 110.309666,10.7118853 110.19151,10.7833492 C110.073355,10.8537464 110,10.9881412 110,11.1337355 L110,21.0000157 C110,21.14561 110.073355,21.2800047 110.191018,21.3504019 C110.247142,21.3840006 110.308189,21.4 110.369236,21.4 C110.43816,21.4 110.507084,21.3792008 110.567146,21.3376024 L117.030742,16.8812437 L117.030742,20.6000313 C117.030742,21.041614 117.361578,21.4 117.769214,21.4 L118.261528,21.4 C118.669165,21.4 119,21.041614 119,20.6000313 L119,11.5337198 C119,11.0921371 118.669165,10.7337511 118.261528,10.7337511"}))))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(0),s=n(r),o=a(1),l=n(o),u=12/9;i.propTypes={size:l.default.number}},1523:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?24:t,n=a+"px";return l.default.createElement("svg",{viewBox:"0 0 2304 2304",width:n,height:n},l.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),l.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:"M1459 1548q45 0 77 -32t32 -76v-1088q0 -46 -32 -78t-76 -32t-77 33t-33 77v464l-4 -6l-690 -544q-30 -24 -61 -24t-53 12q-62 30 -62 98v1088q0 68 61 98t115 -14l690 -544l4 -4v464q0 44 32 76t77 32z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o);i.propTypes={size:s.default.number}},1524:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?33:t,n=e.active,i={};return void 0!==n&&(i.opacity=n?1:.4),l.default.createElement("svg",{viewBox:"0 0 33 23",width:a,height:u*a,style:i},l.default.createElement("defs",null,l.default.createElement("path",{id:"b",d:"M0 6.705c0-1.074.878-1.96 1.956-1.978l1.912-.032L10.069.88c.844-.52 1.48-.137 1.429.86 0 0-.18 2.48-.18 6.759 0 4.28.18 6.76.18 6.76.054.993-.59 1.376-1.433.858l-6.217-3.822-1.902-.028A1.982 1.982 0 0 1 0 10.293V6.705z"}),l.default.createElement("filter",{id:"a",width:"152.2%",height:"138.2%",x:"-26.1%",y:"-19.1%",filterUnits:"objectBoundingBox"},l.default.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),l.default.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1"}),l.default.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1"}),l.default.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.55822577 0"})),l.default.createElement("path",{id:"d",d:"M8.705 1.117L7.688.103a.349.349 0 0 0-.502.007L4.674 2.748a.349.349 0 0 1-.502.007L1.594.185a.349.349 0 0 0-.502.006l-.991 1.04a.369.369 0 0 0 .006.514l2.579 2.571c.14.14.143.37.006.514L.18 7.468a.37.37 0 0 0 .007.514l1.017 1.014a.35.35 0 0 0 .502-.007l2.512-2.638a.349.349 0 0 1 .502-.007l2.578 2.57c.14.14.365.138.502-.006l.99-1.04a.369.369 0 0 0-.006-.514L6.206 4.783a.369.369 0 0 1-.006-.514L8.71 1.631a.369.369 0 0 0-.006-.514"}),l.default.createElement("filter",{id:"c",width:"201.2%",height:"198.9%",x:"-50.6%",y:"-49.5%",filterUnits:"objectBoundingBox"},l.default.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),l.default.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1.5"}),l.default.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.55822577 0"}))),l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h33v23H0z"}),l.default.createElement("g",{transform:"translate(4 4)"},l.default.createElement("use",{fill:"#000",filter:"url(#a)",xlinkHref:"#b"}),l.default.createElement("use",{fill:"#FFF",xlinkHref:"#b"}),l.default.createElement("path",{stroke:"#FFF",strokeWidth:"1.95",d:"M10.52 1.747a78.211 78.211 0 0 0-.086 1.73c-.057 1.456-.09 3.137-.09 5.022 0 1.885.033 3.566.09 5.022a78.225 78.225 0 0 0 .086 1.73l-6.162-3.787-.228-.14-.268-.004-1.901-.028a1.007 1.007 0 0 1-.986-.999V6.705c0-.54.449-.994.998-1.003l1.91-.032.268-.004.227-.14 6.142-3.779z"})),l.default.createElement("g",{transform:"translate(18.056 7.923)"},l.default.createElement("use",{fill:"#000",filter:"url(#c)",xlinkHref:"#d"}),l.default.createElement("use",{fill:"#FFF",xlinkHref:"#d"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=23/33;i.propTypes={active:s.default.bool,size:s.default.number}},1525:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?33:t,n=e.active,i={};return void 0!==n&&(i.opacity=n?1:.4),l.default.createElement("svg",{viewBox:"0 0 33 23",width:a,height:u*a,style:i},l.default.createElement("defs",null,l.default.createElement("path",{id:"b",d:"M0 6.705c0-1.074.878-1.96 1.956-1.978l1.912-.032L10.069.88c.844-.52 1.48-.137 1.429.86 0 0-.18 2.48-.18 6.759 0 4.28.18 6.76.18 6.76.054.993-.59 1.376-1.433.858l-6.217-3.822-1.902-.028A1.982 1.982 0 0 1 0 10.293V6.705z"}),l.default.createElement("filter",{id:"a",width:"152.2%",height:"138.2%",x:"-26.1%",y:"-19.1%",filterUnits:"objectBoundingBox"},l.default.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),l.default.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1"}),l.default.createElement("feComposite",{in:"shadowBlurOuter1",in2:"SourceAlpha",operator:"out",result:"shadowBlurOuter1"}),l.default.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.55822577 0"})),l.default.createElement("path",{id:"d",d:"M1.256 12.487l-.77-1.046a.334.334 0 0 1 .053-.447 4.269 4.269 0 0 0 1.42-3.19A4.268 4.268 0 0 0 .521 4.598a.334.334 0 0 1-.055-.447l.764-1.05c.109-.148.32-.18.46-.061a6.248 6.248 0 0 1 2.184 4.764 6.25 6.25 0 0 1-2.159 4.742.317.317 0 0 1-.46-.06"}),l.default.createElement("filter",{id:"c",width:"272.9%",height:"162.2%",x:"-86.4%",y:"-31.1%",filterUnits:"objectBoundingBox"},l.default.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),l.default.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1"}),l.default.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.56 0"})),l.default.createElement("path",{id:"f",d:"M4.83.288a.317.317 0 0 0-.46.023l-.852.977a.328.328 0 0 0 .022.45 8.476 8.476 0 0 1 2.53 6.066c0 .5-.127 1.477-.127 1.477s-1.144 3.348-2.4 4.584a.329.329 0 0 0-.02.45l.852.977c.12.137.33.15.46.022.945-.92 1.7-2.01 2.234-3.205.365-.815.775-2.576.775-2.576s.142-1.143.142-1.73c0-1.514-.322-2.976-.917-4.305A10.391 10.391 0 0 0 4.831.288z"}),l.default.createElement("filter",{id:"e",width:"231.9%",height:"139.5%",x:"-66%",y:"-19.7%",filterUnits:"objectBoundingBox"},l.default.createElement("feOffset",{in:"SourceAlpha",result:"shadowOffsetOuter1"}),l.default.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"1"}),l.default.createElement("feColorMatrix",{in:"shadowBlurOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.56 0"}))),l.default.createElement("g",{fill:"none",fillRule:"evenodd"},l.default.createElement("path",{d:"M0 0h33v23H0z"}),l.default.createElement("g",{transform:"translate(4 4)"},l.default.createElement("use",{fill:"#000",filter:"url(#a)",xlinkHref:"#b"}),l.default.createElement("use",{fill:"#FFF",xlinkHref:"#b"}),l.default.createElement("path",{stroke:"#FFF",strokeWidth:"1.95",d:"M10.52 1.747a78.211 78.211 0 0 0-.086 1.73c-.057 1.456-.09 3.137-.09 5.022 0 1.885.033 3.566.09 5.022a78.225 78.225 0 0 0 .086 1.73l-6.162-3.787-.228-.14-.268-.004-1.901-.028a1.007 1.007 0 0 1-.986-.999V6.705c0-.54.449-.994.998-1.003l1.91-.032.268-.004.227-.14 6.142-3.779z"})),l.default.createElement("g",{transform:"translate(18.694 4.654)"},l.default.createElement("use",{fill:"#000",filter:"url(#c)",xlinkHref:"#d"}),l.default.createElement("use",{fill:"#FEFEFE",xlinkHref:"#d"})),l.default.createElement("g",{transform:"translate(18.694 4.654)"},l.default.createElement("use",{fill:"#000",filter:"url(#e)",xlinkHref:"#f"}),l.default.createElement("use",{fill:"#FEFEFE",xlinkHref:"#f"}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=23/33;i.propTypes={active:s.default.bool,size:s.default.number}},1526:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.size,a=void 0===t?16:t;return l.default.createElement("svg",{viewBox:"0 0 16 11",width:a,height:u*a,className:"TheaterMode"},l.default.createElement("rect",{width:"14",height:"9",x:"421",y:"146",fill:"none",fillRule:"evenodd",stroke:"#FFF",strokeOpacity:".7",strokeWidth:"2",rx:"1",transform:"translate(-420 -145)"}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u=.6875;i.propTypes={size:s.default.number}},1527:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.muted,a=e.size,n=void 0===a?24:a,i=n+"px",r=t?d:u;return l.default.createElement("svg",{viewBox:"0 0 2304 2304",width:i,height:i},l.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),l.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:r}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u="M1365 554q-35 0 -60 24t-25 59t24 61q90 96 90 198t-90 198q-24 26 -24 61t26 59t61 23t61 -27q136 -144 136 -314t-136 -314q-28 -28 -63 -28zM1622 384q-36 0 -61 24t-25 59t24 61q146 152 146 368t-146 368q-24 26 -24 61t26 59t61 24t61 -26q190 -200 194 -486 q-4 -286 -194 -486q-26 -26 -62 -26zM1194 1578v-1364q0 -60 -53 -80t-93 20l-430 458h-334q-34 0 -59 25t-25 59v400q0 34 25 59t59 25h334l430 458q40 40 93 20t53 -80z",d="M1934 669q0 -35 -24 -61q-26 -24 -60 -24t-62 24l-166 168l-168 -168q-24 -24 -60 -24t-61 25t-25 60t26 59l166 168l-166 168q-26 24 -26 59t25 61t60 26t61 -26l168 -168l166 168q26 26 61 26t60 -26t25 -61t-24 -59l-168 -168l168 -168q24 -24 24 -59zM1194 1578 v-1364q0 -60 -53 -80t-93 20l-430 458h-334q-34 0 -59 25t-25 59v400q0 34 25 59t59 25h334l430 458q40 40 93 20t53 -80z";i.propTypes={muted:s.default.bool,size:s.default.number}},1528:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.paused,a=e.size,n=void 0===a?24:a,i=n+"px",r=t?d:u;return l.default.createElement("svg",{viewBox:"0 0 2304 2304",width:i,height:i},l.default.createElement("metadata",null,"Created by FontPrep 20130207 at Tue Jul 12 19:39:10 2016 By Sofo copyright missing"),l.default.createElement("path",{style:{fill:"#FFFFFF"},transform:"translate(0,2048) scale(1, -1)",d:r}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(1),s=n(r),o=a(0),l=n(o),u="M1480 270q0 -24 -17 -40t-41 -16h-198q-24 0 -41 16t-17 40v1252q0 24 17 40t41 16h198q24 0 41 -16t17 -40v-1252zM882 270q0 -24 -17 -40t-41 -16h-198q-24 0 -41 16t-17 40v1252q0 24 17 40t41 16h198q24 0 41 -16t17 -40v-1252z",d="M1622 896q0 -42 -36 -68l-768 -570q-22 -16 -47 -16t-41 8q-48 26 -48 78v1136q0 52 46 76t90 -6l768 -570q36 -26 36 -68z";i.propTypes={paused:s.default.bool,size:s.default.number}},1529:function(e,t,a){"use strict";function n(e,t){var a={},n=t.params,r=t.broadcastId,s=t.broadcast,o=r||s.id||n&&n.broadcastId;if(o&&(a.broadcastId=o),e.EventCache&&o){var l=(0,i.getEventFromCache)(o,e.EventCache);l&&(a.twitterEvent=l)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.twitterEventMapper=n;var i=a(59)},1530:function(e,t,a){"use strict";function n(e){var t=e.GlobalTooltip;return{globalTooltip:{component:t.component,visible:t.visible}}}Object.defineProperty(t,"__esModule",{value:!0}),t.globalTooltipMapper=n,t.default=n},1531:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(13),r=n(i),s=a(5),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(9),f=n(p),h=a(1534),m=n(h),v=a(1535),y=n(v),g={duration:330,delay:0,easing:function(e){return e},transform:!0,opacity:!0,play:"GreenSock",onUpdate:function(){},onComplete:function(){},disable:!1},b=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,e);var n=(0,o.default)({},g,a);if(void 0===n.element)throw new Error("Element must be provided.");if("function"!=typeof n.easing){if(void 0===n.easing.getRatio)throw new Error("Easing function must be provided.");n.easing=n.easing.getRatio}if("function"!=typeof n.onUpdate)throw new Error("onUpdate must be a function");if("function"!=typeof n.onComplete)throw new Error("onComplete must be a function");this._element=n.element,this._first={layout:null,opacity:0},this._last={layout:null,opacity:0},this._invert={x:0,y:0,sx:1,sy:1,a:0},this._start=0,this._disable=n.disable,this._duration=n.duration,this._delay=n.delay,this._easing=n.easing,this._updateTransform=n.transform,this._updateOpacity=n.opacity,this._onUpdate=n.onUpdate,this._onComplete=n.onComplete;var i=e._players[n.play];if(void 0===i)throw new Error("Unknown player type: "+n.play);(0,r.default)(i).forEach(function(e){t[e]=i[e].bind(t)})}return(0,c.default)(e,null,[{key:"addPlayer",value:function(e,t){void 0===this._players&&(this._players={}),void 0!==this._players[e]&&f.default.warn("Player with name '"+e+"' already exists"),void 0===t._play&&f.default.warn("Player does not contain a _play() function"),this._players[e]=t}}]),(0,c.default)(e,[{key:"addClass",value:function(e){"string"==typeof e&&this._element.classList.add(e)}},{key:"removeClass",value:function(e){"string"==typeof e&&this._element.classList.remove(e)}},{key:"snapshot",value:function(e){this.first(),this.last(e),this.invert()}},{key:"storeElementStyle",value:function(e){e.layout=this._element.getBoundingClientRect(),e.opacity=parseFloat(window.getComputedStyle(this._element).opacity)}},{key:"first",value:function(){this.storeElementStyle(this._first)}},{key:"last",value:function(e){this.addClass(e),this.storeElementStyle(this._last),this._disable&&this.removeClass(e)}},{key:"invert",value:function(){var e=[];if(null===this._first.layout)throw new Error("You must call first() before invert()");if(null===this._last.layout)throw new Error("You must call last() before invert()");this._invert.x=this._first.layout.left-this._last.layout.left,this._invert.y=this._first.layout.top-this._last.layout.top,this._invert.sx=this._first.layout.width/this._last.layout.width,this._invert.sy=this._first.layout.height/this._last.layout.height,this._invert.a=this._last.opacity-this._first.opacity,this._disable||(this._updateTransform&&(this._element.style.transformOrigin="0 0",this._element.style.transform="translate("+this._invert.x+"px, "+this._invert.y+"px)\n             scale("+this._invert.sx+", "+this._invert.sy+")",e.push("transform")),this._updateOpacity&&(this._element.style.opacity=this._first.opacity,e.push("opacity")),this._element.style.willChange=e.join(","))}},{key:"play",value:function(e){if(null===this._invert)throw new Error("invert() must be called before play()");if(void 0===this._play)throw new Error("No player specified.");this._play(e)}},{key:"_fire",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new CustomEvent(e,{detail:t,bubbles:a,cancelable:n});this._element.dispatchEvent(i)}},{key:"_clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NEGATIVE_INFINITY,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return Math.min(a,Math.max(t,e))}},{key:"_cleanUpAndFireEvent",value:function(){this._removeTransformsAndOpacity(),this._resetFirstLastAndInvertValues(),this._fire("flipComplete"),this._onComplete()}},{key:"_removeTransformsAndOpacity",value:function(){this._disable||(this._element.style.transformOrigin=null,this._element.style.transform=null,this._element.style.opacity=null,this._element.style.willChange=null)}},{key:"_resetFirstLastAndInvertValues",value:function(){this._first.layout=null,this._first.opacity=0,this._last.layout=null,this._last.opacity=0,this._invert.x=0,this._invert.y=0,this._invert.sx=1,this._invert.sy=1,this._invert.a=0}}]),e}();b.addPlayer("requestAnimationFrame",y.default),b.addPlayer("GreenSock",m.default),t.default=b},1532:function(e,t,a){"use strict";function n(e,t,a,n){this.cx=3*e,this.bx=3*(a-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.epsilon=1e-6,n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){var a,n,i,r,s,o;for(i=e,o=0;o<8;o++){if(r=this.sampleCurveX(i)-e,Math.abs(r)<t)return i;if(s=this.sampleCurveDerivativeX(i),Math.abs(s)<t)break;i-=r/s}if(a=0,n=1,(i=e)<a)return a;if(i>n)return n;for(;a<n;){if(r=this.sampleCurveX(i),Math.abs(r-e)<t)return i;e>r?a=i:n=i,i=.5*(n-a)+a}return i},n.prototype.solve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.prototype.epsilon;return this.sampleCurveY(this.solveCurveX(e,t))},t.default=n},1533:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];4!==t.length&&(d.debug("generateEasing","invalid bezierParams",t),t=c);var n=new(Function.prototype.bind.apply(l.default,[null].concat((0,s.default)(t))));return function(e){return n.solve(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.EaseOut=t.EaseInOut=t.Linear=t.EaseOutCubic=void 0;var r=a(21),s=n(r),o=a(1532),l=n(o),u=a(9),d=new u.FileDebugger("FLIP/easings",!1),c=[0,0,.58,1],p=t.EaseOutCubic=i(.165,.84,.44,1),f=t.Linear=i(0,0,1,1),h=t.EaseInOut=i(.42,0,.58,1),m=t.EaseOut=i();t.default={EaseOutCubic:p,Linear:f,EaseInOut:h,EaseOut:m}},1534:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i);t.default={_play:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=t/1e3,n=void 0!==window.TweenLite,i=void 0!==window.TweenMax,s=null;if(i)s=window.TweenMax;else{if(!n)throw new Error("GreenSock requested, but TweenMax/Lite not available.");s=window.TweenLite}var o={ease:this._easing,onComplete:this._cleanUpAndFireEvent.bind(this),onUpdate:function(t,a,n,i,r,s){var o=t.ratio,l={x:r.x*(1-o),y:r.y*(1-o),sx:r.sx+(1-r.sx)*o,sy:r.sy+(1-r.sy)*o,a:n.opacity+r.a*o};e._disable||(s.style.transform="translate("+l.x+"px, "+l.y+"px)\n               scale("+l.sx+", "+l.sy+")"),a(i.layout,l)},onUpdateParams:["{self}",this._onUpdate.bind(this),this._first,this._last,this._invert,this._element]};this._disable||(this._updateTransform&&(o=(0,r.default)({},o,{scaleX:1,scaleY:1,x:0,y:0})),this._updateOpacity&&(o=(0,r.default)({},o,{opacity:this._last.opacity})));var l=new s(this._element,this._duration/1e3,o);this._delay&&l.startTime(a+this._delay/1e3)}}},1535:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={_play:function(e){this._start=void 0===e?window.performance.now()+this._delay:e+this._delay,requestAnimationFrame(this._update)},_update:function(){var e=(window.performance.now()-this._start)/this._duration;e=this._clamp(e,0,1);var t=this._easing(e),a={x:this._invert.x*(1-t),y:this._invert.y*(1-t),sx:this._invert.sx+(1-this._invert.sx)*t,sy:this._invert.sy+(1-this._invert.sy)*t,a:this._first.opacity+this._invert.a*t};this._disable||(this._updateTransform&&(this._element.style.transform="translate("+a.x+"px, "+a.y+"px)\n           scale("+a.sx+", "+a.sy+")"),this._updateOpacity&&(this._element.style.opacity=a.a)),this._onUpdate(this._last.layout,a),e<1?requestAnimationFrame(this._update):this._cleanUpAndFireEvent()}}},1536:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if((0,s.default)(!!t,"check function is required"),!e)return null;for(;e;){if(t(e))return e;e=e.parentElement}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=a(288),s=n(r)},1543:function(e,t,a){function n(e,t,a){for(var n=a?s:r,c=e[0].length,p=e.length,f=p,h=Array(p),m=1/0,v=[];f--;){var y=e[f];f&&t&&(y=o(y,l(t))),m=d(y.length,m),h[f]=!a&&(t||c>=120&&y.length>=120)?new i(f&&y):void 0}y=e[0];var g=-1,b=h[0];e:for(;++g<c&&v.length<m;){var E=y[g],_=t?t(E):E;if(E=a||0!==E?E:0,!(b?u(b,_):n(v,_,a))){for(f=p;--f;){var k=h[f];if(!(k?u(k,_):n(e[f],_,a)))continue e}b&&b.push(_),v.push(E)}}return v}var i=a(200),r=a(314),s=a(315),o=a(188),l=a(319),u=a(320),d=Math.min;e.exports=n},1544:function(e,t,a){function n(e,t){for(var a=e?t.length:0,n=a-1;a--;){var d=t[a];if(a==n||d!==p){var p=d;if(r(d))c.call(e,d,1);else if(s(d,e))delete e[u(d)];else{var f=i(d),h=l(e,f);null!=h&&delete h[u(o(f))]}}}return e}var i=a(201),r=a(112),s=a(113),o=a(1420),l=a(1546),u=a(111),d=Array.prototype,c=d.splice;e.exports=n},1545:function(e,t,a){function n(e){return i(e)?e:[]}var i=a(144);e.exports=n},1546:function(e,t,a){function n(e,t){return 1==t.length?e:i(e,r(t,0,-1))}var i=a(317),r=a(318);e.exports=n},1547:function(e,t,a){var n=a(316),i=a(191),r=a(135),s=a(144),o=a(1420),l=a(140),u=l(function(e,t){var a=o(t);return s(a)&&(a=void 0),s(e)?n(e,i(t,1,s,!0),r(a)):[]});e.exports=u},1548:function(e,t,a){e.exports=a(1436)},1549:function(e,t,a){var n=a(188),i=a(1543),r=a(1545),s=a(140),o=s(function(e){var t=n(e,r);return t.length&&t[0]===e[0]?i(t):[]});e.exports=o},1550:function(e,t,a){function n(e,t){var a=[];if(!e||!e.length)return a;var n=-1,s=[],o=e.length;for(t=i(t,3);++n<o;){var l=e[n];t(l,n,e)&&(a.push(l),s.push(n))}return r(e,s),a}var i=a(135),r=a(1544);e.exports=n},1551:function(e,t,a){function n(e,t){return e&&e.length?r(e,i(t)):[]}var i=a(135),r=a(593);e.exports=n},1565:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PageView=void 0;var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(522),b=n(g),E=a(14),_=a(1597),k=n(_),T=a(547),C=a(54),P=n(C),M=a(1571),S=n(M),w=a(1582),R=n(w),I=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.updateDimensions=(0,k.default)(a.updateDimensions.bind(a),250),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.updateDimensions(),window.onresize=this.updateDimensions}},{key:"componentWillUnmount",value:function(){"undefined"!=typeof window&&(window.onresize=null)}},{key:"updateDimensions",value:function(){this.props.dispatch((0,T.layoutSet)(R.default.getLayout())),this.props.dispatch((0,T.dimensionsSet)({height:window.innerHeight,width:window.innerWidth}))}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.dimensions,n={};return n.height=a?a.height:"100vh",y.default.createElement("div",{id:"PageView",className:this.props.className,style:n},y.default.createElement(S.default,null),y.default.createElement(b.default,{title:""}),t)}}]),t}(y.default.Component);I.propTypes={children:m.default.node,className:m.default.string,dispatch:m.default.func,dimensions:m.default.object},t.PageView=I,t.default=(0,E.connect)((0,P.default)(["dimensions"]))(I)},1571:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(33),E=a(23),_=a(9),k=new _.FileDebugger("Tracker",!0),T=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.unlistenRouter=null,a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.ensureRouterListener()}},{key:"componentWillReceiveProps",value:function(){this.ensureRouterListener()}},{key:"componentWillUnmount",value:function(){this.removeRouterListener()}},{key:"ensureRouterListener",value:function(){var e=this;if(!this.unlistenRouter){this.removeRouterListener();var t=this.props.router;t&&(this.unlistenRouter=t.listen(function(t){"PUSH"===t.action&&(k.debug("pathname",""+t.pathname+t.search),e.props.dispatch((0,E.trackEvent)(E.PAGE_VIEW_ACTION,{location:t})))}))}}},{key:"removeRouterListener",value:function(){this.unlistenRouter&&this.unlistenRouter()}},{key:"render",value:function(){return null}}]),t}(y.default.Component);T.propTypes={router:b.routerShape,dispatch:m.default.func},t.default=(0,b.withRouter)((0,g.connect)()(T))},1582:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),i=a(604),r=i.DESKTOP,s=void 0;s=n.isServer?{getLayout:function(){return r}}:function(){return{getLayout:function(){if(n.isServer)return r;var e=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content");return e&&"string"==typeof e?(e=e.replace(/\"/g,""))||r:r}}}(),t.default=s},1597:function(e,t,a){function n(e,t,a){var n=!0,o=!0;if("function"!=typeof e)throw new TypeError(s);return r(a)&&(n="leading"in a?!!a.leading:n,o="trailing"in a?!!a.trailing:o),i(e,t,{leading:n,maxWait:t,trailing:o})}var i=a(521),r=a(34),s="Expected a function";e.exports=n},1606:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AD_REQUEST_TIMEOUT=t.CardInterfaceTypes=void 0;var i=a(21),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(1658),c=n(d),p=a(184),f=a(1805),h=a(1812),m=a(1811),v=a(139),y=a(76),g=a(639),b=a(292),E=a(529),_=a(114),k=a(102),T=a(149),C=a(1354),P=n(C),M=a(1384),S=a(1394),w=n(S),R=a(1427),I=n(R),A=a(630),O=a(298),N=n(O),L=a(9),D=n(L),U=a(71),F=n(U),H=a(103),V=n(H),B=a(11),x=t.CardInterfaceTypes=(0,F.default)({UNKNOWN:!0,PERISCOPE:!0,TWITTER:!0}),j=t.AD_REQUEST_TIMEOUT=500,q=function(){function e(t){var a=t.dispatch,n=t.dispatchAutoPlayStart,i=t.dispatchStopPlaying,r=t.broadcastId;(0,o.default)(this,e),this.dispatch=a,this.dispatchAutoPlayStart=n,this.dispatchStopPlaying=i,this.broadcastId=r,this.interfaceType=x.UNKNOWN,this.pendingPlaybackAction=null,this.receivedUpdateMessage=!1,this.adHandled=!1,this.handleInboundMessage=this.handleInboundMessage.bind(this),this.handleOutboundMessage=this.handleOutboundMessage.bind(this),this.handleUserEvent=this.handleUserEvent.bind(this),this.handleInitMessage=this.handleInitMessage.bind(this),this.handleUpdateMessage=this.handleUpdateMessage.bind(this),this.handleAdResponse=this.handleAdResponse.bind(this),this.handleMissingBroadcast=this.handleMissingBroadcast.bind(this),this.createBaseInterface()}return(0,u.default)(e,[{key:"createBaseInterface",value:function(){this.lifecycleToken=null,this.attachInboundListeners(),this.attachOutboundListeners()}},{key:"destroyBaseInterface",value:function(){this.lifecycleToken=null,this.removeInboundListeners(),this.removeOutboundListeners()}},{key:"attachOutboundListeners",value:function(){var e=this,t=S.userEventValues.map(function(t){return p.eventManager.subscribe(t,e.handleUserEvent.bind(e,t))}),a=M.analyticsEventValues.map(function(t){return p.eventManager.subscribe(t,e.handleOutboundMessage.bind(e,t))});this.outboundListeners=[].concat((0,r.default)(t),(0,r.default)(a))}},{key:"removeOutboundListeners",value:function(){this.outboundListeners.length&&(this.outboundListeners.forEach(function(e){return e.remove()}),this.outboundListeners.length=0)}},{key:"handleUserEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case w.default.PLAYBACK_REQUEST:this.onPlaybackRequest(t)}}},{key:"onPlaybackRequest",value:function(e){var t=e.playAction;if(t){if(this.pendingPlaybackAction=t,V.default.isDisabled("CardPreroll")||V.default.isDisabled("CardAnalytics"))return this.onAdHandled();this.handleOutboundMessage("adRequest"),this.startAdRequestTimeout()}}},{key:"startAdRequestTimeout",value:function(){var e=this;clearTimeout(this.requestAdTimeout),this.requestAdTimeout=setTimeout(function(){D.default.log("Twitter Card: Request for ad timed out"),e.onAdHandled()},j)}},{key:"onAdHandled",value:function(){clearTimeout(this.requestAdTimeout),this.adHandled=!0,this.possiblyHandlePlaybackRequest()}},{key:"handleOutboundMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,B.inObject)(this,"postMessage.outbound"))throw new Error("Please define `postMessage` for CardInterface base class");if(!(0,B.inObject)(this,"postMessage.outbound."+e))throw new Error("Please define "+e+" on postMessage");"on_tick_event"!==e&&D.default.log("Twitter Card: Send "+e+" message",t),this.postMessage.outbound[e](t)}},{key:"attachInboundListeners",value:function(){window.addEventListener("message",this.handleInboundMessage)}},{key:"removeInboundListeners",value:function(){window.removeEventListener("message",this.handleInboundMessage)}},{key:"handleInboundMessage",value:function(e){var t=e.origin||e.originalEvent.origin;if(this.interfaceType!==x.TWITTER||t===R.ORIGIN){var a=e.data;if((0,c.default)(I.default.Inbound,a.type)&&D.default.log("Twitter Card: Received message",a),a.type){switch(a.type){case I.default.Inbound.INIT:this.handleInitMessage(a.cardData);break;case I.default.Inbound.UPDATE:this.handleUpdateMessage(a.cardData);break;case I.default.Inbound.AD_RESPONSE:this.handleAdResponse(a.cardData);break;case I.default.Inbound.UPDATE_ERROR:this.handleMissingBroadcast();break;case I.default.Inbound.START_PLAYING:P.default.playbackRequest({playAction:this.dispatchAutoPlayStart});break;case I.default.Inbound.STOP_PLAYING:this.dispatchStopPlaying()}switch(a.type){case I.default.Inbound.UPDATE:case I.default.Inbound.AD_RESPONSE:this.possiblyHandlePlaybackRequest()}}}}},{key:"possiblyHandlePlaybackRequest",value:function(){this.receivedUpdateMessage&&this.adHandled&&this.pendingPlaybackAction&&(this.pendingPlaybackAction(),this.pendingPlaybackAction=null)}},{key:"handleInitMessage",value:function(e){this.broadcasterId=e.broadcaster_id,this.broadcasterUsername=e.broadcaster_username,this.broadcastSource=e.broadcast_source,this.broadcastWidth=e.broadcast_width,this.broadcastHeight=e.broadcast_height,this.is_360=e.is_360,this.timecode=e.timecode;var t=(0,f.convertCapiToPublicBroadcastInit)(e);this.dispatch((0,y.broadcastCacheSet)(t)),this.dispatch((0,v.broadcastReceive)(t));var a=(0,h.convertCapiToUser)(e);this.dispatch((0,_.userCacheSet)(a))}},{key:"ensureVideoUrl",value:function(e){var t=e.replay_url,a=e.https_hls_url,n=e.needs_credentials,i=void 0;i=a&&a.indexOf("/api/v2/publicPlaylist.m3u8")>-1?(0,T.videoIndirectUrl)({url:a.replace("redirect=true","redirect=false"),urlProp:A.HLS_URL_PROP}):t?(0,T.videoIndirectUrl)({url:t.replace("replay_redirect=true","replay_redirect=false"),urlProp:A.REPLAY_URL_PROP}):(0,T.videoDirectUrl)({url:a,urlProp:A.HLS_URL_PROP,needsCredentials:n}),this.dispatch(i)}},{key:"handleUpdateMessage",value:function(e){e.broadcaster_id=this.broadcasterId,e.broadcaster_username=this.broadcasterUsername,e.broadcast_source=this.broadcastSource,e.broadcast_width=this.broadcastWidth,e.broadcast_height=this.broadcastHeight,e.is_360=this.is_360;var t=(0,f.convertCapiToPublicBroadcastUpdate)(e);this.dispatch((0,y.broadcastCacheSet)(t)),this.dispatch((0,v.broadcastReceive)(t));var a=e.live_event_title,n=e.live_event_url;if(a&&n){var i=t.broadcast.id;this.dispatch((0,g.eventCacheSet)(i,{title:a,url:n}))}else this.dispatch((0,g.eventCacheFlush)());if(this.timecode&&!isNaN(this.timecode)){var r=Number(this.timecode);this.dispatch((0,E.timecodeShareBroadcast)(e.id,{timecode:r})),this.timecode=null}var s=!!e.https_hls_url,o=!!e.replay_url,l=e.life_cycle_token||"",u=e.state===N.default.ENDED||e.state===N.default.TIMED_OUT;if(!s&&!u||!o&&u)return void this.handleMissingBroadcast();!this.lifecycleToken&&l&&""!==l&&(this.lifecycleToken=l,this.dispatch((0,T.videoLifeCycleToken)(l))),this.ensureVideoUrl(e),this.dispatch((0,b.replayAvailable)(o)),this.receivedUpdateMessage=!0}},{key:"handleAdResponse",value:function(e){var t=this;if(!this.adHandled){var a=this.pendingPlaybackAction===this.dispatchAutoPlayStart;(0,m.getTwitterAdVariant)(e,a).then(function(e){D.default.log("Preroll playlist: "+e.url),t.dispatch((0,k.receivedAdVariant)(e))}).catch(function(e){D.default.log("Twitter Card: Ad error: "+e)}).then(function(){t.onAdHandled()})}}},{key:"handleMissingBroadcast",value:function(){this.destroyBaseInterface(),this.dispatch((0,v.broadcastFailure)(this.broadcastId,{status:404}))}}]),e}();t.default=q},1658:function(e,t,a){function n(e,t,a,n){e=r(e)?e:l(e),a=a&&!n?o(a):0;var d=e.length;return a<0&&(a=u(d+a,0)),s(e)?a<=d&&e.indexOf(t,a)>-1:!!d&&i(e,t,a)>-1}var i=a(649),r=a(90),s=a(345),o=a(209),l=a(1971),u=Math.max;e.exports=n},1679:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(3),r=n(i),s=a(4),o=n(s),l=a(1681),u=n(l),d=(a(20),function(){function e(){(0,r.default)(this,e),this.dataInterface=null}return(0,o.default)(e,[{key:"setup",value:function(e){return this.setTwitterCardInterface(e)}},{key:"setTwitterCardInterface",value:function(e){this.dataInterface=new u.default(e)}},{key:"setPeriscopeCardInterface",value:function(e){var t=this;a.e(151).then(function(n){var i=a(1680).default;t.dataInterface=new i(e)}.bind(null,a)).catch(a.oe)}},{key:"destroy",value:function(){this.dataInterface&&this.dataInterface.destroy()}}]),e}());t.default=new d},1681:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1606),m=n(h),v=a(9),y=n(v),g=a(1421),b=function(e){function t(e){var a=e.api,n=e.dispatchAutoPlayStart,i=e.dispatchStopPlaying,s=e.broadcastId;(0,o.default)(this,t);var l=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{dispatch:a.store.dispatch,dispatchAutoPlayStart:n,dispatchStopPlaying:i,broadcastId:s}));return l.interfaceType=h.CardInterfaceTypes.TWITTER,l.postMessage=(0,g.postMessage)(window.parent),y.default.log("Twitter Card: Send init message"),l.postMessage.outbound.init(),l}return(0,f.default)(t,e),(0,u.default)(t,[{key:"destroy",value:function(){y.default.log("Twitter Card: Send stop polling message"),this.postMessage.outbound.stopPolling(),this.destroyBaseInterface()}}]),t}(m.default);t.default=b},1700:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(14),b=a(1679),E=n(b),_=a(1705),k=n(_),T=a(1706),C=n(T),P=a(27),M=a(282),S=a(18),w=a(513),R=a(103),I=n(R),A=a(17),O=a(141),N=n(O),L=a(136),D=n(L),U=a(1385),F=n(U),H=a(131),V=a(1352),B=a(54),x=n(B),j=a(1735),q=n(j),W=a(19),Y=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.api,a=e.dispatchAutoPlayStart,n=e.dispatchStopPlaying,i=e.params.broadcastId;E.default.setup({api:t,dispatchAutoPlayStart:a,dispatchStopPlaying:n,broadcastId:i})}},{key:"componentWillUnmount",value:function(){E.default.destroy()}},{key:"reportPlaybackToTwitter",value:function(){return I.default.isEnabled("CardAnalytics")}},{key:"render",value:function(){return y.default.createElement("div",{className:"App u-fullHeight u-flexParent"},this.reportPlaybackToTwitter()&&y.default.createElement(C.default,{dispatch:this.props.dispatch,broadcast:this.props.broadcast}),y.default.createElement(k.default,{dispatch:this.props.dispatch,broadcastError:this.props.broadcastError,player:this.props.player,user:this.props.user,userCache:this.props.userCache,usersPending:this.props.usersPending,usersFailed:this.props.usersFailed,video:this.props.video}),y.default.createElement(q.default,this.props))}}]),t}(y.default.Component);Y.propTypes={dispatch:m.default.func.isRequired,dispatchAutoPlayStart:m.default.func.isRequired,dispatchStopPlaying:m.default.func.isRequired,broadcast:P.broadcastPropType.isRequired,broadcastError:m.default.object,params:m.default.object,player:m.default.object,replay:M.replayPropType,user:S.userPropType,userCache:m.default.object,usersPending:m.default.array,usersFailed:m.default.array,video:w.videoPropType,api:W.wrappedApiShape.isRequired};var z=(0,A.compose)(D.default,N.default,V.replayFullMapper,F.default,H.videoPlayerStateMapper,(0,x.default)(["dimensions","userCache"]));t.default=(0,g.connect)(z,H.videoPlayerDispatchMapper)((0,W.injectApi)(Y))},1705:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(1),m=n(h),v=a(0),y=n(v),g=a(9),b=n(g),E=a(19),_=a(133),k=a(513),T=a(18),C=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.ensureVideoUrl(this.props),this.shouldUpdateUser(this.props)&&this.updateUser(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.ensureVideoUrl(e),this.shouldUpdateUser(e)&&this.updateUser(e)}},{key:"ensureVideoUrl",value:function(e){var t=e.video;if(t){var a=t.indirect_url;if(a){var n=this.props.video&&this.props.video.indirect_url,i=t.indirect_url_prop,r=!!t[i],s=a!==n,o=this.props.player&&!this.props.player.isPlaying&&e.player.isPlaying;(!r||o||s)&&(0,k.fetchVideoUrl)(e.api,a,i).catch(b.default.log)}}}},{key:"shouldUpdateUser",value:function(e){var t=e.broadcastError&&e.broadcastError.isUnavailable,a=e.user&&e.user.username&&!e.user.created_at;return t&&a}},{key:"updateUser",value:function(e){(0,T.fetchUser)(e.api,e.user.username)}},{key:"render",value:function(){return null}}]),t}(y.default.Component);C.propTypes={dispatch:m.default.func,broadcastError:m.default.object,player:_.playerPropType,user:T.userPropType,userCache:m.default.object,usersPending:m.default.array,usersFailed:m.default.array,video:k.videoPropType,api:E.wrappedApiShape.isRequired},t.default=(0,E.injectApi)(C)},1706:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,r=a(205),s=n(r),o=a(6),l=n(o),u=a(3),d=n(u),c=a(4),p=n(c),f=a(8),h=n(f),m=a(7),v=n(m),y=a(13),g=n(y),b=a(12),E=n(b),_=a(1),k=n(_),T=a(0),C=n(T),P=a(27),M=a(184),S=a(102),w=a(1800),R=n(w),I=a(1384),A=n(I),O=a(148),N=n(O),L=a(1414),D=n(L),U=a(1394),F=n(U),H=M.eventManager.publish.bind(M.eventManager),V=(i={},(0,E.default)(i,D.default.ON_ENDED,A.default.ON_TRACK_FINISHED),(0,E.default)(i,D.default.ON_TIME_UPDATE,A.default.ON_TICK_EVENT),(0,E.default)(i,F.default.AD_SKIP_REQUEST,A.default.ON_AD_SKIP),(0,E.default)(i,F.default.MUTE_REQUEST,A.default.ON_MUTE),(0,E.default)(i,F.default.PAUSE_REQUEST,A.default.ON_PAUSE),(0,E.default)(i,F.default.PLAY_REQUEST,A.default.ON_PLAY),(0,E.default)(i,F.default.PLAYBACK_REQUEST,A.default.ON_INTEND_TO_PLAY),(0,E.default)(i,F.default.REPLAY_REQUEST,A.default.ON_REPLAY),(0,E.default)(i,F.default.UNMUTE_REQUEST,A.default.ON_UNMUTE),i),B=(0,g.default)(V),x=function(e){function t(e){(0,d.default)(this,t);var a=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.listeners=[],a.contentHasPlayed=!1,a.currentTime=0,a.currentTimeLive=0,a.duration=0,a.isAdPlaying=!1,a.muted=!0,a.userInteractionRegistered=!1,a.handleEvent=a.handleEvent.bind(a),a.setAdPlaybackState=a.setAdPlaybackState.bind(a),a.setUserInteractionState=a.setUserInteractionState.bind(a),a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){this.attachListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"attachListeners",value:function(){var e=this;this.listeners=B.map(function(t){return M.eventManager.subscribe(t,e.handleEvent.bind(e,t))}),this.listeners.push(M.eventManager.subscribe(D.default.ON_AD_STATE_UPDATE,this.setAdPlaybackState)),this.listeners.push(M.eventManager.subscribe(F.default.REGISTER_USER_INTERACTION,this.setUserInteractionState))}},{key:"removeListeners",value:function(){this.listeners.length&&(this.listeners.forEach(function(e){return e.remove()}),this.listeners.length=0)}},{key:"getNumericValue",value:function(e){return(0,s.default)(e)||e<0?0:e}},{key:"isFiniteVideo",value:function(){var e=this.isAdPlaying,t=this.props.broadcast,a=t&&t.isEnded;return e||a}},{key:"getDurationInMs",value:function(){var e=this.getNumericValue(this.duration);return this.isFiniteVideo()?1e3*e:void 0}},{key:"generatePlayerState",value:function(){var e=this.isAdPlaying,t=this.muted,a=this.userInteractionRegistered,n=this.isFiniteVideo(),i=this.getNumericValue(this.currentTime),r=this.getNumericValue(this.currentTimeLive),s=n?i:r,o=1e3*s,l=this.getDurationInMs(),u=!a,d=!n,c=t;return{currentTimeMs:o,durationMs:l,displayType:e?R.default.AD:R.default.CONTENT,isLive:d,isMuted:c,isPreview:u}}},{key:"handleEvent",value:function(e,t){switch(e){case D.default.ON_TIME_UPDATE:this.setPlaybackTimes(t);break;case D.default.ON_ENDED:this.setLastMutedState();break;case F.default.PLAYBACK_REQUEST:this.possiblyTriggerReplayRequest()}switch(this.processEventForCard(e),e){case F.default.MUTE_REQUEST:this.setMutedState(!0);break;case F.default.UNMUTE_REQUEST:this.setMutedState(!1);break;case F.default.AD_SKIP_REQUEST:this.setLastMutedState();break;case D.default.ON_ENDED:this.clearPlayheadState(),this.possiblySetContentPlayed()}}},{key:"setAdPlaybackState",value:function(e){var t=e.isAdPlaying;this.isAdPlaying=t}},{key:"setUserInteractionState",value:function(){this.userInteractionRegistered=!0}},{key:"setPlaybackTimes",value:function(e){var t=e.currentTime,a=e.played,n=e.duration;this.currentTime=t,this.currentTimeLive=a,this.duration=n}},{key:"clearPlayheadState",value:function(){this.currentTime=0,this.currentTimeLive=0,this.duration=0}},{key:"possiblySetContentPlayed",value:function(){this.isAdPlaying||(this.contentHasPlayed=!0)}},{key:"possiblyTriggerReplayRequest",value:function(){this.contentHasPlayed&&this.processEventForCard(F.default.REPLAY_REQUEST)}},{key:"setMutedState",value:function(e){this.muted=e}},{key:"setLastMutedState",value:function(){var e=this.muted?N.default.OFF:N.default.ON;this.props.dispatch((0,S.playerAudio)(e))}},{key:"processEventForCard",value:function(e){var t=V[e];if(t){var a=this.getDurationInMs();if(0!==a&&void 0!==a){var n=this.generatePlayerState();H(t,n)}}}},{key:"render",value:function(){return null}}]),t}(C.default.Component);x.propTypes={dispatch:k.default.func.isRequired,broadcast:P.broadcastPropType.isRequired},t.default=x},1735:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),r=n(i),s=a(6),o=n(s),l=a(3),u=n(l),d=a(4),c=n(d),p=a(8),f=n(p),h=a(7),m=n(h),v=a(1),y=n(v),g=a(0),b=n(g),E=a(27),_=a(282),k=a(18),T=a(513),C=a(1354),P=n(C),M=a(293),S=n(M),w=a(1494),R=n(w),I=a(1743),A=n(I),O=a(11),N=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"renderContent",value:function(e){var t=this.props,a=t.user,n=t.broadcastError;return n&&(n.isNotFound||n.isUnavailable)?b.default.createElement(A.default,{user:a}):b.default.createElement(R.default,(0,r.default)({},this.props,{disableBlur:!0,height:e.height,width:e.width,playerFormat:S.default.EMBED}))}},{key:"getFrameDimensions",value:function(){var e=this.props,t=e.broadcast,a=e.dimensions,n=a&&a.width||0,i=a&&a.height||0;if(t.supportsProducerFraming)return(0,O.generateProducerFrame)(n);var r=n>i?Math.max:Math.min,s=r(n,i);return{width:s,height:s}}},{key:"render",value:function(){var e=this.getFrameDimensions();return b.default.createElement("div",{className:"u-flexItem u-transition",style:e,onMouseDownCapture:P.default.registerUserInteraction},this.renderContent(e))}}]),t}(b.default.Component);N.propTypes={broadcast:E.broadcastPropType,broadcastError:y.default.object,couchmode:y.default.bool,dimensions:y.default.object,height:y.default.number,n_watched:y.default.number,n_watching:y.default.number,player:y.default.object,profileIsVisible:y.default.bool,replay:_.replayPropType,toggleProfileSidebar:y.default.func,user:k.userPropType,video:T.videoPropType,width:y.default.number},t.default=N},1743:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),r=n(i),s=a(3),o=n(s),l=a(4),u=n(l),d=a(8),c=n(d),p=a(7),f=n(p),h=a(0),m=n(h),v=a(2),y=a(1363),g=n(y),b=a(1443),E=n(b),_=a(1388),k=n(_),T=a(324),C=n(T),P=a(287),M=a(18),S=function(e){function t(e){(0,o.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={backgroundReady:!1},a.backgroundReady=a.backgroundReady.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"backgroundReady",value:function(){this.state.backgroundReady||this.setState({backgroundReady:!0})}},{key:"possiblyRenderUserLink",value:function(){return this.props.user.username?m.default.createElement(E.default,{user:this.props.user,username:this.props.user.username},m.default.createElement(k.default,{user:this.props.user})):m.default.createElement(k.default,null)}},{key:"render",value:function(){var e=["MissingBroadcast","u-fullHeight"],t=["MissingBroadcast-image","u-flexItem","u-opacity-70","u-transition-1"];return this.state.backgroundReady&&e.push("MissingBroadcast--ready"),m.default.createElement("div",{className:e.join(" ")},m.default.createElement(g.default,{className:t.join(" "),img:this.props.user.avatarUrl,blurRadius:80,onLoadFunction:this.backgroundReady,onLoadFailFunction:this.backgroundReady}),m.default.createElement("div",{className:"MissingBroadcast-info"},m.default.createElement(C.default,{isLink:!1,location:"MissingBroadcast",user:this.props.user,withVIPBadge:!1}),m.default.createElement(v.FormattedMessage,P.unavailable,function(e){return m.default.createElement("div",{className:"MissingBroadcast-broadcastState"},e)})),this.possiblyRenderUserLink())}}]),t}(m.default.Component);S.defaultProps={user:{}},S.propTypes={user:M.userPropType},t.default=S},1800:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={AD:"ad",CONTENT:"content"}},1805:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,image_url:e.full_size_thumbnail_url,is_360:e.is_360,username:e.broadcaster_username,user_id:e.broadcaster_id,broadcast_source:e.broadcast_source,width:parseInt(e.broadcast_width,10),height:parseInt(e.broadcast_height,10)}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i(e);return(0,d.default)({},t,{available_for_replay:e.available_for_replay,ended:e.end_date,featured:e.featured,is_360:e.is_360,start:e.start_date,state:e.state,status:e.status,username:e.broadcaster_username})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{broadcast:(0,arguments[1])(e),n_watching:e.total_participants,n_watched:e.total_participants}}function o(e){return s(e,i)}function l(e){return s(e,r)}Object.defineProperty(t,"__esModule",{value:!0});var u=a(5),d=n(u);t.convertCapiToBroadcastInit=i,t.convertCapiToBroadcastUpdate=r,t.convertCapiToPublicBroadcastInit=o,t.convertCapiToPublicBroadcastUpdate=l},1811:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return new s.default(function(a,n){(0,o.inObject)(e,"mediaInfo.variants")||n("No ad variants provided"),t&&e&&e.autoplayBlacklist&&(0,o.inObject)(e,"mediaInfo.publisher_id")&&(0,u.default)(e.autoplayBlacklist,e.mediaInfo.publisher_id.toString())&&n("Publisher is in autoplayBlacklist and playback is autoplay"),a(e.mediaInfo.variants.find(function(e){return"application/x-mpegURL"===e.content_type}))})}Object.defineProperty(t,"__esModule",{value:!0});var r=a(10),s=n(r);t.getTwitterAdVariant=i;var o=a(11),l=a(1658),u=n(l)},1812:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.broadcaster_id,username:e.broadcaster_username,display_name:e.broadcaster_display_name}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertCapiToUser=n},1967:function(e,t,a){function n(e,t){return i(t,function(t){return e[t]})}var i=a(188);e.exports=n},1971:function(e,t,a){function n(e){return e?i(e,r(e)):[]}var i=a(1967),r=a(79);e.exports=n}});